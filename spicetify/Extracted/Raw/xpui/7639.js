"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7639],{35789:(e,t,n)=>{n.d(t,{N:()=>v});var i=n(30758),r=n(97500),a=n.n(r),s=n(53222),c=n(65968);const o="cover-art",l="cover-art-auto-height",d="cover-art-icon",u="cover-art-image";var p=n(86070);const v=(0,i.memo)((function({imgSrc:e,className:t,onClick:n,type:i,width:r,height:v,loading:m="lazy"}){const h=a()(o,t,{[l]:!v});return(0,p.jsxs)("div",{className:h,style:{width:r||"auto",height:v||"auto"},onClick:n,"aria-hidden":"true",children:[(0,p.jsx)("div",{className:d,children:(0,p.jsx)(s.s,{type:i})}),(0,p.jsx)(c._,{testid:"cover-art-image",loading:m,src:e,className:u})]})}))},81389:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(30758),r=n(97500),a=n.n(r),s=n(59677),c=n(88858),o=n(86070);const l="div";class d extends i.Component{constructor(e){super(e),this.state={isDropTargetActive:!1},this.enterEventCount=0,this.leaveEventCount=0}componentDidMount(){document.body.addEventListener("dragend",this.handleDragEnd)}shouldComponentUpdate(e,t){return t.isDropTargetActive!==this.state.isDropTargetActive||e.children!==this.props.children||e.onDragEnter!==this.props.onDragEnter||e.onDragLeave!==this.props.onDragLeave||e.onDrop!==this.props.onDrop||e.types.length!==this.props.types.length||e.types.some(((e,t)=>e!==this.props.types[t]))}componentWillUnmount(){document.body.removeEventListener("dragend",this.handleDragEnd)}handleDragOver=e=>{this.getMatchingMimeTypes(e).length>0&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")};handleDragEnter=e=>{this.enterEventCount&&!e.relatedTarget||(this.enterEventCount++,1===this.enterEventCount&&this.getMatchingMimeTypes(e).length>0&&(this.props.onDragEnter?.(e),this.setState({isDropTargetActive:!0})))};handleDragLeave=e=>{this.leaveEventCount++,this.leaveEventCount===this.enterEventCount&&this.getMatchingMimeTypes(e).length>0&&(this.enterEventCount=0,this.leaveEventCount=0,this.props.onDragLeave?.(e),this.setState({isDropTargetActive:!1}))};handleDragEnd=()=>{this.enterEventCount=0,this.leaveEventCount=0};handleDrop=e=>{if(0===this.getMatchingMimeTypes(e).length)return;const{onDragLeave:t,onDrop:n}=this.props,i=this.getMatchingDropData(e);this.enterEventCount=0,this.leaveEventCount=0;const r=e.defaultPrevented;e.preventDefault(),t?.(e),r||n(e,i),this.setState({isDropTargetActive:!1})};getMatchingMimeTypes(e){const t=this.props.types;return Array.from(e.dataTransfer.types).filter((e=>t.includes(e)))}getMatchingDropData(e){const t=this.getMatchingMimeTypes(e),n={};t.forEach((t=>{const i=e.dataTransfer.getData(t),r=0===t.indexOf("text/x-spotify"),a=r?i.split("\n"):[i];n[t]=a.map((e=>{if(r){const t=(0,s.o_)(e);if(t)return t.toURI()}return e})).filter((e=>!!e))}));const i=e.dataTransfer.getData("text/plain");return n.all=i?i.split("\n").map((e=>{const t=(0,s.o_)(e);return t?t.toURI():e})):[],n}render(){const{types:e=[],as:t=l,testId:n,className:i=""}=this.props,r=t,s=e.filter(Boolean).map((e=>`GlueDropTarget--${e.replace("text/x-spotify-","")}`));return(0,o.jsx)(r,{className:a()("GlueDropTarget",s,{"GlueDropTarget--active":this.state.isDropTargetActive},i),onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,onContextMenu:this.props.onContextMenu,"data-testid":n,children:this.props.children})}}const u=e=>{const{supportsDragAndDrop:t}=(0,c._)();if(!t){const t=e.as??l;return(0,o.jsx)(t,{children:e.children})}return(0,o.jsx)(d,{...e})}},84779:(e,t,n)=>{n.d(t,{f:()=>l});var i=n(31785),r=n(27046);const a="x-settings-tooltip",s="x-settings-tooltipIconWrapper",c="x-settings-tooltipIcon";var o=n(86070);const l=({message:e,placement:t="top",messageClassName:n})=>(0,o.jsx)("div",{className:a,children:(0,o.jsx)(r.Zp,{showDelay:0,label:e,placement:t,labelClassName:n,children:(0,o.jsx)("div",{className:s,"aria-label":e,"aria-describedby":r.WO,tabIndex:0,children:(0,o.jsx)(i.N,{size:"small",className:c})})})})},94397:(e,t,n)=>{n.d(t,{$:()=>u});var i=n(30758),r=n(83127),a=n(24835);function s(e,t,n=!0,i=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,a.fk)(e))return;const s=e.querySelector('[tabindex="0"]');t===r.O.UP&&(0,a.MS)(s,c(e,s,r.O.UP,n,i)),t===r.O.DOWN&&(0,a.MS)(s,c(e,s,r.O.DOWN,n,i))}function c(e,t,n,i,s){const c=t.closest('li[role="listitem"]');if(!c)return t;let o=c,l=t;const d=Array.from(e.querySelectorAll('li[role="listitem"]')),u=d.indexOf(c);if(u<0)return t;if(n===r.O.UP){if(document.activeElement===e){if(o=d[d.length-1],s){const e=o?.querySelectorAll(a.nu);l=e[e.length-1]}else l=o?.querySelector(a.nu);return l??t}if(s){const e=Array.from(c.querySelectorAll(a.nu)),n=e.indexOf(t)-1;if(n>=0)return e[n]}let n=u-1;const r=()=>!l&&(!i&&n>=0||i&&u!==n);do{o=d[n];if(i&&!o&&(n=d.length-1,o=d[n]),s){const e=o?.querySelectorAll(a.nu);l=e?e[e.length-1]:null}else l=o?.querySelector(a.nu);n-=1}while(r())}else if(n===r.O.DOWN){if(document.activeElement===e)return o=d[0],l=o?.querySelector(a.nu),l??t;if(s){const e=Array.from(c.querySelectorAll(a.nu)),n=e.indexOf(t)+1;if(n<e.length)return e[n]}let n=u+1;const r=()=>{const e=!i&&n<=d.length;return!l&&(e||i&&u!==n)};do{o=d[n];i&&!o&&(n=0,o=d[n]),l=o?.querySelector(a.nu),n+=1}while(r())}return l||t}var o=n(7406),l=n(22872),d=n(86070);const u=(0,i.forwardRef)((({onKeyDown:e,children:t,circular:n=!0,allowsMultipleInteractiveChildrenInItem:c=!1,...u},p)=>{const v=(0,l.N)(p);(0,o.R)(v);const m=(0,i.useCallback)((t=>{v.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),document.documentElement.classList.remove("no-focus-outline")),"ArrowUp"===t.key&&s(v.current,r.O.UP,n,c),"ArrowDown"===t.key&&s(v.current,r.O.DOWN,n,c),e?.(t))}),[n,c,v,e]),h=(0,i.useCallback)((e=>{if(!v.current)return;const t=e.target,n=v.current.querySelector('[tabindex="0"]');t.closest('li[role="listitem"]')&&t!==n&&(0,a.MS)(n,t,{preventScroll:!0})}),[v]);return(0,d.jsx)("ul",{role:"list",ref:v,onKeyDown:m,onFocus:h,tabIndex:0,...u,children:t})}))},83650:(e,t,n)=>{n.d(t,{s:()=>a});var i=n(15231),r=n(86070);const a=({variant:e})=>(0,r.jsx)(i.E,{variant:e,semanticColor:"textBase",children:"Spotify"})},34305:(e,t,n)=>{n.d(t,{f:()=>Se});var i=n(97500),r=n.n(i),a=n(39733),s=n(30758),c=n(26107),o=n(41331),l=n(94397),d=n(15231),u=n(84779),p=n(62562),v=n(56601),m=n(86070);const h=(0,s.createContext)({rowWithMenuOpenIdentifier:null,setRowWithMenuOpenIdentifier:()=>{}}),g=({children:e})=>{const[t,n]=(0,s.useState)(null);return(0,m.jsx)(h.Provider,{value:{rowWithMenuOpenIdentifier:t,setRowWithMenuOpenIdentifier:n},children:e})};var x=n(68341),b=n(73938);const f=e=>e instanceof b.BA.ContainerViewEventFactory.DeviceListEventFactory.RemoteDeviceEventFactory||e instanceof b.BA.ContainerViewEventFactory.DeviceListEventFactory.DisabledDeviceEventFactory||e instanceof b.BA.ContainerViewEventFactory.OffNetworkDeviceListEventFactory.RemoteDeviceEventFactory||e instanceof b.BA.ContainerViewEventFactory.OffNetworkDeviceListEventFactory.DisabledDeviceEventFactory||e instanceof b.BA.ContainerViewEventFactory.OnNetworkDeviceListEventFactory.RemoteDeviceEventFactory;var y=n(39356),w=n(65104),C=n(10945);const D=(0,s.forwardRef)((function({deviceId:e,connectStateDeviceId:t,Icon:n,TechIcon:i,title:a,subtitle:c,helpTooltip:o,canLogout:l,isDisabled:g,incarnation:b,onClick:D,spec:k},I){const{rowWithMenuOpenIdentifier:N,setRowWithMenuOpenIdentifier:j}=(0,s.useContext)(h),A=(0,y.HJ)(b),S=l||A,{toggleDevicePicker:E}=(0,x.z)(),R=(0,w.W)();return(0,m.jsxs)("li",{className:C.A.devicePickerRowWrapper,ref:I,children:[(0,m.jsx)("button",{className:r()(C.A.rowWrapper,C.A.devicePickerRow,{[C.A.contextMenuOpen]:N===e}),onClick:()=>{g||(D&&D(),E())},"aria-disabled":g,"aria-label":c?`${a} ${c}`:a,"data-testid":"device-picker-row-flyout",children:(0,m.jsxs)("div",{className:r()(C.A.wrapper,C.A.rowButtonWrapper),children:[(0,m.jsx)(n,{iconSize:32,semanticColor:g?void 0:"textBase",className:C.A.mainIcon,"data-testid":"main-icon",role:"presentation"}),(0,m.jsxs)("div",{className:r()(C.A.rowContentWrapper,S&&C.A.withContextMenu),children:[(0,m.jsx)("div",{className:C.A.textWithIconWrapper,children:(0,m.jsx)("div",{className:C.A.marqueeWrapper,children:(0,m.jsx)(p.r,{equalGradientWidth:!0,title:a,children:(0,m.jsx)(d.E,{variant:"bodyMedium",semanticColor:g?void 0:"textBase",className:C.A.text,children:a})},`picker-row-title-${e}`)})}),(0,m.jsxs)("div",{className:C.A.textWithIconWrapper,children:[i&&(0,m.jsx)(i,{iconSize:16,semanticColor:"textSubdued",className:C.A.techIcon,"data-testid":"sub-icon",role:"presentation"}),c&&(0,m.jsx)("div",{className:C.A.marqueeWrapper,children:(0,m.jsx)(p.r,{equalGradientWidth:!0,title:c,children:(0,m.jsx)(d.E,{variant:"marginal",semanticColor:g?void 0:"textSubdued",className:C.A.text,children:c})},`picker-row-subtitle-${e}`)}),o&&(0,m.jsx)("div",{className:C.A.helpTooltipWrapper,children:(0,m.jsx)(u.f,{message:o,placement:R?"right":"left",messageClassName:C.A.helpToolTipContent})})]})]})]})}),S&&f(k)&&(0,m.jsx)("span",{className:C.A.contextMenuButtonWrapper,children:(0,m.jsx)(v.V,{title:a,deviceId:e,connectStateDeviceId:t,allowForgetDevice:l,incarnation:A?b:void 0,onShow:()=>{j(e)},onHide:()=>{j(null)},spec:k})})]})}));var k=n(11892),I=n(7008),N=n(5052),j=n(87500),A=n(58190),S=n(93720),E=n(27046),R=n(81783),T=n(17504),F=n(20078);const L="AWblt0YATqa_XQaPUDMc",M="sX7AwqoSzMeT9qhlEViU",O="jIlVu16bmijzUKG6u5VW",W="ZkuPLR9bss2N7f7thixx",U="QSZFk1XCj76mVplNmiV1",P="O0wmxPM0kfA59paiHqR9",B=(0,s.forwardRef)((function({deviceId:e,connectStateDeviceId:t,Icon:n,TechIcon:i,title:a,subtitle:c,canLogout:l,isDisabled:d,incarnation:u,onClick:p,spec:g},x){const b=(0,T._Y)(),w=(0,y.HJ)(u),C=l||w,{rowWithMenuOpenIdentifier:D,setRowWithMenuOpenIdentifier:B}=(0,s.useContext)(h),z=(0,k.YQ)((()=>{d||(p?.(),b(F.$S.PANEL_CLOSE_CLICK))}),1e3,{leading:!0,trailing:!1}),V=(0,s.useCallback)((e=>{"Enter"===e.key&&z()}),[z]),q=(0,m.jsx)(R.T,{deviceId:e,connectStateDeviceId:t,allowForgetDevice:l,incarnation:w?u:void 0});return(0,m.jsx)(S.h,{menu:q,children:(0,m.jsx)(A.c,{onKeyDown:V,onClick:z,className:r()(W,{[P]:D===e}),children:(0,m.jsx)(I.v,{id:e,ref:x,"data-testid":"device-picker-row-sidepanel",media:(0,m.jsx)(n,{semanticColor:d?"textSubdued":"textBase","data-testid":"main-icon",role:"presentation"}),onClick:()=>{},onClickHint:o.Ru.get("web-player.connect.device-picker.connect-to-device"),title:(0,m.jsx)("span",{className:L,children:(0,m.jsx)(E.Zp,{label:a,renderInline:!0,children:(0,m.jsx)(N.d,{"data-testid":"list-row-title",lineClamp:1,semanticColor:d?"textSubdued":"textBase",dir:"auto",children:a})})}),subtitle:(0,m.jsxs)("div",{className:M,children:[i&&(0,m.jsx)(i,{className:O,semanticColor:"textSubdued","data-testid":"sub-icon",role:"presentation",size:"small"}),c&&(0,m.jsx)(j.j,{semanticColor:"textSubdued",lineClamp:1,children:c})]}),trailing:C&&f(g)&&(0,m.jsx)(v.V,{title:a,deviceId:e,connectStateDeviceId:t,allowForgetDevice:l,incarnation:w?u:void 0,spec:g,className:r()(U),onShow:()=>{B(e)},onHide:()=>{B(null)}})})})})}));var z=n(19019),V=n(26205);const q=({position:e,deviceId:t,connectStateDeviceId:n,deviceName:i,deviceType:r,deviceModelName:s,isGroup:c,disabledReason:o,canLogout:l,spec:d})=>{const u=(0,y.tf)(r,c),{helpText:p,tooltip:v}=(0,y.uY)(o,(0,y.p2)(r,s)),h=d.disabledDeviceFactory({identifier:n,position:e,reason:o??"null"}),g=(0,V.t)(h),x=(0,a.NC)(z.VUN)?B:D;return(0,m.jsx)(x,{deviceId:t,connectStateDeviceId:n,ref:g,isDisabled:!0,Icon:u,title:i,subtitle:p,canLogout:l,spec:h,helpTooltip:v})};var H=n(41978),_=n(17959),G=n(75360),Z=n(4139);const K=({isDisabled:e=!1,spec:t})=>{const n=(0,H.wA)(),i=t.containerViewFactory().deviceListFactory().castPlaceholderFactory(),r=(0,V.t)(i),s=(0,y.$A)(G.bq.CAST_AUDIO,"disconnected"),c=(0,Z.s)(),l=(0,a.NC)(z.VUN)?B:D;return(0,m.jsx)(l,{deviceId:"cast-placeholder",connectStateDeviceId:"cast-placeholder",ref:r,Icon:s,title:o.Ru.get("web-player.connect.device-picker.google-cast-devices"),supportsHiFi:!1,onClick:()=>{c.logInteraction(i.hitUiReveal()),n((0,_.Ym)())},isDisabled:e,spec:i})};var $=n(53420),J=n(59213);const X=({deviceId:e,connectStateDeviceId:t,deviceName:n,supportsHiFi:i,spec:r})=>{const s=(0,Z.s)(),c=r.localDeviceFactory(),o=(0,y.tf)(G.bq.COMPUTER,!1),l=(0,$.e)(),d=(0,J.D)(),u=(0,a.NC)(z.p41),p=(0,a.NC)(z.VUN)?B:D;return(0,m.jsx)(p,{deviceId:e,connectStateDeviceId:t,Icon:o,title:n,supportsHiFi:i,onClick:()=>{const{interactionId:t,pageInstanceId:n}=s.logInteraction(c.hitPullPlaybackToLocalDevice());(u?d:l).transferPlayback(e,{interactionId:t,pageInstanceId:n})},spec:c})};var Y=n(82535);const Q=()=>{const[e,t]=(0,Y.x)("connect-picker-recent-transfers",{});return{registerTransferAttempt:(0,s.useCallback)((n=>{t({...e,[n]:(new Date).getTime()})}),[e,t]),recentTransfersMap:e}},ee=({position:e,deviceId:t,connectStateDeviceId:n,deviceName:i,deviceType:r,isGroup:s,supportsHiFi:c,canLogout:l,incarnation:d,spec:u})=>{const p=(0,Z.s)(),v=u.remoteDeviceFactory({identifier:n,position:e}),h=(0,y.tf)(r,s);let g,x;(0,y.Mp)(r)&&(g=(0,y.$A)(r,"disconnected"),x=o.Ru.get("web-player.connect.device-picker.google-cast"));const{registerTransferAttempt:b}=Q(),f=(0,$.e)(),w=(0,J.D)(),C=(0,a.NC)(z.p41),k=(0,V.t)(v),I=(0,a.NC)(z.VUN)?B:D;return(0,m.jsx)(I,{deviceId:t,connectStateDeviceId:n,ref:k,Icon:h,TechIcon:g,title:i,subtitle:x,supportsHiFi:c,canLogout:l,incarnation:d,onClick:()=>{const{interactionId:e,pageInstanceId:i}=p.logInteraction(v.hitConnectToRemoteDevice({remoteDeviceId:n}));(C?w:f).transferPlayback(t,{interactionId:e,pageInstanceId:i}),b(n)},spec:v})},te="device-picker-section-heading",ne="device-picker-troubleshooting-list";var ie=n(49151);const re=()=>(0,ie.o)((e=>(e?.restrictions?.disallowTransferringPlaybackReasons?.length??0)>0));var ae=n(65784);const se=({devices:e,areWebPlayerCastDevicesAvailable:t=!1,networkHeadingID:n="",spec:i})=>{const r=(0,ae.Ek)(),s=re(),c=i.containerViewFactory().deviceListFactory(),d=(0,V.t)(c),u=(0,a.NC)(z.VUN),p=(e,t)=>{const n=r?o.Ru.get("web-player.connect.device-picker.this-computer"):o.Ru.get("web-player.connect.device-picker.this-web-browser");return e.isDisabled?(0,m.jsx)(q,{position:e.isLocal?0:t+1,deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:e.isLocal?n:e.name,deviceType:e.isLocal?G.bq.COMPUTER:e.type,deviceModelName:e.modelDisplayName,isGroup:e.isGroup,disabledReason:e.disabledReason,canLogout:!e.isLocalNetwork&&e.supportsLogout,spec:c},e.id):e.isLocal&&(e=>e instanceof b.BA.ContainerViewEventFactory.DeviceListEventFactory||e instanceof b.BA.ContainerViewEventFactory.OnNetworkDeviceListEventFactory)(c)?(0,m.jsx)(X,{deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:n,supportsHiFi:e.losslessSupport.fullySupported,spec:c},e.id):(0,m.jsx)(ee,{position:t+1,deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:e.name,deviceType:e.type,isGroup:e.isGroup,supportsHiFi:e.losslessSupport.fullySupported,canLogout:!e.isLocalNetwork&&e.supportsLogout,incarnation:e.incarnation,spec:c},e.id)};return u?(0,m.jsxs)(l.$,{circular:!1,ref:d,"aria-labelledby":`${te} ${n}`,"data-testid":`devices-list-${n}`,allowsMultipleInteractiveChildrenInItem:!0,children:[e.map(((e,t)=>p(e,t))),t&&(0,m.jsx)(K,{isDisabled:s,spec:i})]}):(0,m.jsxs)("ul",{"aria-labelledby":`${te} ${n}`,"data-testid":`devices-list-${n}`,ref:d,children:[e.map(((e,t)=>p(e,t))),t&&(0,m.jsx)(K,{isDisabled:s,spec:i})]})},ce="local-network-heading",oe="other-networks-heading",le=({localNetworkDevices:e,otherNetworksDevices:t,spec:n})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.E,{as:"h3",variant:"bodySmall",semanticColor:"textSubdued",className:C.A.networkSectionHeading,id:ce,children:e.length>0?o.Ru.get("web-player.connect.device-picker.on-this-network"):o.Ru.get("web-player.connect.device-picker.no-devices-local-network")}),e.length>0&&(0,m.jsx)(se,{devices:e,networkHeadingID:ce,spec:n}),t.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.E,{as:"h3",variant:"bodySmall",semanticColor:"textSubdued",className:r()(C.A.networkSectionHeading,C.A.otherNetworksHeading),id:oe,children:o.Ru.get("web-player.connect.device-picker.on-other-networks")}),(0,m.jsx)(se,{devices:t,networkHeadingID:oe,spec:n})]})]});var de=n(31385);const ue=({url:e,linkText:t,handleClick:n,elementRef:i})=>(0,m.jsxs)("a",{className:r()(C.A.wrapper,C.A.rowWrapper,C.A.helpRowContent),href:e,style:{textDecoration:"none"},target:"_blank",onClick:n,ref:i,children:[(0,m.jsx)(d.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",className:C.A.helpText,children:t}),(0,m.jsx)(de.H,{size:"small","data-testid":"icon-external-link",semanticColor:"textSubdued",className:C.A.iconExternalLink,role:"presentation",autoMirror:!0,"aria-hidden":"true"})]}),pe=({url:e,linkText:t,handleClick:n,elementRef:i})=>(0,m.jsx)("a",{className:r()(W),href:e,target:"_blank",ref:i,onClick:n,children:(0,m.jsx)(I.v,{title:t,id:t,isRedundantOnClick:!0,onClick:()=>{},"data-testid":"list-row-external-link",trailing:(0,m.jsx)(de.H,{size:"small","data-testid":"icon-external-link",semanticColor:"textSubdued",role:"presentation",autoMirror:!0,"aria-hidden":"true"})})}),ve=({spec:e})=>{const t=`https://www.spotify.com/connect${`?utm_campaign=connect&utm_medium=${(0,ae.Ek)()?"app":"web"}&utm_source=desktop`}`,n=e.containerViewFactory().externalConnectHubLinkFactory(),i=(0,V.t)(n),r=(0,Z.s)(),s=(0,a.NC)(z.VUN)?pe:ue;return(0,m.jsx)(s,{url:t,linkText:o.Ru.get("web-player.connect.device-picker.connect-hub-external-link"),elementRef:i,handleClick:()=>{r.logInteraction(n.hitNavigateToExternalUri({destination:t}))}})},me="https://support.spotify.com/article/spotify-connect/",he=({spec:e})=>{const t=e.containerViewFactory().externalHelpLinkFactory(),n=(0,V.t)(t),i=(0,Z.s)(),r=(0,a.NC)(z.VUN)?pe:ue;return(0,m.jsx)(r,{url:me,linkText:o.Ru.get("web-player.connect.device-picker.help-external-link"),elementRef:n,handleClick:()=>{i.logInteraction(t.hitNavigateToExternalUri({destination:me}))}})};var ge=n(20644);const xe=[ge.h.en,ge.h.enGB],be=()=>{const e=o.Ru.getLocaleForTranslation();return xe.includes(e)};const fe=({devices:e,areWebPlayerCastDevicesAvailable:t,spec:n})=>{const i=(0,ae.Ek)(),o=re(),l=be(),d=!i&&o?e.map((e=>({...e,isDisabled:!0}))):e,{recentTransfersMap:u}=Q(),p=function(e,t){const n=[],i=e.find((e=>e.isLocal));i&&n.push(i);const r=e.filter((e=>!e.isLocal)),{usedDevices:a,unusedDevices:s}=function(e,t){const n=[],i=[];for(const r of e)t[r.connectStateId]?n.push({device:r,timestamp:t[r.connectStateId]}):i.push(r);return{usedDevices:n,unusedDevices:i}}(r,t);a.sort(((e,t)=>t.timestamp-e.timestamp));for(const e of a)n.push(e.device);const c=n.concat(function(e){return e.sort(((e,t)=>e.isLocal?-1:t.isLocal?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase())))}(s));return c}(d,u),v=p.filter((e=>e.isLocalNetwork)),g=p.filter((e=>!e.isLocalNetwork)),{rowWithMenuOpenIdentifier:x}=(0,s.useContext)(h),b=(0,a.NC)(z.VUN),f=(0,m.jsxs)("div",{className:r()(C.A.scrollbarContent,b&&C.A.sidePanel),children:[(0,m.jsx)("div",{children:i&&g.length>0?(0,m.jsx)(le,{localNetworkDevices:v,otherNetworksDevices:g,spec:n}):(0,m.jsx)(se,{devices:p,areWebPlayerCastDevicesAvailable:t,spec:n})}),(0,m.jsxs)("div",{className:r()(C.A.rowWrapperHelp),children:[(0,m.jsx)(he,{spec:n}),l&&(0,m.jsx)(ve,{spec:n})]})]});return b?f:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.a,{className:r()(C.A.scrollBar,C.A.devicePickerHoverRowContainer,{[C.A.preventScroll]:!!x}),children:f}),(0,m.jsx)("div",{className:C.A.fadeOut})]})},ye=({foundDevices:e})=>{const t=e?o.Ru.get("web-player.connect.device-picker.select-another-device"):o.Ru.get("web-player.connect.device-picker.no-devices-found");return(0,m.jsx)("span",{className:C.A.sectionHeading,id:te,"data-testid":te,children:(0,m.jsx)(d.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textBase",children:t})})};var we=n(12079),Ce=n(4065),De=n(68501),ke=n(89548);const Ie=({title:e,subtitle:t,Icon:n})=>(0,m.jsxs)("li",{className:C.A.wrapper,children:[(0,m.jsx)(n,{size:"medium",semanticColor:"textSubdued",className:C.A.troubleshootingIcon,role:"presentation"}),(0,m.jsxs)("div",{className:C.A.contentWrapper,children:[(0,m.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBase",children:e}),(0,m.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",className:C.A.troubleshootingSubtitle,children:t})]})]});var Ne=n(60143);const je=(0,s.forwardRef)((function({Icon:e,title:t,subtitle:n},i){return(0,m.jsx)(A.c,{className:W,children:(0,m.jsx)(I.v,{id:t,ref:i,"data-testid":"device-picker-row-sidepanel",media:(0,m.jsx)(e,{semanticColor:"textSubdued"}),title:(0,m.jsx)("span",{className:L,children:(0,m.jsx)(E.Zp,{label:t,renderInline:!0,children:(0,m.jsx)(N.d,{"data-testid":"list-row-title",lineClamp:1,semanticColor:"textBase",dir:"auto",children:t})})}),subtitle:(0,m.jsx)("div",{className:M,children:(0,m.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:n})})})})})),Ae=({isDesktop:e,spec:t})=>{const n=be(),i=t.containerViewFactory().noDevicesViewFactory(),s=(0,V.t)(i),c=(0,a.NC)(z.VUN),l=c?je:Ie;return(0,m.jsxs)("div",{ref:s,className:r()(C.A.troubleshootingWrapper,{[C.A.sidePanel]:c,[C.A.scrollbarContent]:c}),"data-testid":ne,children:[(0,m.jsxs)("ul",{"aria-labelledby":`${Ne.y} ${te}`,className:C.A.troubleshootingList,children:[(0,m.jsx)(l,{Icon:we.T,title:o.Ru.get("web-player.connect.device-picker.check-wifi"),subtitle:o.Ru.get("web-player.connect.device-picker.check-wifi-subtitle")}),(0,m.jsx)(l,{Icon:Ce.g,title:o.Ru.get("web-player.connect.device-picker.play-from-another"),subtitle:o.Ru.get("web-player.connect.device-picker.play-from-another-subtitle")}),e?(0,m.jsx)(l,{Icon:De.H,title:o.Ru.get("web-player.connect.device-picker.restart-speaker"),subtitle:o.Ru.get("web-player.connect.device-picker.restart-speaker-subtitle")}):(0,m.jsx)(l,{Icon:ke.i,title:o.Ru.get("web-player.connect.device-picker.switch-to-app"),subtitle:o.Ru.get("web-player.connect.device-picker.switch-to-app-subtitle")})]}),(0,m.jsxs)("div",{className:r()({[C.A.devicePickerHoverRowContainer]:!c}),"aria-describedby":ne,children:[(0,m.jsx)(he,{spec:t}),n&&(0,m.jsx)(ve,{spec:t})]})]})},Se=({devices:e,areWebPlayerCastDevicesAvailable:t,spec:n})=>{const i=Boolean(e.find((e=>!e.isLocal))),s=e.filter((e=>!e.isActive&&e.name.length>0)),c=i||t,o=(0,ae.Ek)(),l=(0,a.NC)(z.VUN);return(0,m.jsxs)("div",{className:r()(C.A.body,l&&C.A.sidePanel),children:[(0,m.jsx)(ye,{foundDevices:c}),c?(0,m.jsx)(g,{children:(0,m.jsx)(fe,{devices:s,areWebPlayerCastDevicesAvailable:t,spec:n})}):(0,m.jsx)(Ae,{isDesktop:o,spec:n})]})}},84933:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(35494),r=n(51035),a=n(20920),s=n(99498),c=n(86070);const o=({size:e="medium",className:t})=>{const n=(0,a.j)(),o=(0,s.k)(e);return(0,c.jsx)(c.Fragment,{children:n?(0,c.jsx)(i.A,{size:e,semanticColor:"textBrightAccent",className:t,"data-testid":"now-playing-active"}):(0,c.jsx)("img",{className:t,width:o,height:o,alt:"","aria-hidden":"true",src:(0,r.b)("images/device-picker-equaliser-animation.webp"),"data-testid":"animated-now-playing"})})}},60143:(e,t,n)=>{n.d(t,{a:()=>h,y:()=>m});var i=n(97500),r=n.n(i),a=n(15231),s=n(41331),c=n(62562),o=n(84933),l=n(56601),d=n(39356),u=n(65784),p=n(10945),v=n(86070);const m="device-picker-header",h=({isLocalDevice:e,deviceName:t,deviceType:n,isGroup:i,canLogout:h,incarnation:g,isPlaying:x,deviceId:b,connectStateDeviceId:f,spec:y})=>{const w=(0,u.Ek)(),C=(0,d.HJ)(g),D=h||C;let k;if(x)k=(0,v.jsx)(o.A,{size:"large",className:p.A.mainIcon});else{const e=(0,d.tf)(n,i);k=(0,v.jsx)(e,{size:"large",semanticColor:"textBrightAccent",className:p.A.mainIcon,"data-testid":"device-icon",role:"presentation"})}const I=(0,v.jsx)("div",{className:p.A.marqueeWrapper,children:(0,v.jsx)(c.r,{equalGradientWidth:!0,title:s.Ru.get("web-player.connect.device-picker.current-device"),children:(0,v.jsx)(a.E,{as:"h3",variant:"bodyMediumBold",semanticColor:"textBase",children:s.Ru.get("web-player.connect.device-picker.current-device")})},`picker-header-title-${t}`)});let N,j;e?N=w?s.Ru.get("web-player.connect.device-picker.this-computer"):s.Ru.get("web-player.connect.device-picker.this-web-browser"):(N=t,j=(0,d.$A)(n,"connected"));const A=(0,v.jsxs)("div",{className:p.A.textWithIconWrapper,children:[j&&(0,v.jsx)(j,{iconSize:16,semanticColor:"textBrightAccent",className:p.A.techIcon,"data-testid":"tech-icon"}),(0,v.jsx)("div",{className:p.A.marqueeWrapper,children:(0,v.jsx)(c.r,{equalGradientWidth:!0,title:N,children:(0,v.jsx)(a.E,{as:"p",variant:"bodyMedium",semanticColor:"textBrightAccent",children:N})},`picker-header-subtitle-${t}`)})]});return(0,v.jsxs)("div",{className:r()(p.A.wrapper,p.A.headerWrapper),id:m,"aria-labelledby":m,children:[k,(0,v.jsxs)("div",{className:r()(p.A.contentWrapper,D&&p.A.withContextMenu),children:[I,A]}),D&&(0,v.jsx)(l.V,{title:N,deviceId:b,connectStateDeviceId:f,allowForgetDevice:h,incarnation:C?g:void 0,className:p.A.headerContextMenuButton,spec:y.containerViewFactory().headerFactory().activeDeviceFactory()})]})}},56601:(e,t,n)=>{n.d(t,{V:()=>h});var i=n(30758),r=n(97500),a=n.n(r),s=n(41331),c=n(19477),o=n(31352),l=n(81783),d=n(72553),u=n(4139),p=n(26205),v=n(57174),m=n(86070);const h=({title:e,deviceId:t,connectStateDeviceId:n,allowForgetDevice:r,incarnation:h,className:g,onHide:x,onShow:b,spec:f})=>{const[y,w]=(0,i.useState)(!1),C=f.contextMenuButtonFactory({identifier:n}),D=(0,u.s)(),k=(0,p.t)(C);return(0,m.jsx)(o.b,{renderInline:!0,menu:(0,m.jsx)(d.r,{spec:C,children:(0,m.jsx)(l.T,{deviceId:t,connectStateDeviceId:n,allowForgetDevice:r,incarnation:h})}),onShow:()=>{w(!0),b?.()},onHide:()=>{w(!1),x?.()},offset:[0,-8],children:(0,m.jsx)(c.e,{ref:k,size:c.M.xs,label:s.Ru.get("more.label.context",e),className:a()(v.A.button,g),onClick:e=>{e.stopPropagation(),D.logInteraction(y?C.hitUiHide():C.hitUiReveal())}})})}},81783:(e,t,n)=>{n.d(t,{T:()=>C});var i=n(5148),r=n(73434),a=n(70752),s=n(81626),c=n(39733),o=n(62745),l=n(41331),d=n(4924),u=n(64580),p=n(99186),v=n(19019),m=n(53420),h=n(92e3),g=n(89035);var x=n(4139),b=n(26205),f=n(78487),y=n(57174),w=n(86070);const C=({deviceId:e,connectStateDeviceId:t,allowForgetDevice:n,incarnation:C})=>{const D=(0,m.e)(),k=(0,g.N)(h.r),I=(0,x.s)(),{spec:N}=(0,f.r)(o.d,{}),j=(0,b.t)(N),A=N.forgetDeviceButtonFactory(),S=(0,b.t)(A),E=N.deviceIncarnationContainerFactory(),R=(0,b.t)(E),T=(0,c.NC)(v.NPo);return n||C?(0,w.jsx)("span",{ref:j,className:y.A.contextMenuWrapper,children:(0,w.jsxs)(d.W,{children:[n&&(0,w.jsx)(p.D,{role:"menuitem",leadingIcon:(0,w.jsx)(a.V,{size:"small"}),onClick:()=>{I.logInteraction(A.hitLogoutFromRemoteDevice({remoteDeviceId:t})),T?k.logout(e):D.logout(e)},elementRef:S,children:l.Ru.get("web-player.connect.context-menu.forget-device")}),C&&(0,w.jsxs)("div",{ref:R,children:[(0,w.jsx)(u.y,{children:l.Ru.get("web-player.connect.context-menu.incarnation-title")}),C.available.map((n=>{const{icon:a,text:c}=(e=>{switch(e){case"connect":return{icon:(0,w.jsx)(i.E,{size:"small"}),text:l.Ru.get("web-player.connect.context-menu.incarnation-connect")};case"cast":return{icon:(0,w.jsx)(r.m,{size:"small"}),text:l.Ru.get("web-player.connect.context-menu.incarnation-cast")};default:return{}}})(n);return(0,w.jsx)(p.D,{role:"menuitemradio",leadingIcon:a,onClick:()=>{let i;switch(n){case"cast":i=E.googleCastButtonFactory();break;case"connect":i=E.spotifyConnectButtonFactory()}C.preferred!==n?(i&&I.logInteraction(i.hitChangeRemoteDeviceIncarnation({remoteDeviceId:t})),T?k.setPreferredIncarnation(e,n):D.setPreferredIncarnation(e,n)):i&&I.logInteraction(i.hitNoAction())},"aria-checked":C.preferred===n,CheckedIcon:s.i,children:c},n)}))]})]})}):null}},68341:(e,t,n)=>{n.d(t,{z:()=>o});var i=n(30758),r=n(39733),a=n(14824),s=n(34967),c=n(19019);const o=()=>{const e=(0,i.useContext)(a.K),{togglePanel:t,isActive:n}=(0,s.C)();if((0,r.NC)(c.VUN))return{isPickerOpen:n,triggerRef:{current:null},toggleDevicePicker(e){t(e)}};if(null===e)throw new Error("Trying to use 'DevicePickerTriggerContext' without 'DevicePickerTriggerContextProvider'!");return e}},59467:(e,t,n)=>{n.d(t,{b:()=>s});var i=n(35789),r=n(52037),a=n(86070);const s=({item:e,size:t,maxSize:n=t,desiredLabel:s="",className:c})=>{const o=(0,r.h)(e?.images??void 0,{desiredSize:n,desiredLabel:s});return(0,a.jsx)("div",{className:c,children:(0,a.jsx)(i.N,{loading:"eager",imgSrc:o,width:t,height:t,type:e?.type})})}},13357:(e,t,n)=>{n.d(t,{R:()=>u});var i=n(30758),r=n(41978),a=n(59677),s=n(11841),c=n(81389),o=n(68031),l=n(45292),d=n(86070);const u=({uri:e,owner:t,children:n})=>{const u=(0,r.wA)(),p=(0,l.W)(),v=(0,r.d4)((e=>e.session.user?.id)),m=(0,a.tb)(e),h=(0,i.useCallback)(((t,n)=>{const i=[...n[o.O[a.NQ.ALBUM]]||[],...n[o.O[a.NQ.TRACK]]||[],...n[o.O[a.NQ.LOCAL_TRACK]]||[],...n[o.O[a.NQ.EPISODE]]||[]];i.length>0&&(u((0,s.io)(e,i)),p({targetUri:e,intent:"add",type:"drop"}))}),[u,p,e]);return m&&t===v?(0,d.jsx)(c.A,{types:[o.O[a.NQ.ALBUM],o.O[a.NQ.TRACK],o.O[a.NQ.EPISODE],o.O[a.NQ.LOCAL]],onDrop:h,testId:"cover-drop-target",children:n}):(0,d.jsx)(d.Fragment,{children:n})}},40191:(e,t,n)=>{n.d(t,{a:()=>m});var i=n(30758),r=n(97500),a=n.n(r),s=n(41331),c=n(52301),o=n(35033),l=n(52891),d=n(26077),u=n(98333),p=n(32415),v=n(86070);const m=({context:e,item:t,className:n,onClick:r=(()=>{})})=>{const{dislikeEndpoint:m,shouldShowFeedbackControls:h}=(0,o.d)(e),{enqueueSnackbar:g}=(0,l.d)(),x=e.metadata?.[u.W.CONTEXT_DESCRIPTION]??"",{setDislikeFeedback:b}=(0,d.I)({uri:t.uri,setFeedbackPath:m,contextUri:e.uri}),f=(0,i.useCallback)((async()=>{b(),g(s.Ru.get("feedback.hide-song",x)),r?.()}),[b,g,x,r]);return(0,p.v)(t)&&h?(0,v.jsx)(c.O,{className:a()(n,{"control-button":!n,"control-button-feedback":!n}),isDisliked:!1,onClick:f}):null}},59293:(e,t,n)=>{n.d(t,{g:()=>m});var i=n(30758),r=n(97500),a=n.n(r),s=n(15231),c=n(41331),o=n(5290);const l="w0kwPDoelauN3C9dVoVe",d="xzLZD9uD3b4u9wecXAJY",u="DaFhhSm73r7rNpomErhI";var p=n(86070);const v=({children:e})=>(0,p.jsx)(p.Fragment,{children:e}),m=(0,i.forwardRef)((function({users:e,maxSlots:t=3,size:n,withoutOverflowBadge:i=!1,dropShadow:r=!1,AvatarWrapper:m=v},h){const g=Math.max(2,t),x=e.length>g?e.length-g+1:0,b=e.slice(0,g),{userIconSize:f,width:y,smallFontSize:w,largeFontSize:C}=(e=>{switch(e){case"xxlarge":return{userIconSize:"xlarge",width:64,smallFontSize:24,largeFontSize:32};case"xlarge":return{userIconSize:"large",width:48,smallFontSize:18,largeFontSize:24};case"large":return{userIconSize:"medium",width:32,smallFontSize:12,largeFontSize:16};case"medium":default:return{userIconSize:"small",width:24,smallFontSize:9,largeFontSize:12};case"small":return{userIconSize:"xsmall",width:18,smallFontSize:8,largeFontSize:10}}})(n),D=x>9?w:C,k=(0,p.jsx)("span",{className:a()(d,"encore-inverted-light-set"),style:{width:y,height:y},role:"presentation",children:(0,p.jsx)(s.E,{variant:"bodySmallBold",style:{fontSize:D},semanticColor:"textBase",children:`+${x}`})});return(0,p.jsx)("div",{className:a()(l),ref:h,children:b.map(((e,t)=>!i&&x>0&&t===g-1?(0,p.jsx)(m,{index:t,children:(0,p.jsx)(o.e,{images:[],userIconSize:f,label:c.Ru.get("web-player.social-connect.facepile.and-others",x),width:y,piled:!0,customPlaceholder:k})},"others"):(0,p.jsx)(m,{index:t,user:e,children:(0,p.jsx)(o.e,{images:e.images,userIconSize:f,label:e.displayName,displayName:e.displayName,username:e.username,width:y,piled:t>0,imageClassName:r?u:void 0})},e.displayName)))})}))},59931:(e,t,n)=>{n.d(t,{g:()=>l});var i=n(30758),r=n(30213),a=n(56076),s=n(31754),c=n(79860),o=n(44287);function l(){const e=(0,s.V)(),t=(0,o.u)(),[n,l]=(0,i.useState)(null),d=(0,i.useCallback)((async()=>{const n=e.getDefaultDevice();if(null===n)return void l(null);if(n.transportType!==r.Yg.BLUETOOTH)return void l({audioDevice:n});const i=await t.lookup(n.name);l({audioDevice:n,externalAccessory:i})}),[e,t]);return(0,c.k)(a.B.DEVICE_CONNECTED,d),(0,i.useEffect)((()=>{d()}),[d]),n}},69475:(e,t,n)=>{n.d(t,{l:()=>a});var i=n(29615);const r={id:"",connectStateId:"",name:"",type:n(75360).bq.COMPUTER,isGroup:!1,isLocal:!0,isActive:!0,isConnecting:!1,isDisabled:!1,volume:0,losslessSupport:{fullySupported:!1,deviceSupported:!1,userEligible:!1},supportsLogout:!1,supportedMediaTypes:null},a=()=>{const{activeDevice:e,devices:t}=(0,i.v)((e=>({activeDevice:e.activeDevice,devices:e.devices})));return{currentDevice:e??r,devices:t}}},34967:(e,t,n)=>{n.d(t,{C:()=>c});var i=n(30758),r=n(17504),a=n(20078),s=n(22594);const c=()=>{const e=(0,r.Ev)(a.$S.DEVICE_PICKER_BUTTON_CLICK),{isActive:t,panelSend:n}=(0,r.AI)(s.Z.DevicePicker,s.Z.DevicePickerOverlay),c=(0,i.useCallback)((e=>n({type:a.$S.DEVICE_PICKER_BUTTON_CLICK,...!t&&{interactionId:e}})),[n,t]);return(0,i.useMemo)((()=>({togglePanel:c,isActive:t,canTogglePanel:e})),[c,t,e])}},40913:(e,t,n)=>{n.d(t,{r:()=>m});var i=n(30758),r=n(41978),a=n(56673),s=n(8665),c=n(24060),o=n(17504),l=n(20078),d=n(22594),u=n(84918),p=n(91822),v=n(21568);function m(){const e=(0,r.d4)(c.u),t=(0,r.wA)(),{setYlxSidebarState:n}=(0,u.$)(),{mainLandmarkRef:m,lyricsCinemaRef:h}=(0,a.JT)(),{isActive:g,panelSend:x}=(0,o.AI)(d.Z.NowPlayingView);return{mode:e,setMode:(0,i.useCallback)((e=>{e===p.YU.cinema&&g?(h.current?.classList.add(v.A.lyricsCinemaVisible),m.current?.classList.add(v.A.nonDisplayedArea),n(u.fX.COLLAPSED),x(l.$S.NPV_BUTTON_CLICK)):(h.current?.classList.remove(v.A.lyricsCinemaVisible),m.current?.classList.remove(v.A.nonDisplayedArea),g||x(l.$S.NPV_BUTTON_CLICK)),t((0,s.gh)(e))}),[t,x,g,h,m,n])}}},3413:(e,t,n)=>{n.d(t,{P:()=>u,X:()=>d});var i=n(41331),r=n(45339),a=n(45841),s=n(40425),c=n(32415),o=n(37171),l=n(91753);function d(e){return(0,c.v)(e)?i.Ru.get("playback-control.now-playing-label",e.name,e.artists.map((({name:e})=>e)).join(i.Ru.getSeparator())):(0,s.p)(e)?i.Ru.get("playback-control.now-playing-label",e.name,e.show.name):(0,a.d)(e)?i.Ru.get("playback-control.now-playing-label",e.name,e.book.name):(0,r.N)(e)?i.Ru.get("ad-formats.advertisement"):(0,o.v)(e)?void 0:(0,l.d)(e)}function u(e){let t=d(e);return t||(t=i.Ru.get("queue.now-playing")),t}},35033:(e,t,n)=>{n.d(t,{d:()=>i});const i=e=>{const t=e?.metadata?.["dislike-endpoint"]??null;return{dislikeEndpoint:t,shouldShowFeedbackControls:"1"===e?.metadata?.["dislike-feedback-available"]&&null!==t}}},96851:(e,t,n)=>{n.d(t,{e:()=>y});var i=n(30758),r=n(59677),a=n(49373),s=n(91360),c=n(3413),o=n(42644),l=n(54003),d=n(66311),u=n(45339),p=n(45841),v=n(40425),m=n(32415),h=n(37171),g=n(91753),x=n(86070);const b=(0,i.lazy)((()=>n.e(2572).then(n.bind(n,52572))));function f(e,t,n){let i=(0,a.H)(e.uri);if((0,o.c0)(i))return null;const s=(0,r.U_)(i),c=i===d.bV,u="queue"===t.provider;(s||u||c)&&((0,m.v)(t)?i=t.album.uri:((0,v.p)(t)||(0,p.d)(t))&&(i=t.uri),c&&(i=l.E3));const h=(0,r.o_)(i);if(null===h)return null;if((0,m.v)(t)||(0,v.p)(t)||(0,p.d)(t)){return{to:h.toURLPath(!0),search:(g={uid:t.uid,uri:t.uri,page:n?.pageIndex??null,pageUri:n?.pageURI??null,index:n?.itemIndex??null,highlight:s?t.uri:null},Object.keys(g).filter((e=>null!==g[e])).map((e=>`${e}=${encodeURIComponent(g[e])}`)).join("&"))}}var g;return{to:h.toURLPath(!0)}}const y=({context:e,index:t,item:n,isVisible:r,children:a,className:o,referrer:l,onClick:d,adEventReason:y})=>{const w=(0,c.P)(n),C=n.type,D=r?void 0:-1;if((0,m.v)(n)||(0,v.p)(n)||(0,p.d)(n)){const i=f(e,n,t);return i?(0,x.jsx)(s.N,{className:o,referrer:l,"data-testid":"context-link","data-context-item-type":C,style:{border:"none"},to:i.to,search:i.search,"aria-label":w,tabIndex:D,onClick:d,children:a}):(0,x.jsx)(x.Fragment,{children:a})}return(0,u.N)(n)?(0,x.jsx)(i.Suspense,{fallback:(0,x.jsx)(x.Fragment,{children:a}),children:(0,x.jsx)(b,{item:n,"aria-label":w,tabIndex:D,adEventReason:y,children:a})}):(0,h.v)(n)?(0,x.jsx)(x.Fragment,{children:a}):(0,g.d)(n)}},53970:(e,t,n)=>{n.d(t,{j:()=>p});var i=n(30758),r=n(76092),a=n(2569),s=n(30213),c=n(13023),o=n(49155),l=n(77219),d=n(89601);const u={headphoneDevice:null,audioDevice:null,predictedState:null,isOnboarded:!1,currentState:{externalizationEnabled:!1,specificEnabled:!1},contentRestrictions:{specificRestricted:!1,externalizationRestricted:!1,processingCapabilitiesRestricted:!1},toggleTuneHeadphones:null,toggleTuneStudio:null,setFilterState:()=>Promise.resolve()},p=()=>{const e=(0,o.N)(),t=(0,r.jE)(),n=(0,c.l)(),p=(0,i.useMemo)((()=>["puffin-current-device"]),[]),{data:v,isLoading:m,isError:h}=(0,a.I)({queryKey:p,queryFn:async()=>await e.getFilterState(),gcTime:5e3,staleTime:5e3});var g;return g=()=>{t.invalidateQueries({queryKey:p})},(0,d.G)(l.n.UPDATE,g),{deviceFilterState:!n&&v||u,isMaybeHeadphoneDevice:(0,s.lS)(v?.audioDevice),isLoading:m,isError:h}}},90353:(e,t,n)=>{n.d(t,{o:()=>I});var i=n(30758),r=n(97500),a=n.n(r),s=n(45237),c=n(66537),o=n(3275),l=n(13073),d=n(59677),u=n(41331),p=n(27046),v=n(79243),m=n(69798),h=n(57968),g=n(85930),x=n(93399),b=n(4139),f=n(78487);const y="VcqCvLW71lZT4kqnCgt0";var w=n(86070);const C=({contextUri:e="",uri:t,id:n=t,className:r,canAdd:d})=>{const{description:x}=(0,g.f)(),C=(0,b.s)(),{spec:D}=(0,f.r)(l.A,{data:{uri:e}}),k=(0,i.useCallback)((()=>{C.logInteraction(D.undoButtonFactory({uri:t}).hitUiHide())}),[C,D,t]),I=(0,i.useCallback)((()=>{C.logInteraction(D.removeRecommendationButtonFactory({uri:t}).hitRemoveRecommendation({recommendedItemUri:t,contextUri:e}))}),[e,C,D,t]),N=(0,i.useCallback)((()=>{C.logInteraction(D.addRecommendationButtonFactory({uri:t}).hitAddToPlaylist({playlist:e,itemToBeAdded:t}))}),[e,C,D,t]),{removeRecommendation:j,addRecommendation:A}=(0,v.t)({uri:t,uid:n,contextUri:e,onUndo:k,onRemoveRecommendation:I,onAddRecommendation:N}),S=(0,i.useCallback)((()=>x?u.Ru.get("web-player.smart-shuffle.add-to-playlist-button",x):u.Ru.get("web-player.smart-shuffle.add-to-playlist-button-fallback")),[x]),E=(0,h.y)();return(0,w.jsxs)("div",{className:a()(y,r),children:[(0,w.jsx)(p.Zp,{label:u.Ru.get("web-player.smart-shuffle.removed-from-recommendations-button"),children:(0,w.jsx)(s.H,{onClick:j,iconOnly:c.P,size:E===m.E.MEDIUM?"medium":"small","aria-label":u.Ru.get("web-player.smart-shuffle.removed-from-recommendations-button"),condensedAll:!0})}),d&&(0,w.jsx)(p.Zp,{label:S(),children:(0,w.jsx)(s.H,{onClick:A,iconOnly:o.P,size:E===m.E.MEDIUM?"medium":"small","aria-label":S(),condensedAll:!0})})]})},D=e=>{const t=(0,x.J)(e.contextUri);return(0,w.jsx)(C,{...e,canAdd:t?.canAdd??!1})},k=e=>(0,w.jsx)(C,{...e,canAdd:!0}),I=e=>e.contextUri&&(0,d.tb)(e.contextUri)?(0,w.jsx)(D,{...e,contextUri:e.contextUri}):e.contextUri&&(0,d.Z0)(e.contextUri)?(0,w.jsx)(k,{...e,contextUri:e.contextUri}):(0,w.jsx)(C,{...e,canAdd:!1})},57171:(e,t,n)=>{n.d(t,{c:()=>a,t:()=>s});var i=n(59677);const r=e=>({url:e}),a=e=>{const t=[];return e.largeImageUrl?t.push(r(e.largeImageUrl)):e.imageUrl&&t.push(r(e.imageUrl)),{displayName:e.displayName,images:t,username:e.username,uri:(0,i.Qj)(e.username).toURI()}},s=(e,t,n)=>{const i=[],r=e.sessionMembers.find((({id:t})=>t===e.sessionOwnerId));r&&i.push(r);const s=e.isSessionOwner?void 0:e?.sessionMembers.find((({username:e})=>e===t));s&&(n?.userFirst?i.unshift(s):i.push(s));const c=e.sessionMembers.filter((({username:n,id:i})=>i!==e.sessionOwnerId&&n!==t));return[...i,...c].map(a)}},28740:(e,t,n)=>{n.d(t,{$:()=>r});var i=n(30758);const r=(e,t)=>{const n=(0,i.useRef)(e);(0,i.useEffect)((()=>{n.current=e}),[e]),(0,i.useEffect)((()=>{let e;function i(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){n.current(i)}),t),i}),[t])}},33234:(e,t,n)=>{n.d(t,{v:()=>a});var i=n(49155),r=n(20042);const a=()=>{const e=(0,i.N)(),t="1"===(0,r.$)("is-puffin");return e.isAvailable()&&t}},59213:(e,t,n)=>{n.d(t,{D:()=>a});var i=n(74286),r=n(89035);function a(){return(0,r.N)(i.x)}},89601:(e,t,n)=>{n.d(t,{G:()=>a});var i=n(30758),r=n(49155);function a(e,t){const n=(0,i.useRef)(t),a=(0,r.N)();n.current=t,(0,i.useEffect)((()=>{const t=a.getFiltersEvents();return t?.addListener(e,(e=>{n.current(e)}))}),[e,a])}},10945:(e,t,n)=>{n.d(t,{A:()=>i});const i={container:"IUqIRcsfvgJ58eeHQqDc",equalGradientWidth:"YGtDGGwXs6KgqmliUg5O",containerEndMask:"BNU6eKUNVTPDBWxSQgDq",containerRtl:"RrMb4wGDHyPBB2YwZhue",scrollableContainer:"ihDb0ZVcyHHNB9zhKYSw",inner:"FlG0FZGG5rOsBKDX7J7A",tooltip:"main-devicePicker-tooltip",tooltipContent:"main-devicePicker-tooltipContent",tooltipArrow:"rsvQzlqpHz_9R943yleu",hiddenTooltipArrow:"MZZKWxJgpZdyX3kEqgVk",devicePickerHoverRowContainer:"l6OcBOr8WqpAei2v3T50",devicePickerRowWrapper:"eJvD_4f5SD7yaH4Mq_nc",devicePickerRow:"XdJAEkP3WXzUL5URB0ZX",contextMenuOpen:"Bxb4yN4IpWCHbJDIIoAD",hifiLabelRect:"Swq_y77K9XPPx1T1B_OJ",contextMenuButtonWrapper:"m97VJWoSNAnJwkBDsiZg",scrollBar:"jd5BgldghOe68KEXK_hS",isConnectBarVisible:"gc2T8wnuWczDDGzJ3uWY",preventScroll:"hWE9oKnGY9N3YUZrry_c",fadeOut:"_iSFa0Kl_AlpaG8l_VLJ",scrollbarContent:"n7lpLbjlkn69nQ1BhwZg",sidePanel:"ZtZC7H7E6gtj5tlwNsn8",body:"main-devicePicker-section",wrapper:"main-devicePicker-heading",sectionHeading:"main-devicePicker-sectionHeading",networkSectionHeading:"in_2k_hGN2eFVVu1sDur",otherNetworksHeading:"hI_HIhbNifqISMRk6xfh",headerWrapper:"main-devicePicker-header",headerContextMenuButton:"BIRS4ztlrxxl4_FH24Yn",rowWrapper:"mjprSb2e1tKJpqwvgFSh",text:"ZvsBIT5pDqFAda_ilPeJ",mainIcon:"main-devicePicker-nowPlayingActiveIcon",rowWrapperHelp:"ajXfdFS_TUChA63kTlhA",rowButtonWrapper:"XaZWrewfHM1YUmghUpMQ",contentWrapper:"main-devicePicker-headingContent",withContextMenu:"vz5TaAerMmRrJGJtWIAw",marqueeWrapper:"main-devicePicker-headingTitle",textWithIconWrapper:"main-devicePicker-headingSubtitle",techIcon:"pkGZOxD6iLgSVCGTPxXn",rowContentWrapper:"d0PEpGug7fpNx6FALPxV",hifiLabel:"tVe2Hsy_8rWNBNf9SwGD",troubleshootingWrapper:"main-devicePicker-troubleshootingList",troubleshootingList:"main-devicePicker-troubleshooting",troubleshootingIcon:"main-devicePicker-troubleshootingItemIcon",troubleshootingSubtitle:"main-devicePicker-troubleshootingItemSubtitle",helpRowContent:"qmaOpgYPMncTetZzlw3T",iconExternalLink:"It1L8Ea9SuMjm2_44q5V",helpText:"g4EIVDYwOM26eyJI2t_P",helpTooltipWrapper:"WkA7K654a3WXw5C6ed7g",helpToolTipContent:"efJDqiDUHmkwgbM3zV6D"}},57174:(e,t,n)=>{n.d(t,{A:()=>i});const i={button:"mFr6W9mwg0p_c7eJlhc_",contextMenuWrapper:"lpPBKkIGJcyWu59iOpsS"}},21568:(e,t,n)=>{n.d(t,{A:()=>i});const i={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",lyricsCinemaVisible:"sgQuNaOh5Eu6vnzh3eoh",nonDisplayedArea:"KJNUWtMTBWtQrmsas64b",Container:"F3qS5Fne4ECzEWyFeJ5S",Controls:"dS_1_x4lBrx_vX9AMg6Q",Content:"mC8gFZzy9ZRO5c61MeuO"}}}]);
//# sourceMappingURL=7639.js.map