"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3322],{69293:(e,t,n)=>{n.d(t,{n:()=>s});var i=n(45237),a=n(27046),o=n(86070);const s=({icon:e,activeIcon:t,label:n,isActive:s,...r})=>(0,o.jsx)(a.Zp,{label:n,children:(0,o.jsx)(i.H,{"aria-label":`${n}, ${s?"selected":"unselected"}, button`,"aria-pressed":s,semanticColor:s?"textBrightAccent":"textSubdued",iconOnly:s?t:e,"aria-haspopup":"menu",size:"small",...r})})},76497:(e,t,n)=>{n.d(t,{t:()=>x});var i=n(41978),a=n(42395),o=n(69533),s=n(41331),r=n(69293),c=n(99490),l=n(87652),d=n(61025),u=n(31352),m=n(30758),p=n(4924),v=n(99186),g=n(78330),b=n(86070);const h=(0,m.memo)((function({onFeedbackReasonSelect:e}){const t=new Map([["not_relevant",s.Ru.get("ad-formats.ad-feedback.dislike.not-relevant")],["too_often",s.Ru.get("ad-formats.ad-feedback.dislike.too-often")],["unpleasant",s.Ru.get("ad-formats.ad-feedback.dislike.unpleasant-content")],["offensive",s.Ru.get("ad-formats.ad-feedback.dislike.offensive-content")],["do_not_like",s.Ru.get("ad-formats.ad-feedback.dislike.do-not-like")]]);return(0,b.jsx)(g.pZ,{value:"dislike-ad",children:(0,b.jsx)(p.W,{children:Array.from(t).map((([t,n])=>(0,b.jsx)(g.pZ,{value:n,children:(0,b.jsx)(v.D,{role:"menuitem","aria-label":n,onClick:()=>e(t,n),children:n})},t)))})})})),x=({item:e})=>{const t=(0,i.wA)(),{logAdFeedback:n}=(0,c.L)(e),m=(0,i.d4)((t=>(0,d.N2)(t,e.id)));return(0,b.jsx)(u.b,{menu:(0,b.jsx)(h,{onFeedbackReasonSelect:(i,a)=>{e.id&&(t((0,l.NI)({adId:e.id,reason:a})),n(`dislike_${i}`))}}),children:(0,b.jsx)(r.n,{item:e,icon:a.P,activeIcon:o.X,label:s.Ru.get("ad-formats.ad-feedback.dislike"),isActive:m,"data-testid":"button-dislike-ad",onClick:()=>{if(e.id){if(m)return t((0,l.vA)({adId:e.id})),void n("cancel_dislike");t((0,l.NI)({adId:e.id})),n("dislike_menu")}}})})}},45828:(e,t,n)=>{n.d(t,{T:()=>x});var i=n(41978),a=n(57256),o=n(66410),s=n(41331),r=n(69293),c=n(99490),l=n(87652),d=n(61025),u=n(31352),m=n(30758),p=n(4924),v=n(99186),g=n(78330),b=n(86070);const h=(0,m.memo)((function({onFeedbackReasonSelect:e}){const t=new Map([["relevant",s.Ru.get("ad-formats.ad-feedback.like.relevant")],["interested_in_brand",s.Ru.get("ad-formats.ad-feedback.like.interested-in-brand")],["interested_in_product",s.Ru.get("ad-formats.ad-feedback.like.interested-in-product")],["enjoyable",s.Ru.get("ad-formats.ad-feedback.like.enjoyable-content")],["discovered_new",s.Ru.get("ad-formats.ad-feedback.like.discovered-new")]]);return(0,b.jsx)(g.pZ,{value:"like-ad",children:(0,b.jsx)(p.W,{children:Array.from(t).map((([t,n])=>(0,b.jsx)(g.pZ,{value:n,children:(0,b.jsx)(v.D,{role:"menuitem","aria-label":n,onClick:()=>e(t,n),children:n})},t)))})})})),x=({item:e})=>{const t=(0,i.wA)(),{logAdFeedback:n}=(0,c.L)(e),m=(0,i.d4)((t=>(0,d.Tt)(t,e.id)));return(0,b.jsx)(u.b,{menu:(0,b.jsx)(h,{onFeedbackReasonSelect:(i,a)=>{e.id&&(t((0,l.F$)({adId:e.id,reason:a})),n(`like_${i}`))}}),children:(0,b.jsx)(r.n,{item:e,icon:a.G,activeIcon:o.q,label:s.Ru.get("ad-formats.ad-feedback.like"),isActive:m,"data-testid":"button-like-ad",onClick:()=>{if(e.id){if(m)return t((0,l.D$)({adId:e.id})),void n("cancel_like");t((0,l.F$)({adId:e.id})),n("like_menu")}}})})}},52301:(e,t,n)=>{n.d(t,{O:()=>d});var i=n(45237),a=n(66537),o=n(41331),s=n(27046),r=n(69798),c=n(57968),l=n(86070);const d=({isDisliked:e=!1,onClick:t=(()=>{}),className:n,size:d="medium",label:u=o.Ru.get("playback-control.ban")})=>{const m=(0,c.y)();return(0,l.jsx)(s.Zp,{label:u,children:(0,l.jsx)(i.H,{role:"switch","aria-label":u,"aria-checked":e,className:n,onClick:t,iconOnly:a.P,size:m===r.E.MEDIUM?d:"small"})})}},84307:(e,t,n)=>{n.d(t,{z:()=>h});var i=n(30758),a=n(97500),o=n.n(a);const s="aYmHu0jEKnESRGVwWKTv";var r=n(86070);function c(){return(0,r.jsx)("div",{"data-popper-arrow":"",className:s})}var l=n(45237),d=n(74554),u=n(41331);const m="MRzne1iuLfbh7KEwhHOk";function p({onClick:e}){return(0,r.jsx)(l.H,{size:"small",onClick:e,iconOnly:d.M,"aria-label":u.Ru.get("close"),className:m})}const v="dixACKl18S755OnSdpna",g="IPdLO850RGC7isV9QxWB",b="S7PfnpeKtq9MCSrMhifz",h=(0,i.forwardRef)((({onClose:e,children:t,shouldCloseOnEscapePress:n=!0,colorSet:a="encore-announcement-set",maxWidth:s=180,header:l},d)=>((0,i.useEffect)((()=>{const t=t=>{n&&"Escape"===t.key&&e()};return window.addEventListener("keydown",t,!0),()=>{window.removeEventListener("keydown",t,!0)}}),[n,e]),(0,r.jsxs)("div",{ref:d,className:o()(a,v,{[g]:!!l}),style:{maxWidth:`${s}px`},children:[!!l&&(0,r.jsxs)("div",{className:b,children:[l," ",(0,r.jsx)(p,{onClick:e})]}),t,l?null:(0,r.jsx)(p,{onClick:e}),(0,r.jsx)(c,{})]}))))},83570:(e,t,n)=>{n.d(t,{E:()=>l});var i=n(30758),a=n(3956),o=n(39733),s=n(97363),r=n(19019),c=n(86070);function l({children:e,content:t,offset:n,placement:l,isVisible:d}){const u=(0,i.useRef)(null),m=(0,o.NC)(r.zJD),p=d&&m,v=(0,i.useRef)(null);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{role:"presentation",ref:u,children:e}),p&&(0,c.jsx)(a.Ay,{visible:!0,interactive:!0,aria:{expanded:!0},arrow:!0,placement:l,offset:n,appendTo:s.D,reference:u,onShow:e=>{e.reference.setAttribute("data-open","true")},onHide:e=>{e.reference.removeAttribute("data-open")},render:e=>(0,c.jsx)("div",{ref:v,"data-placement":e["data-placement"],"data-testid":"popover",children:t}),popperOptions:{modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport",altAxis:!0,padding:10,tether:!1}},{name:"arrow",options:{padding:10}}]}})]})}},26347:(e,t,n)=>{n.d(t,{NowPlayingBar:()=>Da});var i=n(30758),a=n(41978),o=n(94079),s=n(85745),r=n(15231),c=n(74946),l=n(41331),d=n(24853);const u="dz_h98rH9nZCwfPdnKgr",m="rAfV2jB_HMM9Xtr0Rqvn",p="XkXPpDRWozMF6G8_GlLQ";var v=n(86070);const g=i.memo((function(e){const{handleClick:t}=e,n=(0,a.d4)(d.q),i=l.Ru.get("pta.bottom-bar.title"),o=l.Ru.get("fta.bottom-bar.subtitle"),s=l.Ru.get("fta.sign-up-free");return(0,v.jsxs)("div",{className:u,onClick:t,"data-testid":"signup-bar",children:[(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)(r.E,{as:"p",variant:"bodySmallBold",children:i}),(0,v.jsx)(r.E,{as:"p",variant:"bodyMedium",dangerouslySetInnerHTML:{__html:n?l.Ru.get("fta.bottom-bar.subtitle-two"):o}})]}),(0,v.jsx)(c.$,{colorSet:"invertedLight",onClick:t,className:p,children:n?l.Ru.get("mwp.d2p.modal.cta"):s})]})}));var b=n(97500),h=n.n(b),x=n(82063),f=n(58394),k=n(62198),y=n(68341),C=n(39356),j=n(75360),N=n(78487);const w="gqYYMz8DkhaT3e44LcHQ",I="VX33mI2V_jRA7hRBI9_0",A=({remoteDeviceName:e,remoteDeviceType:t,connectionStatus:n,omitConnectionStateText:i=!1})=>{const{spec:a,logger:o}=(0,N.r)(f.s,{}),{triggerRef:s,toggleDevicePicker:c,isPickerOpen:d}=(0,y.z)(),u=(0,C.$A)(t,n),m=n===j.zP.CONNECTED?l.Ru.get("web-player.connect.bar.connected-state",{device_name:e}):l.Ru.get("web-player.connect.bar.connecting-state",{device_name:e});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u,{size:"small",className:I,role:"presentation",semanticColor:"essentialBase"}),(0,v.jsx)(x.Y,{component:"button",onClick:()=>{const e=a.activeDeviceButtonFactory(),{interactionId:t}=o.logInteraction(d?e.hitUiHide():e.hitUiReveal()),n=d;c(t),n||(0,k.I)("DEVICE-PICKER")},ref:s,className:w,children:(0,v.jsx)(r.E,{variant:"bodySmallBold","aria-live":"polite",semanticColor:"textBase",children:i&&n===j.zP.CONNECTED?e:m})})]})},T="nQSM_BrSHJ4Cp3XSuLOF",S=()=>(0,v.jsxs)("svg",{width:"1",height:"16",viewBox:"0 0 1 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"separator",className:T,children:[(0,v.jsx)("g",{id:"separator",clipPath:"url(#clip0_491_88335)",children:(0,v.jsx)("rect",{id:"Rectangle 111112858",width:"1",height:"16",rx:"0.5",fill:"var(--essential-base)"})}),(0,v.jsx)("defs",{children:(0,v.jsx)("clipPath",{id:"clip0_491_88335",children:(0,v.jsx)("rect",{width:"1",height:"16",fill:"white"})})})]});var E=n(36720),P=n(59293),D=n(57171),R=n(67221),B=n(59677);var O=n(80451);const L="UWuPbrFbZar0lIcBFH31",F="wFkvSGFYuw6rhfwWWYWC",_=()=>{const{currentSession:e}=(0,O.D)(),t=(0,a.d4)((({session:e})=>e.user?.id)),{logJamNameClick:n}=(()=>{const{spec:e,logger:t}=(0,N.r)(R.V,{});return{logJamNameClick:(0,i.useCallback)((()=>{const n=e.jamNameFactory().hitUiNavigate({destination:(0,B.K7)().toURI()});t.logInteraction(n)}),[t,e])}})(),{openQueue:o}=(0,E.R)(),s=(0,i.useCallback)((()=>{n(),o()}),[n,o]);if(!e?.active)return null;const c=e.sessionMembers.find((({id:t})=>t===e.sessionOwnerId)),d=(0,D.t)(e,t,{userFirst:!0});return(0,v.jsxs)("div",{className:L,children:[(0,v.jsx)(P.g,{users:d,dropShadow:!0,size:"small"}),(0,v.jsx)(x.Y,{className:F,onClick:s,semanticColor:"textBase",tabIndex:0,standalone:!0,children:(0,v.jsx)(r.E,{variant:"bodySmallBold",children:l.Ru.get("web-player.social-connect.session-info.title",{host:c?.displayName??""})})})]})};var U=n(13023),M=n(29615),z=n(30912);const V="main-connectBar-connectBar",H="main-connectBar-connected",Q="main-connectBar-connecting",K=function(){const{isPlayingRemotely:e,connectionStatus:t,remoteDeviceName:n,remoteDeviceType:i}=(0,M.v)((e=>{const t=(0,U.V)(e);return{isPlayingRemotely:t.isPlayingRemotely,connectionStatus:t.connectionStatus,remoteDeviceName:t.remoteDevice?.name,remoteDeviceType:t.remoteDevice?.type}}),z.a),{currentSession:a}=(0,O.D)(),o=Boolean(a?.active),s=e&&n&&i;if(!s&&!o)return null;const r=t===j.zP.CONNECTED||o,c=t===j.zP.CONNECTING&&!o;return(0,v.jsxs)("div",{className:h()(V,{"encore-bright-accent-set":r,[H]:r,[Q]:c}),children:[o&&(0,v.jsx)(_,{}),o&&s&&(0,v.jsx)(S,{}),s&&(0,v.jsx)(A,{connectionStatus:t,remoteDeviceName:n,remoteDeviceType:i,omitConnectionStateText:o})]})},q=()=>(0,v.jsx)(i.Suspense,{fallback:null,children:(0,v.jsx)(K,{})});var W=n(11892),G=n(39733),Y=n(55358),Z=n(8543),X=n(36131),J=n(79697),$=n(70292),ee=n(16782),te=n(98471),ne=n(49151);const ie=({className:e="",disabledClassName:t="",onClick:n})=>{const o=(0,$.lZ)(),s=(0,i.useContext)(J.s),r=(0,ne.o)((e=>e?.hasContext??!1)),c=(0,a.wA)(),d=!r,u=(0,i.useCallback)((async()=>{s?.current&&(n?.(!0),c((0,X.f)()),(0,te.X8)(s.current))}),[c,s,n]),m=h()(e,{[t]:d});return o?(0,v.jsx)(ee.f,{onToggle:u,className:m,icon:Z.L,label:l.Ru.get("npv.full-screen"),disabled:d,testId:"fullscreen-mode-button"}):null},ae=(0,i.memo)(ie);var oe=n(52690),se=n(71208),re=n(80320),ce=n(27046);function le(e,t,n){let i;return i=t===j.zP.CONNECTING?e.connectingButtonFactory():t===j.zP.CONNECTED?e.connectedButtonFactory():e.notConnectedButtonFactory(),n?i.hitUiHide():i.hitUiReveal()}var de=n(45237),ue=n(74554);const me="YXmoVBUuxZBY8Hh5GKjE",pe="T5ZnRxyz77bA1OMH61wo",ve="VLyyIUlq5U8KjKAcs9QA",ge="S8k0V5C_z3AUnCUaJKBg",be=({onClose:e,onActionButtonClick:t,onMouseEnter:n,onMouseLeave:i,message:a,title:o,users:s})=>(0,v.jsxs)("div",{className:me,onMouseEnter:n,onMouseLeave:i,children:[(0,v.jsxs)("div",{className:pe,children:[s.length>0&&(0,v.jsx)(P.g,{users:s}),(0,v.jsx)(r.E,{as:"p",variant:"bodyMediumBold",semanticColor:"textBase",className:ve,children:o}),(0,v.jsx)(de.H,{iconOnly:ue.M,size:"small",semanticColor:"textBase",onClick:e,"aria-label":l.Ru.get("close")})]}),(0,v.jsx)(r.E,{id:"nudgeBody",as:"p",variant:"bodySmall",semanticColor:"textBase",children:a}),(0,v.jsx)("div",{className:ge,children:(0,v.jsx)(c.$,{colorSet:"invertedLight",size:"small",onClick:t,children:l.Ru.get("web-player.social-connect.join-modal.button-primary")})})]}),he="xP7v0EBcbJMj1xIJxywg",xe="zJU_lLLzQL6oKvMA0c5b",fe=({onClose:e,onMouseEnter:t,onMouseLeave:n,onClick:i,impressionCallback:a,message:o})=>(0,v.jsxs)("div",{className:he,onMouseEnter:t,onMouseLeave:n,ref:a,onClick:i,children:[(0,v.jsx)(r.E,{id:"nudgeBody",as:"p",variant:"bodyMedium",semanticColor:"textBase",children:o}),(0,v.jsx)(de.H,{iconOnly:ue.M,size:"small",semanticColor:"textBase",onClick:t=>{t.stopPropagation(),e?.()},"aria-label":l.Ru.get("close"),className:xe})]});var ke=n(34967),ye=n(80745);const Ce=(e=ke.C)=>{const t=(0,a.Pj)(),{isActive:n}=e(),i=(0,ye.h)();return document.hasFocus()&&!n&&!(({ui:e,ads:t},n)=>e.blockUserDialog.isOpen||e.connectDevicePicker.isOpen||e.deleteFolderDialog.isOpen||e.deletePlaylistDialog.isOpen||e.fullscreenMode.isOpen||e.improvedSignupPromptDialog.isOpen||e.keyboardShortcutsHelpModal.isOpen||e.leavePlaylistDialog.isOpen||e.loginToListenDialog.isOpen||e.offlineDeviceLimitReachedDialog.isOpen||e.playbackNotSupportedErrorDialog.isOpen||e.premiumDialog.isOpen||e.signupToListenDialog.isOpen||!0===t.billboard?.isOpen&&!t.billboard.isMinimized||!1===t.vto?.isHidden&&!1===t.vto?.isMinimized||n)(t.getState(),i.current.length>0)};var je=n(29946);const Ne=e=>Boolean(e?.supportsDJNarration);var we=n(15666),Ie=n(53420),Ae=n(73706),Te=n(89035);function Se(){return(0,Te.N)(Ae.h)}var Ee=n(72452),Pe=n(90650),De=n(69180),Re=n(79124),Be=n(21338),Oe=n(82387),Le=n(4355);const Fe="spotify:playlist:37i9dQZF1EYkqdzj48dyYq",_e=e=>{const t=(0,i.useRef)(),n=(0,i.useRef)(),a=(0,i.useRef)(!1),o=(0,De.z)(),s=(0,Ie.e)(),r=Se(),c=(0,G.NC)(Le.vF),{spec:d,logger:u}=(0,N.r)(je.w,{}),m=(0,i.useRef)(null),p=(0,i.useCallback)((()=>{u.logInteraction(d.djVoiceUnsupportedNudgeFactory().closeButtonFactory().hitUiHide())}),[d,u]),v=(0,i.useCallback)((e=>{e&&m.current!==e&&u.logImpression(d.djVoiceUnsupportedNudgeFactory().impression()),m.current=e}),[d,u]),g=(0,i.useCallback)((()=>{const e=o.getState();if(c){const t=r.getActiveDevice();return!(e=>e?.isLocal??!1)(t)&&(0,Oe.yc)(e,Fe)!==Be.i.NOT_ACTIVE&&!Ne(t??void 0)}const t=s.getState();return!(e=>e?.connectionStatus===j.zP.NOT_CONNECTED)(t)&&(0,Oe.yc)(e,Fe)!==Be.i.NOT_ACTIVE&&!Ne(t?.activeDevice??void 0)}),[o,c,s,r]),b=(0,i.useCallback)((()=>{g()&&e({nudgeType:"message-only-nudge",message:l.Ru.get("web-player.connect.nudge.dj-voice-unavailable"),onClose:p,impressionCallback:v})}),[e,g,p,v]),h=(0,i.useCallback)((e=>{e.data.action===Pe.Ik.PLAY&&(a.current=!0)}),[]);(0,Re.p)(Pe.gd.ACTION,h);const x=(0,i.useCallback)((e=>{a.current&&(0,Oe.uW)(e.data)===Be.i.PLAYING&&(t.current=e.data?.context.uri,b(),t.current=void 0,a.current=!1)}),[b]);(0,Re.p)(Pe.gd.UPDATE,x);const f=(0,i.useCallback)((e=>{const t=e.data?.activeDevice;t&&!t.isLocal&&n.current!==t.connectStateId&&b(),n.current=t?.connectStateId}),[b]);(0,Ee.W)(we.P.UPDATE,f)};var Ue=n(30213);const Me=e=>{switch(e.type){case j.bq.AUDIO_DONGLE:case j.bq.AVR:case j.bq.CAST_AUDIO:case j.bq.CAST_VIDEO:case j.bq.GAME_CONSOLE:case j.bq.SPEAKER:case j.bq.STB:case j.bq.TV:return!0;default:return!1}},ze=e=>!e||!(e.terminalType===Ue.FI.HEADPHONES||e.terminalType===Ue.FI.SPEAKERS&&(e.transportType===Ue.Yg.BLUETOOTH||e.transportType===Ue.Yg.USB));var Ve=n(53888),He=n(31754),Qe=n(82535);const Ke=new Date(0).toISOString(),qe=["shift+alt+f10"],We=e=>{const t=(0,i.useRef)(),n=(0,i.useRef)(!1),o=(0,i.useRef)(!1),s=(0,a.Pj)(),r=(0,De.z)(),c=(0,Ie.e)(),d=Se(),u=(0,He.V)(),[m,p]=(0,Qe.x)("connect-nudge-triggered-at",Ke),v=(0,i.useRef)(null),{spec:g,logger:b}=(0,N.r)(je.w,{}),h=(0,G.NC)(Le.vF),x=(0,i.useCallback)((()=>{b.logInteraction(g.connectFromDevicePickerNudgeFactory().hitNoAction())}),[g,b]),f=(0,i.useCallback)((()=>{b.logInteraction(g.connectFromDevicePickerNudgeFactory().closeButtonFactory().hitUiHide())}),[g,b]),k=(0,i.useCallback)((e=>{e&&v.current!==e&&b.logImpression(g.connectFromDevicePickerNudgeFactory().impression()),v.current=e}),[g,b]);(0,Ve.f)(qe,(async()=>{const{platform:{isDeveloperMode:e}}=s.getState();if(e){const e=new Date;e.setHours(e.getHours()-8),p(e.toISOString())}}));const y=(0,i.useCallback)((()=>{const e=r.getState(),t=c.getState(),n=d.getActiveDevice(),i=d.getDevices(),a=u.getDefaultDevice(),o=new Date(m);o.setHours(o.getHours()+8);const s=o<=new Date;return h?s&&(e=>e?.isLocal??!1)(n)&&!(0,Oe.A3)(e)&&(e=>e.some((e=>e.isLocalNetwork&&!e.isDisabled&&Me(e))))(i)&&ze(a):s&&(e=>e?.connectionStatus===j.zP.NOT_CONNECTED)(t)&&!(0,Oe.A3)(e)&&(e=>!!e?.devices.length&&e.devices.some((e=>e.isLocalNetwork&&!e.isDisabled&&Me(e))))(t)&&ze(a)}),[r,c,u,m,h,d]),C=(0,i.useCallback)((()=>{if(y()){e({nudgeType:"message-only-nudge",message:l.Ru.get("web-player.connect.nudge.listen-to-speaker"),impressionCallback:k,onClick:x,onClose:f});const t=(new Date).toISOString();p(t)}}),[e,y,p,x,f,k]),w=(0,i.useCallback)((e=>{e.data.action===Pe.Ik.PLAY?n.current=!0:e.data.action===Pe.Ik.RESUME&&(o.current=!0)}),[]);(0,Re.p)(Pe.gd.ACTION,w);const I=(0,i.useCallback)((e=>{n.current&&(0,Oe.uW)(e.data)===Be.i.PLAYING?(t.current=e.data?.context.uri,C(),t.current=void 0,n.current=!1):o.current&&!1===e.data?.isPaused&&(t.current=e.data?.context.uri,C(),t.current=void 0,o.current=!1)}),[C]);(0,Re.p)(Pe.gd.UPDATE,I)},Ge=e=>{We(e),_e(e)},Ye=()=>{const e=(0,i.useRef)(),t=(0,i.useRef)(!1),n=(0,i.useRef)(!1),o=(0,a.wA)(),s=(0,a.d4)((e=>e.ui.connectNudge.isOpen)),r=(0,a.d4)((e=>e.ui.connectDevicePicker.isOpen)),c=(0,i.useCallback)((()=>{n.current&&(clearTimeout(e.current),n.current=!1),o((0,X.Yp)())}),[o]),l=(0,i.useCallback)((()=>{n.current=!1,t.current||c()}),[c]),d=(0,i.useCallback)((()=>{e.current=window.setTimeout(l,8e3),o((0,X.dK)()),n.current=!0}),[o,l]),u=(0,i.useCallback)((e=>{t.current=e,e||n.current||c()}),[c]);return(0,i.useEffect)((()=>{r&&c()}),[r,c]),(0,i.useMemo)((()=>({hideNudge:c,showNudge:d,setShouldKeepShowingNudge:u,isNudgeVisible:s})),[c,d,u,s])},Ze=({children:e,useNudgeTriggers:t=Ge,useToggleNudgeWithTimer:n=Ye,useCanShowNudge:a=Ce,disabled:o=!1})=>{const{showNudge:s,hideNudge:r,setShouldKeepShowingNudge:c,isNudgeVisible:l}=n(),[d,u]=(0,i.useState)(null),m=a();(0,i.useEffect)((()=>{l&&!m&&r()}),[m,r,l]),t((e=>!(l||!m)&&(u(e),s(),!0)));const p=(0,i.useCallback)((e=>{if(!e)return(0,v.jsx)(v.Fragment,{});const t=()=>{d?.onClose?.(),r()};return"join-listening-session-nudge"===e.nudgeType?(0,v.jsx)(be,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClose:t,...e}):(0,v.jsx)(fe,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClose:t,...e})}),[r,d,c]);return(0,v.jsx)(se.W,{maxWidth:"join-listening-session-nudge"===d?.nudgeType?450:void 0,placement:"top",visible:Boolean(d?.message)&&l&&!o,overlay:p(d),popperOptions:{modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport",altAxis:!0,padding:24,tether:!1}}]},onHide:()=>{},fadeOut:!0,useLazyMounting:!0,children:e})},Xe="DMWoYmJsYdFjGQbeGH9Q",Je="wff4Xp9vQFpx18x9Bb_S",$e="tP4heMeFAePYaWK7l2Kd",et="UYKUvqBDvaGU1DVMROXP",tt="zXVFptGLwJ7Ss396ADNn",nt="cK7qggtY22OBs0bw4PUh",it="device-picker-icon-button",at=(0,i.forwardRef)((({isPickerOpen:e,onLogInteraction:t,onClick:n,showIndicatorTriangle:i=!1},o)=>{const{spec:s,logger:r}=(0,N.r)(re.p,{}),c=(0,a.d4)((e=>e.ui.connectNudge.isOpen)),{remoteDeviceType:d,remoteDeviceIsGroup:u,connectionStatus:m}=(0,M.v)((e=>{const t=(0,U.V)(e);return{remoteDeviceType:t.remoteDevice?.type,remoteDeviceIsGroup:t.remoteDevice?.isGroup,connectionStatus:t.connectionStatus}}),z.a),p=(0,C.tf)(d,u),g={"encore-bright-accent-set":m===j.zP.CONNECTED,[tt]:m===j.zP.CONNECTED,[et]:m===j.zP.CONNECTING};return(0,v.jsx)(Ze,{children:(0,v.jsx)(ce.Zp,{label:l.Ru.get("playback-control.connect-picker"),disabled:e||c,children:(0,v.jsxs)("div",{className:Je,children:[i&&(0,v.jsx)("div",{className:h()($e,g),"data-testid":"indicator"}),(0,v.jsx)("button",{className:h()("control-button",{"control-button--active":m===j.zP.CONNECTED},Xe),onClick:i=>{const{interactionId:a}=r.logInteraction(le(s,m,e));t?.(a),n?.(i)},ref:o,"aria-label":l.Ru.get("playback-control.connect-picker"),"aria-expanded":e,id:it,children:(0,v.jsx)(p,{className:h()({[nt]:m===j.zP.CONNECTING}),size:"small",role:"presentation"})})]})})})}));var ot=n(73938),st=n(40867),rt=n(34305),ct=n(60143),lt=n(69475),dt=n(86291),ut=n(2869),mt=n(10945);const pt=({tooltipTriggerId:e})=>{const t=(0,U.l)(),{toggleDevicePicker:n}=(0,y.z)(),o=(0,ot.pG)({data:{identifier:ot.gw.FLYOUT}});(0,i.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n]);const{devices:s,currentDevice:r}=(0,lt.l)(),c=(0,a.d4)((e=>e.playback?.castState??window.cast?.framework.CastState.NO_DEVICES_AVAILABLE)),l=(0,dt.Or)(c),{isPlaying:d}=(0,ut.GK)();return(0,v.jsx)(st.z,{className:h()(mt.A.tooltip,t&&mt.A.isConnectBarVisible),arrowClassName:mt.A.hiddenTooltipArrow,disableAutoFocus:!0,children:(0,v.jsxs)("div",{"aria-labelledby":e,className:mt.A.tooltipContent,children:[(0,v.jsx)(ct.a,{deviceId:r.id,connectStateDeviceId:r.connectStateId,isLocalDevice:r.isLocal,deviceName:r.name,deviceType:r.type,isGroup:r.isGroup,supportsHiFi:r.losslessSupport.fullySupported,canLogout:!r.isLocalNetwork&&r.supportsLogout,incarnation:r.incarnation,isPlaying:d,spec:o}),(0,v.jsx)(rt.f,{devices:s,areWebPlayerCastDevicesAvailable:l,spec:o})]})})};var vt=n(45485);const gt=()=>{const{triggerRef:e,toggleDevicePicker:t,isPickerOpen:n}=(0,y.z)(),a=(0,i.useRef)(null),o=(0,i.useCallback)((()=>{t()}),[t]),s=[a.current,e.current].filter(vt.P);return(0,v.jsx)(se.W,{animation:!1,overlay:(0,v.jsx)(pt,{tooltipTriggerId:it}),visible:n,onHide:o,offset:[0,12],placement:"top",theme:"device-picker",useLazyMounting:!0,renderInline:!0,triggerTarget:s,aria:{expanded:!1},keepChildrenMounted:!0,popperOptions:{modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport",altAxis:!0,padding:10,tether:!1}}]},children:(0,v.jsx)(at,{ref:a,isPickerOpen:n,onLogInteraction:e=>{t(e)}})})};var bt=n(59931);const ht=()=>{const{remoteDeviceType:e,remoteDeviceIsGroup:t,connectionStatus:n}=(0,M.v)((e=>{const t=(0,U.V)(e);return{remoteDeviceType:t.remoteDevice?.type,remoteDeviceIsGroup:t.remoteDevice?.isGroup,connectionStatus:t.connectionStatus}}),z.a),a=(0,bt.g)(),{canTogglePanel:o,isActive:s,togglePanel:r}=(0,ke.C)(),{spec:c,logger:d}=(0,N.r)(re.p,{}),u=(0,i.useCallback)((()=>{const{interactionId:e}=d.logInteraction(le(c,n,s));r(e)}),[n,r,s,c,d]),{currentDevice:m}=(0,lt.l)(),{isLocal:p}=m,g=(0,i.useMemo)((()=>(0,C.tf)(e,t,p?a:null)),[a,p,t,e]);return(0,v.jsx)(Ze,{children:(0,v.jsx)(ee.f,{isActive:s,disabled:!o,onToggle:u,label:l.Ru.get("playback-control.connect-picker"),icon:g})})};var xt=n(61190),ft=n(71349),kt=n(17504),yt=n(20078),Ct=n(22594),jt=n(84307),Nt=n(83570),wt=n(83650);const It="A8ETvbaffbfWsxJDy_OW",At="yQQ8ZWvoqRXw2oHD1OJR",Tt=({children:e})=>(0,v.jsx)("div",{className:It,children:e}),St=({onHide:e})=>{const t=(0,kt._Y)();return(0,v.jsxs)(Tt,{children:[(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.enhance-headphones")}),(0,v.jsxs)("div",{className:At,children:[(0,v.jsx)(de.H,{semanticColor:"textSubdued",onClick:e,condensedAll:!0,size:"small",children:l.Ru.get("web-player.puffin.upsell.enhance-headphones.cancel")}),(0,v.jsx)(c.$,{colorSet:"invertedLight",onClick:()=>{t(yt.$S.PUFFIN_START_ACTIVATION),e()},size:"small",children:l.Ru.get("web-player.puffin.upsell.enhance-headphones.confirm")})]})]})};var Et=n(53970);const Pt=()=>{const{deviceFilterState:{audioDevice:e}}=(0,Et.j)();if(!e)return null;const t=e.transportType===Ue.Yg.BLUETOOTH?e.name:l.Ru.get("web-player.puffin.wired-connection");return(0,v.jsx)(Tt,{children:(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.optimized-for",t)})})},Dt=({hasDevice:e})=>(0,U.l)()?(0,v.jsx)(Tt,{children:(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.enhanced-listening")})}):e?(0,v.jsx)(Tt,{children:(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.enhanced-headphones")})}):(0,v.jsx)(Tt,{children:(0,v.jsx)(r.E,{variant:"bodyMedium",children:l.Ru.get("web-player.puffin.upsell.lossless-listening")})});var Rt=n(91753);const Bt=({state:e,hasDevice:t,onHide:n})=>{switch(e){case"detection":return(0,v.jsx)(St,{onHide:n});case"initial":return(0,v.jsx)(Dt,{hasDevice:t});case"filters_applied":return(0,v.jsx)(Pt,{});default:(0,Rt.k)(e)}return null};var Ot=n(49155);var Lt=n(45323);const Ft=({children:e,onVisibilityChange:t})=>{const{isPuffinPanelActive:n}=(0,Lt.c)(),[a,o]=(0,i.useState)("none"),[s,r]=(0,Qe.x)("onboarding-dismissed:puffin",{}),{deviceFilterState:c,isMaybeHeadphoneDevice:l}=(0,Et.j)(),d=(0,i.useRef)(c.audioDevice),u=(0,Ot.N)().getSavedDevices().length>0;(0,i.useEffect)((()=>{if(c.audioDevice&&d.current?.id!==c.audioDevice.id){if(d.current=c.audioDevice,n||c.audioDevice.terminalType!==Ue.FI.HEADPHONES)return;s[c.audioDevice.id]&&!(s[c.audioDevice.id]<3)||c.isOnboarded?(c.currentState.externalizationEnabled||c.currentState.specificEnabled)&&o("filters_applied"):(s[c.audioDevice.id]||r({...s,[c.audioDevice.id]:0}),o("detection"))}}),[c,s,n,d,r]);const m=(0,i.useCallback)((()=>{o("none")}),[]),p=(0,i.useCallback)((()=>{if(null!==c.audioDevice){const{id:e}=c.audioDevice;r({...s,[e]:(s[e]??0)+1})}}),[c.audioDevice,s,r]);(0,i.useEffect)((()=>{if("detection"!==a){const e=setTimeout(m,5e3);return()=>clearTimeout(e)}return()=>{}}),[m,a]),(0,i.useEffect)((()=>{u||s||o("initial")}),[u,s,o]),(0,i.useEffect)((()=>{!n&&l||m()}),[m,n,r,l]);const g="none"!==a;return(0,i.useEffect)((()=>{t(g)}),[g,t]),(0,v.jsx)(Nt.E,{isVisible:g,placement:"top-start",content:g?(0,v.jsx)(jt.z,{onClose:m,maxWidth:287,header:(0,v.jsx)(wt.s,{variant:"bodyMediumBold"}),children:(0,v.jsx)(Bt,{state:a,hasDevice:l,onHide:()=>{p(),m()}})}):null,children:e})};var _t=n(20774),Ut=n(19019);const Mt=yt.$S.PUFFIN_BUTTON_CLICK,zt=yt.$S.DEVICE_PICKER_BUTTON_CLICK,Vt=()=>{const{togglePuffin:e,isPuffinPanelActive:t}=(0,_t.c)(),{isActive:n,panelSend:a}=(0,kt.AI)(Ct.Z.DevicePicker,Ct.Z.DevicePickerOverlay),[o,s]=(0,i.useState)(!1),r=(0,kt.Ev)(Mt),c=(0,G.NC)(Ut.VUN),{remoteDeviceType:d,remoteDeviceisGroup:u}=(0,M.v)((e=>{const t=(0,U.V)(e);return{remoteDeviceType:t.remoteDevice?.type,remoteDeviceisGroup:t.remoteDevice?.isGroup}}),z.a),m=(0,bt.g)(),p=m?.audioDevice.terminalType===Ue.FI.HEADPHONES,g=(()=>{const{deviceFilterState:e}=(0,Et.j)();return e.currentState.externalizationEnabled||e.currentState.specificEnabled})(),b=c&&n||t,h=g||p,{currentDevice:x}=(0,lt.l)(),{isLocal:f}=x,y=(0,i.useMemo)((()=>g?xt.C:c?(0,C.tf)(d,u,f?m:null):ft.r),[m,g,c,u,d,f]);return(0,v.jsx)(Ze,{disabled:o,children:(0,v.jsx)(Ft,{onVisibilityChange:s,children:(0,v.jsx)(ee.f,{isActive:b,isActiveNoIndicator:h,onToggle:c?()=>{const e=n;a(zt),e||(0,k.I)("DEVICE-PICKER")}:e,label:c?l.Ru.get("playback-control.connect-picker"):l.Ru.get("web-player.puffin.button.enhanced-listening"),icon:y,disabled:!r,restoreFocusKey:t?Ct.Z.Puffin:Ct.Z.DevicePicker})})})};var Ht=n(33234),Qt=n(99559);const Kt=()=>{const{isAnonymous:e}=(0,a.d4)(Qt.Ht),t=(0,Ht.v)();return e?null:(0,v.jsx)(oe.u,{property:Ut.VUN,renderNewExperience:()=>t?(0,v.jsx)(i.Suspense,{fallback:null,children:(0,v.jsx)(Vt,{})}):(0,v.jsx)(ht,{}),renderOldExperience:()=>(0,v.jsxs)(v.Fragment,{children:[t&&(0,v.jsx)(i.Suspense,{fallback:null,children:(0,v.jsx)(Vt,{})}),(0,v.jsx)(gt,{})]})})};var qt=n(32624),Wt=n(38063),Gt=n(10423),Yt=n(70923);const Zt=i.memo((({onClick:e,className:t,isActive:n,isEnabled:i})=>{const a=i?l.Ru.get("web-player.lyrics.title"):l.Ru.get("web-player.lyrics.noLyrics1"),o=i?e:void 0;return(0,v.jsx)(ee.f,{className:t,isActive:n,onToggle:o,disabled:!i,label:a,testId:"lyrics-button",icon:qt.q})})),Xt=i.memo((e=>{const t=Boolean((0,Yt.J)().data?.hasLyrics);return(0,v.jsx)(Zt,{...e,isEnabled:t,isActive:!1})})),Jt=i.memo((e=>{const t=(0,ne.o)((e=>e?.item?.uri)),n=Boolean((0,Gt.f)(t).hasLyrics);return(0,v.jsx)(Zt,{...e,isEnabled:n,isActive:!1})})),$t=i.memo((e=>{const{isActive:t}=(0,Wt.$)(),{isAnonymous:n}=(0,a.d4)(Qt.Ht),i=(0,G.NC)(Ut.khs),o=(0,ne.o)((e=>{if(e?.item?.uri&&(0,B.U_)(e?.item?.uri)){return!Boolean(e?.item?.metadata?.["segment.index"])}return!1}));return n||!o?null:t?(0,v.jsx)(Zt,{...e,isActive:!0,isEnabled:!0}):i?(0,v.jsx)(Xt,{...e}):(0,v.jsx)(Jt,{...e})}));var en=n(80038);const tn=({onClick:e,className:t})=>{const{toggleLyrics:n}=(0,en.A)({onChange:e,referrer:"now_playing_bar"});return(0,v.jsx)($t,{onClick:n,className:t})};var nn=n(31477),an=n(40913),on=n(6936),sn=n.n(on),rn=n(42252);const cn="Cffu0OWzcoGaMWSXoGsq",ln="L5PLOiBhdFNjs4FEu8ln",dn=Date.now()-6912e5,un=i.memo((function({children:e}){const[t,n]=(0,i.useState)(!1),[a,o]=(0,Qe.x)("npv-onboarding-dismissed-time",dn),[s,c]=(0,Qe.x)("npv-onboarding-never-show-again",!1),d=(0,i.useCallback)((()=>{rn.h.set((()=>({triggerId:null,triggerAction:null}))),o(Date.now()),c(t)}),[t,o,c]),u=(0,i.useCallback)((e=>{const t=e.currentTarget.checked;n(t)}),[]),m=sn()(l.Ru.get("web-player.now-playing-view.onboarding.description"),{transform:{b:e=>(0,v.jsx)(r.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:e.children})}});return(0,v.jsx)(rn.U,{id:"npv-onboarding",className:cn,options:{isCTA:!0,getTitle:()=>l.Ru.get("web-player.now-playing-view.onboarding.title"),getDescription:()=>m,primaryButtonText:()=>l.Ru.get("web-player.now-playing-view.onboarding.dismiss"),checkboxText:()=>l.Ru.get("web-player.now-playing-view.onboarding.do-not-show-again"),placement:"top-end",tippyWrapperClassName:ln,shouldHideOnOutsideClick:()=>!1},onPrimaryButtonClick:d,onCheckboxClick:u,children:e})}));var mn=n(91822);const pn=yt.$S.NPV_BUTTON_CLICK,vn=({onClick:e})=>{const{isActive:t,panelSend:n}=(0,kt.AI)(Ct.Z.NowPlayingView),i=(0,kt.Ev)(pn),{mode:a,setMode:o}=(0,an.r)(),{item:s}=(0,ne.o)((e=>({item:e?.item})),((e,t)=>e.item?.uri===t.item?.uri)),r=!s||!i;return(0,v.jsx)(un,{children:(0,v.jsx)(ee.f,{isActive:t,disabled:r,onToggle:()=>{e?.(!t),n(pn),a===mn.YU.cinema&&o(mn.YU.npv)},icon:nn.d,label:l.Ru.get("web-player.now-playing-view.label"),testId:"control-button-npv",restoreFocusKey:Ct.Z.NowPlayingView})})};var gn=n(77),bn=n(36127),hn=n(11841),xn=n(81389),fn=n(57237),kn=n(98550),yn=n(70816);const Cn=({uri:e,to:t,children:n,onDrop:o,onNavigate:s,className:r})=>{const[c,l]=(0,i.useState)(!1),d=(0,i.useRef)(null),u=(0,gn.Zp)(),m=(0,a.wA)(),p=(0,kn.f)(),g=(0,yn.g)(),b=(0,De.z)(),h=function(e){const t=(0,B.o_)(e),n=(0,a.d4)(Qt.F6);switch(t?.type){case B.NQ.PLAYLIST:case B.NQ.PLAYLIST_V2:{let e;if((0,B.iw)(t)&&(e=t.username),n&&e===n)return[fn.Ay[B.NQ.TRACK],fn.Ay[B.NQ.LOCAL],fn.Ay[B.NQ.ALBUM]];break}case B.NQ.COLLECTION:return[fn.Ay[B.NQ.TRACK],fn.Ay[B.NQ.ALBUM],fn.Ay[B.NQ.ARTIST],fn.Ay[B.NQ.PLAYLIST],fn.Ay[B.NQ.PLAYLIST_V2],fn.Ay[B.NQ.SHOW]];case B.NQ.QUEUE:return[fn.Ay[B.NQ.TRACK],fn.Ay[B.NQ.LOCAL],fn.Ay[B.NQ.EPISODE]];default:return[]}return[]}(e),x=!!h.length;return(0,i.useEffect)((()=>(c?d.current=window.setTimeout((()=>{(0,B.U_)(e)||(s?.(),u(t||(0,B.o_)(e).toURLPath(!0)))}),1e3):!c&&d.current&&clearTimeout(d.current),()=>{d.current&&clearTimeout(d.current)})),[c,e,t,s,u]),x?(0,v.jsx)(xn.A,{types:h,onDrop:t=>{const n=(0,B.o_)(e),i=Array.from(t.dataTransfer.types).find((e=>h.includes(e))),a=i&&t.dataTransfer.getData(i),s=a&&a.split("\n")[0],r=(0,B.o_)(s);if(r&&n)switch(o?.(r.toURI()),n.type){case B.NQ.PLAYLIST:case B.NQ.PLAYLIST_V2:m((0,hn.io)(e,[r.toURI()]));break;case B.NQ.COLLECTION:(0,B._T)(r)||(0,B.ec)(r)||(0,B.U_)(r)?p.add({uris:[r.toURI()]}):(0,B.tb)(r)?g.add([r.toURI()],{before:"start"}):(0,B.WB)(r)&&p.add({uris:[r.toURI()]});break;case B.NQ.QUEUE:b.addToQueue([{uri:r.toURI(),uid:null}])}},onDragEnter:()=>{l(!0)},onDragLeave:()=>{l(!1)},className:r,children:n}):(0,v.jsx)("div",{children:n})};var jn=n(45292);function Nn({style:e,active:t,disabled:n,intent:a,label:o,labelActive:s,icon:r,iconActive:c,className:l,onClick:d}){const[u,m]=(0,i.useState)(!1),p=(0,jn.W)(),g=t&&s?s:o,b=t&&c?c:r;return(0,v.jsx)(ee.f,{style:e,className:l,isActive:t,disabled:n,onToggle:e=>{d?.(),u||e.target.blur(),m(!1),a&&p({type:"click",intent:a,targetUri:""})},onKeyDown:({key:e})=>{"enter"===e.toLowerCase()&&m(!0)},label:g,icon:b,testId:`control-button-${a}`})}var wn=n(13643),In=n(59390);const An=()=>{const{isAnonymous:e}=(0,a.d4)(Qt.Ht),{videoPlayerMode:t}=(0,wn.d)();return e||"cinema"===t?{isVisible:!1}:{isVisible:!0,isEnabled:!0}},Tn=({onClick:e})=>{const{isEnabled:t,isVisible:n}=An(),a=(0,gn.zy)(),o=(0,In.J)(),s=(0,gn.Zp)(),r=(0,i.useMemo)((()=>"/queue"===a.pathname||"/history"===a.pathname),[a.pathname]),c=(0,i.useCallback)((()=>{const t=o.entries?.slice(0,o.index+1)?.reverse()?.findIndex((({pathname:e})=>"/queue"!==e&&"/history"!==e));e({mode:"main",route:null}),s(-1===t?"/":t>=0?-t:-1)}),[s,o,e]),d=(0,i.useCallback)((()=>{e({mode:"main",route:"/queue"}),s("/queue",{state:{referrer:"now_playing_bar"}})}),[e,s]),u=(0,i.useCallback)((()=>{t&&(r?c():d())}),[t,r,c,d]);return n?(0,v.jsx)(Cn,{uri:"spotify:queue",children:(0,v.jsx)(Nn,{intent:"queue",icon:bn.j,label:l.Ru.get("playback-control.queue"),onClick:u,active:r,disabled:!t})}):null},Sn=yt.$S.QUEUE_BUTTON_CLICK,En=({onClick:e})=>{const{isEnabled:t,isVisible:n}=An(),a=(0,kt.Ev)(Sn),{isActive:o}=(0,kt.AI)(Ct.Z.Queue,Ct.Z.QueueOverlay),{toggleQueue:s}=(0,E.R)(),r=(0,i.useCallback)((()=>{t&&(e({mode:"panel",aboutToShow:!o}),s())}),[t,e,o,s]);return n?(0,v.jsx)(Cn,{uri:"spotify:queue",children:(0,v.jsx)(ee.f,{icon:bn.j,label:l.Ru.get("playback-control.queue"),onToggle:r,isActive:o,disabled:!t||!a,testId:"control-button-queue",restoreFocusKey:Ct.Z.Queue})}):null},Pn=({onClick:e})=>(0,G.NC)(Ut.eWj)?(0,v.jsx)(En,{onClick:e}):(0,v.jsx)(Tn,{onClick:e});var Dn=n(94487),Rn=n(20671),Bn=n(30083);const On=({onClick:e})=>{const{item:t}=(0,Rn.L)()??{},{isActive:n,onClick:i,showButton:a}=(0,Bn.D)({item:t,onClick:e});return t&&a?(0,v.jsx)(ee.f,{isActive:n,onToggle:i,label:n?l.Ru.get("miniplayer.close"):l.Ru.get("miniplayer.open"),icon:Dn.F,testId:"pip-toggle-button"}):null};var Ln=n(4103),Fn=n(48783),_n=n(30557);const Un="main-nowPlayingBar-extraControls",Mn="main-nowPlayingBar-lyricsButton",zn="main-nowPlayingBar-volumeBar",Vn=()=>{const e=(0,G.NC)(Ut.yux),{setVideoPlayerUIFlag:t,videoPlayerMode:n}=(0,wn.d)(),{spec:a,logger:o,UBIFragment:s}=(0,N.r)(Y.h9,{data:{identifier:n===Fn.K.cinema?Y.gw.CINEMA:Y.gw.DESKTOP}}),r=(0,W.YQ)((e=>{o.logInteraction(a.volumeBarFactory().dragSetVolume({newVolumePercentage:Math.floor(100*e)}))}),500,{leading:!1,trailing:!0}),c=(0,i.useCallback)((e=>{e&&t(Fn.n.cinema,!1)}),[t]);return(0,v.jsx)(s,{spec:a,children:(0,v.jsxs)("div",{className:Un,children:[(0,v.jsx)(_n.mA,{onClick:()=>{o.logInteraction(a.djJumpButtonFactory().hitRefreshContent())}}),(0,v.jsx)(vn,{onClick:e=>{e?o.logInteraction(a.npvButtonFactory().hitUiReveal()):o.logInteraction(a.npvButtonFactory().hitUiHide())}}),!e&&(0,v.jsx)(tn,{className:Mn,onClick:e=>{e?o.logInteraction(a.lyricsButtonFactory().hitUiNavigate({destination:e})):o.logInteraction(a.lyricsButtonFactory().hitUiNavigateBack())}}),(0,v.jsx)(Pn,{onClick:e=>{"main"===e.mode?e.route?o.logInteraction(a.queueButtonFactory().hitUiNavigate({destination:e.route})):o.logInteraction(a.queueButtonFactory().hitUiNavigateBack()):e.aboutToShow?o.logInteraction(a.queueButtonFactory().hitUiReveal()):o.logInteraction(a.queueButtonFactory().hitUiHide())}}),(0,v.jsx)(Kt,{}),(0,v.jsx)(Ln.M,{className:zn,onVolumeBarClick:e=>{o.logInteraction(a.volumeBarFactory().hitSetVolume({newVolumePercentage:Math.floor(100*e)}))},onToggleMuteClick:e=>{"muted"===e?o.logInteraction(a.volumeMuteButtonFactory().hitMutePlayback()):"not_muted"===e&&o.logInteraction(a.volumeMuteButtonFactory().hitUnmutePlayback())},onVolumeBarDrag:r}),(0,v.jsx)(On,{onClick:c}),(0,v.jsx)(ae,{className:"control-button",disabledClassName:"control-button--disabled",onClick:e=>{e&&o.logInteraction(a.fullscreenButtonFactory().hitUiReveal())}})]})})};var Hn=n(16047),Qn=n(35789),Kn=n(86317);const qn="yyrJTUPMeLS8qs1a0YJr",Wn=({logoUrl:e})=>e?(0,v.jsx)("div",{className:qn,"data-testid":"context-ad-logo",children:(0,v.jsx)(Qn.N,{loading:"eager",imgSrc:e,width:56,height:56,type:Kn.c.AD})}):null;var Gn=n(23942),Yn=n(63774),Zn=n(96851);const Xn=({item:e,context:t,index:n})=>{const{logoImage:i}=(0,Gn.iz)(e);return(0,v.jsx)(Zn.e,{item:e,context:t,index:n,"aria-label":l.Ru.get("ad-formats.advertisement"),adEventReason:Yn.c.AD_LOGO,isVisible:!1,children:(0,v.jsx)(Wn,{logoUrl:i})})};var Jn=n(92265),$n=n(2304),ei=n(61535);const ti=i.memo((function({uri:e,className:t,onClick:n,size:a=$n.t.xs}){const[o,s]=(0,ei.A)(e),r=(0,jn.W)(),c=(0,i.useCallback)((t=>{t.preventDefault(),r({targetUri:e,intent:o?"remove-from-library":"add-to-library",type:"click"}),n&&n(!o),s(!o)}),[r,e,o,n,s]);return(0,v.jsx)($n.M,{className:t,size:a,onClick:c,isAdded:!!o,isAudiobook:!0,condensed:!0})}));var ni=n(44608),ii=n(64294),ai=n(4295);const oi=({uri:e,isBook:t=!1,size:n=$n.t.xs,className:a,onClick:o})=>{const{isPreSaved:s,addPresave:r,removePresave:c}=(0,ai.w)({uri:e,isBook:t}),l=(0,i.useCallback)((()=>{s?c():r(),o?.(!s)}),[s,o,c,r]);return(0,v.jsx)($n.M,{className:a,size:n,onClick:l,isAdded:!!s,isAudiobook:!0,condensed:!0})};var si=n(97074),ri=n(63128),ci=n(89678),li=n(34266),di=n(93720),ui=n(59467),mi=n(83519),pi=n(13357),vi=n(68053),gi=n(40425),bi=n(32415);function hi(e){return(0,bi.v)(e)||(0,gi.p)(e)}var xi=n(68031);const fi="main-nowPlayingWidget-nowPlaying",ki="main-coverSlotCollapsed-navAltContainer",yi="main-nowPlayingWidget-coverArt",Ci="main-nowPlayingWidget-trackInfo",ji="HD9s7U5E1RLSWKpXmrqx",Ni=({onClick:e})=>{const t=(0,Rn.L)(),{draggable:n,onDragStart:i}=(0,xi.P)(),{isActive:a,panelSend:o}=(0,kt.AI)(Ct.Z.NowPlayingView);if(null===t)return null;const{context:s,item:r}=t,c=yt.$S.NPV_BUTTON_CLICK;return(0,v.jsx)(di.h,{menu:(0,v.jsx)(mi.W,{context:s,item:r}),children:(0,v.jsx)("div",{draggable:n&&hi(r),onDragStart:e=>{i(e,{itemUris:[r.uri],dragLabelText:(0,vi.r)(r)})},children:(0,v.jsx)(pi.R,{uri:s.uri,owner:s.metadata?.context_owner,children:(0,v.jsx)("button",{type:"button","data-testid":"cover-art-button",className:ji,"aria-label":l.Ru.get("web-player.now-playing-view.label"),onClick:()=>{o(c),e?.(a)},children:(0,v.jsx)(ui.b,{item:r,size:56,maxSize:56,className:yi})})})})})};var wi=n(83608),Ii=n(38539);const Ai="main-coverSlotCollapsed-container",Ti="main-coverSlotCollapsed-expandButton",Si=yt.$S.NPV_BUTTON_CLICK,Ei=({children:e,className:t})=>{const n=(0,kt.Ev)(Si),{isActive:a}=(0,kt.AI)(Ct.Z.NowPlayingView),o=(0,kt._Y)(),s=(0,i.useMemo)((()=>a?{label:l.Ru.get("npb.collapseCoverArt"),Icon:Ii.r}:{label:l.Ru.get("npb.expandCoverArt"),Icon:wi.o}),[a]);return(0,v.jsxs)("div",{"data-testid":"CoverSlotCollapsed__container",className:h()(Ai,t),children:[e,(0,v.jsx)(ce.Zp,{label:s.label,children:(0,v.jsx)("button",{className:h()(Ti),disabled:!n,onClick:()=>{o(Si)},"aria-label":l.Ru.get("web-player.now-playing-view.label"),"aria-pressed":a,children:(0,v.jsx)(s.Icon,{iconSize:16})})})]})};var Pi=n(40191),Di=n(3413),Ri=n(38291);var Bi=n(90353),Oi=n(64375),Li=n(15339),Fi=n(45339),_i=n(45841),Ui=n(37171),Mi=n(72553);const zi=({context:e,item:t,onLike:n})=>{const i=(0,Li.X)(),a=(0,ri.v)(t);if(i&&(0,Oi.N)(t))return(0,v.jsx)(Bi.o,{contextUri:t.metadata?.context_uri??e.uri,id:t.uid??void 0,uri:t.uri,isActive:!0});if(a)return(0,v.jsx)(si.g,{uri:t.uri,condensed:!1});if((0,bi.v)(t))return t.isLocal?null:(0,v.jsx)(ii.b,{uri:t.uri,className:"control-button control-button-heart",onClick:n});if((0,gi.p)(t))return(0,v.jsx)(ni.b,{uri:t.uri,className:"control-button control-button-heart",onClick:n,condensed:!0});if((0,_i.d)(t)){return"trailer"===t?.metadata?.type&&"true"===t?.metadata?.is_pre_release?(0,v.jsx)(oi,{uri:t.book.uri,isBook:!0,className:"control-button control-button-heart",onClick:n}):(0,v.jsx)(ti,{uri:t.book.uri,className:"control-button control-button-heart",onClick:n})}return(0,Fi.N)(t)||(0,Ui.v)(t)?null:(0,Rt.d)(t)},Vi=({state:{item:e,context:t,index:n}})=>{!function(e){const t=(0,Ri.i)(),n=(0,Di.X)(e);(0,i.useEffect)((()=>{n&&t.say(n)}),[n,t])}(e);const{videoPlayerMode:a,setVideoPlayerUIFlag:o}=(0,wn.d)(),{spec:s,logger:r}=(0,N.r)(Hn.p6,{data:{identifier:a===Fn.K.cinema?Hn.gw.CINEMA:Hn.gw.DESKTOP}}),c=(0,Di.P)(e),l=(0,G.NC)(Ut.WAA),d=(0,Jn.w)(e);(0,i.useEffect)((()=>{o(Fn.n.nowPlayingBar,l)}),[l,o]);const u=a===Fn.K.nowPlayingBar&&l;return(0,v.jsx)(i.Suspense,{fallback:null,children:(0,v.jsxs)("div",{"data-testid":"now-playing-widget",className:fi,role:"contentinfo","aria-label":c,children:[d?(0,v.jsx)(Xn,{item:e,context:t,index:n}):(0,v.jsxs)(Ei,{className:ki,children:[!u&&(0,v.jsx)(Ni,{onClick:t=>{t?r.logInteraction(s.coverartFactory({uri:e.uri}).hitUiReveal()):r.logInteraction(s.coverartFactory({uri:e.uri}).hitUiHide())}}),l&&(0,v.jsx)("div",{id:"VideoPlayerNpb_ReactPortal"})]}),(0,v.jsx)(ci.d,{context:t,className:Ci,item:e,size:"xsmall",enableVideoButton:!0,onTitleClick:t=>{r.logInteraction(s.titleFactory({uri:e.uri}).hitUiNavigate({destination:t||""}))},onSubtitleClick:t=>{r.logInteraction(s.subtitleFactory({uri:e.uri}).hitUiNavigate({destination:t||""}))},referrer:li.G.NPB}),(0,v.jsx)(Pi.a,{context:t,item:e,onClick:()=>{r.logInteraction(s.hideButtonFactory().hitRemoveRecommendation({recommendedItemUri:e.uri,contextUri:t.uri}))}}),(0,v.jsx)(Mi.r,{spec:s,children:(0,v.jsx)(zi,{item:e,onLike:t=>{r.logInteraction(t?s.likeButtonFactory({uri:e.uri}).hitLike({itemToBeLiked:e.uri}):s.likeButtonFactory({uri:e.uri}).hitRemoveLike({itemNoLongerLiked:e.uri}))},context:t})})]})})},Hi=()=>{const e=(0,Rn.L)();return null===e?(0,v.jsx)("div",{className:h()("now-playing")}):(0,v.jsx)(Vi,{state:e})};var Qi=n(47234),Ki=n(28740);const qi="aguQsGoZR9wZeawKGdDh",Wi="ieqOSqJb6kk3bG5XDOHk",Gi=({paused:e,fromSeconds:t})=>{const[n,a]=(0,i.useState)(t);return(0,Ki.$)((t=>{a((n=>e?n:n>0?n-1:(t(),n)))}),1e3),(0,v.jsxs)("div",{className:qi,children:[l.Ru.get("ad-formats.skippable_ads.skip_countdown"),(0,v.jsx)("span",{className:Wi,children:n})]})};var Yi=n(48001);const Zi=({children:e})=>{const t=(0,ne.o)((e=>e),((e,t)=>(0,z.a)(e?.restrictions,t?.restrictions)&&e?.item?.uri===t?.item?.uri&&e?.isPaused===t?.isPaused)),n=t?.restrictions.disallowSkippingNextReasons.includes("ad_disallow"),i=t?.isPaused??!1,o=(0,Yi.qc)(t),s=(0,Yi.Tv)(t),r=(0,a.d4)((e=>o?e?.ads?.audio?.info?.skippableAdDelaySeconds:s?e?.ads?.vto?.info?.skippableAdDelaySeconds:void 0));return n&&r?(0,v.jsx)(Gi,{paused:!!i,fromSeconds:r}):(0,v.jsx)(v.Fragment,{children:e})};var Xi=n(91667),Ji=n(76497),$i=n(45828),ea=n(49029),ta=n(8291),na=n(78193),ia=n(91973),aa=n(37493),oa=n(74883);const sa="player-controls",ra="player-controls__buttons",ca="player-controls__left",la="player-controls__right",da=(0,i.memo)((function({item:e}){const t=e.isPodcastAd;return(0,v.jsxs)("div",{"data-testid":"ad-controls",className:ra,children:[(0,v.jsxs)("div",{className:ca,children:[t&&(0,v.jsx)(oa.w,{}),(0,v.jsx)($i.T,{item:e}),t?(0,v.jsx)(ta.h,{}):(0,v.jsx)(ia.d,{})]}),(0,v.jsx)(ea.x,{}),(0,v.jsxs)("div",{className:la,children:[t?(0,v.jsx)(na.v,{}):(0,v.jsx)(Zi,{children:(0,v.jsx)(aa.$,{})}),(0,v.jsx)(Ji.t,{item:e})]})]})}));var ua=n(4577),ma=n(71002),pa=n(80587),va=n(92375),ga=n(5437),ba=n(70279),ha=n(23090);const xa=(0,i.memo)((function({isPreview:e}){const t=(0,De.z)(),{videoPlayerMode:n}=(0,wn.d)(),{spec:a,logger:o}=(0,N.r)(Qi.kD,{data:{identifier:n===Fn.K.cinema?Qi.gw.CINEMA:Qi.gw.DESKTOP}}),s=(0,ne.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri)),r=(0,Jn.w)(s),c=(0,pa.p)(),d=(0,i.useCallback)(((e,t)=>{switch(t){case"drag":return o.logInteraction(a.progressBarFactory().dragSeekToTime({msToSeekTo:e}));case"hit":return o.logInteraction(a.progressBarFactory().hitSeekToTime({msToSeekTo:e}));default:return(0,Rt.k)(t)}}),[o,a]);return(0,v.jsxs)("div",{className:sa,"data-testid":"player-controls",dir:"ltr","aria-label":l.Ru.get("playback-control.a11y.landmark-label"),children:[r?(0,v.jsx)(da,{item:s}):(0,v.jsxs)("div",{className:ra,"data-testid":"general-controls",children:[(0,v.jsxs)("div",{className:ca,children:[c&&(0,v.jsx)(oa.w,{onClick:e=>{const n=t.getState();n?.item&&o.logInteraction(a.speedControlButtonFactory().hitSetPlaybackSpeed({currentlyPlayedItem:n.item.uri,playbackSpeed:e}))}})," ",!c&&(0,v.jsx)(ga.w,{renderEnabled:()=>(0,v.jsx)(Mi.r,{spec:a,children:(0,v.jsx)(va.a,{size:"small"})}),renderDisabled:()=>(0,v.jsx)(ma.u,{onClick:e=>{o.logInteraction(e?a.shuffleButtonFactory().hitShuffleEnable():a.shuffleButtonFactory().hitShuffleDisable())}})}),c&&(0,v.jsx)(ta.h,{onClick:e=>{o.logInteraction(a.seekBackButtonFactory().hitSeekByTime({msSeekedOffset:e}))}}),(0,v.jsx)(ia.d,{onClick:()=>{const e=t.getState();e&&o.logInteraction(a.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:e.item?.uri||"",positionMs:(0,ha.s)(e)??-1,totalContentMs:e.duration??-1}))}})]}),(0,v.jsx)(ea.x,{onClick:e=>{const n=t.getState();n?.item&&("resume"===e?o.logInteraction(a?.playPauseButtonFactory().hitResume({itemToBeResumed:n.item.uri})):"pause"===e&&o.logInteraction(a?.playPauseButtonFactory().hitPause({itemToBePaused:n.item.uri})))}}),(0,v.jsxs)("div",{className:la,children:[(0,v.jsx)(Zi,{children:(0,v.jsx)(aa.$,{onClick:()=>{const e=t.getState();e?.item&&o.logInteraction(a.nextButtonFactory().hitSkipToNext({itemToBeSkipped:e.item.uri,positionMs:(0,ha.s)(e)??-1,totalContentMs:e.duration??-1}))}})}),c&&(0,v.jsx)(na.v,{onClick:e=>{o.logInteraction(a.seekForwardButtonFactory().hitSeekByTime({msSeekedOffset:e}))}}),!c&&(0,v.jsx)(ua.s,{onClick:e=>{const t={[ba.p.REPEAT_NONE]:a.repeatButtonFactory().hitRepeatDisable(),[ba.p.REPEAT_TRACK]:a.repeatButtonFactory().hitRepeatOneEnable(),[ba.p.REPEAT_CONTEXT]:a.repeatButtonFactory().hitRepeatEnable()};o.logInteraction(t[e])}})]})]}),(0,v.jsx)(Xi.x,{isPreview:e,onChange:d})]})}));var fa=n(78330),ka=n(70329),ya=n(22010),Ca=n(61217);const ja="main-nowPlayingBar-container",Na="main-nowPlayingBar-nowPlayingBar",wa="MWD1i_CSJ5N9wRBDpZmX",Ia="k3NVrHXkbfflNdAxpT1_",Aa="m8UPWsNtWbdkvBNvqgBN",Ta="aepuRyT82biv_XmkH1eS",Sa="main-nowPlayingBar-left",Ea="main-nowPlayingBar-center",Pa="main-nowPlayingBar-right",Da=()=>{const{isAnonymous:e}=(0,a.d4)(Qt.Ht),t=(0,a.wA)(),n=(0,jn.W)(),r=(0,ne.o)((e=>e),((e,t)=>e?.hasContext===t?.hasContext&&e?.item?.uri===t?.item?.uri)),c=(0,ne.o)((e=>(0,Fi.N)(e?.item??void 0))),l=(0,i.useCallback)((e=>{e.stopPropagation(),t((0,s.Ai)()),n({intent:"signup",type:"click"})}),[t,n]),d=()=>(0,v.jsx)(ka.ql.Provider,{value:"now_playing_bar",children:(0,v.jsxs)("div",{className:e?wa:Na,children:[(0,v.jsx)("div",{className:Sa,children:(0,v.jsx)(Hi,{})}),(0,v.jsx)("div",{className:Ea,children:(0,v.jsx)(i.Suspense,{fallback:null,children:(0,v.jsx)(xa,{isPreview:e})})}),(0,v.jsx)("div",{className:Pa,children:(0,v.jsx)(Vn,{})})]})});return(0,v.jsx)(Ca.P,{surface:ya.u.NOW_PLAYING,children:(0,v.jsx)(fa.pZ,{value:"now-playing-bar",children:(0,v.jsxs)("footer",{className:ja,"data-testid":"now-playing-bar","data-testadtype":"ad-type-"+(c?"ad":"none"),children:[e?(0,v.jsx)(fa.pZ,{value:"preview-bar",children:(0,v.jsx)(g,{handleClick:l})}):null,e?(0,v.jsx)(o.A,{in:r?.hasContext??!1,timeout:200,classNames:{enter:Ia,enterActive:Aa,enterDone:Ta},children:d()}):d(),(0,v.jsx)(q,{})]})})})}},99490:(e,t,n)=>{n.d(t,{L:()=>s});var i=n(13910),a=n(71726),o=n(20769);const s=e=>{const t=(0,a.dY)(),n=(0,o.vh)(),s=t.getInStreamAd();return{logAdFeedback:function(t){n.send((0,i.F)({ad_id:e.id,advertiser:e.advertiser,creative_id:s?.adId===e.id?s?.metadata?.creative_id:void 0,format:e.mediaType,line_item_id:s?.adId===e.id?s?.metadata?.lineitem_id:void 0,event:t}))}}}},61025:(e,t,n)=>{n.d(t,{N2:()=>s,Tt:()=>o});var i=n(42551);const a=e=>e.ads.adFeedback,o=(0,i.Mz)([e=>a(e),(e,t)=>t],((e,t)=>!(!t||e.adId!==t)&&e.liked)),s=(0,i.Mz)([e=>a(e),(e,t)=>t],((e,t)=>!(!t||e.adId!==t)&&e.disliked));(0,i.Mz)([e=>a(e),(e,t)=>t],((e,t)=>t&&e.adId===t?e.feedback:null))},4295:(e,t,n)=>{n.d(t,{w:()=>d});var i=n(30758),a=n(25023),o=n(41331),s=n(52891),r=n(92814),c=n(89747),l=n(78487);const d=({uri:e,isBook:t})=>{const{add:n,remove:d}=(0,c.p)("prerelease"),u=(0,r.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,s.d)(),{spec:p,logger:v}=(0,l.r)(a.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,i.useCallback)((async()=>{v.logInteraction(p.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await n(e),m(t?o.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):o.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[n,m,t,v,p,e]),removePresave:(0,i.useCallback)((async()=>{v.logInteraction(p.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[v,d,p,e])}}},7406:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(30758);const a=e=>{const[t,n]=(0,i.useState)(null);(0,i.useEffect)((()=>{const t=e.current;if(!t)return()=>{};const i=({target:e})=>{e instanceof HTMLElement&&n(e)};return t.addEventListener("focusout",i),()=>{t.removeEventListener("focusout",i)}}),[e]),(0,i.useEffect)((()=>{const i=e.current;if(!t||!i)return;const a=i.contains(t),o=i.contains(document.activeElement);!a&&!o&&i.focus({preventScroll:!0}),n(null)}),[e,t])}},24060:(e,t,n)=>{n.d(t,{s:()=>a,u:()=>i});const i=e=>e.ui.lyrics.mode,a=e=>e.ui.lyrics.translationLanguage},80038:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(77),a=n(38063),o=n(13643),s=n(48783);function r({referrer:e,onChange:t}){const n=(0,i.Zp)(),{isActive:r,routeDestination:c}=(0,a.$)(),{setVideoPlayerUIFlag:l}=(0,o.d)(),d=()=>{r||(l(s.n.cinema,!1),n(c,{state:{referrer:e}}),t?.(c))},u=()=>{r&&(n(-1),t?.(null))};return{isActive:r,showLyrics:d,hideLyrics:u,toggleLyrics:()=>{r?u():d()}}}},15339:(e,t,n)=>{n.d(t,{X:()=>i.XR});var i=n(93422)},30083:(e,t,n)=>{n.d(t,{D:()=>d});var i=n(30758),a=n(55358);var o=n(13643),s=n(48783),r=n(45292),c=n(75987),l=n(78487);const d=({item:e,onClick:t})=>{const n=(0,r.W)(),{capabilities:{isEnabled:d},isOpen:u,close:m,open:p,canOpen:v}=(0,c.H)(),{videoPlayerMode:g}=(0,o.d)(),{spec:b,logger:h}=(0,l.r)(a.h9,{data:{identifier:g===s.K.cinema?a.gw.CINEMA:a.gw.DESKTOP}}),x=(0,i.useCallback)((()=>{let i;d&&(u?(m(),e?.uri&&h.logInteraction(b.pipButtonFactory({uri:e.uri}).hitUiHide()),i="close-picture-in-picture"):(p(),e?.uri&&(({spec:e,logger:t,uri:n})=>{const i=window.documentPictureInPicture;if(!i)return;const a=o=>{setTimeout((()=>{const i=o.window?.innerWidth,a=o.window?.innerHeight;if(!i||!a)return;const s=e.pipButtonFactory({uri:n}).hitUiOpenWindow({widthPx:i,heightPx:a});t.logInteraction(s)}),100),i.removeEventListener("enter",a)};i.addEventListener("enter",a)})({spec:b,logger:h,uri:e.uri}),i="show-picture-in-picture"),t?.(!u,e?.uri),n({type:"click",intent:i,targetUri:e?.uri,itemIdSuffix:"picture-in-picture-toggle"}))}),[m,d,u,e?.uri,h,t,n,p,b]);return{showButton:v,isActive:u,onClick:x}}},22872:(e,t,n)=>{n.d(t,{N:()=>a});var i=n(30758);function a(e){const t=(0,i.useRef)(null);return(0,i.useEffect)((()=>{e&&("function"==typeof e?e(t.current):e.current=t.current)})),t}},26077:(e,t,n)=>{n.d(t,{I:()=>l});var i=n(30758),a=n(93409),o=n(76629);var s=n(69180),r=n(29800),c=n(2869);const l=({uri:e,setFeedbackPath:t,removeFeedbackPath:n,contextUri:l})=>{const d=(0,s.z)(),u=(0,r.m)(),{isPlaying:m}=(0,c.te)(e),p=(0,i.useCallback)((()=>{l&&u.resync(l)}),[l,u]);return{setDislikeFeedback:(0,i.useCallback)((async()=>{t&&(await((e,t,n)=>{const i=t.replace("<reason>","LOCAL_NOT_APPROPRIATE_FOR_CONTEXT").replace("<track-uri>",n);return e.build().withMethod("POST").withHost(o.L1).withPath(i).withEndpointIdentifier("/<feature>/feedback/").send()})(a.n.getInstance(),t,e),p(),m&&d.skipToNext())}),[t,e,p,m,d]),removeDislikeFeedback:(0,i.useCallback)((async()=>{n&&(await((e,t,n)=>{const i=t.replace("<reason>","LOCAL_NOT_APPROPRIATE_FOR_CONTEXT").replace("<track-uri>",n);return e.build().withMethod("DELETE").withHost(o.L1).withPath(i).withEndpointIdentifier("/<feature>/feedback/").send()})(a.n.getInstance(),n,e),p())}),[n,p,e])}}}}]);
//# sourceMappingURL=dwp-now-playing-bar.js.map