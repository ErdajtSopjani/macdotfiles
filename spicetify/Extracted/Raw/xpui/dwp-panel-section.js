"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[319],{29866:(e,t,i)=>{i.d(t,{k:()=>u});var a=i(30758),n=i(41331),s=i(42252),r=i(45292),l=i(69423),o=i(93614),c=i(86070);const u=({id:e,children:t,targetURI:i,fadeOut:u=!1})=>{const d=(0,a.useCallback)((()=>{window.open((0,l.rw)(i).href)}),[i]),p={getTitle:()=>n.Ru.get("action-trigger.available-in-app-only"),getDescription:()=>n.Ru.get("action-trigger.listen-mixed-media-episode"),primaryButtonText:()=>n.Ru.get("action-trigger.button.get-app"),secondaryButtonText:()=>n.Ru.get("action-trigger.button.not-now"),isCTA:!0,intentPrimaryButton:"download-app",onLogInteraction:(0,r.W)(),shouldHideOnScroll:!0,fadeOut:u};return(0,c.jsx)(s.U,{className:o.A.container,id:e,onPrimaryButtonClick:d,options:p,children:t})}},44367:(e,t,i)=>{i.d(t,{D:()=>d});var a=i(97500),n=i.n(a),s=i(27046);const r="Psc33HXPyazZYAAr1tgz",l="VGJz_GOARJ6j02JICvW6",o="VpNHGG5ZhoxQ8AqW709S",c="P7395UzhjxLUlLZvj5fb";var u=i(86070);const d=function(e){const{children:t,active:i=!1,focus:a=!0,label:d,onClick:p,noBackground:g=!1}=e;return(0,u.jsx)(s.Zp,{label:d,children:(0,u.jsx)("button",{className:n()(r,{[c]:i,[l]:g,[o]:a}),onClick:p,"aria-label":d,children:t})})}},91901:(e,t,i)=>{i.d(t,{N:()=>m});var a=i(97500),n=i.n(a),s=i(30758),r=i(27338),l=i(91360);const o="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",u="w4ZoklZWkrsyrVA34vI8";var d=i(86070);const p=({title:e,uri:t,className:i,onClick:a,position:o})=>{const p=(0,s.useCallback)((e=>{a?.(e,{uri:t,position:o})}),[a,o,t]);return(0,d.jsx)(l.N,{"aria-label":e,className:n()(c,u,i),to:t,onClick:p,children:(0,d.jsx)(r.v,{as:"span",children:e})})};function g(e){return!!e.uri&&!!e.title}const m=({topics:e,className:t,onClick:i})=>(0,d.jsx)("div",{className:n()(o,t),children:e.filter(g).map(((e,t)=>{const a=`${e.uri}-${t}`;return(0,d.jsx)(p,{title:e.title,uri:e.uri,position:t,onClick:i},a)}))})},30258:(e,t,i)=>{i.d(t,{h:()=>y});var a=i(56368),n=i(63774),s=i(93720),r=i(59467),l=i(64193),o=i(96851),c=i(13357),u=i(29285),d=i(68031),p=i(40425),g=i(32415),m=i(78487),x=i(86317);const v="main-nowPlayingView-coverArt";var b=i(86070);const y=({context:e,item:t,index:i,canSwitchVisuals:y=!1})=>{const{spec:h,logger:f}=(0,m.r)(a.J,{}),{draggable:j,onDragStart:N}=(0,d.P)();return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(s.h,{menu:(0,b.jsx)(l.W,{context:e,item:t,canSwitchVisuals:y}),children:(0,b.jsx)("div",{draggable:j&&((0,g.v)(t)||(0,p.p)(t)),onDragStart:e=>{N(e,{itemUris:[t.uri],dragLabelText:(0,u.r)(t)})},children:(0,b.jsx)(c.R,{uri:e.uri,owner:e.metadata?.context_owner,children:(0,b.jsx)(o.e,{context:t.type===x.c.TRACK?t.album:e,item:t,index:i,isVisible:!0,onClick:()=>{f.logInteraction(h.coverArtFactory({uri:t.uri}).hitUiNavigate({destination:t.type===x.c.TRACK?t.album.uri:t.uri}))},adEventReason:n.c.COVER_ART,children:(0,b.jsx)(r.b,{className:v,item:t,maxSize:384,desiredLabel:"xlarge"})})})})})})}},20871:(e,t,i)=>{i.d(t,{w:()=>g,X:()=>p});var a=i(30758),n=i(97500),s=i.n(n),r=i(15231),l=i(27046);const o="main-nowPlayingView-section",c="main-nowPlayingView-sectionHeader",u="main-nowPlayingView-sectionHeaderText";var d=i(86070);const p=({action:e,children:t,className:i,icon:a,tooltipLabel:n})=>(0,d.jsxs)(r.E,{as:"div",variant:"bodyMediumBold",semanticColor:"textBase",className:s()(c,i),children:[a,(0,d.jsx)(l.Zp,{label:n,children:(0,d.jsx)("div",{className:u,children:t})}),e]}),g=(0,a.forwardRef)((({children:e,className:t,style:i,testId:a},n)=>{const r={};return a&&(r["data-testid"]=a),(0,d.jsx)("div",{ref:n,className:s()(o,t),style:i,...r,children:e})}))},25228:(e,t,i)=>{i.d(t,{F:()=>u});var a=i(30758),n=i(84718),s=i(17504),r=i(13643),l=i(48783);const o="KrBYgWLGb5aRHjoD_prX";var c=i(86070);const u=(0,n.mc)((()=>{const{setVideoPlayerUIFlag:e}=(0,r.d)(),t=(0,s.XB)();return(0,a.useEffect)((()=>(e(l.n.npv,!0),()=>{e(l.n.npv,!1)})),[t,e]),(0,c.jsx)("div",{id:"VideoPlayerNpv_ReactPortal",className:o})}),{name:"NPVVideoContainer"})},6601:(e,t,i)=>{i.d(t,{PanelSection:()=>im});var a=i(30758),n=i(94079),s=i(39733),r=i(21560),l=i(97500),o=i.n(l),c=i(15231),u=(i(27338),i(1133)),d=i(74946),p=i(58111),g=i(22594);const m="Xq5xnpTOsoPxFR95BkTU",x="N7OMJte9T4Lv7DDX16ky",v="NJATxQbY2o4sl0BHxU3T";var b=i(86070);const y=({children:e,className:t,...i})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.a,{panel:g.Z.Puffin,className:o()(x,t),...i}),e]});let h=function(e){return e.Overview="overview",e.ActivationIntro="activationIntro",e.ActivationDetection="activationDetection",e.ActivationSignifiers="activationSignifiers",e.Error="error",e.ManualSelection="manualSelection",e.AirpodsSelection="airpodsSelection",e.AudioQualitySettings="audioQualitySettings",e.AudioQualityDetails="audioQualityDetails",e.DiscoverLossless="discoverLossless",e.IncompatibleHeadphones="incompatibleHeadphones",e}({}),f=function(e){return e.GetStarted="getStarted",e.OnError="onError",e.SelectManually="selectManually",e.Continue="continue",e.Close="close",e.Activate="activate",e.SetupNewDevice="setupNewDevice",e.NotFound="notFound",e.Settings="settings",e.OnboardLossless="onboardLossless",e.Details="details",e.Airpods="airpods",e}({});var j=i(17504),N=i(69180);const C=[h.ActivationIntro,h.ActivationDetection,h.ActivationSignifiers,h.ManualSelection,h.AirpodsSelection],S=e=>{const t=(0,a.useRef)(!1),i=(0,N.z)(),n=(0,j.XB)();(0,a.useEffect)((()=>{const a=i.getState()?.isPaused,s=(r=e,l=n,C.includes(r)&&(l===g.Z.PuffinActivation||l===g.Z.PuffinActivationOverlay));var r,l;!s||a||t.current?!s&&a&&t.current&&(i.resume(),t.current=!1):(i.pause(),t.current=!0)}),[n,e,i])},w={[h.Overview]:{[f.GetStarted]:h.ActivationIntro,[f.OnError]:h.Error,[f.SelectManually]:h.ManualSelection,[f.Settings]:h.AudioQualitySettings,[f.OnboardLossless]:h.DiscoverLossless,[f.Details]:h.AudioQualityDetails},[h.ActivationIntro]:{[f.Close]:h.Overview,[f.OnError]:h.Error,[f.Continue]:h.ActivationDetection,[f.SelectManually]:h.ManualSelection,[f.Activate]:h.Overview},[h.ActivationDetection]:{[f.SelectManually]:h.ManualSelection,[f.Airpods]:h.AirpodsSelection,[f.Close]:h.Overview,[f.OnError]:h.Error,[f.Continue]:h.ActivationSignifiers},[h.ActivationSignifiers]:{[f.Close]:h.Overview,[f.OnError]:h.Error,[f.Activate]:h.Overview},[h.ManualSelection]:{[f.Continue]:h.ActivationSignifiers,[f.Close]:h.Overview,[f.OnError]:h.Error,[f.NotFound]:h.IncompatibleHeadphones},[h.AirpodsSelection]:{[f.Continue]:h.ActivationSignifiers,[f.Close]:h.Overview,[f.OnError]:h.Error,[f.NotFound]:h.Error},[h.DiscoverLossless]:{[f.Continue]:h.Overview},[h.AudioQualitySettings]:{},[h.AudioQualityDetails]:{},[h.Error]:{},[h.IncompatibleHeadphones]:{[f.Close]:h.Overview,[f.OnError]:h.Error,[f.Continue]:h.Overview}},k=(0,a.createContext)({currentView:h.Overview,viewTransitions:w,setCurrentView:()=>{},toPreviousView:()=>{},viewOptions:null}),E=({children:e})=>{const t=(0,j.XB)(),[i,n]=(0,a.useState)((()=>(e=>[{view:e===g.Z.PuffinActivation||e===g.Z.PuffinActivationOverlay?h.ActivationDetection:h.Overview,options:{}}])(t))),s=(0,a.useCallback)(((e,t)=>{e===h.Overview?n([{view:e,options:t??{}}]):n((i=>[...i,{view:e,options:t??{}}]))}),[]),r=(0,a.useCallback)((()=>{n((e=>e.slice(0,-1)))}),[]);if(0===i.length)throw new Error("Puffin view state stack should never be empty");const{view:l,options:o}=i.at(-1);return S(l),(0,b.jsx)(k.Provider,{value:{currentView:l,viewOptions:o,setCurrentView:s,toPreviousView:r,viewTransitions:w},children:e})},R="EqLKhgGIINyN_LINFjl1",T="OyIY0v1_h3UWgLlxyPHL",I=({resetError:e})=>{const{toPreviousView:t,setCurrentView:i}=(0,a.useContext)(k);return(0,b.jsx)(y,{onBack:()=>{t()},children:(0,b.jsxs)("div",{className:R,children:[(0,b.jsx)(u.b,{size:"xlarge",semanticColor:"textBase"}),(0,b.jsxs)("div",{className:T,children:[(0,b.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:"Something went wrong"}),(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:"We couldn’t turn on your headphone tools."})]}),(0,b.jsx)(d.$,{colorSet:"invertedLight",size:"medium",onClick:()=>{e?.(),i(h.Overview)},children:"Retry"})]})})},L=({resetError:e})=>(0,b.jsx)(I,{resetError:e});var A=i(73995),P=i(41978),O=i(41331),_=i(30213),U=i(60071),D=i(13023),B=i(29615),F=i(30912);const M=()=>{const e=(0,P.d4)((e=>e.platform.isDesktop)),t=(0,U.b)(),i=(0,_.lS)(t),{isPlayingRemotely:n,remoteDeviceName:s,isConnected:r}=(0,B.v)((e=>{const t=(0,D.V)(e);return{isPlayingRemotely:t.isPlayingRemotely,remoteDeviceName:t.remoteDevice?.name,isConnected:"connected"===t.connectionStatus}}),F.a),l=(0,a.useMemo)((()=>e?O.Ru.get("web-player.connect.device-picker.this-computer"):O.Ru.get("web-player.connect.device-picker.this-web-browser")),[e]),o=(0,a.useMemo)((()=>{if(t)return e?O.Ru.get("web-player.connect.device-picker.from-this-computer",{device_name:t.name}):O.Ru.get("web-player.connect.device-picker.from-this-web-browser",{device_name:t.name})}),[e,t]);return s&&n&&r?{deviceName:s,playingFrom:s}:i?t?.transportType===_.Yg.BLUETOOTH?{deviceName:t.name,playingFrom:l,formattedDeviceName:o}:{deviceName:O.Ru.get("web-player.puffin.wired-connection"),playingFrom:l}:{deviceName:l,playingFrom:l}},V=()=>{const{deviceName:e}=M();return(0,b.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:e})};var H=i(7008),q=i(82682),Q=i(4695),z=i(93243);const Y=({onClick:e})=>{const{playingFrom:t}=M(),i=(0,Q.t)(),[{data:a}]=(0,z.K)(i.quality.streamingQuality);return void 0===a?null:(0,b.jsx)(H.v,{id:"qualitySetting",variant:"naked",title:O.Ru.get("desktop.settings.streamingQuality"),leading:(0,b.jsx)(q.s,{size:"small"}),subtitle:t,onClick:e,padding:"0px 12px"})};var G=i(18081),K=i(62198),Z=i(95926),W=i(20078);const X=({title:e,description:t,confirmButtonText:i="OK",cancelButtonText:n="Cancel",onConfirm:s,onClose:r})=>{const{setCurrentView:l}=(0,a.useContext)(k),o=(0,j._Y)(),[c,u]=(0,a.useState)(!1),d=(0,a.useRef)(!1);return{dialog:c?(0,b.jsx)(Z.T,{onClose:()=>{u(!1),r?.()},onConfirm:()=>{s(),d.current?o(W.$S.PUFFIN_BUTTON_CLICK):l(h.Overview)},titleText:e,"aria-label":e,descriptionText:t,cancelText:n,confirmText:i}):null,triggerDialog:(e=!1)=>{d.current=e,u(!0)}}};var J=i(53970),$=i(49155);const ee=()=>{const e=(0,$.N)();return{setCurrentDevice:(0,a.useCallback)(((t,i)=>{e.setCurrentDevice(t,i)}),[e]),removeCurrentDevice:(0,a.useCallback)((t=>{e.removeCurrentDevice(t)}),[e])}};var te=i(4139);const ie=({spec:e})=>{const t=(0,te.s)(),i=(0,a.useRef)(null),{removeCurrentDevice:n}=ee(),{deviceFilterState:s}=(0,J.j)();(0,K.X)("RESET_HEADPHONES_BUTTON",i);const{triggerDialog:r,dialog:l}=X({title:O.Ru.get("web-player.puffin.reset-headphones.dialog.title"),description:O.Ru.get("web-player.puffin.reset-headphones.dialog.subtitle"),confirmButtonText:O.Ru.get("web-player.puffin.reset-headphones.dialog.confirm"),onConfirm:()=>{n(!0),(0,K.I)("SETUP_HEADPHONES_BUTTON")},onClose:()=>{(0,K.I)("RESET_HEADPHONES_BUTTON")}});return s.isOnboarded?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(H.v,{id:"resetHeadphonesButton",ref:i,variant:"naked",title:O.Ru.get("web-player.puffin.reset-headphones.menu-item"),leading:(0,b.jsx)(G.x,{size:"small"}),onClick:i=>{t.logInteraction(e.resetHeadphonesButtonFactory().hitUiReveal()),i.preventDefault(),r(!1)},padding:"0px 12px"}),l]}):null};var ae=i(28370);const ne=({isPlayingRemotely:e,spec:t})=>{const i=(0,te.s)(),{setCurrentView:n,viewTransitions:s}=(0,a.useContext)(k),r=s[h.Overview],l=(0,ae.j)();return(0,b.jsxs)("div",{children:[l&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(Y,{onClick:()=>{i.logInteraction(t.qualitySettingsButtonFactory().hitUiReveal()),n(r.settings)}})}),!e&&(0,b.jsx)(ie,{spec:t})]})};var se=i(89531);const re="k4f1o0jOMnxv6OS8dC7p",le=({title:e,subtitle:t,buttonLabel:i,onClick:n,focusTransferKey:s=null})=>{const r=(0,a.useRef)(null);return(0,K.X)(s,r),(0,b.jsx)(H.v,{variant:"naked",size:"lg",id:"getStarted",className:re,title:e,subtitle:t,paddingBlockStart:"16px",paddingBlockEnd:"16px",footer:(0,b.jsx)(se.n,{size:"small",onClick:n,ref:r,children:(0,b.jsx)(c.E,{variant:"bodySmallBold",children:i})})})};var oe=i(78309),ce=i(89539),ue=i(91877);const de=e=>{switch(e){case ue.Yn.LOSSLESS_24:return{title:O.Ru.get("web-player.pigeon.audio-quality.lossless"),titleFull:O.Ru.get("web-player.pigeon.audio-quality.lossless-24.label"),bitrateLabel:O.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate"),bitrateDetails:[O.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-1"),O.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-2")]};case ue.Yn.LOSSLESS:return{title:O.Ru.get("web-player.pigeon.audio-quality.lossless"),titleFull:O.Ru.get("web-player.pigeon.audio-quality.lossless-16.label"),bitrateLabel:O.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate"),bitrateDetails:[O.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate-details-1"),O.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate-details-2")]};case ue.Yn.VERY_HIGH:return{title:O.Ru.get("web-player.pigeon.audio-quality.very-high.label"),bitrateLabel:O.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate"),bitrateDetails:[O.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate-details")]};case ue.Yn.HIGH:return{title:O.Ru.get("web-player.pigeon.audio-quality.high.label"),bitrateLabel:O.Ru.get("web-player.pigeon.audio-quality.high.bitrate"),bitrateDetails:[O.Ru.get("web-player.pigeon.audio-quality.high.bitrate-details")]};case ue.Yn.NORMAL:return{title:O.Ru.get("web-player.pigeon.audio-quality.normal.label"),bitrateLabel:O.Ru.get("web-player.pigeon.audio-quality.normal.bitrate"),bitrateDetails:[O.Ru.get("web-player.pigeon.audio-quality.normal.bitrate-details")]};case ue.Yn.LOW:return{title:O.Ru.get("web-player.pigeon.audio-quality.low.label"),bitrateLabel:O.Ru.get("web-player.pigeon.audio-quality.low.bitrate"),bitrateDetails:[O.Ru.get("web-player.pigeon.audio-quality.low.bitrate-details")]};case ue.Yn.UNKNOWN:default:return{title:O.Ru.get("web-player.pigeon.audio-quality.unknown.label"),bitrateLabel:null}}},pe="SsVVyvM7DIniTIOjJFuM",ge="dHDe0DUG4UkEeM8p5PEa",me="T49oF8shvnsadykMrogA",xe=({quality:e,onClick:t})=>{const i=de(e),a=[ue.Yn.VERY_HIGH,ue.Yn.HIGH,ue.Yn.NORMAL,ue.Yn.LOW];e===ue.Yn.LOSSLESS_24?a.unshift(ue.Yn.LOSSLESS_24):a.unshift(ue.Yn.LOSSLESS);const n=e===ue.Yn.UNKNOWN?"textBase":"textBrightAccent";return(0,b.jsxs)(oe.a,{as:"button",variant:"tinted",className:pe,onClick:t,children:[(0,b.jsx)(H.v,{id:"quality",size:"lg",pretitle:O.Ru.get("web-player.pigeon.overview-card.title"),titleGap:ce.v4,title:(0,b.jsx)(c.E,{variant:"titleSmall",semanticColor:n,children:i.titleFull||i.title}),paddingInlineStart:"0px",paddingInlineEnd:"0px",variant:"naked"}),(0,b.jsx)("div",{children:a.map(((t,i)=>{const a=de(t),n=t===e,s=n?"textBrightAccent":"textSubdued";return(0,b.jsx)(H.v,{id:a.title,size:"sm",paddingInlineStart:"0px",paddingInlineEnd:"0px",media:(0,b.jsx)("div",{className:o()(ge,{[me]:n})}),title:(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:s,children:a.title}),trailing:(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:s,children:a.bitrateLabel}),variant:"naked"},i)}))})]})};var ve=i(82535);const be=()=>(0,ve.x)("onboarding-dismissed:lossless",!1);var ye=i(52535);const he=({spec:e})=>{const t=(0,te.s)(),{setCurrentView:i,viewTransitions:n}=(0,a.useContext)(k),s=n[h.Overview],r=(0,ae.j)(),l=(0,ye.A)(),[o]=be();return r?(0,b.jsxs)(b.Fragment,{children:[!o&&(0,b.jsx)(le,{title:O.Ru.get("web-player.pigeon.get-started.title"),subtitle:O.Ru.get("web-player.pigeon.get-started.subtitle"),buttonLabel:O.Ru.get("web-player.pigeon.get-started.button"),onClick:()=>{t.logInteraction(e.losslessOnboardingButtonFactory().hitUiReveal()),i(s.onboardLossless)}}),(0,b.jsx)(xe,{quality:l,onClick:()=>{t.logInteraction(e.audioQualityCardFactory().hitUiReveal()),i(s.details)}})]}):null},fe=({isError:e})=>e?(0,b.jsx)(H.v,{id:"filterError",variant:"tinted",paddingBlockStart:"12px",paddingBlockEnd:"12px",paddingInlineStart:"16px",paddingInlineEnd:"16px",leading:(0,b.jsx)(u.b,{semanticColor:"textSubdued",size:"small"}),title:O.Ru.get("web-player.puffin.error-troubleshooting")}):null;var je=i(5052),Ne=i(33691);const Ce="jvVll3Ia4Nrq9Fsd78Fo",Se="d_HhOkLKxYpYKpP2gQy7",we="fLp9X9keK84drMHcmOFW",ke=({currentDeviceState:e,spec:t})=>{const i=(0,te.s)(),n=(0,a.useCallback)((()=>{i.logInteraction(t.optimizeToggleFactory().hitUiElementToggle()),e.toggleTuneHeadphones?.()}),[e,i,t]),s=null!==e.toggleTuneHeadphones,{specificRestricted:r,processingCapabilitiesRestricted:l}=e.contentRestrictions;return(0,b.jsx)("div",{className:Ce,children:(s||r||l)&&(0,b.jsx)(H.v,{variant:"naked",size:"md",id:"headphones",className:Se,disabled:r||l,title:(0,b.jsx)(je.d,{className:we,children:O.Ru.get("web-player.puffin.listening-with.filters.specific-title")}),subtitle:O.Ru.get("web-player.puffin.listening-with.filters.specific-subtitle"),trailing:(0,b.jsx)(Ne.l,{id:"headphoneTunes",onSelected:n,disabled:r||l,value:e.currentState.specificEnabled,condensed:!0})})})},Ee="bLEXMWOER6nmfeLfBRIN",Re=({spec:e})=>{const t=(0,te.s)(),{setCurrentView:i,viewTransitions:n}=(0,a.useContext)(k),s=n[h.Overview],{deviceFilterState:r}=(0,J.j)(),l=r.isOnboarded;return(0,b.jsx)(H.v,{id:"listeningWith",variant:"tinted",pretitle:O.Ru.get("web-player.puffin.listening-with.model"),horizontalGap:"0px",paddingBlockStart:"12px",paddingBlockEnd:"12px",paddingInlineStart:"16px",paddingInlineEnd:"16px",className:Ee,trailing:(0,b.jsx)(se.n,{size:"small",onClick:()=>{t.logInteraction(e.changeModelButtonFactory().hitUiReveal()),i(s.selectManually)},children:(0,b.jsx)(c.E,{variant:"bodySmallBold",children:O.Ru.get("web-player.puffin.listening-with.change-model")})}),footer:l&&(0,b.jsx)(ke,{currentDeviceState:r,spec:e}),title:(0,b.jsx)(je.d,{lineClamp:2,children:r.headphoneDevice?.deviceName??O.Ru.get("web-player.puffin.listening-with.placeholder-model")})})},Te=({spec:e})=>{const{setCurrentView:t,viewTransitions:i}=(0,a.useContext)(k),n=i[h.Overview],{deviceFilterState:s,isMaybeHeadphoneDevice:r,isError:l,isLoading:o}=(0,J.j)(),c=(0,te.s)(),u=s.isOnboarded,d=r&&!u,p=(0,a.useCallback)((()=>{c.logInteraction(e.setupHeadphonesButtonFactory().hitUiReveal()),s.audioDevice?t(n.getStarted):t(n.selectManually,{showDialogOnBack:!0})}),[c,e,s.audioDevice,t,n.getStarted,n.selectManually]);return r?l||o?(0,b.jsx)(fe,{isError:l}):(0,b.jsxs)(b.Fragment,{children:[u&&(0,b.jsx)(Re,{spec:e}),d&&(0,b.jsx)(le,{title:O.Ru.get("web-player.puffin.get-started.title"),subtitle:O.Ru.get("web-player.puffin.get-started.subtitle"),buttonLabel:O.Ru.get("web-player.puffin.get-started.button"),onClick:p,focusTransferKey:"SETUP_HEADPHONES_BUTTON"})]}):null};var Ie=i(33234),Le=i(19019),Ae=i(78487);const Pe="TJAbLKl8aSWZqWk4EFkk",Oe=W.$S.DEVICE_PICKER_BUTTON_CLICK,_e=()=>{const e=(0,D.l)(),{panelSend:t}=(0,j.AI)(g.Z.DevicePicker,g.Z.DevicePickerOverlay),i=(0,ae.j)(),n=(0,Ie.v)(),{spec:r,logger:l}=(0,Ae.r)(A.R,{}),o=!e&&n,c=(0,s.NC)(Le.VUN),u=(0,a.useCallback)((()=>{l.logInteraction(r.backButtonFactory().hitUiReveal()),t(Oe)}),[l,t,r]);return(0,b.jsx)(y,{onBack:c?u:void 0,onClose:()=>{l.logInteraction(r.closeButtonFactory().hitUiHide())},children:(0,b.jsxs)("div",{className:Pe,children:[(0,b.jsx)(V,{}),o&&(0,b.jsx)(Te,{spec:r}),i&&(0,b.jsx)(he,{spec:r}),(0,b.jsx)(ne,{isPlayingRemotely:e,spec:r})]})})};var Ue=i(75808),De=i(70249),Be=i(62687),Fe=i(91360);let Me=function(e){return e.INFO="INFO",e.ERROR="ERROR",e}({});function Ve(e){return e.type===Me.ERROR}function He(e){return e.type===Me.INFO}var qe=i(25042);const Qe="UPAv6TbmqM79jDLYgiad",ze=({card:{type:e,id:t,title:i,text:a}})=>(0,b.jsx)(H.v,{id:t,className:Qe,variant:"tinted",leading:e===Me.ERROR?(0,b.jsx)(Be.Z,{size:"small",semanticColor:"textWarning"}):null,title:(0,b.jsx)(je.d,{variant:"ballad",children:i}),body:"string"==typeof a?(0,b.jsx)(qe.y,{LinkComponent:Fe.N,source:a,splitter:/\|/g,semanticColor:"textSubdued",variant:"mesto"}):a});var Ye=i(71498),Ge=i(31785);const Ke="GdqxZ88oz8MtwHaBnwgb",Ze="Q4TWj1C8EEkH_beo9jI8",We="slKZiyNh_zlnTSEo8VG7",Xe="ichtbB4QY2SKusRio97a",Je="xTMuOBwhiZlpUZtnm0M6";let $e=function(e){return e[e.PASSING=0]="PASSING",e[e.NEEDS_ATTENTION=1]="NEEDS_ATTENTION",e[e.UNKNOWN=2]="UNKNOWN",e}({});const et=({metric:e,label:t,severity:i})=>(0,b.jsxs)("div",{className:o()(Ke,{[Xe]:i===$e.UNKNOWN}),children:[(()=>{switch(i){case $e.PASSING:return(0,b.jsx)(Ye.k,{size:"large",className:Ze,semanticColor:"textBase"});case $e.NEEDS_ATTENTION:return(0,b.jsx)(Be.Z,{size:"large",className:We,semanticColor:"textWarning"});case $e.UNKNOWN:return(0,b.jsx)(Ge.N,{size:"large",className:We,semanticColor:"textBase"});default:return null}})(),(0,b.jsxs)("div",{className:Je,children:[(0,b.jsx)(c.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",children:e}),(0,b.jsx)(c.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:t})]})]});let tt=function(e){return e.bitrateLevel="bitrateLevel",e.targetBitrateLevel="targetBitrateLevel",e.targetBitrateAvailable="targetBitrateAvailable",e.strategy="strategy",e.isLocal="isLocal",e.autoAdjust="autoAdjust",e.deviceSupported="deviceSupported",e}({}),it=function(e){return e.Bluetooth_Degrades_Lossless="Bluetooth_Degrades_Lossless",e.Connect_Explanation="Connect_Explanation",e.Default_To_Very_High="Default_To_Very_High",e.Need_To_Redownload="Need_To_Redownload",e.Opt_Out_Of_Downgrade="Opt_Out_Of_Downgrade",e.Poor_Bandwidth_Interferes="Poor_Bandwidth_Interferes",e.Lossless_Unavailable="Lossless_Unavailable",e.Listen_Offline="Listen_Offline",e.Update_Setting="Update_Setting",e}({}),at=function(e){return e[e.Internet=0]="Internet",e[e.Spotify_Connect=1]="Spotify_Connect",e[e.Downloads=2]="Downloads",e}({}),nt=function(e){return e.Good="good",e.Poor="poor",e.Unknown="unknown",e.Unavailable="unavailable",e}({});const st=[{criteria:{online:!0,autoAdjust:!1,trackLosslessAvailable:!0},result:it.Opt_Out_Of_Downgrade},{criteria:{online:!0,streamingLossless:!1,targetingLossless:!0,deviceCompatible:!0,internetBandwidth:nt.Poor,trackLosslessAvailable:!0},result:it.Poor_Bandwidth_Interferes},{criteria:{online:!0,autoAdjust:!0,streamingLossless:!1,targetingLossless:!1,deviceCompatible:!0,internetBandwidth:nt.Poor,trackLosslessAvailable:!0},result:it.Default_To_Very_High},{criteria:{online:!0,streamingLossless:!1,bitrateStrategy:[ue.ZT.OFFLINED_FILE],trackLosslessAvailable:!0},result:it.Need_To_Redownload},{criteria:{online:!0,targetingLossless:!0,trackLosslessAvailable:!1},result:it.Lossless_Unavailable},{criteria:{online:!0,isSetStreamingQualityLessThanLossless:!0},result:it.Update_Setting}];const rt=[{criteria:{bitrateLevel:[ue.Yn.LOSSLESS],strategy:[ue.ZT.BEST_MATCHING,ue.ZT.BACKEND_ADVISED,ue.ZT.CACHED_FILE],deviceSupported:!0,autoAdjust:!0},result:nt.Good},{criteria:{bitrateLevel:[ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],targetBitrateLevel:[ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],strategy:[ue.ZT.BEST_MATCHING,ue.ZT.CACHED_FILE],deviceSupported:!0,autoAdjust:!0},result:nt.Good},{criteria:{bitrateLevel:[ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],targetBitrateLevel:[ue.Yn.LOSSLESS],strategy:[ue.ZT.BEST_MATCHING,ue.ZT.BACKEND_ADVISED,ue.ZT.CACHED_FILE],targetBitrateAvailable:!0,deviceSupported:!0,autoAdjust:!0},result:nt.Poor},{criteria:{bitrateLevel:[ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],targetBitrateLevel:[ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],strategy:[ue.ZT.BACKEND_ADVISED],deviceSupported:!0,autoAdjust:!0},result:nt.Poor},{criteria:{bitrateLevel:[ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],targetBitrateLevel:[ue.Yn.LOSSLESS],targetBitrateAvailable:!1,deviceSupported:!0,autoAdjust:!0},result:nt.Unavailable},{criteria:{autoAdjust:!1},result:nt.Unknown},{criteria:{deviceSupported:!1},result:nt.Unknown}],lt=[{criteria:{bitrateLevel:[ue.Yn.LOSSLESS,ue.Yn.LOSSLESS_24],deviceSupported:!0},result:!0},{criteria:{bitrateLevel:[ue.Yn.UNKNOWN,ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],strategy:[ue.ZT.BEST_MATCHING,ue.ZT.BACKEND_ADVISED,ue.ZT.CACHED_FILE],targetBitrateLevel:[ue.Yn.LOSSLESS,ue.Yn.LOSSLESS_24],targetBitrateAvailable:!0,deviceSupported:!0},result:!0},{criteria:{bitrateLevel:[ue.Yn.UNKNOWN,ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],strategy:[ue.ZT.OFFLINED_FILE],targetBitrateLevel:[ue.Yn.LOSSLESS,ue.Yn.LOSSLESS_24],targetBitrateAvailable:!0,deviceSupported:!0},result:!1},{criteria:{strategy:[ue.ZT.BEST_MATCHING,ue.ZT.BACKEND_ADVISED,ue.ZT.CACHED_FILE],targetBitrateAvailable:!0,deviceSupported:!0},result:!1},{criteria:{deviceSupported:!1},result:!0},{criteria:{bitrateLevel:[ue.Yn.UNKNOWN,ue.Yn.LOW,ue.Yn.NORMAL,ue.Yn.HIGH,ue.Yn.VERY_HIGH],targetBitrateLevel:[ue.Yn.LOSSLESS,ue.Yn.LOSSLESS_24],targetBitrateAvailable:!1,deviceSupported:!0},result:!0},{criteria:{targetBitrateLevel:[ue.Yn.LOSSLESS,ue.Yn.LOSSLESS_24]},result:!0}],ot=(e,t)=>{for(const[i,a]of Object.entries(t.criteria))if(i===tt.bitrateLevel){if(!a.includes(e[tt.bitrateLevel]))return!1}else if(i===tt.targetBitrateLevel){if(!a.includes(e[tt.targetBitrateLevel]))return!1}else if(i===tt.strategy){if(!a.includes(e[tt.strategy]))return!1}else{if(!a===e[i])return!1}return!0},ct=e=>[ue.Yn.LOSSLESS,ue.Yn.LOSSLESS_24].includes(e);var ut=i(47780),dt=i(47615),pt=i(11244),gt=i(49151);const mt={losslessStatus:ue.p4.NONE,bitrateLevel:ue.Yn.UNKNOWN,targetBitrateLevel:ue.Yn.UNKNOWN,targetBitrateAvailable:!1,strategy:ue.ZT.UNKNOWN};function xt(){const{losslessStatus:e,bitrateLevel:t,targetBitrateLevel:i,targetBitrateAvailable:n,strategy:s}=(0,gt.o)((e=>({...mt,...e?.playbackQuality??null})),F.a),r=(0,D.l)(),l=(0,Q.t)(),[{data:o}]=(0,z.K)(l.quality.streamingQuality),[{data:c}]=(0,z.K)(l.quality.remoteQuality),u=(0,B.v)((e=>e.activeDevice)),d=(0,a.useMemo)((()=>null!==u&&u.losslessSupport?u.losslessSupport:{fullySupported:!1,deviceSupported:!1,userEligible:!1}),[u]).deviceSupported,{settings:{values:p}}=(0,dt.t0)(),g=p["audio.allow_downgrade"],m=u?.isLocal||!1;let x;x=m?s===ue.ZT.CACHED_FILE||s===ue.ZT.OFFLINED_FILE?at.Downloads:at.Internet:at.Spotify_Connect;const v={bitrateLevel:t,targetBitrateLevel:i,targetBitrateAvailable:n,strategy:s,isLocal:m,deviceSupported:d,autoAdjust:g},b=(e=>{for(const t of lt)if(ot(e,t))return t.result;return!(!ct(e[tt.bitrateLevel])&&!ct(e[tt.targetBitrateLevel]))})(v),y=(e=>{for(const t of rt)if(ot(e,t))return t.result;return e[tt.strategy]===ue.ZT.BACKEND_ADVISED?nt.Poor:nt.Good})(v),h=(0,pt.n)(),f=ct(i)&&n,j=ct(t),N=ct(i),C=r?c?.streamingQuality:o,S=function({online:e,streamingLossless:t,targetingLossless:i,strategy:a,trackLosslessAvailable:n,autoAdjust:s,internetBandwidth:r,losslessCompatibleDevice:l,isLocal:o,isSetStreamingQualityLessThanLossless:c}){const u=[it.Listen_Offline,it.Connect_Explanation,it.Bluetooth_Degrades_Lossless];for(const d of st){const{criteria:p,result:g}=d;p.online===e&&(void 0!==p.autoAdjust&&p.autoAdjust!==s||void 0!==p.streamingLossless&&p.streamingLossless!==t||void 0!==p.targetingLossless&&p.targetingLossless!==i||void 0!==p.deviceCompatible&&p.deviceCompatible!==l||void 0!==p.bitrateStrategy&&!1===o||(void 0===p.bitrateStrategy||void 0!==a&&p.bitrateStrategy.includes(a))&&(void 0!==p.internetBandwidth&&p.internetBandwidth!==r||void 0!==p.trackLosslessAvailable&&p.trackLosslessAvailable!==n||void 0!==p.isSetStreamingQualityLessThanLossless&&p.isSetStreamingQualityLessThanLossless!==c||u.push(g)))}return u}({online:h,streamingLossless:j,targetingLossless:N,strategy:s,trackLosslessAvailable:f,autoAdjust:g,internetBandwidth:y,losslessCompatibleDevice:d,isLocal:m,isSetStreamingQualityLessThanLossless:!!C&&C<ut.a1.LOSSLESS&&C>ut.a1.AUTOMATIC});return{losslessStatus:e,bitrateLevel:t,flags:S,internetBandwidth:y,playingVia:{channelIsLossless:b,channel:x},losslessCompatibleDevice:d}}const vt=()=>{const{losslessCompatibleDevice:e,playingVia:t,internetBandwidth:i}=xt();return(0,b.jsxs)("div",{children:[(0,b.jsx)(et,{metric:O.Ru.get("web-player.pigeon.audio-quality.lossless-compatible-device"),label:e?O.Ru.get("hifi.yes"):O.Ru.get("hifi.no"),severity:e?$e.PASSING:$e.NEEDS_ATTENTION}),(0,b.jsx)(et,{metric:O.Ru.get("hifi.playingVia"),label:(()=>{const{channel:e}=t;switch(e){case at.Downloads:return O.Ru.get("local-files.source.downloads");case at.Internet:return O.Ru.get("hifi.networkConnection");case at.Spotify_Connect:return O.Ru.get("spotify-connect");default:return""}})(),severity:t.channelIsLossless?$e.PASSING:$e.NEEDS_ATTENTION}),(0,b.jsx)(et,{metric:O.Ru.get("hifi.internetBandwidth"),label:(()=>{switch(i){case nt.Good:return O.Ru.get("hifi.good");case nt.Poor:return O.Ru.get("hifi.poor");case nt.Unknown:default:return O.Ru.get("hifi.unknown")}})(),severity:(()=>{switch(i){case nt.Good:return $e.PASSING;case nt.Poor:return $e.NEEDS_ATTENTION;case nt.Unknown:default:return $e.UNKNOWN}})()})]})};var bt=i(4065);const yt={[it.Listen_Offline]:()=>({type:"info",title:O.Ru.get("web-player.pigeon.help-cards.listen-offline.title"),message:O.Ru.get("web-player.pigeon.help-cards.listen-offline.body")}),[it.Connect_Explanation]:()=>({type:"info",title:O.Ru.get("web-player.pigeon.help-cards.connect-explanation.title"),message:(0,b.jsx)(c.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:O.Ru.get("web-player.pigeon.help-cards.connect-explanation.body",(0,b.jsx)(bt.g,{size:"xsmall",alignmentBaseline:"baseline"}))})}),[it.Bluetooth_Degrades_Lossless]:()=>({type:"info",title:O.Ru.get("web-player.pigeon.help-cards.bluetooth-degrades-lossless.title"),message:O.Ru.get("web-player.pigeon.help-cards.bluetooth-degrades-lossless.body")}),[it.Opt_Out_Of_Downgrade]:()=>({type:"error",title:O.Ru.get("web-player.pigeon.help-cards.opt-out-of-downgrade.title"),message:O.Ru.get("web-player.pigeon.help-cards.opt-out-of-downgrade.body")}),[it.Poor_Bandwidth_Interferes]:()=>({type:"error",title:O.Ru.get("web-player.pigeon.help-cards.poor-bandwidth-interferes.title"),message:O.Ru.get("web-player.pigeon.help-cards.poor-bandwidth-interferes.body")}),[it.Default_To_Very_High]:()=>({type:"error",title:O.Ru.get("web-player.pigeon.help-cards.default-to-very-high.title"),message:O.Ru.get("web-player.pigeon.help-cards.default-to-very-high.body")}),[it.Need_To_Redownload]:()=>({type:"error",title:O.Ru.get("web-player.pigeon.help-cards.need-to-redownload.title"),message:O.Ru.get("web-player.pigeon.help-cards.need-to-redownload.body")}),[it.Lossless_Unavailable]:()=>({type:"error",title:O.Ru.get("web-player.pigeon.help-cards.lossless-unavailable.title"),message:O.Ru.get("web-player.pigeon.help-cards.lossless-unavailable.body")}),[it.Update_Setting]:()=>({type:"error",title:O.Ru.get("web-player.pigeon.help-cards.update-settings.title"),message:O.Ru.get("web-player.pigeon.help-cards.update-settings.body")})},ht="BFsg6KnXzCo_ZKKekrFC",ft="OIOUgecXCtVCX_DzOsR4",jt="qcU9Wt2Ly1y44H_lC327",Nt=()=>{const{toPreviousView:e}=(0,a.useContext)(k),t=(0,ye.A)(),i=de(t),n=(()=>{const{flags:e}=xt(),t=[];return e.forEach((e=>{if(yt[e]){const{type:i,message:a,title:n}=yt[e]();"info"===i?t.push({id:e,text:a,title:n,type:Me.INFO}):t.push({id:e,text:a,title:n??"",type:Me.ERROR})}})),t})(),s=n.some(Ve),r=n.filter(s?Ve:He);return(0,b.jsx)(y,{onBack:e,children:(0,b.jsxs)("div",{className:ht,children:[(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:O.Ru.get("web-player.pigeon.overview-card.title")}),(0,b.jsx)(c.E,{variant:"titleMedium",semanticColor:"textBrightAccent",children:i.titleFull||i.title}),(0,b.jsx)("div",{className:ft,children:i.bitrateDetails?.map(((e,t)=>(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBrightAccent",children:e},`bitrate-details-${t}`)))}),(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBrightAccent"}),(0,b.jsx)("div",{className:jt,children:(0,b.jsx)(vt,{})}),r.map((e=>(0,b.jsx)(ze,{card:e},e.id)))]})})};var Ct=i(81626);const St=({subtitles:e})=>(0,b.jsx)(b.Fragment,{children:e.map(((e,t)=>(0,b.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:e},`subtitle-${t}`)))}),wt="ZExuZhVAKsqOBfFdR6Js",kt="G5KBejq8q3GSZxhHs9be",Et="WG0sT27gl2zSvisQcgHS",Rt="iUbPCgoUSkOoOVEo5wnr",Tt="NCUCNjFgGqpox8ttJKch",It=({title:e,isLossless:t})=>(0,b.jsxs)("div",{className:kt,children:[(0,b.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:e}),t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:"•"}),(0,b.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBrightAccent",children:O.Ru.get("web-player.pigeon.audio-quality.lossless.highest")})]})]});var Lt=i(95779);const At=({onClick:e,quality:t,playQuality:i,maxQuality:a})=>{const{title:n,subtitles:s}=(e=>{switch(e){case ut.a1.LOSSLESS:return{title:O.Ru.get("web-player.pigeon.audio-quality.lossless"),subtitles:[O.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-1"),O.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-2")]};case ut.a1.VERY_HIGH:return{title:O.Ru.get("web-player.pigeon.audio-quality.very-high.label"),subtitles:[O.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate-details.subtitle")]};case ut.a1.HIGH:return{title:O.Ru.get("web-player.pigeon.audio-quality.high.label"),subtitles:[O.Ru.get("web-player.pigeon.audio-quality.high.bitrate-details.subtitle")]};case ut.a1.MEDIUM:return{title:O.Ru.get("web-player.pigeon.audio-quality.normal.label"),subtitles:[O.Ru.get("web-player.pigeon.audio-quality.normal.bitrate-details.subtitle")]};case ut.a1.LOW:return{title:O.Ru.get("web-player.pigeon.audio-quality.low.label"),subtitles:[O.Ru.get("web-player.pigeon.audio-quality.low.bitrate-details.subtitle")]};default:return{title:O.Ru.get("web-player.pigeon.audio-quality.unknown.label"),subtitles:null}}})(t);if(null===n||null===s)return null;const r=i===t,l=t===ut.a1.LOSSLESS,o=null===a||t<=a;return(0,b.jsx)(H.v,{id:"title",variant:"naked",verticalGap:"2px","aria-disabled":!o,onClick:e,onClickHint:O.Ru.get("web-player.pigeon.quality-settings.option-hint",n),title:(0,b.jsx)(It,{title:n,isLossless:l}),subtitle:(0,b.jsx)(St,{subtitles:s}),trailing:r?(0,b.jsx)(Ct.i,{semanticColor:"textBrightAccent"}):void 0})},Pt=()=>{const{toPreviousView:e}=(0,a.useContext)(k),t=(0,D.l)(),{playingFrom:i}=M(),n=(0,Q.t)(),[{data:s},{mutate:r}]=(0,z.K)(n.quality.streamingQuality),[{data:l},{mutate:o}]=(0,z.K)(n.quality.autoAdjustQuality),[{data:u},{mutate:d}]=(0,z.K)(n.quality.remoteQuality),p=(0,Lt.x)();if(void 0===p||void 0===l||void 0===s)return null;let g=s,m=r,x=null;return t&&u&&(g=u.streamingQuality,x=u.maxSupportedQuality,m=e=>d({...u,streamingQuality:e})),(0,b.jsxs)(y,{onBack:e,children:[(0,b.jsxs)("div",{className:Tt,children:[(0,b.jsx)(c.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:O.Ru.get("web-player.pigeon.quality-settings.title")}),(0,b.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:i})]}),(0,b.jsx)("div",{className:wt,children:p.sort(((e,t)=>e.quality-t.quality)).map(((e,t)=>(0,b.jsx)(At,{quality:e.quality,playQuality:g,maxQuality:x,onClick:()=>m(e.quality)},t)))}),(0,b.jsx)(c.E,{children:O.Ru.get("web-player.pigeon.quality-settings.disclaimer")}),(0,b.jsxs)("div",{className:Et,children:[(0,b.jsx)(c.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:O.Ru.get("web-player.pigeon.quality-settings.listening-preferences")}),(0,b.jsx)(H.v,{className:Rt,variant:"naked",size:"sm",id:"auto-adjust-quality",horizontalGap:"0px",title:(0,b.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:O.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality")}),trailing:(0,b.jsx)(Ne.l,{id:"desktop.settings.automatic-downgrade",value:l,onSelected:o,condensed:!0})}),(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:O.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality.subtitle-1")}),(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:O.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality.subtitle-2")})]})]})};var Ot=i(33880);const _t="GYa976HrK40QHF7ZZvwM",Ut="MHROZzo24FoePahYMEFJ",Dt="qQ5CfbxUDYyLgy_O6Gah",Bt=({nrSteps:e,currentStep:t,onClick:i})=>(0,b.jsx)("div",{className:_t,children:Array.from({length:e}).map(((e,a)=>(0,b.jsx)("button",{"aria-label":`Go to Step ${a+1}`,className:o()(Ut,{[Dt]:t===a}),onClick:()=>i(a)},a)))});var Ft=i(24818),Mt=i(45237),Vt=i(98117),Ht=i(65968),qt=i(35481);const Qt="Vpnd2l8y0SgEYWxGIRzB",zt="cUTxS9VrHd466oEAGs7_",Yt="JvZLieWRZZQjIU2ElJ2Y",Gt="ub90kjJH_P8M2r1QL_jL",Kt="U3xgLhEWHrv2mb_ZSesP",Zt="ZiS7XuaKSNH6O814jzTW",Wt="W8RJgFmuCgvRsxpnXMWG",Xt="pAYPkrJQFNaLczxADAGc",Jt="nBOyGCpnbwg691MCewBj",$t="hr6LueujvRuzxi6lBlVZ",ei="zwfOn0Sx4qfhn2imHyQ9",ti="UcHPiDY6dLRbaeY65j16",ii="KsS00iz9PKUXYN0PHhno",ai="h66wSXbM4f8lkj4EppJQ",ni=({imageUrl:e,max:t,alt:i=""})=>{const a=(0,qt.dZ)();return(0,b.jsx)(Ht._,{className:Kt,src:a(e,t),loading:"eager",alt:i})};var si=i(50447);const ri=({path:e,loop:t=!0})=>(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(si.o,{loop:t,autoplay:!0,path:e,className:Gt,style:{width:"auto",height:"100%"}})});var li=i(98881);function oi({children:e,variant:t}){const i=(0,a.useRef)(null);return(0,li.i)({ref:i}),(0,b.jsx)(c.E,{variant:t,semanticColor:"textBase",className:Jt,tabIndex:-1,ref:i,children:e})}var ci=i(69798);const ui={[ci.E.SMALL]:{titleVariant:"bodyMediumBold",subtitleVariant:"marginalBold",bodyVariant:"bodySmall",containerGap:0,headerGap:0,assetGap:8,subtitleGap:4,titleGap:4,buttonGap:12,assetMaxHeight:165},[ci.E.MEDIUM]:{titleVariant:"titleSmall",subtitleVariant:"marginalBold",bodyVariant:"bodySmall",containerGap:16,headerGap:24,assetGap:24,subtitleGap:12,titleGap:8,buttonGap:24,assetMaxHeight:240},[ci.E.LARGE]:{titleVariant:"titleMedium",subtitleVariant:"bodySmall",bodyVariant:"bodyMedium",containerGap:32,headerGap:32,assetGap:48,subtitleGap:16,titleGap:8,buttonGap:32,assetMaxHeight:320}},di="AOGvMtDLQNbo94n8r8mu",pi="gf6sr0Z5UAyf7ULRfSFA",gi=({icon:e,text:t,highlighted:i,condensed:a=!1,className:n})=>(0,b.jsxs)("div",{className:o()(di,n),children:[(0,b.jsx)(e,{size:a?"xsmall":"small",semanticColor:"textBase",className:o()({[pi]:i})}),(0,b.jsx)(c.E,{variant:a?"marginalBold":"bodySmallBold",semanticColor:"textBase",className:o()({[pi]:i}),children:t})]});var mi=i(57968),xi=i(20920);const vi=({onboardingContent:e,onNext:t,onTertiaryClick:i,layout:s="vertical",showLoader:r=!1})=>{const{bodyTitle:l,bodySubtitle:u,bodyText:p,imageUrl:g,lottiePath:m,loopAnimation:x=!0,subtitleIcon:v,buttonText:y,tertiaryButtonText:h}=e,f=(0,mi.y)(),{titleVariant:j,subtitleVariant:N,bodyVariant:C,containerGap:S,headerGap:w,assetGap:k,subtitleGap:E,titleGap:R,buttonGap:T,assetMaxHeight:I}=(0,a.useMemo)((()=>{let e=ci.E.MEDIUM;switch(f){case ci.E.SMALL:e=ci.E.SMALL;break;case ci.E.MEDIUM:e=ci.E.MEDIUM;break;case ci.E.LARGE:e=ci.E.LARGE}return ui[e]}),[f]),L=(0,a.useRef)(null),A=(0,xi.j)();return(0,b.jsx)(Ft.A,{mode:"out-in",children:(0,b.jsx)(n.A,{timeout:A?0:800,classNames:{enter:ei,enterActive:ti,exit:ii,exitActive:ai},nodeRef:L,children:(0,b.jsx)("div",{className:Qt,style:{"--onboarding-container-gap":`${S}px`,"--onboarding-asset-gap":`${k}px`,"--onboarding-subtitle-gap":`${E}px`,"--onboarding-title-gap":`${R}px`,"--onboarding-button-gap":`${T}px`,"--onboarding-asset-max-height":`${I}px`,"--onboarding-header-gap":`${w}px`},ref:L,children:(0,b.jsxs)("div",{className:o()(zt,{[Zt]:"horizontal"===s}),children:[(0,b.jsxs)("div",{className:Yt,children:[g?(0,b.jsx)(ni,{imageUrl:g,max:I}):null,m?(0,b.jsx)(ri,{path:m,loop:x}):null]}),(0,b.jsxs)("div",{className:Wt,children:[(0,b.jsx)(gi,{icon:v,text:u,condensed:f!==ci.E.LARGE,highlighted:!0,className:Xt,variant:N}),(0,b.jsx)(oi,{variant:j,children:l}),(0,b.jsx)(c.E,{variant:C,children:p}),(0,b.jsx)("div",{className:$t,children:r?(0,b.jsx)(Vt.m,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.$,{colorSet:"invertedLight",size:f===ci.E.LARGE?"medium":"small",onClick:t,children:y}),i&&h?(0,b.jsx)(Mt.H,{size:f===ci.E.LARGE?"medium":"small",onClick:i,condensed:!0,children:e.tertiaryButtonText}):null]})})]})]})})},l)})};var bi=i(83650);const yi=()=>[{bodyTitle:O.Ru.get("web-player.pigeon.introduction.step-1.title"),bodySubtitle:"Lossless",bodyText:O.Ru.get("web-player.pigeon.introduction.step-1.subtitle"),subtitleIcon:Ot.Q,buttonText:O.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc00009256c4d947fba90f6244343446ee"},{bodyTitle:O.Ru.get("web-player.pigeon.introduction.step-2.title"),bodySubtitle:"Lossless",bodyText:O.Ru.get("web-player.pigeon.introduction.step-2.subtitle"),subtitleIcon:Ot.Q,buttonText:O.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc00005e4e6fd833f6f5c2cf4f81c1da66"},{bodyTitle:O.Ru.get("web-player.pigeon.introduction.step-3.title"),bodySubtitle:"Lossless",bodyText:O.Ru.get("web-player.pigeon.introduction.step-3.subtitle"),subtitleIcon:Ot.Q,buttonText:O.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc000092564a451c0c1fba3acf8fed995f"},{bodyTitle:O.Ru.get("web-player.pigeon.introduction.step-4.title"),bodySubtitle:"Lossless",bodyText:O.Ru.get("web-player.pigeon.introduction.step-4.subtitle"),subtitleIcon:Ot.Q,buttonText:O.Ru.get("web-player.pigeon.introduction.button.done"),imageUrl:"spotify:image:ab671fcc000092562f3465b95599cdb50e47604e"}],hi=()=>{const[e,t]=be(),{setCurrentView:i,toPreviousView:n,viewTransitions:s}=(0,a.useContext)(k),r=s[h.DiscoverLossless],{onNext:l,onBack:o,currentStep:c,goTo:u}=function(e){const[t,i]=(0,a.useState)(0),[n,s]=(0,a.useState)(!1),r=(0,a.useCallback)((()=>{t!==e-1?i(t+1):s(!0)}),[t,e]),l=(0,a.useCallback)((()=>{0!==t&&i(t-1),n&&s(!1)}),[t,n]),o=(0,a.useCallback)((t=>{t>=0&&t<e&&i(t),t===e?s(!0):n&&s(!1)}),[e,n]);return{currentStep:t,onNext:r,onBack:l,reachedEnd:n,goTo:o}}(yi().length);return(0,b.jsxs)(y,{titleSlot:(0,b.jsx)(bi.s,{variant:"bodySmallBold"}),onBack:()=>{c>0?o():n()},onClose:()=>i(r.continue),preventDefaultClose:!0,children:[(0,b.jsx)(vi,{onboardingContent:yi()[c],onNext:()=>{3===c?(t(!0),i(r.continue)):l()}}),(0,b.jsx)(Bt,{nrSteps:yi().length,currentStep:c,onClick:u})]})};var fi=i(61190),ji=i(51035);const Ni=e=>({bodyTitle:O.Ru.get("web-player.puffin.activation-2.title",e.headphoneDevice?.deviceName),bodySubtitle:O.Ru.get("web-player.puffin.signifier-text"),lottiePath:(0,ji.b)("animations/puffin-onboarding-tour-2.json"),subtitleIcon:fi.C,buttonText:O.Ru.get("web-player.puffin.activation-2.button-confirm"),tertiaryButtonText:O.Ru.get("web-player.puffin.activation-2.button-cancel"),loopAnimation:!1}),Ci=()=>{const{setCurrentView:e,viewTransitions:t}=(0,a.useContext)(k),{deviceFilterState:i,isMaybeHeadphoneDevice:n,isLoading:s}=(0,J.j)(),r=t[h.ActivationDetection];(0,a.useLayoutEffect)((()=>{i.headphoneDevice||s||!n||e(h.ManualSelection,{showDialogOnBack:!0})}),[i.headphoneDevice,s,n,e]);const l=(0,a.useMemo)((()=>i?.wasAmbiguous),[i]);return(0,b.jsx)(vi,{onboardingContent:Ni(i),onNext:()=>{e(l?r.airpods:r.continue)},onTertiaryClick:()=>{e(r.selectManually)},showLoader:s||!i.headphoneDevice})},Si=()=>{const{deviceFilterState:e,isLoading:t}=(0,J.j)(),{setCurrentView:i,viewTransitions:n}=(0,a.useContext)(k),s=n[h.ActivationIntro],r=(0,a.useCallback)((()=>{e.toggleTuneHeadphones?i(s.continue):i(s.selectManually,{showDialogOnBack:!0})}),[e,i,s.continue,s.selectManually]),l={bodyTitle:O.Ru.get("web-player.puffin.activation-1.title"),bodySubtitle:O.Ru.get("web-player.puffin.signifier-text"),lottiePath:(0,ji.b)("animations/puffin-onboarding-tour-1.json"),subtitleIcon:fi.C,buttonText:O.Ru.get("web-player.puffin.activation-1.button")};return(0,b.jsx)(vi,{onboardingContent:l,onNext:r,showLoader:t||!e.audioDevice})};var wi=i(20769),ki=i(84432);const Ei=e=>{const{deviceFilterState:t}=(0,J.j)(),{setCurrentDevice:i}=ee(),n=(0,wi.vh)(),{setCurrentView:s}=(0,a.useContext)(k),r=(0,a.useCallback)((async()=>{i(t.headphoneDevice,!0);try{await t.setFilterState({specificEnabled:!!t.toggleTuneHeadphones,externalizationEnabled:!!t.toggleTuneStudio})}catch{return void s(h.Error)}((e,t)=>{e.send((0,ki.d)({has_tuner:!!t.toggleTuneHeadphones,filter_brand:t.headphoneDevice?.brand??null,filter_model:t.headphoneDevice?.model??null,was_predicted:!!t.predictedState,headphone_name_over_bluetooth:t.audioDevice?.transportType===_.Yg.BLUETOOTH?t.audioDevice.name:null,external_accessory_mapping_predicted_brand:t.predictedState?.predictedBrand??null,external_accessory_mapping_predicted_model:t.predictedState?.predictedModel??null,was_matched:(t.predictedState?.wasMatched&&!t.headphoneDevice?.isAmbiguous)??!1,was_ambiguous:t.headphoneDevice?.isAmbiguous??!1,was_manually_selected:(t.headphoneDevice?.isAmbiguous||t.headphoneDevice?.wasSelectedManually)??!1}))})(n,t),e()}),[t,n,e,i,s]);return{handleClick:r}},Ri=()=>{const{setCurrentView:e,viewTransitions:t}=(0,a.useContext)(k),i=t[h.ActivationSignifiers],{handleClick:n}=Ei((()=>e(i.activate)));return(0,b.jsx)(vi,{onboardingContent:{bodyTitle:O.Ru.get("web-player.puffin.activation-3.title"),bodySubtitle:O.Ru.get("web-player.puffin.signifier-text"),bodyText:O.Ru.get("web-player.puffin.activation-3.subtitle"),imageUrl:"spotify:image:ab671fcc00005e4ed89275c5e4eef1d432ac3fe2",subtitleIcon:fi.C,buttonText:O.Ru.get("web-player.puffin.button.done"),loopAnimation:!0},onNext:n})},Ti="FcycLYpZEbmuEClARSPP",Ii="NSoA0u_DehEmTu_M20Qn",Li="fGnSEIwIPGid9ALC9ANP",Ai="ZknipG1So_RdKeJ911k3",Pi=({number:e,message:t})=>(0,b.jsxs)("div",{className:Li,children:[(0,b.jsx)("div",{className:Ai,children:(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBase",children:e})}),(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:t})]}),Oi=()=>{const{setCurrentView:e}=(0,a.useContext)(k);return(0,b.jsxs)("div",{className:Ti,children:[(0,b.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:"We can’t detect your headphones"}),(0,b.jsxs)("div",{className:Ii,children:[(0,b.jsx)(Pi,{number:1,message:"Make sure Bluetooth is turned on."}),(0,b.jsx)(Pi,{number:2,message:"Make sure your headphones are connected. Try restarting them."}),(0,b.jsx)(Pi,{number:3,message:"Make sure that only one set of headphones are connected."}),(0,b.jsx)(Pi,{number:4,message:"Using speakers or another device? Externalize and Optimize are only available for headphones."})]}),(0,b.jsx)(Mt.H,{semanticColor:"textSubdued",onClick:()=>{e(h.Overview)},children:"Still not working"})]})},_i=()=>{const{removeCurrentDevice:e}=ee();return X({title:O.Ru.get("web-player.puffin.activation-dialog.title"),description:O.Ru.get("web-player.puffin.activation-dialog.subtitle"),confirmButtonText:O.Ru.get("web-player.puffin.activation-dialog.button-cancel"),cancelButtonText:O.Ru.get("web-player.puffin.activation-dialog.button-confirm"),onConfirm:()=>{e(!0),(0,K.I)("SETUP_HEADPHONES_BUTTON")}})},Ui=({type:e})=>{const{isMaybeHeadphoneDevice:t}=(0,J.j)(),{triggerDialog:i,dialog:a}=_i();return(0,b.jsx)(y,{titleSlot:(0,b.jsx)(bi.s,{variant:"bodySmallBold"}),onClose:()=>i(!0),onBack:()=>i(!1),preventDefaultClose:!0,children:t?(0,b.jsxs)(b.Fragment,{children:[a,"intro"===e&&(0,b.jsx)(Si,{}),"detection"===e&&(0,b.jsx)(Ci,{}),"signifiers"===e&&(0,b.jsx)(Ri,{})]}):(0,b.jsx)(Oi,{})})};var Di=i(2061),Bi=i(20641),Fi=i(94397),Mi=i(20633),Vi=i(58190);const Hi=({device:e,onClick:t,isAirpodDevice:i})=>{const a=i?`${e.model} (${e.releaseYear})`:e.model,n=i?O.Ru.get("web-player.puffin.manual-selection.models-list",e.modelNumbers.join(O.Ru.getSeparator())):e.brand;return(0,b.jsx)(Vi.c,{children:(0,b.jsx)(H.v,{variant:"naked",size:"md",isInteractive:!0,id:e.id,title:(0,b.jsx)(je.d,{onClick:()=>{t(e)},children:a}),subtitle:n,trailing:(0,b.jsx)(Mi.V,{size:"small",semanticColor:"textSubdued"}),onClick:()=>{t(e)},hoverAnimationDuration:"0s"},e.id)})},qi="fjltNoIqUMIY7LfgtvCH",Qi="WNi2uq00PuqJnOvv6b6a",zi="W3HfPxIGTvmPJNItOM5A",Yi="T3zyYZ33nGeJfw6NgwwV",Gi="fr_QT3qQxce_KdFUhktQ",Ki="wMsnDxvKohBJOUguxi8p",Zi="O842FkxrdjAlid2byB9c",Wi="E6yKOmbA9ekxMnRhJDnA",Xi="sm96uN6u5WGLjNfbT6kF",Ji="bWJ8TFqqyCV4TqeScz7D",$i="SRl_K6g2YOd8qrpIFij7",ea=({search:e})=>(0,b.jsxs)("div",{className:Wi,children:[(0,b.jsx)(c.E,{semanticColor:"textBase",variant:"titleSmall",className:Xi,children:O.Ru.get("web-player.puffin.manual-selection.empty.title",(0,b.jsx)("span",{className:Ji,children:(0,b.jsx)("span",{className:$i,children:e})}))}),(0,b.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:O.Ru.get("web-player.puffin.manual-selection.empty.subtitle")})]}),ta={id:"unknown_device",brand:"",model:"",deviceName:"Generic",modelNumbers:[],releaseYear:""},ia=({devices:e,isAirpodsList:t=!1})=>{const{setCurrentView:i,viewTransitions:n}=(0,a.useContext)(k),s=t?n[h.AirpodsSelection]:n[h.ManualSelection],{filter:r,setFilter:l}=(0,a.useContext)(Bi.g),{setCurrentDevice:o}=ee(),c=(0,a.useCallback)((e=>{const a=e?{...e,wasSelectedManually:!0,isAmbiguous:t}:null;o(a,!0),i(e?.id===ta.id?s.notFound:s.continue),l("")}),[t,o,i,s.notFound,s.continue,l]),u=e.filter((({deviceName:e,brand:t,model:i,modelNumbers:a})=>[e,t,i,...a].some((e=>e.toLowerCase().includes(r.toLowerCase())))));return(0,b.jsxs)("div",{className:Ki,children:[(0,b.jsx)(Fi.$,{children:u.map((e=>(0,b.jsx)(Hi,{device:e,onClick:c,isAirpodDevice:t},e.id)))}),0===u.length&&(0,b.jsx)(ea,{search:r}),(0,b.jsx)("div",{className:Gi,children:(0,b.jsx)(se.n,{size:"small",onClick:()=>{c(ta)},children:O.Ru.get("web-player.puffin.manual-selection.not-found-button")})})]})};var aa=i(2569);const na=()=>{const e=(0,$.N)(),{data:t,isLoading:i,isError:a}=(0,aa.I)({queryKey:["puffin-devices"],queryFn:async()=>await e.getDevices(),gcTime:18e5,staleTime:6e5});return{data:t??null,loading:i,error:a}},sa=()=>{const{toPreviousView:e}=(0,a.useContext)(k),{data:t}=na(),i=(0,a.useMemo)((()=>t?.filter((e=>"apple"===e.brand.toLowerCase()&&e.model.toLowerCase().includes("airpods")))),[t]);return(0,b.jsx)(y,{onBack:()=>{e()},children:(0,b.jsxs)(Bi.s,{uri:"spotify:internal:bettersound",children:[(0,b.jsxs)("div",{className:Qi,children:[(0,b.jsx)("div",{className:zi}),(0,b.jsxs)("div",{className:Yi,children:[(0,b.jsx)(c.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:O.Ru.get("web-player.puffin.manual-selection.airpods.title")}),(0,b.jsx)(c.E,{variant:"bodySmall",children:O.Ru.get("web-player.puffin.manual-selection.airpods.subtitle")})]}),(0,b.jsx)(Di.S,{placeholder:O.Ru.get("web-player.puffin.manual-selection.airpods.search-placeholder"),alwaysExpanded:!0,fullWidth:!0,debounceFilterChangeTimeout:0})]}),i?(0,b.jsx)("div",{className:qi,children:(0,b.jsx)(ia,{devices:i,isAirpodsList:!0})}):(0,b.jsx)("div",{className:Zi,children:(0,b.jsx)(Vt.m,{})})]})})},ra=()=>{const{setCurrentView:e,viewTransitions:t}=(0,a.useContext)(k),i=t[h.IncompatibleHeadphones],{handleClick:n}=Ei((()=>e(i.continue))),{toPreviousView:s}=(0,a.useContext)(k);return(0,b.jsx)(y,{onBack:()=>{s()},titleSlot:(0,b.jsx)(bi.s,{variant:"bodySmallBold"}),children:(0,b.jsx)(vi,{onboardingContent:{bodyTitle:"These headphones are not compatible with Optimize yet.",bodySubtitle:"Optimize",bodyText:"Only some devices work with Optimize. We're expanding our compatible devices to support a wider range of headphones.",imageUrl:"spotify:image:ab671fcc00005e4ed89275c5e4eef1d432ac3fe2",subtitleIcon:fi.C,buttonText:"Close"},onNext:n})})},la=()=>{const{toPreviousView:e,viewOptions:t}=(0,a.useContext)(k),{data:i}=na(),{triggerDialog:n,dialog:s}=_i();return(0,b.jsxs)(y,{onBack:()=>{t?.showDialogOnBack?n():e()},titleSlot:(0,b.jsx)(bi.s,{variant:"bodySmallBold"}),children:[s,(0,b.jsxs)(Bi.s,{uri:"spotify:internal:bettersound",children:[(0,b.jsxs)("div",{className:Qi,children:[(0,b.jsx)("div",{className:zi}),(0,b.jsxs)("div",{className:Yi,children:[(0,b.jsx)(c.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:O.Ru.get("web-player.puffin.manual-selection.title")}),(0,b.jsx)(c.E,{variant:"bodySmall",children:O.Ru.get("web-player.puffin.manual-selection.subtitle")})]}),(0,b.jsx)(Di.S,{placeholder:O.Ru.get("web-player.puffin.manual-selection.search-placeholder"),alwaysExpanded:!0,fullWidth:!0,debounceFilterChangeTimeout:0})]}),i?(0,b.jsx)("div",{className:qi,children:(0,b.jsx)(ia,{devices:i})}):(0,b.jsx)("div",{className:Zi,children:(0,b.jsx)(Vt.m,{})})]})]})};var oa=i(66037),ca=i(91753);const ua=()=>{const{currentView:e}=(0,a.useContext)(k);switch(e){case h.ActivationIntro:return(0,b.jsx)(Ui,{type:"intro"});case h.ActivationDetection:return(0,b.jsx)(Ui,{type:"detection"});case h.ActivationSignifiers:return(0,b.jsx)(Ui,{type:"signifiers"});case h.Error:return(0,b.jsx)(I,{});case h.ManualSelection:return(0,b.jsx)(la,{});case h.AirpodsSelection:return(0,b.jsx)(sa,{});case h.Overview:return(0,b.jsx)(_e,{});case h.AudioQualitySettings:return(0,b.jsx)(Pt,{});case h.AudioQualityDetails:return(0,b.jsx)(Nt,{});case h.DiscoverLossless:return(0,b.jsx)(hi,{});case h.IncompatibleHeadphones:return(0,b.jsx)(ra,{});default:return(0,ca.k)(e),null}},da=()=>{const{currentView:e}=(0,a.useContext)(k),t=(0,j._Y)(),i=(0,j.XB)(),n=[g.Z.Puffin,g.Z.PuffinActivation,g.Z.PuffinOverlay,g.Z.PuffinActivationOverlay].some((e=>e===i)),s=[h.ActivationIntro,h.ActivationDetection,h.ActivationSignifiers,h.DiscoverLossless,h.ManualSelection,h.AirpodsSelection,h.IncompatibleHeadphones].includes(e),r=[h.ActivationIntro,h.ActivationDetection,h.ActivationSignifiers,h.ManualSelection,h.IncompatibleHeadphones].includes(e);(0,a.useEffect)((()=>{n&&t(r?W.$S.PUFFIN_START_ACTIVATION:W.$S.PUFFIN_FINISH_ACTIVATION)}),[t,r,n]);const l=(0,a.useRef)(null),{breakpoint:c}=(0,oa.c)({[ci.E.SMALL]:0,[ci.E.MEDIUM]:448,[ci.E.LARGE]:780},l);return(0,b.jsx)(De.w,{className:o()({[v]:s}),ref:l,children:(0,b.jsx)(mi.o.Provider,{value:c,children:(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)(ua,{}),false]})})})},pa=()=>(0,b.jsx)(Ue._,{label:"Puffin",focusTransferId:"PUFFIN",children:(0,b.jsx)(r.s,{fallback:L,children:(0,b.jsx)(E,{children:(0,b.jsx)(da,{})})})});var ga=i(76092),ma=i(69024);function xa(e){return e.sort(((e,t)=>t.timestamp-e.timestamp))}function va(e,t){return t.some((t=>t.user.uri===e.user.uri))?t:xa([...t,e])}function ba(e,t){return t.filter((t=>t.user.uri!==e))}var ya=i(59677);var ha=i(14442),fa=i(57316);function ja(){const e=(0,ma.C)(),t=(0,ga.jE)(),i=["friend-activity"],n=e=>{t.setQueryData(i,((t=[])=>function(e,t){return xa(t.map((t=>t.user.uri===e.user.uri?e:t)))}(Array.isArray(e)?e[0]:e,t)))},{subscribeToFriend:s,unSubscribeFromFriend:r,subscribeAndFetchFeed:l}=function(e){const t=(0,ma.C)(),i=(0,a.useRef)({}),n=(0,a.useRef)(e);n.current=e;const s=(0,a.useCallback)((e=>{const a=(0,ya.o_)(e)?.username,s=t.subscribeToBuddyActivity(a,(e=>{e&&n.current(e)}));return i.current[e]=s,s}),[t]),r=(0,a.useCallback)((e=>{i.current[e]?.cancel(),delete i.current[e]}),[]),l=(0,a.useCallback)(((e,i)=>t.fetchFriendActivityWithSubscriptions(e,i)),[t]);return(0,a.useEffect)((()=>{const e=i.current;return()=>{Object.values(e).forEach((e=>{e.cancel()}))}}),[t]),{subscribeToFriend:s,unSubscribeFromFriend:r,subscribeAndFetchFeed:l}}(n),o=(0,a.useRef)();(0,a.useEffect)((()=>()=>o.current?.cancel()),[]);const c=(0,aa.I)({queryKey:i,queryFn:()=>new Promise((e=>{o.current=l(n,e)})).then((e=>xa(e))),staleTime:6e5,gcTime:36e5,refetchInterval:864e5,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!0});return(0,fa.N)(ha.mc.OPERATION_COMPLETE,(async a=>{const n=a.data.uris;if(a.data.operation!==ha.JK.FOLLOW_USER){if(a.data.operation===ha.JK.UNFOLLOW_USER)for(const e of n)r(e),t.setQueryData(i,((t=[])=>ba(e,t)))}else for(const a of n){const n=(await e.fetchFriendActivity([a]))[0];t.setQueryData(i,((e=[])=>va(n,e))),s(a)}})),c}const Na=(0,a.lazy)((()=>Promise.all([i.e(4151),i.e(7564)]).then(i.bind(i,2802))));function Ca(){const{data:e,error:t,isLoading:i}=ja();return!(0,pt.n)()||i||t?null:(0,b.jsx)(Na,{friends:e??[]})}var Sa=i(46132);function wa(e){return e.sort(((e,t)=>t.timestamp-e.timestamp))}function ka(e,t){return t.some((t=>t.user.uri===e.user.uri))?t:wa([...t,e])}function Ea(e,t){return t.filter((t=>t.user.uri!==e))}var Ra=i(93409),Ta=i(91625);function Ia(){const e=(0,Sa.C)(),t=(0,ga.jE)(),i=["friend-activity"],{subscribeToFriend:n,unSubscribeFromFriend:s}=function(e){const t=(0,Sa.C)(),i=(0,a.useRef)({}),n=(0,a.useRef)(e);n.current=e;const s=(0,a.useCallback)((e=>{const a=(0,ya.o_)(e)?.username,s=t.subscribeToBuddyActivity(a,(e=>{e&&n.current(e)}));return i.current[e]=s,s}),[t]),r=(0,a.useCallback)((e=>{i.current[e]?.cancel(),delete i.current[e]}),[]);return(0,a.useEffect)((()=>{const e=i.current;return()=>{Object.values(e).forEach((e=>{e.cancel()}))}}),[]),{subscribeToFriend:s,unSubscribeFromFriend:r}}((e=>{t.setQueryData(i,((t=[])=>function(e,t){return wa(t.map((t=>t.user.uri===e.user.uri?e:t)))}(e,t)))})),r=(0,aa.I)({queryKey:i,queryFn:()=>Ta.xA(Ra.n.getInstance()).then((e=>(e.body.friends.forEach((e=>n(e.user.uri))),wa(e.body.friends)))),staleTime:6e5,gcTime:36e5,refetchInterval:864e5,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!0});return(0,fa.N)(ha.mc.OPERATION_COMPLETE,(async a=>{const r=a.data.uris;if(a.data.operation!==ha.JK.FOLLOW_USER){if(a.data.operation===ha.JK.UNFOLLOW_USER)for(const e of r)s(e),t.setQueryData(i,((t=[])=>Ea(e,t)))}else for(const a of r){const s=(await e.fetchFriendActivity([a]))[0];t.setQueryData(i,((e=[])=>ka(s,e))),n(a)}})),r}const La=(0,a.lazy)((()=>Promise.all([i.e(4151),i.e(6548)]).then(i.bind(i,28934))));function Aa(){const{data:e,error:t,isLoading:i}=Ia();return!(0,pt.n)()||i||t?null:(0,b.jsx)(La,{friends:e??[]})}var Pa=i(73938),Oa=i(34305),_a=i(93720);const Ua="Bjx5Gw7p3JoiF4qI6eMQ",Da=()=>{const{deviceFilterState:e,isMaybeHeadphoneDevice:t}=(0,J.j)(),i=(0,ae.j)(),a=(0,Ie.v)(),n=(0,ye.A)(),s=e.currentState.externalizationEnabled||e.currentState.specificEnabled,r=n===ue.Yn.LOSSLESS||n===ue.Yn.LOSSLESS_24;return(0,b.jsxs)("div",{className:Ua,children:[a&&s&&t&&(0,b.jsx)(fi.C,{size:"small",semanticColor:"textBrightAccent"}),(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBrightAccent",children:i&&r&&"Lossless"})]})};var Ba=i(87500),Fa=i(27046);const Ma="G1CP8Uu3Gf2cihYJI6Da",Va="nNGIZKkKfoCorRv2f452",Ha="IoeexgnqTLHXvE5pct_0",qa="XFbGPr_IwzKGEhcDpxkS",Qa="KYkSwfV1FCtD15TMChbH",za="v7CrgRsPeGhw_wa_21pQ",Ya="v_d7zRnXAkuJt1lE8tzS",Ga=({onClick:e})=>{const{deviceName:t,formattedDeviceName:i}=M();return(0,b.jsx)("div",{className:Ya,children:(0,b.jsx)(Fa.Zp,{label:i??t,children:(0,b.jsx)(Ba.j,{lineClamp:1,onClick:e,children:(0,b.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:i??t})})})})};var Ka=i(84933),Za=i(59931),Wa=i(39356);const Xa=({deviceType:e,isGroup:t,isLocalDevice:i,isPlaying:a})=>{const n=(0,Za.g)();let s;if(a)s=(0,b.jsx)(Ka.A,{});else{const a=(0,Wa.tf)(e,t,i?n:null);s=(0,b.jsx)(a,{semanticColor:"textBrightAccent","data-testid":"device-icon",role:"presentation"})}return(0,b.jsxs)("div",{className:qa,children:[(0,b.jsx)("div",{className:Qa,children:s}),(0,b.jsx)(je.d,{variant:"celloCanon",semanticColor:"textBase",lineClamp:1,children:O.Ru.get("web-player.connect.device-picker.current-device")})]})};var Ja=i(69524),$a=i(56601),en=i(69475),tn=i(65104);const an=({spec:e})=>{const{currentDevice:t}=(0,en.l)(),{id:i,connectStateId:a,isLocalNetwork:n,supportsLogout:s}=t,r=(0,tn.W)(),l=!n&&s,o=l,c=(0,Ie.v)(),u=(0,ae.j)(),{deviceName:d,formattedDeviceName:p}=M(),g=r?Ja.g:Mi.V;return(0,b.jsx)("div",{className:za,children:c||u?(0,b.jsx)(g,{"aria-label":p??d,size:"small",autoMirror:!1}):o&&(0,b.jsx)($a.V,{title:p??d,deviceId:i,connectStateDeviceId:a,allowForgetDevice:l,spec:e.containerViewFactory().headerFactory().activeDeviceFactory()})})};var nn=i(81783),sn=i(20774),rn=i(40724),ln=i(34952),on=i(69036),cn=i(45559),un=i(45168);const dn="k5CAXCZwazRLdTWi5mpN",pn="f2Wgf5OqTaBlTRRKZe9X",gn=()=>{const[e,t]=(0,a.useState)(ln.ez.BROADCAST_STATUS_UNKNOWN);!function(e,t){const i=(0,cn.d)(),n=(0,un.A)(t),s=(0,on.a)();(0,a.useEffect)((()=>i.getBroadcastingEvents().addListener(e,(e=>{s()&&n(e)}))),[i,n,e,s])}(rn.P.BROADCAST_STATUS_UPDATE,(({data:e})=>{t(e??ln.ez.BROADCAST_STATUS_UNKNOWN)}));if(e===ln.ez.BROADCAST_STATUS_UNKNOWN||e===ln.ez.BROADCAST_UNAVAILABLE)return null;const i=e===ln.ez.BROADCAST_ON;return(0,b.jsxs)("div",{className:dn,children:[(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",as:"label",htmlFor:"jam.broadcasting",className:pn,children:O.Ru.get("web-player.social-connect.broadcasting.toggle-label")}),(0,b.jsx)(Ne.l,{id:"jam.broadcasting",value:i,onSelected:()=>{},condensed:!0})]})};var mn=i(1570),xn=i(23330),vn=i(80451),bn=i(4355);const yn="device-picker-header",hn=({isPlaying:e,spec:t})=>{const{currentDevice:i}=(0,en.l)(),{id:a,connectStateId:n,type:r,isLocal:l,isLocalNetwork:c,isGroup:u,incarnation:d,supportsLogout:p}=i,g=(0,Ie.v)(),m=(0,ae.j)(),{togglePuffin:x}=(0,sn.c)(),{currentSession:v}=(0,vn.D)(),y=(0,xn.y)(),h=(0,s.NC)(bn.PE),f=!v?.active&&y,j=(0,Wa.HJ)(d),N=!c&&p,C=N||j,S=(0,b.jsx)(nn.T,{deviceId:a,connectStateDeviceId:n,allowForgetDevice:N,incarnation:j?d:void 0}),w=g||m,k=(0,b.jsx)(H.v,{className:o()(Va,{[Ha]:w}),id:yn,variant:"naked",title:(0,b.jsx)(Xa,{deviceType:r,isGroup:u,isLocalDevice:l,isPlaying:e}),subtitle:(0,b.jsxs)("div",{className:Ya,children:[(0,b.jsx)(Ga,{onClick:w?x:void 0}),w&&(0,b.jsx)(Da,{})]}),trailing:(0,b.jsx)(an,{spec:t}),"aria-labelledby":yn,onClick:w?x:void 0,onClickHint:O.Ru.get("web-player.connect.device-picker.current-device"),body:f&&(0,b.jsxs)(b.Fragment,{children:[h&&(0,b.jsx)(gn,{}),(0,b.jsx)("hr",{className:Ma})]}),footer:f&&(0,b.jsx)(mn.$,{})});return C?(0,b.jsx)(_a.h,{menu:S,children:k}):k};var fn=i(59227),jn=i(86291),Nn=i(53420),Cn=i(53500),Sn=i(2869);const wn="h0XG5HZ9x0lYV7JNwhoA",kn=()=>{const e=(0,Pa.pG)({data:{identifier:Pa.gw.SIDEPANEL}}),t=(0,Nn.e)(),i=(0,Cn.O)(),n=(0,fn.C)(),{devices:r}=(0,en.l)(),{isPlaying:l}=(0,Sn.GK)(),[o]=(0,j.sV)(),c=(0,a.useRef)(n),u=(0,a.useRef)(o.context.devicePicker?.interactionId);c.current=n,u.current=o.context.devicePicker?.interactionId;const d=(0,P.d4)((e=>e.playback?.castState??window.cast?.framework.CastState.NO_DEVICES_AVAILABLE)),m=(0,jn.Or)(d);(0,a.useEffect)((()=>()=>{c.current(u.current)}),[u]);const x=(0,s.NC)(Le.q5y);return(0,a.useEffect)((()=>{x?i.startActiveDiscovery():t.getCapabilities().supportsLocalDiscovery&&t.updateListOfDevices()}),[t,i,x]),(0,b.jsx)(Ue._,{label:O.Ru.get("playback-control.connect-picker"),focusTransferId:"DEVICE-PICKER",children:(0,b.jsxs)(De.w,{className:wn,fixedHeader:(0,b.jsx)(p.a,{title:O.Ru.get("playback-control.connect-picker"),panel:g.Z.DevicePicker}),children:[(0,b.jsx)(hn,{isPlaying:l,spec:e}),(0,b.jsx)(Oa.f,{devices:r,areWebPlayerCastDevicesAvailable:m,spec:e})]})})};var En=i(84718),Rn=i(46713),Tn=i(56368),In=i(92265),Ln=i(39503),An=i(31352),Pn=i(64193),On=i(76335);const _n=()=>(0,b.jsx)(b.Fragment,{}),Un=()=>(0,b.jsx)(b.Fragment,{});var Dn=i(42252),Bn=i(6100),Fn=i(78158);const Mn="Xh1TBgSrJAYVdjRM8zFV",Vn="XtrKVBpPjO52Dsuh7Sl3",Hn="Ebrqn7sM1CfWaEig2gQW",qn="cA09n1bnWHC5ii99Gjpq",Qn=()=>(0,b.jsx)("div",{className:(0,Fn.Ju)("invertedDark",qn),children:(0,b.jsx)(c.E,{variant:"bodySmall",children:O.Ru.get("web-player.now-playing-view.chapters.disclaimer")})});var zn=i(16330),Yn=i(52037);const Gn=({title:e,isActive:t,isPlaying:i,timestamp:n,onClick:s})=>{const r=(0,a.useCallback)((()=>{s(n)}),[s,n]);return(0,b.jsx)(H.v,{variant:"naked",id:e,hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",title:(0,b.jsxs)(c.E,{variant:"bodyMedium",semanticColor:t?"textBrightAccent":"textBase",className:"standalone-ellipsis-one-line",children:[i&&t&&(0,b.jsx)(zn.J,{animated:t})," ",e]}),subtitle:(0,Yn.f)(n),onClick:r})};var Kn=i(28740),Zn=i(23090);function Wn(e,t){if(!e)return null;const i=(0,Zn.s)(e);return null===i?null:t.findIndex((e=>(e.seekStart?.milliseconds??0)<=i&&(e.seekStop?.milliseconds??1/0)>=i))}var Xn=i(64888),Jn=i(96266),$n=i(61869);const es=new Jn.l("queryNpvEpisodeChapters","query","367f0e93a0d219ae6f5874bcc460201db0a43467ae94f16298931a704ac62ea6",null),ts=12e5,is=6e5;var as=i(95168),ns=i(52833);var ss=i(20871),rs=i(88869);const ls=(0,a.memo)((({chapters:e,episodeUri:t,nextOffset:i,limit:n,isPlaying:s,isMLGeneratedChapters:r})=>{const l=(0,N.z)(),{logger:o,spec:c}=(0,Ae.r)(Bn.U,{}),{chapters:u,fetchNextPage:d}=(({uri:e,startOffset:t=0,pageSize:i,autoFetchOnMount:n=!0})=>{const{request:s}=(0,a.useContext)(as.j),{data:r,isLoading:l,error:o,fetchNextPage:c}=(0,Xn.q)({queryKey:["npv","episode-chapters",e,{startOffset:t,limit:i}],queryFn:({pageParam:t})=>(0,ns.c)(s,es,function(e,t,i){return{offset:t,limit:i,uri:e}}(e,t,i)),staleTime:is,gcTime:ts,enabled:n,initialPageParam:t,getNextPageParam:e=>{if("Episode"!==e?.data?.episodeUnionV2.__typename)return;const t=e.data.episodeUnionV2.displaySegments;return t?.displaySegments.pagingInfo.nextOffset&&t.displaySegments.pagingInfo.nextOffset>0?t.displaySegments.pagingInfo.nextOffset:void 0}}),u=(0,a.useCallback)((async()=>{await c()}),[c]);return{chapters:(0,a.useMemo)((()=>r?.pages.flatMap((e=>"Episode"===e?.data?.episodeUnionV2.__typename&&e.data.episodeUnionV2.displaySegments?.displaySegments.items?e.data.episodeUnionV2.displaySegments.displaySegments.items:[]))??[]),[r?.pages]),error:o,loading:l,fetchNextPage:u}})({uri:t,pageSize:n??10,startOffset:i??e.length,autoFetchOnMount:!1}),p=(0,a.useMemo)((()=>(u.length>0?[...e,...u]:e).filter(os)),[e,u]),g=(e=>{const t=(0,N.z)(),[i,n]=(0,a.useState)((()=>Wn(t.getState(),e)));return(0,Kn.$)((()=>{const a=Wn(t.getState(),e);a!==i&&n(a)}),500),i})(p),m=(0,a.useCallback)((e=>{l.seekTo(e),o.logInteraction(c.chapterRowFactory().hitSeekToTime({msToSeekTo:e})),l.getState()?.isPaused&&(l.resume(),o.logInteraction(c.chapterRowFactory().hitResume({itemToBeResumed:t})))}),[t,o,l,c]);return p.length?(0,b.jsxs)(ss.w,{className:Mn,children:[(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.now-playing-view.chapters")}),r&&(0,b.jsx)(Qn,{}),(0,b.jsx)(rs._,{onReachBottom:d,triggerOnInitialLoad:!1,className:Vn,children:(0,b.jsx)(Fi.$,{"aria-label":O.Ru.get("web-player.now-playing-view.chapters"),className:Hn,children:p.map(((e,t)=>{if(!e.title||"number"!=typeof e.seekStart?.milliseconds)return null;const i=t===g;return(0,b.jsx)(Vi.c,{children:(0,b.jsx)(Gn,{onClick:m,timestamp:e.seekStart.milliseconds,title:e.title,isActive:i,isPlaying:s})},e.seekStart.milliseconds)}))})})]}):null}));function os(e){return"TalkDisplaySegment"===e.__typename}const cs=new Jn.l("queryNpvEpisode","query","87154b52f1db757e057892dbd0cff2399b67b76263f2b20ea43bb5fc456017dd",null),us=e=>"Episode"===e?.__typename,ds=e=>"__typename"in e&&"Podcast"===e.__typename,ps=e=>!!e&&"__typename"in e&&"Episode"===e.__typename;var gs=i(55374),ms=i(43211),xs=i(12953),vs=i(77),bs=i(42365),ys=i(50648),hs=i(70462),fs=i(68031),js=i(56192),Ns=i(1514),Cs=i(44817),Ss=i(98913),ws=i(86317),ks=i(42668);const Es="YdLiRQVNwEQzUNR44QuY",Rs="VVxt7MTKoKdOCVIWYfHn",Ts="c21KEAgelRvfiGswmHy9",Is=({images:e,contentRating:t,contextTitle:i,contextUri:n,menu:s,position:r=0,title:l,type:o,uri:u,usePlayContextItem:d})=>{const p=(0,vs.Zp)(),{draggable:g,onDragStart:m}=(0,fs.P)(),x=(0,ya.o_)(u)?.toURLPath(!0),v=n&&(0,ya.o_)(n)?.toURLPath(!0),y=(0,mi.y)(),{badges:h}=(0,ks.b)({contentRating:t}),{isPlaying:f,togglePlay:j}=d({uri:u}),{spec:N,logger:C}=(0,Ae.r)(ys.G,{data:{uri:u,position:r}}),S=(0,a.useCallback)((e=>{if(e.stopPropagation(),e.preventDefault(),x){const e=N.hitUiNavigate({destination:x});C.logInteraction(e),p(x)}}),[C,p,N,x]),w=(0,a.useCallback)((e=>{if(e.stopPropagation(),e.preventDefault(),x){const e=N.trackContainerFactory().trackInformationFactory().nameLinkFactory().hitUiNavigate({destination:x});C.logInteraction(e),p(x)}}),[C,p,N,x]),k=(0,a.useCallback)((e=>{if(e.stopPropagation(),e.preventDefault(),v){const e=N.trackContainerFactory().trackInformationFactory().contextLinkFactory({uri:n}).hitUiNavigate({destination:v});C.logInteraction(e),p(v)}}),[n,v,C,p,N]),E=(0,a.useCallback)((e=>{e.stopPropagation();const t=N.trackContainerFactory().coverArtFactory().hitPlay({itemToBePlayed:u});C.logInteraction(t),j()}),[C,N,j,u]),R=(0,a.useMemo)((()=>(0,b.jsx)(Fa.Zp,{label:l,children:(0,b.jsx)(je.d,{lineClamp:y===ci.E.MEDIUM?1:2,children:x?(0,b.jsx)(Fe.N,{to:x,onClick:w,children:l}):l})})),[y,w,l,x]),T=(0,a.useMemo)((()=>(0,b.jsxs)(Ba.j,{lineClamp:1,children:[h.explicit&&(0,b.jsx)(Cs.g,{}),h.nineteen&&(0,b.jsx)(Ss.q,{}),o,v&&i&&(0,b.jsxs)(b.Fragment,{children:[" • ",(0,b.jsx)(Fa.Zp,{label:i,children:(0,b.jsx)(Fe.N,{to:v,onClick:k,children:(0,b.jsx)(c.E,{semanticColor:"textSubdued",children:i})})})]})]})),[h.explicit,h.nineteen,i,v,k,o]);return(0,b.jsx)(_a.h,{menu:s,children:(0,b.jsx)(H.v,{activeBackgroundColor:"backgroundTintedPress",className:Ts,draggable:g,hoverBackgroundColor:"backgroundTintedHighlight",id:u,layout:"regular",onClick:S,onDragStart:e=>{if(e.target!==e.currentTarget)return;m(e,{itemUris:[u],dragLabelText:`${l}${i?` • ${i}`:""}`,contextUri:n})},variant:"naked",title:R,subtitle:y===ci.E.MEDIUM&&T,body:y!==ci.E.MEDIUM&&T,paddingInlineStart:bs.v4,paddingInlineEnd:bs.v4,media:(0,b.jsxs)("div",{className:Es,children:[(0,b.jsx)(hs.x,{className:Rs,isPlaying:f,isLocked:!1,onClick:E,playAriaLabel:O.Ru.get("tracklist.a11y.play",l,i)}),(0,b.jsx)(js.b,{type:ws.c.EPISODE,title:l,shape:js.u.ROUNDED_CORNERS,size:Ns.Qe.SIZE_48,images:e})]})})})};var Ls=i(98882);const As=({episode:e,position:t})=>{const i=e.podcastV2.data,a=ds(i)?i.uri:void 0,n=ds(i)?i.name:void 0,{usePlayContextItem:s}=(0,Ls.P)({uri:a??e.uri},{featureIdentifier:"episode_ai_dubbing"});return(0,b.jsx)(Is,{contentRating:e.contentRating?.label,contextTitle:n,contextUri:a,images:e.coverArt?.sources,menu:(0,b.jsx)(xs.b,{uri:e.uri}),position:t,title:e.name,type:O.Ru.get("card.tag.episode"),uri:e.uri,usePlayContextItem:s},e.uri)},Ps=e=>(0,b.jsx)(c.E,{...e,as:"div",variant:"bodySmall"});var Os=i(96282);const _s="KJEbbXyTy0gbIalPPwjP",Us=e=>(0,b.jsx)(Os.B,{className:_s,...e}),Ds="dmEFRgvLS6M2o8rmoX6v",Bs=({description:e,episodes:t,title:i,...a})=>(0,b.jsxs)(ss.w,{...a,className:Ds,children:[(0,b.jsx)(ss.X,{icon:(0,b.jsx)(ms.H,{size:"small"}),tooltipLabel:i,children:i}),(0,b.jsx)(Ps,{children:e}),(0,b.jsx)(Us,{children:t.map(((e,t)=>(0,b.jsx)(As,{episode:e,position:t},e.uri)))})]});var Fs=i(72553),Ms=i(64603);function Vs({episode:e}){const t=(e=>e.aiDubbedEpisodes?.items?e.aiDubbedEpisodes.items.map((e=>e.data)).filter((t=>ps(t)&&t.uri!==e.uri)):[])(e),{spec:i}=(0,Ae.r)(gs.y,{});if(t.length<=0)return null;const a=(0,O.wB)(t[0]?.language?.code),n=t.length>1&&O.Ru.get("web-player.now-playing-view.dubbed-episodes.title-multiple")||a&&O.Ru.get("web-player.now-playing-view.dubbed-episodes.title-single-with-language",{language:(0,Ms.kX)(a)})||O.Ru.get("web-player.now-playing-view.dubbed-episodes.title-single"),s=t.length>1?O.Ru.get("web-player.now-playing-view.dubbed-episodes.description-multiple"):O.Ru.get("web-player.now-playing-view.dubbed-episodes.description-single");return(0,b.jsx)(Fs.r,{spec:i.episodeListFactory(),children:(0,b.jsx)(Bs,{description:s,episodes:t,title:n})})}var Hs=i(95274);function qs({episode:e}){const t=(e=>us(e)&&e.originalEpisode&&ps(e.originalEpisode?.data)?e.originalEpisode.data:void 0)(e),{spec:i}=(0,Ae.r)(Hs.I,{});if(!t)return null;const a=(0,O.wB)(t.language?.code),n=a?O.Ru.get("web-player.now-playing-view.original-episode.title-with-language",{language:(0,Ms.kX)(a)}):O.Ru.get("web-player.now-playing-view.original-episode.title"),s=a?O.Ru.get("web-player.now-playing-view.original-episode.description-with-language",{language:(0,Ms.kX)(a)}):O.Ru.get("web-player.now-playing-view.original-episode.description");return(0,b.jsx)(Fs.r,{spec:i,children:(0,b.jsx)(Bs,{description:s,episodes:[t],title:n})})}var Qs=i(78773),zs=i(29866);const Ys="YC6K2bFUeJkdE4cCvbD3",Gs="vHQbygDcvOQ4Ls0W6vb1",Ks="Ku9l84_lLCFE3crS1Y8B",Zs="TortsxZeDfI28luc5Dac",Ws="XHpZHlxCiVHe8qTVVskT",Xs="lu9_R5Kw07YEWlq8eKs9",Js="RypbYIkqqlUkhxg_RwYm",$s=(0,a.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:a,logger:n}=(0,Ae.r)(Qs.c,{data:{uri:i}}),{isPlaying:s}=(0,Ls.P)({uri:i},{featureIdentifier:"episode"}),r=a.timestampLinkFactory();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:Gs,children:[(0,b.jsx)("div",{className:Zs,children:(0,b.jsx)(c.E,{as:"p",variant:"marginal",semanticColor:"textSubdued",children:O.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,a)=>{const l=`transcript-section-${a}`;return(0,b.jsxs)("div",{className:Ks,children:[(0,b.jsx)("button",{className:Ws,onClick:()=>{t(e.startMs,l),n.logInteraction(s?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,b.jsx)(zs.k,{id:l,targetURI:(0,ya.o_)(i),fadeOut:!0,children:(0,b.jsx)(c.E,{variant:"marginalBold",semanticColor:"textSubdued",className:Xs,children:(0,Yn.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBase",className:Js,dir:"auto",children:e},`transcript-text-${t}`)))]},l)}))]})})}));var er=i(11892),tr=i(66967),ir=i(93723),ar=i(7456),nr=i(62562),sr=i(33769);var rr=i(45292),lr=i(14197),or=i(6309);const cr="_QEMUk5U16U3CQn0wvbD",ur="mbkl2P60JUhDqc9qGvp9",dr="Xh6dG3pzi2SS7v4cvZzG",pr="sOdoW26RUwggLToa7xDt",gr="B_TcBcc1BM2yLgvXbh66",mr="tRnhyUQiKOxA3z8mUD_U",xr="_shxqlkLuB52H1iCh_OQ",vr="hAwePVlxumRNpdOSpwyV";const br=a.forwardRef((function({className:e="",segment:t,onClickPlay:i,isPlaying:n},s){const{label:r,Icon:l}=(0,a.useMemo)((()=>function(e){if("TALK"===e.type)return{Icon:tr.L,label:O.Ru.get("playlist.a11y.play",e.title)};const t=e.track.artists?.map((e=>e.name)).join(O.Ru.getSeparator())||"";return{Icon:ir.v,label:O.Ru.get("tracklist.a11y.play",e.track.name,t)}}(t)),[t]),c=(0,a.useCallback)((()=>{i()}),[i]);return(0,b.jsxs)("div",{className:o()(xr,e),children:[n?(0,b.jsx)(zn.J,{className:mr,animated:!0}):(0,b.jsx)("span",{className:mr,children:(0,b.jsx)(l,{iconSize:16,"aria-hidden":"true"})}),(0,b.jsx)(hs.x,{className:gr,iconClassName:vr,onClick:c,isPlaying:n,isLocked:!1,playAriaLabel:r,ref:s})]})})),yr=({children:e,onTriggerPlay:t,episodeUri:i,index:a})=>{const{spec:n,logger:s}=(0,Ae.r)(ar.f,{}),r=(0,rr.W)(),l=(0,er.YQ)((()=>{r({intent:"play",type:"double-click"});const e=s.logInteraction(n.segmentItemFactory({uri:i,position:a||0}).doubleHitPlay({itemToBePlayed:i}));t(e)}),or.d,{leading:!0,trailing:!1});return(0,b.jsx)("div",{className:pr,onDoubleClick:l,children:e})},hr=({segment:e,episodeUri:t,index:i})=>{const{spec:n,logger:s}=(0,Ae.r)(ar.f,{}),{isActive:r,isPlaying:l,onClick:o}=(0,lr.L)({episodeUri:t,start:e.start,stop:e.stop}),c={uri:t},u=function(e){const t=[{url:e.track.album.image}];return{type:ws.c.TRACK,uri:e.uri,uid:null,provider:null,images:t,name:e.track.name,mediaType:"audio",duration:{milliseconds:0},album:{type:ws.c.ALBUM,uri:e.track.album.uri,name:e.track.album.name,images:t},artists:e.track.artists.map((e=>({type:ws.c.ARTIST,name:e.name,uri:e.uri})))}}(e),d=n.segmentItemFactory({uri:t,position:i||0}).playbackButtonFactory(),p=(0,a.useCallback)((()=>{o({}),r&&l?s.logInteraction(d.hitPause({itemToBePaused:t})):r&&!l?s.logInteraction(d.hitResume({itemToBeResumed:t})):s.logInteraction(d.hitPlay({itemToBePlayed:t}))}),[t,r,l,s,o,d]);return(0,b.jsxs)(yr,{onTriggerPlay:o,episodeUri:t,children:[(0,b.jsx)(br,{segment:e,isActive:r,isPlaying:l,onClickPlay:()=>{p()}}),(0,b.jsx)(sr.d,{context:c,item:u,titleTypeVariant:"bodyMedium",subtitleTypeVariant:"bodySmall",onTitleClick:e=>{s.logInteraction(n.segmentItemFactory({uri:t,position:i||0}).albumLinkFactory({uri:c.uri}).hitUiNavigate({destination:e||""}))},onSubtitleClick:e=>{s.logInteraction(n.segmentItemFactory({uri:t,position:i||0}).artistLinkFactory({uri:e||"",position:0}).hitUiNavigate({destination:e||""}))}})]})},fr=({segment:e,episodeUri:t,index:i})=>{const{spec:n,logger:s}=(0,Ae.r)(ar.f,{}),{isActive:r,isPlaying:l,onClick:o}=(0,lr.L)({episodeUri:t,start:e.start,stop:e.stop}),u=function(e){const t=[];return{type:ws.c.UNKNOWN,uri:e.uri,uid:null,provider:null,images:t,name:e.title,mediaType:"audio",duration:{milliseconds:0},album:{type:ws.c.ALBUM,uri:e.show.uri,name:e.show.name,images:t},artists:[]}}(e),d=n.segmentItemFactory({uri:t,position:i||0}).playbackButtonFactory(),p=(0,a.useCallback)((()=>{o({}),r&&l?s.logInteraction(d.hitPause({itemToBePaused:t})):r&&!l?s.logInteraction(d.hitResume({itemToBeResumed:t})):s.logInteraction(d.hitPlay({itemToBePlayed:t}))}),[t,r,l,s,o,d]);return(0,b.jsxs)(yr,{onTriggerPlay:o,episodeUri:t,children:[(0,b.jsx)(br,{segment:e,isActive:r,isPlaying:l,onClickPlay:()=>{p()}}),(0,b.jsx)(nr.r,{children:(0,b.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:u.name})},u.name)]})};var jr=i(56144);function Nr(e){return!!(0,jr.o)().getCapabilities().isSupported&&function(e){const t=e.metadata?.["parent_episode.uri"];return!!t&&(0,ya.gH)(t)}(e)}const Cr=(0,En.mc)((({item:e})=>{const t=e.metadata?.["parent_episode.uri"],i=function(e){const t=(0,jr.o)();return(0,a.useCallback)((async(i,a)=>{if(!e)return[];try{return await t.getSegments(e,i,a)}catch(e){return[]}}),[e,t])}(t),[n,s]=(0,a.useState)([]),r=(0,a.useRef)(!1),l=(0,a.useRef)(0),o=(0,a.useCallback)((()=>{const e=l.current;null!==e&&(r.current||(r.current=!0,i(e,10).then((e=>{s((t=>{const i=t.concat(e);return l.current=i.length+1,i})),r.current=!1}))))}),[i]);return(0,a.useEffect)((()=>{s([])}),[e.uri]),t?(0,b.jsxs)(ss.w,{className:cr,children:[(0,b.jsx)(ss.X,{className:ur,children:O.Ru.get("music_and_talk.in_this_episode")}),(0,b.jsx)("div",{className:dr,children:(0,b.jsx)(rs._,{onReachBottom:o,triggerOnInitialLoad:!0,children:n.map(((e,i)=>"MUSIC"===e.type?(0,b.jsx)(hr,{segment:e,episodeUri:t},`${e.uri}-${i}`):(0,b.jsx)(fr,{segment:e,episodeUri:t},`${e.uri}-${i}`)))})})]}):null}),{name:"NPVInThisEpisode"});var Sr=i(61461),wr=i(71963),kr=i(95404);const Er=({children:e,...t})=>(0,b.jsx)(Rr,{size:"small",...t,$_css:kr.ZSH,children:e});var Rr=(0,wr.Ay)(se.n).withConfig({displayName:"ButtonSecondary___StyledEncoreButtonSecondary",componentId:"sc-13xoveo-0"})((e=>({borderColor:e.$_css})));function Tr(e,t){return e.uid??`${e.uri}:${t}`}var Ir=i(6408),Lr=i(70414),Ar=i(6577),Pr=i(1813),Or=i(53964),_r=i(43447),Ur=i(61108);const Dr="VXFYm2GnsH4zc3EPikNi",Br="yvjS3DPkDIHgMUZxL972",Fr="Os6nTuXambdCB8H81QRT",Mr="RDIVOZoeGMohQ8MeJjUH",Vr="Cj0QJuDauCo39643t0Q8",Hr="evQ_5Znk6OXYHBzLCSoN",qr="nCwi6jOC9FEKO5tKAQKW",Qr="DP0qcvnv6ToERKYhb9Xk",zr="m1ZL7TCf7Ge2VxQjgGgv",Yr="yIYdkVZJzDlj1lqOmV1M",Gr="kh6wYYPvgRPBhA2wj3AS",Kr="qp7Sys7hJSZHLzw4K_yF",Zr="fIabFr0bD1PUqwipmTjQ",Wr=({title:e,type:t,images:i,onTogglePlay:a,isPlaying:n,ariaPauseLabel:s,ariaPlayLabel:r,isPlayable:l})=>{const c=(0,qt._)(),u=t===ws.c.ARTIST||t===ws.c.USER?js.u.CIRCLE:js.u.ROUNDED_CORNERS;return(0,b.jsxs)("div",{className:Gr,children:[(0,b.jsx)(js.b,{fadeIn:!0,images:c(i??[],48),shape:u,size:Ns.Qe.SIZE_48,iconSize:"medium",type:t,title:e,loadingMode:"eager"}),!l&&(0,b.jsx)("span",{className:o()(Kr,Vr),children:(0,b.jsx)(Ur.R,{onClick:a,version:Ur.H.transparent,isPlaying:n,ariaPauseLabel:s,ariaPlayLabel:r,condensedAll:!0})})]})},Xr=({title:e,isActive:t})=>(0,b.jsx)(Fa.Zp,{showDelay:Fa.uF,label:e,children:(0,b.jsx)(je.d,{lineClamp:1,semanticColor:t?"textBrightAccent":"textBase",dir:"auto",children:e})});var Jr=i(19477);const $r=({menu:e,labelName:t})=>(0,b.jsx)(An.b,{menu:e,children:(0,b.jsx)(Jr.e,{className:Vr,label:O.Ru.get("more.label.context",t),size:"small"})});var el=i(5290),tl=i(23100),il=i(92686);const al=({queuedBy:e})=>{if(!e)return null;const t=(0,il.g)(e.images,{desiredSize:24});return(0,b.jsx)(Fa.Zp,{label:O.Ru.get("queue.queued-by",e.name),children:(0,b.jsx)("div",{children:(0,b.jsx)(_a.h,{menu:(0,b.jsx)(tl.B,{uri:e.uri}),children:(0,b.jsx)(Fe.N,{to:e.uri,children:(0,b.jsx)(el.e,{images:t?[t]:[],userIconSize:"small",width:24,displayName:e.name,username:e.username,label:""})})})})})},nl=({queuedBy:e,menu:t,moreButtonLabelName:i})=>(0,b.jsxs)("div",{className:Mr,children:[t&&i&&(0,b.jsx)($r,{menu:t,labelName:i}),(0,b.jsx)(al,{queuedBy:e})]});var sl=i(56327),rl=i(31635);const ll="spotify:app:queue";var ol=i(71115);const cl=()=>(0,b.jsx)("div",{className:Dr}),ul=({id:e,uid:t,uri:i,contextUri:n,index:s,dragLabel:r,type:l,title:c,subtitle:u,images:d,onDrop:p,allowedDropMimeTypes:g,menu:m,moreButtonLabelName:x,usePlayContextItem:v,section:y,queuedBy:h,ariaPauseLabel:f,ariaPlayLabel:j,onContextMenu:N,isPlayable:C,isAnyArtistBanned:S,handleArtistBanUndoClick:w,isNpv:k})=>{const{className:E,dropPosition:R,draggable:T,...I}=function({uid:e,uri:t,index:i,dragLabel:n,allowedMimeTypes:s=[],onDrop:r,sectionId:l}){const{draggable:o,onDragStart:c}=(0,rl.R)({index:i,contextUri:ll,sectionId:l,label:n??"",isEnabled:!!n}),u=(0,sl.A)({id:e??void 0,uri:t,allowedMimeTypesByDropPosition:{[Ar.Nz.BEFORE]:s,[Ar.Nz.AFTER]:s},onDrop:r});return(0,a.useMemo)((()=>({...u,draggable:o,onDragStart:c})),[o,u,c])}({uid:t,uri:i,index:s,dragLabel:r,onDrop:p,allowedMimeTypes:g,sectionId:y}),{isSelected:L}=(0,a.useContext)(Or.m),{onClick:A,onContextMenu:P,onKeyDown:O}=(0,Pr.q)({index:s,contextUri:n,onContextMenu:N,canRemovePlaylistItems:!1,removePlaylistItems:void 0,isTreeGrid:!0}),_=(0,te.s)(),{spec:U}=(0,Ae.r)(Ir.i,{data:{position:s,reason:"",uri:i}}),{isActive:D,isPlaying:B,togglePlay:F,triggerPlay:M}=v({uri:i,uid:t??void 0}),V=(0,a.useCallback)((()=>{const e=(0,ol.$I)({spec:U.playbackButtonFactory(),logger:_,uri:i,isActive:D,isPlaying:B});F({loggingParams:e})}),[D,B,_,U,F,i]),q=(0,_r.W)(w),Q=(0,a.useCallback)((()=>{if(S)return void q();const e=_.logInteraction(U.doubleHitPlay({itemToBePlayed:i}));M({loggingParams:e})}),[q,S,_,U,M,i]),z=(0,a.useCallback)((e=>{if("Enter"===e.key&&e.target instanceof Element&&e.currentTarget.querySelector(':scope > [role="button"]')===e.target){const e=_.logInteraction(U.playbackButtonFactory().hitPlay({itemToBePlayed:i}));M({loggingParams:e})}O(e)}),[_,O,U,M,i]),Y=(0,a.useCallback)((e=>{const t=e.currentTarget.querySelector('[role="button"]');t instanceof HTMLElement&&t.focus(),A(e)}),[A]),G=(0,b.jsx)(Wr,{type:l,onTogglePlay:V,isPlaying:B,title:c,images:d,ariaPauseLabel:f,ariaPlayLabel:j,isPlayable:C}),K=(0,b.jsx)(nl,{queuedBy:h,menu:m,moreButtonLabelName:x}),Z=L(s),W=Z&&L(s-1),X=Z&&L(s+1),J=(0,b.jsx)(H.v,{id:e,media:G,title:(0,b.jsx)(Xr,{isActive:D,title:c}),subtitle:u,className:o()(Fr,E,{[Hr]:W,[qr]:X,[zr]:k}),variant:L(s)?"tinted":void 0,hoverBackgroundColor:k?"backgroundTintedHighlight":"backgroundHighlight",trailing:K,onDoubleClick:Q,hoverAnimationDuration:"0ms",padding:ce.v4,onClick:()=>{},onContextMenu:P,"aria-disabled":C,tabIndex:0}),$=(0,b.jsx)(Lr.W,{className:o()(E),draggable:T&&!!r,"aria-posinset":s,onKeyDown:z,...I,onClick:Y,children:J});return(0,b.jsxs)(b.Fragment,{children:[R===Ar.Nz.BEFORE&&(0,b.jsx)(cl,{}),$,R===Ar.Nz.AFTER&&(0,b.jsx)(cl,{})]})},dl=e=>{const t=(0,b.jsx)(ul,{...e});return e.menu?(0,b.jsx)(_a.h,{menu:e.menu,children:t}):t},pl=({ad:e,index:t,...i})=>{const{uid:a,uri:n,type:s,title:r,advertiser:l,images:o}=e,c=Tr(e,t),u=l??r??O.Ru.get("ad-formats.advertisement");return(0,b.jsx)(dl,{uid:a,uri:n,id:c,index:t,type:s,title:u,images:o,subtitle:null,...i})};var gl=i(33e3);const ml=({type:e})=>{const t=function(e){switch(e){case ws.c.TRACK:return O.Ru.get("web-player.queue-history.item-type.track");case ws.c.EPISODE:return O.Ru.get("web-player.queue-history.item-type.episode");case ws.c.CHAPTER:return O.Ru.get("web-player.queue-history.item-type.chapter");case ws.c.AD:case ws.c.UNKNOWN:return null;default:return(0,ca.k)(e),null}}(e);return t&&(0,b.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:t})};var xl=i(17611),vl=i(45647),bl=i(64375),yl=i(30023),hl=i(65312),fl=i(60285),jl=i(45841),Nl=i(40425),Cl=i(32415);const Sl="iFEXaIHbvw1bGP0fFu9g",wl=({item:e,subtitle:t,tooltipText:i,showTypeLabel:n})=>{const s=(e=>{const t=(0,hl.T)(e.uri),i=(0,Cl.v)(e)||(0,Nl.p)(e)||(0,jl.d)(e),n=a.Children.toArray([(0,bl.N)(e)&&(0,b.jsx)(xl.R,{title:O.Ru.get("web-player.smart-shuffle.icon-hover-label"),"aria-label":O.Ru.get("web-player.smart-shuffle.icon-hover-label"),semanticColor:"textBrightAccent",size:"small"}),t===fl.kw.YES&&(0,b.jsx)(yl._,{}),i&&e.isExplicit&&!e.is19PlusOnly&&(0,b.jsx)(Cs.g,{}),i&&e.is19PlusOnly&&(0,b.jsx)(Ss.q,{size:16}),(0,Cl.v)(e)&&(e.hasAssociatedVideo||"video"===e.mediaType)&&(0,b.jsx)(vl.l,{})]);return n.length?(0,b.jsx)("span",{className:Sl,children:n}):null})(e);return(0,b.jsx)(Ba.j,{dir:"auto",children:(0,b.jsxs)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",className:Qr,children:[s?(0,b.jsx)("span",{className:Zr,children:s}):null,(0,b.jsx)(Fa.Zp,{label:i,showDelay:Fa.uF,children:(0,b.jsxs)("span",{className:Yr,children:[n&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ml,{type:e.type})," •"," "]}),t]})})]})})};var kl=i(46457),El=i(85930);function Rl(e){let{uri:t}=(0,El.f)();return e===kl.$.NextInQueue?t="spotify:app:queue:NextInQueue":e===kl.$.NextUp&&(t="spotify:app:queue:NextUp"),t??""}const Tl=({episode:e,index:t,showTypeLabel:i,...a})=>{const{uid:n,uri:s,type:r,name:l,images:o,show:c}=e,u=Tr(e,t),d=Rl(a.section),p=(0,b.jsx)(xs.b,{uri:s,uid:n??void 0,showUri:e.show.uri,contextUri:d,provider:e.provider}),g=(0,b.jsx)(wl,{item:e,tooltipText:c.name,showTypeLabel:i,subtitle:(0,b.jsx)(_a.h,{menu:(0,b.jsx)(gl.H,{uri:c.uri}),children:(0,b.jsx)(Fe.N,{to:c.uri,stopPropagation:!0,children:c.name})})});return(0,b.jsx)(dl,{uid:n,uri:s,contextUri:d,id:u,index:t,type:r,title:l,subtitle:g,images:o,dragLabel:l,menu:p,moreButtonLabelName:l,ariaPauseLabel:O.Ru.get("tracklist.a11y.pause",l,c.name),ariaPlayLabel:O.Ru.get("tracklist.a11y.play",l,c.name),...a})};var Il=i(75668),Ll=i(89162),Al=i(36450),Pl=i(8398),Ol=i(68702);const _l=({track:e,index:t,showTypeLabel:i,...n})=>{const{uid:s,uri:r,type:l,name:o,album:c}=e,u=Tr(e,t),d=Rl(n.section),{uri:p}=(0,El.f)(),g=e.isLocal?(0,b.jsx)(Ll.A,{uri:r,uid:s??void 0,contextUri:d}):(0,b.jsx)(Al.P,{uri:r,uid:s??void 0,albumUri:c.uri,artists:e.artists,contextUri:d,entityContextUri:p??void 0,isSmartRecommendation:(0,bl.N)(e),provider:e.provider}),m=e.artists.map((({name:e})=>e)).join(O.Ru.getSeparator()),x=e.artists?(0,b.jsx)(wl,{item:e,tooltipText:m,showTypeLabel:i,subtitle:(0,b.jsx)(b.Fragment,{children:e.artists.map(((e,t)=>(0,b.jsxs)(a.Fragment,{children:[t>0&&O.Ru.getSeparator(),(0,b.jsx)(_a.h,{menu:(0,b.jsx)(Il.t,{uri:e.uri}),children:(0,b.jsx)(Fe.N,{to:e.uri,stopPropagation:!0,children:e.name})})]},t)))})}):null,{isPlayable:v,isAnyArtistBanned:y}=(0,Ol.g)(r,{isPlayable:!0,isLocal:(0,ya.Pk)(r),isOutOfMarket:!1,artistUris:e.artists.map((e=>e.uri))}),{unBanArtists:h}=(0,Pl.M)(e.artists.map((e=>e.uri)));return(0,b.jsx)(dl,{uid:s,uri:r,contextUri:d,id:u,index:t,type:l,title:o,images:c.images,dragLabel:o,menu:g,moreButtonLabelName:o,subtitle:x,ariaPauseLabel:O.Ru.get("tracklist.a11y.pause",o,m),ariaPlayLabel:O.Ru.get("tracklist.a11y.play",o,m),isPlayable:!v,isAnyArtistBanned:y,handleArtistBanUndoClick:h,...n})};var Ul=i(21338),Dl=i(82387);const Bl=(e,t)=>{const i=(0,Ls.P)({uri:e??""},{featureIdentifier:"queue"}),n=(0,a.useMemo)((()=>function(e,t){return i=>{const n=(0,N.z)(),s=t===kl.$.NowPlaying,{playbackStatus:r,isActive:l,isPlaying:o}=(0,Sn.gC)((e=>s&&i.uri?(0,Dl.Ok)(e,i.uri):Ul.i.NOT_ACTIVE)),c=e(i),u=(0,a.useCallback)((e=>{const{uri:t,uid:a}=i;c.triggerPlay(e,t?async()=>n.skipToNext({uri:t,uid:a??null}):void 0)}),[c,n,i]),d=(0,a.useCallback)((e=>{c.togglePlay(e,(()=>{if(l)return o?n.pause():n.resume();const{uri:e,uid:t}=i;return n.skipToNext(e?{uri:e,uid:t??null}:void 0)}))}),[c,l,i,n,o]);return{playbackStatus:r,isActive:l,isPlaying:o,triggerPlay:u,togglePlay:d}}}(i.usePlayContextItem,t)),[i.usePlayContextItem,t]);return{...i,usePlayContextItem:n}};var Fl=i(42644),Ml=i(45866),Vl=i(13343),Hl=i(26205);const ql="main-nowPlayingView-queue",Ql="SQF5NXZsecXwP7qjjQ70",zl="main-nowPlayingView-openQueue",Yl="/search",Gl="/queue",Kl=a.memo((({spec:e})=>{const t=(0,Hl.t)(e);return(0,b.jsxs)(ss.w,{className:ql,ref:t,children:[(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.your-dj.npv.queue.title")}),(0,b.jsx)(c.E,{as:"div",semanticColor:"textSubdued",children:O.Ru.get("web-player.your-dj.npv.queue.description")})]})})),Zl=a.memo((({spec:e,logger:t})=>{const i=(0,Hl.t)(e);return(0,b.jsxs)(ss.w,{className:ql,ref:i,children:[(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.now-playing-view.empty-queue")}),(0,b.jsx)(Fe.N,{to:Yl,children:(0,b.jsx)(Er,{onClick:()=>{const i=e.searchButtonFactory().hitUiNavigate({destination:Yl});t.logInteraction(i)},children:O.Ru.get("web-player.now-playing-view.empty-queue-cta")})})]})})),Wl=(0,En.mc)((({isContextAd:e})=>{const{nextUp:t,queued:i}=(0,Vl.w)(),n=(0,vs.Zp)(),r=(0,j._Y)(),l=(0,s.NC)(Le.eWj),o=(0,On.L)(),{spec:c,logger:u}=(0,Ae.r)(Sr._,{}),d=i[0]||t[0],{usePlayContextItem:p}=Bl(d?.uri||null,kl.$.NextUp),g=(0,Hl.t)(c),m=(0,a.useCallback)((()=>{const e=c.openQueueButtonFactory().hitUiNavigate({destination:Gl});u.logInteraction(e),l?r(W.$S.QUEUE_BUTTON_CLICK):n(Gl)}),[n,r,l,c,u]);return o?.context?.uri&&(0,Fl.HS)(o.context)?(0,b.jsx)(Kl,{spec:c}):o&&d?(0,b.jsxs)(ss.w,{className:ql,ref:g,children:[(0,b.jsx)(ss.X,{action:(0,b.jsx)(Mt.H,{size:"small",condensed:!0,onClick:m,className:zl,semanticColor:"textSubdued",children:O.Ru.get("web-player.now-playing-view.open-queue")}),children:O.Ru.get("queue.next-in-queue")}),(0,b.jsxs)("ul",{className:Ql,children:[d.type===ws.c.TRACK&&(0,b.jsx)(_l,{track:d,index:0,usePlayContextItem:p,isNpv:!0}),d.type===ws.c.EPISODE&&(0,b.jsx)(Tl,{episode:d,index:0,usePlayContextItem:p,isNpv:!0}),e&&d.type===ws.c.AD&&(0,b.jsx)(pl,{ad:d,index:0,usePlayContextItem:p,isNpv:!0})]})]}):(0,b.jsx)(Zl,{spec:c,logger:u})}),{name:"NPVNextInQueue"}),Xl=e=>(0,Ml.V)()?null:(0,b.jsx)(Wl,{...e});var Jl=i(69334),$l=i(47690),eo=i(61535);const to="_mPIDSVjofNyCLhlaXuL",io="WbtcAaLN1SQCr16tuZXv",ao="mqlmYaGITrdEQC40rEOI",no="KEb8GSQPHsSmLCes_O07",so="Lkuf447h9WU9AaYHTsu7",ro="VU8VpmUxiLG5anxsH03k",lo="JO8KMTdQoJAPhSpBlaqE",oo="oKZq5I1c9_xWl3NWP1SU",co=(0,En.mc)((({coverArt:e,description:t,name:i,publisher:n,uri:s})=>{const r=(0,mi.y)(),{draggable:l,onDragStart:u}=(0,fs.P)({itemUris:[s],dragLabelText:i}),[d,p]=(0,eo.A)(s),g=!(0,pt.n)(),m=(0,vs.Zp)(),{spec:x,logger:v,UBIFragment:y}=(0,Ae.r)(Jl.M,{}),h=(0,a.useRef)(null),f=(0,a.useCallback)((()=>{const e=x.artworkFactory().hitUiNavigate({destination:s});v.logInteraction(e)}),[v,x,s]),j=(0,a.useCallback)((()=>{const e=x.titleFactory().hitUiNavigate({destination:s});v.logInteraction(e)}),[v,x,s]),N=(0,a.useCallback)((()=>{const e=x.podcastDescriptionFactory().hitUiNavigate({destination:s});v.logInteraction(e),m((0,ya.o_)(s).toURLPath(!0))}),[v,m,x,s]),C=(0,a.useCallback)((()=>{const e=x.followButtonFactory().hitFollow({itemToBeFollowed:s}),t=x.followButtonFactory().hitUnfollow({itemToBeUnfollowed:s});v.logInteraction(d?t:e),p(!d)}),[d,v,p,x,s]);return(0,b.jsxs)(ss.w,{className:to,children:[(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.now-playing-view.podcast-about.title")}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{type:"button","data-testid":"description-button",className:io,onClick:N,children:(0,b.jsx)(c.E,{as:"div",ref:h,variant:"bodySmall",className:ao,children:(0,b.jsx)(qe.N,{source:t})})})}),(0,b.jsxs)("div",{className:o()(no,{[so]:r!==ci.E.MEDIUM}),children:[(0,b.jsx)(y,{spec:x,children:(0,b.jsx)(H.v,{contentAlign:!0,id:"aboutPodcastNPV",className:lo,media:(0,b.jsx)(_a.h,{menu:(0,b.jsx)(gl.H,{uri:s}),children:(0,b.jsx)(Fe.N,{draggable:l,onDragStart:u,to:s,onClick:f,children:(0,b.jsx)(js.b,{className:oo,type:ws.c.SHOW,title:i,images:e?.sources,size:Ns.Qe.SIZE_48})})}),title:(0,b.jsx)(je.d,{lineClamp:1,children:(0,b.jsx)(_a.h,{menu:(0,b.jsx)(gl.H,{uri:s}),children:(0,b.jsx)(Fe.N,{draggable:l,onDragStart:u,to:s,onClick:j,children:i})})}),subtitle:(0,b.jsx)(Ba.j,{lineClamp:1,variant:"mesto",children:n})})}),(0,b.jsx)($l.W,{isFollowing:d,onClick:C,disabled:g,className:ro})]})]})}),{name:"NPVPodcastAbout"});var uo=i(86595);const po="f6_Fu_ei4TIJWR0wzvTk",go="TLmzadNIdvV8sYzTuXRg",mo="MT9De6UrCVQ8Qo6o3ikA",xo=a.memo((()=>(0,b.jsx)("div",{className:po,"aria-hidden":!0,children:(0,b.jsxs)("div",{className:go,children:[(0,b.jsx)(uo.Y,{as:"div",variant:"bodyMediumBold",className:mo,charCount:8,isLoading:!0}),[20,50,25].map(((e,t)=>(0,b.jsx)(uo.Y,{as:"div",variant:"bodySmall",className:mo,charCount:e,isLoading:!0},t)))]})})));var vo=i(91901);const bo="m3pzWNRu8xGY36YIaCY1",yo=(0,En.mc)((({topics:e,logTopicNavigation:t})=>!e||e.length<1?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.now-playing-view.discover-more")}),(0,b.jsx)(vo.N,{topics:e,onClick:t,className:bo})]})),{name:"NPVTopicsListWrapper"});var ho=i(23835);const fo="wYBEXo9heVZe_zkteOJ6",jo="EjaYcQIBa_uJkc86qrpQ",No="QER3MDmhErzCc5bKcklD",Co="fAKKlaCbuHm_cDfnO3UW",So="AHOmz0JPJhoOloFpM8s2",wo="d8y50Fa8LDK2Fuc92EaA",ko="XBYrBviGypqaAfM1BWxM",Eo="G4fVEUX2caQTFPB7mA89",Ro="ATHbG3rw7VRat_Knu9EO",To="LsAbtB5dQLMOgNkK6uNl",Io="nng8b1skt_Yh69A8uReL",Lo=e=>{switch(e){case ci.E.SMALL:return"titleSmall";case ci.E.LARGE:return"titleMedium";case ci.E.XLARGE:return"titleLarge";default:return"titleSmall"}},Ao=({readAlongSection:e,readAlongIndex:t,index:i,activeIndex:n,onActiveSectionChange:s,breakpoint:r})=>{const l=(0,a.useRef)(!0),u=(0,a.useRef)(null);return(0,a.useEffect)((()=>{i===n&&s?(l.current&&s({sectionRef:u}),l.current=!1):l.current=!0}),[n,i,s]),void 0===e.text?.sentence?.text?null:(0,b.jsx)("div",{ref:u,className:o()(Co,{[So]:i<n},r?.toLowerCase()),children:(0,b.jsx)(c.E,{as:"p",className:jo,variant:r?Lo(r):"titleSmall",children:t>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:Eo,children:e.text.sentence.text.substring(0,t)}),(0,b.jsx)("span",{children:e.text.sentence.text.substring(t)})]}):e.text.sentence.text})})};var Po=i(74493);const Oo=(e,t)=>{let i=0;if(0===e.length)return 0;for(let a=0;a<e.length&&!(t<e[a].startMs);a++)i+=e[a].numChars;return i};var _o=i(76629);const Uo=e=>{const t=["transcript",{uri:e}],{data:i,isLoading:a,isError:n}=(0,aa.I)({queryKey:t,queryFn:async()=>{if(e&&(0,ya.gH)(e))return(async e=>{const t=(0,ya.o_)(e).id,i=Ra.n.getInstance(),a=await i.build().withHost(_o.ao).withPath(`/episode/${encodeURIComponent(t)}`).withEndpointIdentifier("/episode/{episodeId}").withoutMarket().withoutGlobalHeaders().withQueryParameters({format:"json"}).send();if(200!==a.status)throw new Error("failed to get read-along transcript");return a.body})(e)},gcTime:18e5,staleTime:6e5});return{data:i,loading:a,error:n}};var Do=i(91822),Bo=i(32326);const Fo={[ci.E.SMALL]:0,[ci.E.LARGE]:792,[ci.E.XLARGE]:1448},Mo=({startMs:e,onTimestampClick:t})=>(0,b.jsx)("button",{className:wo,onClick:()=>{t(e)},children:(0,b.jsx)(c.E,{className:ko,variant:"bodyMedium",children:(0,Yn.f)(e)})}),Vo=({hidden:e,onClick:t})=>(0,b.jsx)("div",{className:o()(Ro,{[To]:e}),children:(0,b.jsx)(d.$,{colorSet:"invertedLight",size:"small",onClick:t,iconLeading:Ot.Q,"aria-label":O.Ru.get("web-player.read-along-transcript.sync.button"),children:O.Ru.get("web-player.read-along-transcript.sync.button")})}),Ho=({episodeURI:e,mode:t})=>{const{data:i,loading:n,error:s}=Uo(e),{spec:r,logger:l}=(0,Ae.r)(ho.c,{data:{uri:e}}),c=i?.section??[],u=r.timestampLinkFactory(),[d,p]=(0,a.useState)(!0),[g,m]=(0,a.useState)(!1),x=(0,N.z)(),v=(0,gt.o)((e=>e?.isPaused??void 0)),y=(0,a.useRef)(null),h=(0,a.useRef)(!1),f=(0,a.useRef)(null),j=(0,a.useRef)(null),C=(0,a.useRef)(null);(0,Bo.p)(C);const{breakpoint:S}=(0,oa.x)(Fo,j),{highlightedSentenceIndex:w,shouldAnimateScroll:k,readAlongIndex:E}=((e,t)=>{const i=(0,a.useRef)(0),[n]=(0,Po.f)(100,(t=>t?.item?.uri===e));let s=t.findIndex((e=>e.text?.sentence?.text)),r=0;for(let e=0;e<t.length;e++){const i=t[e];if(n>=i.startMs&&(e===t.length-1||n<t[e+1].startMs)){s=e,i.text?.sentence&&(r=Oo(i.text.sentence.highlight,n));break}}const l=Math.abs(i.current-(s??0))<=3;return i.current=s??0,{shouldAnimateScroll:l,highlightedSentenceIndex:s,readAlongIndex:r}})(e,c),R=(0,a.useCallback)((()=>{if(!j.current||!y.current)return;const e=y.current?.offsetTop-j.current?.offsetTop-24;void 0!==e&&(j.current?.scrollTo({top:e,behavior:k?"smooth":"auto"}),m(!1))}),[k]),T=(0,a.useCallback)((()=>{if(!j.current||!y.current)return;const e=y.current?.offsetTop-j.current?.offsetTop-24,t=y.current?.clientHeight;if(void 0===e)return;const i=e>=j.current.scrollTop&&e+t<=j.current.scrollTop+j.current.clientHeight;m(!i),p(i)}),[]),I=(0,a.useCallback)((t=>{x.seekTo(t).then((()=>setTimeout((()=>p(!0)),300))),v?(x.resume(),l.logInteraction(u.hitPlay({itemToBePlayed:e}))):l.logInteraction(u.hitSeekToTime({msToSeekTo:t}))}),[x,l,u,e,v]),L=(0,a.useCallback)((()=>{h.current=!0,f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{h.current=!1}),500),T()}),[T]),A=(0,a.useCallback)((()=>{T(),h.current||d&&R()}),[d,T,R]);return n||s||0===c.length?null:(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(mi.o.Provider,{value:S,children:[(0,b.jsx)("div",{className:o()(fo,{[No]:t===Do.aY.npv}),ref:j,onWheel:L,children:(0,b.jsx)("div",{className:Io,ref:C,children:(0,b.jsx)("div",{children:c.map(((e,t)=>e.title?(0,b.jsx)(Mo,{onTimestampClick:I,startMs:e.startMs},t):(0,b.jsx)(Ao,{index:t,activeIndex:w,readAlongSection:e,readAlongIndex:w===t?E:0,onActiveSectionChange:({sectionRef:e})=>{y.current=e.current,A()},breakpoint:S},t)))})})}),(0,b.jsx)(Vo,{hidden:!!v||!g,onClick:()=>{l.logInteraction(r.syncButtonFactory().hitQuickScroll()),p(!0),R()}})]})})},qo=({mode:e})=>{const t=(0,gt.o)((e=>e?.item),((e,t)=>e?.uri===t?.uri));return t?.uri&&(0,ya.gH)(t.uri)?(0,b.jsx)(Ho,{mode:e,episodeURI:t.uri}):null};var Qo=i(13390);let zo=function(e){return e.SET_TRANSCRIPT_UI_FLAG="SET_TRANSCRIPT_UI_FLAG",e}({});var Yo=i(75145);const Go=e=>e.ui?.transcript?.mode??Do.aY.none,Ko=e=>e.ui?.transcript?.uiFlags??Yo.aj;var Zo=i(10940),Wo=i(56629);const Xo="_nDkCIVgkWayq3tqiIuW",Jo=({episode:e})=>{const{transcriptMode:t}=(()=>{const e=(0,P.wA)(),t=(0,P.d4)(Ko);return{transcriptMode:(0,P.d4)(Go),setTranscriptUIFlag:(0,a.useCallback)(((t,i)=>{e({type:zo.SET_TRANSCRIPT_UI_FLAG,key:t,value:i})}),[e]),transcriptUIFlags:t}})(),{data:i}=Uo(e.uri),n=i?.colourData,s={"--transcript-color-background":n?Zo.Q.fromInt(n.background).toCSS(Wo.a.HEX):Qo.PQ2,"--transcript-color-text":Zo.Q.fromInt(n?.text??0).toCSS(Wo.a.HEX),"--transcript-color-highlightText":Zo.Q.fromInt(n?.highlightText??-1).toCSS(Wo.a.HEX)},{spec:r}=(0,Ae.r)(ho.c,{data:{uri:e.uri}}),l=(0,Hl.t)(r);return(0,b.jsxs)(ss.w,{className:Xo,style:s,ref:l,children:[(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.read-along-transcript.now-playing-view.read-along")}),t===Do.aY.npv&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(qo,{mode:Do.aY.npv})})]})};var $o=i(98812),ec=i(39014),tc=i(6564),ic=i(88593);const ac=({item:e,spec:t})=>{const i=(0,a.useCallback)((()=>{}),[]),n=(0,gt.o)((e=>e?.isPaused??void 0)),r=(0,N.z)(),{isPlaying:l,isActive:o}=(0,Sn.te)(e.uri),c=(0,s.NC)(Le.cgF),u=(0,s.NC)(Le.xEc),d=(0,s.NC)(Le.h0Y),p=(0,s.NC)(Le.r1q),g=(0,rr.W)(),m=(0,$o.c)(),x=(0,ec.d)(e.uri)?.episodeOrChapter,v=Nr(e),y=(0,a.useCallback)(((t,i,a,s)=>{let c="play";!l||0!==t&&i||(c="pause"),g({intent:c,targetUri:e.uri,type:"click",itemIdSuffix:t>0?"podcast-description-timestamp":"button"}),x&&m?Dn.h.set((()=>({triggerId:a||"activation-trigger-mme",triggerAction:null}))):o&&!i?n?(s?.("resume"),r.resume()):(s?.("pause"),r.pause()):r.seekTo(t)}),[l,g,e.uri,x,m,o,n,r]),h=(0,a.useCallback)(((e,t)=>{y(e,!0,t)}),[y]),{loading:f,error:j,data:C}=(S={uri:e.uri,includeChapters:d,includeAIDubbedEpisodes:p,numberOfChapters:10},w={staleTime:is,gcTime:ts},(0,$n.I)(cs,S,w));var S,w;const[k,E]=(0,a.useState)(null),R=(0,a.useCallback)((async e=>{const t=await(0,tc.Q)(e);E(t)}),[]);if((0,a.useEffect)((()=>{x&&!(0,ic.Gr)(x)&&x.transcript&&x.transcript.length>0&&R(x.transcript[0].cdnUrl)}),[R,x]),f&&e.uri&&!j)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(xo,{}),(0,b.jsx)(xo,{})]});const T=(I=C?.episodeUnionV2,us(I)?I:void 0);var I;const L=(e=>{return us(e)&&(t=e.podcastV2.data,"Podcast"===t?.__typename)?e.podcastV2.data:void 0;var t})(C?.episodeUnionV2);if(!e.uri||!T||f||j)return null;const{chapters:A,nextOffset:P,limit:_}=function(e){if("DisplaySegments"===e.displaySegments?.__typename)return{chapters:e.displaySegments.displaySegments.items,nextOffset:e.displaySegments.displaySegments.pagingInfo.nextOffset,limit:e.displaySegments.displaySegments.pagingInfo.limit};return{chapters:[],nextOffset:0,limit:0}}(T),U=A.length>0,D=T.displaySegments?.chapterTags?.includes("automatically-generated")||!1;return(0,b.jsxs)(Fs.r,{spec:t,children:[p&&!T.originalEpisode&&(0,b.jsx)(Vs,{episode:T}),p&&(0,b.jsx)(qs,{episode:T}),U&&!v&&(0,b.jsx)(ls,{chapters:A,episodeUri:e.uri,nextOffset:P,limit:_,isPlaying:l,isMLGeneratedChapters:D}),u&&L&&(0,b.jsx)(co,{coverArt:L.coverArt||void 0,description:L.htmlDescription||"",name:L.name,publisher:L.publisher?.name,uri:L.uri}),x&&x.type===ws.c.EPISODE&&x.transcript&&x.transcript.length>0&&(c?(0,b.jsx)(Jo,{episode:e}):(0,b.jsxs)(ss.w,{className:Ys,children:[(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.now-playing-view.transcript")}),k&&(0,b.jsx)($s,{transcriptSections:k||[],onTimeStampClick:h,episodeUri:e.uri})]})),v&&(0,b.jsx)(Cr,{item:e}),(0,b.jsx)(yo,{topics:L?.topics.items??[],logTopicNavigation:i}),(0,b.jsx)(Xl,{})]})},nc=({item:e,spec:t})=>(0,pt.n)()?(0,b.jsx)(ac,{item:e,spec:t}):(0,b.jsx)(b.Fragment,{});const sc=()=>(0,b.jsx)(b.Fragment,{}),rc=new Jn.l("queryNpvArtist","query","4ec4ae302c609a517cab6b8868f601cd3457c751c570ab12e988723cc036284f",null);var lc=i(25805),oc=i(3877),cc=i(36131),uc=i(22879),dc=i(27212),pc=i(19693),gc=i(14357);const mc="main-nowPlayingView-aboutArtist",xc="main-nowPlayingView-aboutArtistContent",vc="main-nowPlayingView-aboutArtistButton",bc="main-nowPlayingView-aboutArtistHasImage",yc="main-nowPlayingView-aboutArtistBio",hc="main-nowPlayingView-aboutArtistTextContent",fc="main-nowPlayingView-aboutArtistPlaceholderWrapper",jc=new Set(["spotify:artist:5UUG83KSlqPhrBssrducWV"]),Nc=(0,En.mc)((({artistUri:e,artist:t,visuals:i,stats:n,externalLinks:r=[]})=>{const l=(0,P.wA)(),{gallery:u,avatarImage:d}=i,{monthlyListeners:p}=n,g=(0,ya.o_)(e).toURLPath(!0),m=(0,dc.W)({uri:e,type:"locale"})?(0,gc.hF)(g):g,{spec:x,logger:v}=(0,Ae.r)(oc.p,{}),y=(0,s.NC)(Le.lVm,{loadingValue:!1}),h=(0,Hl.t)(x,y),f=(0,vs.Zp)(),j=(0,a.useCallback)((()=>{if(t&&e){const a=x.hitUiReveal();v.logInteraction(a),l((0,cc.p5)({artistUri:e,artist:t,stats:n,visuals:i,externalLinks:r})),f(m)}}),[x,v,m,l,f,e,t,n,i,r]);if(jc.has(e)||!t.biography?.text)return null;const N=[];u.items.forEach((e=>{const t=e.sources.map(pc.m),i=(0,il.g)(t,{desiredLabel:"large",desiredSize:600});i&&N.push(i)}));const C=N.find((e=>(e.width||0)>=(e.height||0))),S=[];d?.sources.forEach((e=>{const t=(0,pc.m)(e);t&&S.push(t)}));const w=C&&{backgroundImage:`linear-gradient(${kr.PUl} 0%, ${kr.MYb} 100%), url(${C.url})`},k=t.verified&&!C&&S.length>0||!t.verified&&!C;return(0,b.jsx)(ss.w,{className:mc,ref:h,children:(0,b.jsx)("button",{type:"button","aria-label":t.name,className:o()(vc,{[bc]:!!w}),onClick:j,style:w,"data-testid":"npv-artist-bio-button",children:(0,b.jsxs)("div",{className:o()(xc),children:[t.verified&&(0,b.jsx)(uc.M,{text:O.Ru.get("artist.verified")}),k&&(0,b.jsx)(el.e,{images:S,label:t.name,width:80,userIconSize:"large",testID:"npv-artist-bio-avatar",customPlaceholder:(0,b.jsx)("div",{className:fc,"data-testid":"npv-artist-bio-placeholder-wrapper",children:(0,b.jsx)(lc.r,{size:"large"})})}),(0,b.jsxs)("div",{className:hc,children:[(0,b.jsx)(c.E,{as:"div",variant:"bodyMedium",children:!!p&&O.Ru.get("artist.monthly-listeners-count",p)}),(0,b.jsx)("div",{children:(0,b.jsx)(c.E,{as:"span",variant:"bodySmall",className:yc,children:(0,b.jsx)(qe.N,{source:t.biography.text})})})]})]})})})}),{name:"NPVArtistAbout"});var Cc=i(58923);const Sc="main-nowPlayingView-aboutArtistV2",wc="main-nowPlayingView-aboutArtistV2Button",kc="main-nowPlayingView-aboutArtistV2Title",Ec="main-nowPlayingView-aboutArtistV2HasImage",Rc="main-nowPlayingView-aboutArtistV2ImageContainer",Tc="main-nowPlayingView-aboutArtistV2Image",Ic="main-nowPlayingView-aboutArtistV2TextContent",Lc="main-nowPlayingView-aboutArtistV2Name",Ac="main-nowPlayingView-aboutArtistV2Listeners",Pc="main-nowPlayingView-aboutArtistV2ListenersCount",Oc="main-nowPlayingView-aboutArtistV2FollowButton",_c="main-nowPlayingView-aboutArtistV2Bio",Uc="main-nowPlayingView-aboutArtistV2PlaceholderWrapper",Dc="main-nowPlayingView-aboutArtistV2Avatar",Bc=new Set(["spotify:artist:5UUG83KSlqPhrBssrducWV"]),Fc=(0,En.mc)((({artistUri:e,artist:t,visuals:i,stats:n,externalLinks:r=[]})=>{const l=(0,P.wA)(),{gallery:u,avatarImage:d}=i,{monthlyListeners:p}=n,g=(0,ya.o_)(e).toURLPath(!0),m=(0,dc.W)({uri:e,type:"locale"})?(0,gc.hF)(g):g,[x,v]=(0,eo.A)(e),{spec:y,logger:h}=(0,Ae.r)(oc.p,{}),f=(0,s.NC)(Le.lVm,{loadingValue:!1}),j=(0,Hl.t)(y,f),N=(0,a.useCallback)((()=>{if(t&&e){const a=y.hitUiReveal();h.logInteraction(a),l((0,cc.p5)({artistUri:e,artist:t,stats:n,visuals:i,externalLinks:r}))}}),[y,h,l,e,t,n,i,r]),C=(0,a.useCallback)((t=>{t.stopPropagation();const i=y.artistNameFactory().hitUiNavigate({destination:e});h.logInteraction(i)}),[y,e,h]),S=(0,a.useCallback)((async t=>{t.preventDefault(),t.stopPropagation();const i=y.followButtonFactory().hitFollow({itemToBeFollowed:e}),a=y.followButtonFactory().hitUnfollow({itemToBeUnfollowed:e});h.logInteraction(x?a:i);try{await v(!x)}catch{}}),[e,x,h,v,y]),w=(0,a.useCallback)((e=>{if("Enter"===e.key)return S(e)}),[S]);if(Bc.has(e)||!t.biography?.text)return null;const k=[];u.items.forEach((e=>{const t=e.sources.map(pc.m),i=(0,il.g)(t,{desiredLabel:"large",desiredSize:600});i&&k.push(i)}));const E=k.find((e=>(e.width||0)>=(e.height||0))),R=[];d?.sources.forEach((e=>{const t=(0,pc.m)(e);t&&R.push(t)}));const T=E&&{backgroundImage:`linear-gradient(${kr.i_N} 0%, ${kr.Par} 50%), url(${E.url})`},I=!E&&R.length>0,L=!E&&0===R.length;return(0,b.jsx)(ss.w,{className:Sc,ref:j,children:(0,b.jsxs)("button",{type:"button","aria-label":t.name,className:o()(wc),onClick:N,tabIndex:0,"data-testid":"npv-artist-bio-button",children:[(0,b.jsxs)("div",{className:o()(Rc,{[Tc]:E}),style:T,children:[(0,b.jsx)("div",{className:o()(kc,{[Ec]:E}),children:(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.now-playing-view.artist-about.title")})}),L&&(0,b.jsx)("div",{className:o()(Uc),"data-testid":"npv-artist-bio-placeholder-wrapper",children:(0,b.jsx)(lc.r,{size:"xxlarge"})}),I&&(0,b.jsx)(el.e,{images:R,label:t.name,width:80,userIconSize:"large",testID:"npv-artist-bio-avatar",className:Dc})]}),(0,b.jsxs)("div",{className:Ic,children:[(0,b.jsx)("div",{className:Lc,children:(0,b.jsx)(Cc.N_,{to:m,onClick:C,"data-testid":"npv-artist-link",children:(0,b.jsx)(c.E,{as:"span",variant:"bodyMediumBold",dir:"auto",children:t.name})})}),(0,b.jsxs)("div",{className:Ac,children:[(0,b.jsx)(c.E,{as:"div",variant:"bodyMedium",className:Pc,children:!!p&&O.Ru.get("artist.monthly-listeners-count",p)}),(0,b.jsx)(se.n,{as:"div",size:"small",className:Oc,onClick:S,onKeyDown:w,tabIndex:0,children:x?O.Ru.get("unfollow"):O.Ru.get("follow")})]}),(0,b.jsx)(c.E,{as:"span",variant:"bodySmall",className:_c,children:(0,b.jsx)(qe.N,{LinkComponent:Cc.N_,source:t.biography.text,onLinkClick:e=>{e.stopPropagation()}})})]})]})})}),{name:"NPVArtistAboutV2"});var Mc=i(51010);const Vc=({artistUri:e,spec:t,logger:i})=>{const[n,s]=(0,eo.A)(e),r=(0,a.useCallback)((async()=>{if(!t||!i)return;const a=t.hitFollow({itemToBeFollowed:e}),r=t.hitUnfollow({itemToBeUnfollowed:e});i.logInteraction(n?r:a);try{await s(!n)}catch{}}),[e,n,i,s,t]),l=n?O.Ru.get("unfollow"):O.Ru.get("follow");return(0,b.jsx)($l.W,{isFollowing:n,onClick:r,buttonText:l})},Hc=({artistName:e,roles:t,spec:i,logger:n,linkable:s=!1})=>{const r=t[0].artistUri,l=t.map((e=>e.role)).join(O.Ru.getSeparator()),o=(0,ya.o_)(r).toURLPath(!0),u=(0,dc.W)({uri:r,type:"locale"})?(0,gc.hF)(o):o,d=(0,a.useCallback)((e=>{if(e.stopPropagation(),!i||!n)return;const t=i.artistNameFactory().hitUiNavigate({destination:r});n.logInteraction(t)}),[i,r,n]);return(0,b.jsx)(H.v,{title:s?(0,b.jsx)(Fe.N,{to:u,onClick:d,"data-testid":"artist-row-credits-link",children:(0,b.jsx)(c.E,{variant:"bodyMedium",children:e})}):(0,b.jsx)(c.E,{variant:"bodyMedium",children:e}),size:"sm",paddingInlineStart:"0",paddingInlineEnd:"0",subtitle:(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",style:{textTransform:"capitalize"},"data-testid":"artist-row-role",children:l}),"data-testid":"credits-artist-row",variant:"naked",id:r,trailing:s&&(0,b.jsx)(Vc,{artistUri:r,spec:i?.followToggleButtonFactory(),logger:n})},e)};let qc=function(e){return e.MainArtist="main artist",e.FeaturedArtist="featured artist",e.Remixer="remixer",e.Actor="actor",e.Composer="composer",e.Orchestra="orchestra",e.Writer="writer",e.Producer="producer",e.Performer="performer",e.Lyricist="lyricist",e.Conductor="conductor",e.Author="author",e.Editor="editor",e.Arranger="arranger",e.EnsembleOrchestra="ensemble orchestra",e}({});const Qc=(0,a.memo)((({data:e,limit:t})=>{const{spec:i,logger:a}=(0,Ae.r)(Mc.D,{}),n=e.reduce(((e,t)=>{const{artistName:i}=t,a=e.get(i)??[];return a.push(t),e.set(i,a),e}),new Map),s=Array.from(n,(([e,t],n)=>(0,b.jsx)(Hc,{artistName:e,roles:t.sort(((e,t)=>e.role.toLowerCase()===qc.MainArtist?-1:t.role.toLowerCase()===qc.MainArtist?1:0)),spec:i.creditsRowFactory({position:n}),logger:a,linkable:t.filter((e=>e.isArtistUriLinkable)).length>0},e))).slice(0,t);return(0,b.jsx)(b.Fragment,{children:s})})),zc="main-nowPlayingView-credits",Yc="main-nowPlayingView-creditsShowAll",Gc=(0,En.mc)((({data:e,trackUri:t})=>{const i=(0,P.wA)(),n=(0,s.NC)(Le.QIZ),{spec:r,logger:l}=(0,Ae.r)(Mc.D,{}),o=(0,a.useCallback)((()=>{l.logInteraction(r.showAllButtonFactory().hitUiReveal()),i((0,cc.P0)(!0,t))}),[i,l,r,t]),c=(0,Hl.t)(r,n);return 0===e.length?null:(0,b.jsxs)(ss.w,{className:zc,ref:c,children:[(0,b.jsx)(ss.X,{action:(0,b.jsx)(Mt.H,{size:"small",condensed:!0,onClick:o,className:Yc,semanticColor:"textSubdued",children:O.Ru.get("web-player.now-playing-view.show-all")}),children:O.Ru.get("web-player.now-playing-view.credits")}),(0,b.jsx)(Qc,{data:e,limit:3})]})}),{name:"NPVCredits"});var Kc=i(68183),Zc=i(94653),Wc=i(90029),Xc=i(78106),Jc=i(40913),$c=i(72880),eu=i(74554),tu=i(44367);const iu="main-nowPlayingView-sectionHeaderSpacing",au="main-nowPlayingView-lyricsTitle",nu="main-nowPlayingView-lyricsControls",su="main-nowPlayingView-lyricsGradient",ru="main-nowPlayingView-lyricsContent",lu=()=>{const{spec:e,logger:t}=(0,Ae.r)(Kc.X,{}),{setMode:i}=(0,Jc.r)();return(0,b.jsxs)("div",{className:nu,children:[(0,b.jsx)(tu.D,{label:O.Ru.get("web-player.now-playing-view.lyrics.cinema-mode"),onClick:()=>{i(Do.YU.cinema),t.logInteraction(e.cinemaModeButtonFactory().hitUiReveal()),t.logImpression(e.cinemaModeButtonFactory().impression())},children:(0,b.jsx)($c.C,{size:"small"})}),(0,b.jsx)(tu.D,{label:O.Ru.get("web-player.now-playing-view.close.lyrics"),onClick:()=>{i(Do.YU.none),t.logInteraction(e.closeLyricsButtonFactory().hitUiHide())},children:(0,b.jsx)(eu.M,{size:"small"})})]})},ou=(0,En.mc)((({item:e})=>{const{spec:t,logger:i}=(0,Ae.r)(Kc.X,{}),n=(0,a.useRef)(null),{mode:s,setMode:r}=(0,Jc.r)(),l=(0,a.useRef)(null),u=(0,a.useRef)(0),{data:d}=(0,Xc.J)(),p=(0,gt.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri));(0,Wc.I)(p?.uri,p?.images);const g=(0,a.useCallback)((()=>{u.current=Date.now()}),[]),m=(0,a.useCallback)((({lineRef:e,isActiveLine:t,shouldAnimateScroll:i,activeLineIndex:a,isFirstLine:s})=>{if(!n.current||!l.current)return;let r;if(e.current&&t?r=e.current?.offsetTop-l.current?.offsetTop-16:s&&a<0&&(r=0),void 0===r)return;const o=l.current?.scrollTop,c=Math.abs(o-r),d=n.current.clientHeight,p=Date.now()-u.current<2e3,g=u.current>0&&c>1*d;if(p||g)return;u.current=0;const m="visible"===document.visibilityState&&i?"smooth":"auto";l.current?.scrollTo({top:r,behavior:m})}),[]);if((0,a.useLayoutEffect)((()=>{u.current=0,l.current?.scrollTo({top:0,behavior:"auto"})}),[e.uri]),!d?.hasLyrics)return null;if(s===Do.YU.npv){const t=d?.hasLyrics&&!d.isTimeSynced,i={"--lyrics-color-active":t?kr.ONy:d.colors.activeText,"--lyrics-color-inactive":d.colors.text,"--lyrics-color-passed":Zo.Q.fromCSS(d.colors.activeText,.7).toCSS(Wo.a.RGBA),"--lyrics-color-background":d.colors.background};return(0,b.jsxs)(ss.w,{className:o()(iu,su),style:i,ref:n,children:[(0,b.jsx)(ss.X,{action:(0,b.jsx)(lu,{}),className:au,children:O.Ru.get("web-player.lyrics.title")}),(0,b.jsxs)("div",{className:ru,ref:l,onWheel:g,onScroll:g,children:[t&&(0,b.jsx)(c.E,{as:"p",variant:"bodySmall",dir:"auto",style:{color:d.colors.text},children:O.Ru.get("web-player.lyrics.unsynced")}),(0,b.jsx)(Zc.x,{trackUri:e.uri,data:d,format:"card",onActiveLineChange:m})]})]})}return(0,b.jsx)(ss.w,{className:iu,children:(0,b.jsx)(ss.X,{action:(0,b.jsx)(Er,{onClick:()=>{r(Do.YU.npv),i.logInteraction(t.showLyricsButtonFactory().hitUiReveal()),i.logImpression(t.showLyricsButtonFactory().impression())},children:O.Ru.get("web-player.now-playing-view.show.lyrics")}),className:au,children:O.Ru.get("web-player.lyrics.title")})})}),{name:"NPVLyrics"});var cu=i(87588);const uu="main-nowPlayingView-merch",du=(0,En.mc)((({artistId:e,merch:t})=>!t||t.length<1?null:(0,b.jsxs)(ss.w,{className:uu,children:[(0,b.jsx)(ss.X,{children:O.Ru.get("web-player.now-playing-view.npv-merch")}),(0,b.jsx)(cu.ArtistOffers,{items:t,artistId:e,merchVariant:bn.Ol.VARIANTA,variant:"bodyMedium"})]})),{name:"NPVMerchOffers"});var pu=i(55117),gu=i(1123),mu=i(90873);const xu="main-nowPlayingView-artistOnTour",vu="main-nowPlayingView-artistOnTourItem",bu="main-nowPlayingView-artistOnTourShowAll",yu=(0,En.mc)((({artistId:e,data:t,variant:i="bodyMedium"})=>{const a=(0,mu.Dh)(e),n=(0,vs.Zp)(),{spec:s,logger:r}=(0,Ae.r)(pu.N,{data:{identifier:e,uri:a,position:0,reason:"NPV - On Tour"}}),l=(0,Hl.t)(s),o={items:t.items.map((e=>({...e,artists:{items:e.artistsV2.items.flatMap((e=>"Artist"===e.data.__typename?e.data:[]))}}))),totalCount:t.totalCount};return o.items.length?(0,b.jsxs)(ss.w,{className:xu,ref:l,children:[(0,b.jsx)(ss.X,{action:o.items.length!==o.totalCount&&(0,b.jsx)(Mt.H,{size:"small",condensed:!0,className:bu,onClick:()=>{(()=>{const e=s.seeAllButtonFactory({uri:a}).hitUiNavigate({destination:`${a}:concerts`});r.logInteraction(e);const t=(0,ya.o_)(`${a}:concerts`).toURLPath(!0);n(t)})()},semanticColor:"textSubdued",children:O.Ru.get("web-player.now-playing-view.show-all")}),children:O.Ru.get("web-player.now-playing-view.on-tour")}),o.items.map(((e,t)=>(0,b.jsx)("div",{className:vu,children:(0,b.jsx)(gu.I,{concert:e,index:t,spec:s,condensed:!0,elevatedDate:!0,titleVariant:i})},e.uri)))]}):null}),{name:"NPVOnTour"});var hu=i(53528),fu=i(42392),ju=i(47996),Nu=i(48783),Cu=i(10259);const Su="TIoJv8dV373UyvBWRDav",wu="xn9l3L0D_ZzL886N4J_5",ku="P8bNOGKtEtIZXnWEw61V",Eu="PpQWFsG9yJRfPFiERSti",Ru="chgeyo_c9jfrfuEJg5sk",Tu="MLbUPrgOa58_qsGikfRG",Iu="l7B1SCkbYm9oU2tO9mOW",Lu="kT3XHoiG64bhNORLJv09",Au=16,Pu=(0,En.mc)((({relatedVideos:e,contextUri:t})=>{const i=O.Ru.get("npv.related-videos.title"),n=O.Ru.get("npv.related-videos.prev"),s=O.Ru.get("npv.related-videos.next"),{spec:r,logger:l}=(0,Ae.r)(fu.E,{data:{uri:t,identifier:Nu.K.npv}}),c=(0,hu.f)({data:{identifier:"related-videos",position:0,uri:t},parentAbsoluteLocation:r.getAbsoluteLocation()}),u=(0,a.useRef)(null),[d,p]=(0,a.useState)(0),[g,m]=(0,a.useState)(0),[x,v]=(0,a.useState)("auto"),y=(0,mi.y)(),h=(0,tn.W)();(0,a.useLayoutEffect)((()=>{const e=u.current;e&&m(e.clientWidth)}),[]),(0,Cu.w)({onResize:e=>{m(e.width),y===ci.E.MEDIUM&&p(0)},refOrElement:u});const f=y===ci.E.MEDIUM?2:1,j=Math.ceil(e.length/f)-1,N=y===ci.E.MEDIUM?(g-Au*f)/f:85*g/100,C=f*N+Au*f,S=(0,a.useCallback)((()=>{const t=d*C;return d===j&&t>0&&2===f?e.length%2==0?t+Au*f:t-N+Au:t}),[d,N,C,j,e.length,f]),w=(0,a.useMemo)((()=>{const t=2===e.length&&2===f?N+8:N,i=S();return{pointerEvents:x,"--video-flex-basis":`${t}px`,transform:`translateX(-${i}px)`}}),[e.length,f,N,S,x]);(0,a.useEffect)((()=>{const e=u?.current,t=()=>{v("auto")};return e?.addEventListener("transitionend",t),()=>{e?.removeEventListener("transitionend",t)}}),[]);const k=(0,a.useCallback)((e=>{v("none"),p(d+e),e>0&&h||e<0&&!h?l.logInteraction(c.shelfHeaderFactory().shelfCarouselControlsFactory().shelfCarouselControlsPreviousFactory().hitUiReveal()):(e<0&&h||e>0&&!h)&&l.logInteraction(c.shelfHeaderFactory().shelfCarouselControlsFactory().shelfCarouselControlsNextFactory().hitUiReveal())}),[d,h,l,c]),E=(0,Hl.t)(c);return(0,b.jsx)(ss.w,{className:Su,ref:E,children:(0,b.jsxs)(Fs.r,{spec:r,children:[(0,b.jsx)(ss.X,{children:i}),(0,b.jsxs)("div",{className:wu,style:{"--container-gap":"16px"},children:[0!==d&&(0,b.jsx)("button",{type:"button","aria-label":n,onClick:()=>k(-1),className:o()(ku,Eu),children:h?(0,b.jsx)(Mi.V,{}):(0,b.jsx)(Ja.g,{})}),d<j&&(0,b.jsx)("button",{type:"button","aria-label":s,onClick:()=>k(1),className:o()(ku,Ru),children:h?(0,b.jsx)(Ja.g,{}):(0,b.jsx)(Mi.V,{})}),(0,b.jsx)("ul",{ref:u,className:Tu,dir:"auto",style:w,children:e.map((({trackOfVideo:e},t,i)=>{if("Track"!==e.data.__typename)return null;const{uri:a,name:n,albumOfTrack:s,artists:r,contentRating:l}=e.data;return(0,b.jsx)("li",{className:1===i.length?Lu:Iu,children:(0,b.jsx)(Fs.r,{spec:c,children:(0,b.jsx)(ju.O,{title:n,trackUri:a,artists:r.items,album:s,contentRating:l,referrerIdentifier:"now_playing_panel",index:t,hoverBackgroundColor:"backgroundTintedHighlight",contentAlign:!0,size:"sm"})})},a)}))})]})]})})}),{name:"NPVRelatedTrackVideos"}),Ou=({item:e,spec:t})=>{const i=(0,s.NC)(Le.LX5),a=(0,s.NC)(Le.IA_),{loading:n,error:r,data:l}=(o={artistUri:e.artists[0].uri,trackUri:e.uri,enableCredits:a,enableRelatedVideos:i},c={gcTime:ts,staleTime:is},(0,$n.I)(rc,o,c));var o,c;const u=(0,s.NC)(Le.yux),d=Nr(e),p=(0,s.NC)(Le.Tzx)?Fc:Nc;if(n&&e.uri&&!r)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(xo,{}),(0,b.jsx)(xo,{}),(0,b.jsx)(xo,{})]});if(!e.uri||"Artist"!==l?.artistUnion.__typename||"Track"!==l?.trackUnion.__typename||n||r)return null;const{profile:g,stats:m,visuals:x,profile:{externalLinks:v}}=l.artistUnion,{credits:y}=l.trackUnion;return(0,b.jsxs)(b.Fragment,{children:[u&&(0,b.jsx)(ou,{item:e}),(0,b.jsxs)(Fs.r,{spec:t,children:[l.trackUnion.relatedVideos&&"RelatedVideoPage"===l.trackUnion.relatedVideos.__typename&&l.trackUnion.relatedVideos.items.length>0&&(0,b.jsx)(Pu,{contextUri:e.uri,relatedVideos:l.trackUnion.relatedVideos.items}),(0,b.jsx)(p,{artistUri:l.artistUnion.uri,artist:g,stats:m,visuals:x,externalLinks:v.items}),a&&y&&(0,b.jsx)(Gc,{data:y,trackUri:e.uri}),(0,b.jsx)(yu,{artistId:l.artistUnion.id,data:l.artistUnion.goods.events.concerts}),(0,b.jsx)(du,{artistId:l.artistUnion.id,artistUri:l.artistUnion.uri,merch:l.trackUnion.merch.items}),d&&(0,b.jsx)(Cr,{item:e})]})]})},_u=({item:e,spec:t})=>(0,pt.n)()&&e.artists[0].uri?(0,b.jsx)(Ou,{item:e,spec:t}):(0,b.jsx)(b.Fragment,{});var Uu=i(45339);const Du=({item:e,spec:t})=>(0,Cl.v)(e)&&!e.isLocal?(0,b.jsx)(_u,{item:e,spec:t}):(0,Cl.v)(e)&&e.isLocal?(0,b.jsx)(sc,{}):(0,Nl.p)(e)?(0,b.jsx)(nc,{item:e,spec:t}):(0,jl.d)(e)?(0,b.jsx)(Un,{}):(0,Uu.N)(e)?(0,b.jsx)(_n,{}):null;var Bu=i(31968),Fu=i(29285),Mu=i(34266),Vu=i(93116);const Hu=(0,En.mc)((()=>{const e=(0,a.useContext)(Ue.s),t=(0,Bu.a)({tryAvoidGraphQLFetching:!1}),i=(0,s.NC)(Le.yJ8)===Le.NtL.CANVAS_PLAY_ON_HOVER;return t?.canvas&&e?(0,b.jsx)(Vu.Gg,{fileId:t.canvas.fileId,canvasType:t.canvas.type,canvasUri:t.canvas.uri,playerContainerClass:"canvasVideoContainerNPV",playbackType:i?Vu.RT.LoopOnHover:Vu.RT.LoopOnPlayback,allowAspectRatioFix:!0,mouseHoverRef:e}):null}),{name:"NPVCanvas"});var qu=i(16047),Qu=i(2304),zu=i(44608),Yu=i(64294),Gu=i(14392),Ku=i(97074),Zu=i(63128),Wu=i(62433),Xu=i(90353),Ju=i(15339);const $u="main-nowPlayingView-nowPlayingWidget",ed="T5_sYfKJ2efL3n3dFNuN",td="main-nowPlayingView-nowPlayingGrid",id="main-nowPlayingView-contextItemInfo",ad="hhFdIYRyHsqlCHy7T_8A",nd="O5NOY8Xw4NH0IhBZu8tm",sd="DFvRASpHOFAoziM4w7En",rd="main-nowPlayingView-coverArtContainer",ld="hjyiWzPtKHn_5kCe9vyg",od="hCImOEZCJwYaSy2r1Xgx",cd="ylBRlfNqGnzVa4kjUQGP",ud="E08D6ucrHuPJYzzGO7HG",dd="pUIBQ9cykHKYx2A2ZIPA",pd="_q9LkNJJIpxoOkOFI2Nd",gd="S6W0kreMgaIXYWSEYHya",md="main-nowPlayingView-trackInfo",xd="eEiwEPDfVRD0HKjYM_dq",vd=({item:e,spec:t})=>{const i=(0,te.s)(),n=(0,a.useCallback)((a=>{const n=a?t.heartButtonFactory().hitLike({itemToBeLiked:e.uri}):t.heartButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});i.logInteraction(n)}),[e.uri,i,t]),s=(0,Zu.v)(e),r=(0,mi.y)();return s?(0,b.jsx)(Ku.g,{uri:e.uri,size:r===ci.E.MEDIUM?"medium":"small",className:ad}):(0,Cl.v)(e)&&!e.isLocal?(0,b.jsx)(Yu.b,{uri:e.uri,size:r===ci.E.MEDIUM?Qu.t.sm:Qu.t.xs,onClick:n,className:ad}):(0,Nl.p)(e)?(0,b.jsx)(zu.b,{uri:e.uri,size:r===ci.E.MEDIUM?Qu.t.sm:Qu.t.xs,onClick:n,className:ad,condensed:!0}):null},bd=({context:e,item:t})=>{const{spec:i,logger:a}=(0,Ae.r)(Tn.J,{}),{spec:n}=(0,Ae.r)(qu.p6,{data:{identifier:qu.gw.DESKTOP}}),r=(0,Ju.X)(),l=(0,s.NC)(Le.$PN),c=(0,mi.y)();return(0,b.jsxs)(b.Fragment,{children:[l===Le.X$5.NPV_ALWAYS_VISIBLE||l===Le.X$5.NPV_VISIBLE_ON_HOVER?(0,b.jsx)(Gu.w,{className:l===Le.X$5.NPV_VISIBLE_ON_HOVER?sd:nd,uri:t.uri,sharingInfo:null,interactionData:{intent:"share",type:"click"},condensedAll:!0,onClick:()=>{a.logInteraction(i.shareButtonFactory({uri:t.uri}).hitCopyToClipboard())},ariaLabel:(0,ya.gH)(t.uri)?O.Ru.get("context-menu.copy-episode-link"):O.Ru.get("context-menu.copy-track-link"),size:c===ci.E.MEDIUM?"medium":"small"}):null,(0,b.jsx)(Wu.a,{context:e,item:t,className:o()(nd,ed),onClick:()=>{a.logInteraction(n.hideButtonFactory().hitRemoveRecommendation({recommendedItemUri:t.uri,contextUri:e.uri}))}}),r&&(0,bl.N)(t)?(0,b.jsx)(Fs.r,{spec:i,children:(0,b.jsx)("div",{className:nd,children:(0,b.jsx)(Xu.o,{contextUri:t.metadata?.context_uri??e.uri,id:t.uid??void 0,uri:t.uri,isActive:!0})})}):(0,b.jsx)("div",{className:nd,children:(0,b.jsx)(vd,{item:t,spec:i})})]})};var yd=i(30258),hd=i(25228),fd=i(13643),jd=i(75987);const Nd="Z_lhw3kk_krs5GqxYAPn",Cd=()=>{const{setVideoPlayerUIFlag:e}=(0,fd.d)(),{close:t}=(0,jd.H)(),i=(0,a.useCallback)((()=>{e(Nu.n.documentPip,!1),t()}),[t,e]);return(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:Nd,children:[(0,b.jsx)(c.E,{variant:"bodySmall",children:O.Ru.get("web-player.now-playing-view.video.playing-in-pip")}),(0,b.jsx)(se.n,{onClick:i,size:"small",children:O.Ru.get("web-player.now-playing-view.video.return-playback")})]})})};var Sd=i(75360);const wd=()=>{const e=(0,Ie.v)(),t=(0,s.NC)(Le.VUN),{panelSend:i}=(0,j.AI)(g.Z.DevicePicker,g.Z.DevicePickerOverlay),n=(0,a.useCallback)((()=>{t?(i(W.$S.DEVICE_PICKER_BUTTON_CLICK),(0,K.I)("DEVICE-PICKER")):e&&(i(W.$S.PUFFIN_BUTTON_CLICK),(0,K.I)("PUFFIN"))}),[t,e,i]);return e||t?(0,b.jsx)(se.n,{size:"small",onClick:n,children:O.Ru.get("web-player.connect.device-picker.select-another-device")}):null},kd=()=>{const{remoteDeviceName:e,connectionStatus:t}=(0,B.v)((e=>{const t=(0,D.V)(e);return{remoteDeviceName:t.remoteDevice?.name,connectionStatus:t.connectionStatus}}),F.a);let i="";return e&&t===Sd.zP.CONNECTING?i=O.Ru.get("web-player.connect.bar.connecting-state",{device_name:e}):e&&t===Sd.zP.CONNECTED&&(i=O.Ru.get("web-player.connect.bar.connected-state",{device_name:e})),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:Nd,children:[(0,b.jsx)(c.E,{variant:"bodySmall",children:i}),(0,b.jsx)(wd,{})]})})};var Ed=i(66091),Rd=i(72790),Td=i(90650),Id=i(41586);var Ld=i(5686),Ad=i(26048),Pd=i(34442);const Od=(0,a.memo)((()=>(0,b.jsx)(Ed.B,{size:"small"}))),_d=(0,a.memo)((()=>(0,b.jsx)(Rd.e,{size:"small"}))),Ud=({className:e})=>{const t=O.Ru.get("npv.song-videos.switch-to-video"),i=O.Ru.get("npv.song-videos.switch-to-audio"),n=O.Ru.get("page.loading"),[r,l]=(0,a.useState)(!1),u=(0,P.wA)(),d=(0,N.z)(),{signals:p,loading:g,uri:m}=(0,gt.o)((e=>({signals:e?.signals,loading:e?.isBuffering&&!e.isPaused,uri:e?.item?.uri}))),{isSongVideoDeviceRestricted:x}=(0,Ld.k)(),v=(()=>{const e=(0,N.z)(),t=e=>{const t=e?.signals;return t?.includes(Id.L.SWITCH_TO_VIDEO)??!1};return async()=>{if(t(e.getState()))return!0;let i=()=>{};const a=new Promise((a=>{i=e.getEvents().addListener(Td.gd.UPDATE,(e=>{t(e.data)&&a(!0)}))})),n=new Promise((e=>setTimeout((()=>e(null)),2e3))),s=await Promise.race([a,n]);return i(),s}})(),{spec:y,logger:h}=(0,Ae.r)(fu.E,{data:{uri:m??"",identifier:Nu.K.npv}}),f=(0,a.useCallback)((()=>{x?u(Ad.ug.actions.open({onConfirm:async()=>{await v()&&d.sendSignal(Id.L.SWITCH_TO_VIDEO)}})):(r?(d.sendSignal(Id.L.SWITCH_TO_AUDIO),h.logInteraction(y.toggleAudioVideoButtonFactory({identifier:"switch_to_audio"}).hitPlay({itemToBePlayed:m??""}))):(d.sendSignal(Id.L.SWITCH_TO_VIDEO),h.logInteraction(y.toggleAudioVideoButtonFactory({identifier:"switch_to_video"}).hitPlay({itemToBePlayed:m??""}))),l((e=>!e)))}),[x,r,u,v,d,h,y,m]);(0,a.useEffect)((()=>{d.canSendSignal(Id.L.SWITCH_TO_VIDEO)?l(!1):d.canSendSignal(Id.L.SWITCH_TO_AUDIO)&&l(!0)}),[d,p]);const j=(0,Hl.t)(y.toggleAudioVideoButtonFactory({identifier:r?"switch_to_audio":"switch_to_video"})),C=(0,s.NC)(Le.KkE,{loadingValue:!1}),S=r?i:t;return C?(0,b.jsx)(a.Suspense,{fallback:!0,children:(0,b.jsxs)("div",{className:o()(Pd.A.container,e),ref:j,children:[(0,b.jsxs)("div",{"aria-label":n,className:o()(Pd.A.button,Pd.A.loading,{[Pd.A.loadingVisible]:r&&g}),"aria-hidden":!0,children:[(0,b.jsx)("div",{className:Pd.A.spinner}),(0,b.jsx)(c.E,{as:"span",variant:"bodySmall",children:n})]}),(0,b.jsxs)("button",{"aria-label":S,className:o()(Pd.A.button,Pd.A.switch,{[Pd.A.hidden]:r&&g}),onClick:f,disabled:g,children:[r?(0,b.jsx)(_d,{}):(0,b.jsx)(Od,{}),(0,b.jsx)(c.E,{as:"span",variant:"bodySmallBold",children:S})]})]})}):null},Dd=(0,a.lazy)((()=>i.e(1275).then(i.bind(i,41275)))),Bd=(0,a.lazy)((()=>i.e(9134).then(i.bind(i,9134))));let Fd=function(e){return e[e.NONE=0]="NONE",e[e.COVER_ART=1]="COVER_ART",e[e.VIDEO_OVER_PIP_PLACEHOLDER=2]="VIDEO_OVER_PIP_PLACEHOLDER",e[e.VIDEO_OVER_CONNECT_PLACEHOLDER=3]="VIDEO_OVER_CONNECT_PLACEHOLDER",e[e.CANVAS=4]="CANVAS",e}({});const Md=()=>{const e=(0,On.L)(),t=(0,D.l)(),{videoPlayerMode:i}=(0,fd.d)(),{isSongVideo:a,isSongVideoPlayingVideo:n}=(0,Ld.k)(),s=(0,P.d4)((e=>e.ads?.vto)),{showCanvasInNPV:r}=(0,Bu.a)({tryAvoidGraphQLFetching:!0});if(!e)return Fd.NONE;const{item:l}=e;return i===Nu.K.documentPip||i===Nu.K.pip?Fd.VIDEO_OVER_PIP_PLACEHOLDER:l?.type===ws.c.AD&&s?.isMinimized&&"audio"!==l?.mediaType?Fd.NONE:l?.type!==ws.c.EPISODE||"video"!==l?.mediaType&&"mixed"!==l?.mediaType?a&&n?t?Fd.VIDEO_OVER_CONNECT_PLACEHOLDER:Fd.NONE:r?Fd.CANVAS:Fd.COVER_ART:t?Fd.VIDEO_OVER_CONNECT_PLACEHOLDER:Fd.NONE},Vd=(0,En.mc)((({hideContextItemInfo:e=!1})=>{const t=(0,On.L)(),i=Md(),{draggable:n,onDragStart:s}=(0,fs.P)(),[r,l]=(0,a.useState)(!0),{spec:c,logger:u}=(0,Ae.r)(Tn.J,{}),{isSongVideo:d}=(0,Ld.k)(),p=i===Fd.CANVAS,g=i===Fd.COVER_ART,m=(0,a.useRef)(null),x=(0,a.useRef)(null),v=(0,a.useRef)(null),y=!(0,xi.j)(),[h,f]=(0,a.useState)(null);if(y&&p&&m.current&&v.current&&(f(v.current),setTimeout((()=>{f(null)}),600)),m.current=g,x.current=p,v.current=t,null===t)return null;const{context:j,item:N,index:C}=t,S="isPodcastAd"in N&&N.isPodcastAd&&N.metadata?.["podcast_ads.buttonMessage"]&&N.metadata?.["podcast_ads.tagline"];return(0,b.jsxs)("div",{className:o()($u),children:[(0,b.jsxs)("div",{className:td,children:[(0,b.jsxs)("div",{onClick:()=>p&&l(!r),className:o()(rd,{[ld]:p,[od]:g,[dd]:r}),children:[(0,b.jsx)("div",{className:o()(cd,{[pd]:p}),"aria-hidden":p,children:(0,b.jsx)(yd.h,{context:h?.context||j,item:h?.item||N,index:C,canSwitchVisuals:!0})}),i===Fd.VIDEO_OVER_PIP_PLACEHOLDER&&(0,b.jsx)(Cd,{}),i===Fd.VIDEO_OVER_CONNECT_PLACEHOLDER&&(0,b.jsx)(kd,{}),(0,b.jsx)("div",{className:o()(ud,{[gd]:!p}),"aria-hidden":"true",children:(0,b.jsx)(_a.h,{menu:(0,b.jsx)(Pn.W,{context:j,item:N,canSwitchVisuals:!0}),children:(0,b.jsx)("div",{draggable:n,onDragStart:e=>{s(e,{itemUris:[N.uri],dragLabelText:(0,Fu.r)(N)})},children:p&&(0,b.jsx)(Hu,{uri:N.uri})})})}),(0,b.jsx)(hd.F,{})]}),d&&(0,b.jsx)(Ud,{className:p?xd:""}),e?null:(0,b.jsxs)("div",{className:id,children:[(0,b.jsx)(sr.d,{className:o()(md),context:j,item:N,titleTypeVariant:"titleSmall",subtitleTypeVariant:"bodyMedium",onTitleClick:e=>{u.logInteraction(c.titleFactory({uri:N.uri}).hitUiNavigate({destination:e||""}))},onSubtitleClick:e=>{u.logInteraction(c.artistFactory({uri:N.uri}).hitUiNavigate({destination:e||""}))},referrer:Mu.G.NPV}),(0,Uu.N)(N)?S?null:(0,b.jsx)(a.Suspense,{fallback:!0,children:(0,b.jsx)(Dd,{item:N,onCtaClick:e=>{u.logInteraction(c.titleFactory({uri:N.uri}).hitUiNavigate({destination:e||""}))}})}):(0,b.jsx)(bd,{context:j,item:N})]})]}),S&&(0,b.jsx)(a.Suspense,{fallback:!0,children:(0,b.jsx)(Bd,{item:N,onCtaClick:e=>{u.logInteraction(c.titleFactory({uri:N.uri}).hitUiNavigate({destination:e||""}))}})})]})}),{name:"NPVHeader"});var Hd=i(68800),qd=i(9519),Qd=i(61626);const zd={context:null,item:null};var Yd=i(30557),Gd=i(50400),Kd=i(70329),Zd=i(22010),Wd=i(61217),Xd=i(37171);const Jd="yvZooOj0rpfRS__cAUCo",$d="vDev2BqBHloweL24GNHK",ep="IkRGajTjItEFQkRMeH6v",tp="f2UE9n5nZcbgZrGYTU3r",ip="nw2W4ZMdICuBo08Tzxg9",ap=(0,a.lazy)((()=>Promise.all([i.e(4151),i.e(978)]).then(i.bind(i,60978))));function np(e){return(0,Cl.v)(e)||(0,Xd.v)(e)||(0,Nl.p)(e)||(0,jl.d)(e)?e.name:(0,Uu.N)(e)?"":(0,ca.d)(e)}const sp=a.memo((({item:e,spec:t})=>{const{ref:i,breakpoint:a}=(0,oa.x)({[ci.E.XSMALL]:0,[ci.E.SMALL]:280,[ci.E.MEDIUM]:320});return(0,b.jsx)("div",{className:ip,"data-testid":"NPV_Panel_OpenDiv",ref:i,children:e&&(0,b.jsxs)(mi.o.Provider,{value:a,children:[(0,b.jsx)(Vd,{}),(0,b.jsx)(Du,{item:e,spec:t}),!(0,Nl.p)(e)&&(0,b.jsx)(Xl,{})]})})})),rp=({context:e,item:t,spec:i,currentPanel:n})=>{const s=(0,Kd.v7)();(0,a.useEffect)((()=>{s.current&&(s.current.scrollTop=0)}),[t?.uri,s]);return n===g.Z.NowPlayingView?(0,Fl.bJ)(e,t)?(0,b.jsx)(Yd.IT,{spec:i}):(0,b.jsx)(sp,{currentPanel:n,context:e,item:t,spec:i}):(0,b.jsx)("div",{"data-testid":"NPV_Panel_ClosedDiv"})},lp=({context:e,item:t,spec:i,currentPanel:a})=>(0,b.jsx)(rp,{currentPanel:a,context:e,item:t,spec:i}),op=()=>Md()===Fd.CANVAS,cp=({item:e})=>{const t=(0,a.useRef)(null),i=(0,On.L)(),{title:n,link:s}=(0,Gd.g)(),r=op(),{spec:l,logger:c}=(0,Ae.r)(Tn.J,{}),u=(0,a.useCallback)((()=>{const e=l.closeButtonFactory().hitUiHide();c.logInteraction(e)}),[l,c]);return(0,a.useEffect)((()=>{null!==t.current&&t.current.focus()}),[]),(0,b.jsx)(p.a,{title:n,link:s,actions:i&&i.context&&(0,b.jsx)(An.b,{menu:(0,b.jsx)(Pn.W,{context:i.context,item:e,canSwitchVisuals:!0}),children:(0,b.jsx)(Ln.e,{size:"small",condensed:!1,label:O.Ru.get("more.label.context",e?np(e):""),onClick:()=>{c.logInteraction(l.contextMenuButtonFactory().hitUiReveal())}})}),panelLinkRef:t,panel:g.Z.NowPlayingView,onClose:u,item:e,className:o()({[Jd]:r})})},up=({item:e})=>{const t=(0,In.w)(e);return(0,a.useMemo)((()=>t?null:(0,b.jsx)(cp,{item:e})),[e,t])},dp=(0,En.mc)((({nodeRef:e,currentPanel:t})=>{const{context:i,item:a,index:n}=(0,On.L)()||{context:null,item:null,index:null},{spec:r,UBIFragment:l}=(0,Ae.r)(Rn.t,{data:{uri:a?a.uri:""}}),c=op(),u=(0,In.w)(a),d=(0,Hl.t)(r),p=(()=>{const{item:e}=(0,On.L)()||zd,{isYourDJNarrator:t}=(0,qd.CV)(),i=(0,s.NC)(Le.yon),a=(0,Qd.z)(e?.images?.[0]?.url,Qo.l0o,"colorDark");return t?Hd.Ym:i?a:void 0})(),g={"--background-base":p,"--section-background-base":p?"var(--background-tinted-base)":"var(--background-elevated-base)"};return(0,b.jsx)(Wd.P,{surface:Zd.u.NOW_PLAYING,children:(0,b.jsx)(Kd.ql.Provider,{value:"now_playing_panel",children:(0,b.jsx)(Ue._,{nodeRef:e,label:O.Ru.get("web-player.now-playing-view.label"),style:g,itemUri:a?.uri?a.uri:"","data-testid":"now-playing-view-container",className:"NowPlayingView",children:(0,b.jsx)(l,{spec:r,children:(0,b.jsx)(De.w,{className:o()(ep,{[tp]:void 0!==p}),fixedHeader:(0,b.jsx)(up,{item:a}),scrolledClassName:c?$d:void 0,ref:d,children:u?(0,b.jsx)(ap,{item:a,context:i,index:n,currentPanel:t}):(0,b.jsx)(lp,{spec:r,currentPanel:t,context:i,item:a})})})})})})}),{name:"NPV"}),pp="vzeIlCPBQJUaqdMZHqHE",gp="iZgGvu9g2gDlQ1ofJ7rH",mp="FSZKuoSTDgGwCPXO_qel",xp="cPpNQwPTiEn9Zegl5Dwz",vp="p2Yw6bT_O5PW8yGv1R0X",bp="pK7G3_mtRcuFjbhJzm1s",yp="gVJxtuXo8lHAw8XLKHfQ",hp="BR3H6wavkReGa2xeSeaV",fp="vXYSi4u1nPutJ_ZkC6mq",jp=e=>{const t=(0,a.useRef)(null);return(0,b.jsx)(n.A,{in:e.isActive,nodeRef:t,timeout:{enter:e.shouldPlayAnimation?200:0,exit:e.shouldPlayAnimation?300:0},classNames:{enter:e.shouldPlayAnimation?gp:bp,enterActive:e.shouldPlayAnimation?mp:yp,exit:e.shouldPlayAnimation?xp:hp,exitActive:e.shouldPlayAnimation?vp:yp},unmountOnExit:!0,mountOnEnter:!0,children:(0,b.jsx)("div",{className:pp,children:(0,b.jsx)("div",{className:fp,ref:t,children:e.children})})})};var Np=i(42135),Cp=i(58975),Sp=i(22486),wp=i(31618),kp=i(84399),Ep=i(40207),Rp=i(91388),Tp=i(75374),Ip=i(99571),Lp=i(10075);const Ap="PddBvUOS0_6f9B21fVGF",Pp=({ariaLabel:e,onRemoveItems:t,nrItems:i,columnCount:n,children:s})=>{const r=(0,a.useRef)(null);(0,Ip.g)(r);const l=(0,Lp.d)(t);return(0,b.jsx)(Tp.R,{firstInteractiveIsWrapper:!0,"aria-label":e,"aria-rowcount":i,"aria-colcount":n,className:Ap,ref:r,onKeyDown:l,children:s})},Op=({items:e,renderRow:t,...i})=>{const n=(0,a.useCallback)(((t,i)=>e.slice(t,i+1)),[e]);return(0,b.jsx)(Or.k,{resolveItem:_p,getItems:n,nrTracks:e.length,children:(0,b.jsx)(Pp,{nrItems:e.length,...i,children:e.map(t)})})};function _p(e){return{uri:e.uri,uid:e.uid??void 0,type:e.type}}var Up=i(1687),Dp=i(35658);const Bp=({chapter:e,index:t,showTypeLabel:i,...a})=>{const{uid:n,uri:s,type:r,name:l,images:o,book:c}=e,u=Tr(e,t),d=Rl(a.section),p=(0,b.jsx)(Dp.r,{uri:s,removeFromQueueData:{uid:n??void 0,contextUri:d}}),g=(0,b.jsx)(wl,{item:e,tooltipText:c.name,showTypeLabel:i,subtitle:(0,b.jsx)(_a.h,{menu:(0,b.jsx)(Up.p,{uri:c.uri}),children:(0,b.jsx)(Fe.N,{to:c.uri,stopPropagation:!0,children:c.name})})});return(0,b.jsx)(dl,{uid:n,uri:s,contextUri:d,id:u,index:t,type:r,title:l,subtitle:g,images:o,dragLabel:l,menu:p,moreButtonLabelName:l,ariaPauseLabel:O.Ru.get("playlist.a11y.pause",l),ariaPlayLabel:O.Ru.get("playlist.a11y.play",l),...a})};var Fp=i(57237),Mp=i(70328),Vp=i(36779),Hp=i(16325);const qp=(0,a.createContext)(null),Qp=({children:e})=>{const{uri:t}=(0,Hp.H)(),{spec:i,UBIFragment:n}=(0,Ae.r)(Mp.i,{data:{identifier:Vp.$h.NOWPLAYING_QUEUE,uri:t??""}}),s=(0,a.useMemo)((()=>i.nowPlayingSectionFactory()),[i]),r=(0,a.useMemo)((()=>i.nextInQueueSectionFactory()),[i]),l=(0,a.useMemo)((()=>i.nextFromSectionFactory()),[i]),o=(0,a.useMemo)((()=>({queueSpec:i,nowPlayingSectionSpec:s,nextInQueueSectionSpec:r,nextFromSectionSpec:l})),[i,s,r,l]);return(0,b.jsx)(qp.Provider,{value:o,children:(0,b.jsx)(n,{spec:i,children:e})})};var zp=i(94499);const Yp=()=>{const e=(0,a.useContext)(qp);if(!e)throw Error("useQueueUBI must be used within a QueuePanelUBIProvider!");const{queued:t}=(0,Hp.H)(),i=(0,te.s)(),{queueSpec:n,nowPlayingSectionSpec:s,nextInQueueSectionSpec:r,nextFromSectionSpec:l}=e;return{logClearQueue:(0,a.useCallback)((()=>{const e=r.clearQueueButtonFactory().hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:t.length});return i.logInteraction(e)}),[i,r,t.length]),logAddToQueue:(0,a.useCallback)(((e,t)=>{let a;switch(e){case kl.$.NowPlaying:a=s;break;case kl.$.NextInQueue:a=r;break;case kl.$.NextUp:a=l;break;default:return}const n=1===t.length?a.dragAddItemToQueue({itemToAddToQueue:t[0]}):a.dragAddItemsToQueue({numberOfItemsToAddToQueue:t.length});return i.logInteraction(n)}),[i,l,r,s]),logSort:(0,a.useCallback)((e=>{let t;switch(e){case kl.$.NextInQueue:t=r;break;case kl.$.NextUp:t=l;break;case kl.$.NowPlaying:default:return}const a=t.dragSort();return i.logInteraction(a)}),[i,l,r]),logQueuePanelTabChange:(0,a.useCallback)((e=>{if(e!==zp.p.PARTICIPANT_LIST){const t=n.queueHistoryTabFactory({identifier:e===zp.p.QUEUE?"queue":"recently_played"}).hitUiReveal();return i.logInteraction(t)}}),[i,n]),logQueueContextLinkNavigate:(0,a.useCallback)((e=>{const t=l.queueContextLinkFactory().hitUiNavigate({destination:e??""});return i.logInteraction(t)}),[i,l])}};var Gp=i(65738);const Kp=(0,a.memo)((function({item:e,...t}){const i=function(e,t){const i=(0,N.z)(),{request:n}=(0,a.useContext)(as.j),{logAddToQueue:s,logSort:r}=Yp();return(0,a.useCallback)((async(a,l,o)=>{const{contextUri:c,sectionId:u,itemIds:d}=o??{},p=t===kl.$.NowPlaying,g=ll===c&&!p,m=a[Fp.fl.ALBUMS]?.at(0),x=Object.values(a).flat();let v=[];if(m){const{trackUris:e}=await(0,Gp.s)(m,0,n);v=e.map((e=>({uri:e,uid:null})))}else v=g&&d?.length?d.map((e=>({uri:"",uid:e}))):Object.values(a).flat().map((e=>({uri:e,uid:null})))??[];const b=g&&u===kl.$.NowPlaying;let y;if(y=l===Ar.Nz.BEFORE?{before:{uri:e.uri,uid:e.uid??null}}:{after:{uri:e.uri,uid:e.uid??null}},g&&!b)t&&r(t),i.reorderQueue(v,y);else{let e;t&&(e=s(t,x)),p?i.addToQueue(v,{interactionId:e?.interactionId}):i.insertIntoQueue(v,y,{interactionId:e?.interactionId})}}),[e.uid,e.uri,s,r,i,n,t])}(e,t.section);switch(e.type){case ws.c.TRACK:return(0,b.jsx)(_l,{track:e,onDrop:i,...t});case ws.c.EPISODE:return(0,b.jsx)(Tl,{episode:e,onDrop:i,...t});case ws.c.CHAPTER:return(0,b.jsx)(Bp,{chapter:e,onDrop:i,...t});case ws.c.AD:return(0,b.jsx)(pl,{ad:e,onDrop:i,...t});case ws.c.UNKNOWN:return null;default:return(0,ca.k)(e),null}})),Zp=(0,a.memo)((function({item:e,...t}){const{usePlayContextItem:i}=(0,Ls.P)({uri:e.uri,pages:[{items:[e]}]},{featureIdentifier:"history"});return(0,b.jsx)(Kp,{item:e,...t,usePlayContextItem:i})})),Wp=({items:e})=>{const t=(0,a.useCallback)(((e,t)=>(0,b.jsx)(Zp,{item:e,index:t},Tr(e,t))),[]);return(0,b.jsx)(Op,{items:e,ariaLabel:O.Ru.get("view.recently-played"),renderRow:t,columnCount:3})};var Xp=i(63605),Jp=i(48275);const $p=()=>{const{isLoading:e,data:t}=(0,Jp.a)();return e?null:t?.items.length?(0,b.jsx)(Wp,{items:t.items}):(0,b.jsx)(Xp.H,{})};var eg=i(68832);const tg=(e,t)=>!t?.didQueueChangeSignificantly,ig=(e,t,i)=>{tg(0,i?.current)?(0,eg.oz)({onUpdate:t=>{e.style.opacity=t.toString()}}):e.style.opacity="1"},ag=(e,t,i,a)=>{tg(0,a?.current)?(0,eg.oz)({onUpdate:t=>{e.style.opacity=(1-Number(t)).toString()},onComplete:i}):i()},ng=({hideEnteringElements:e,animateEnteringElements:t,animateExitingElements:i,animateFlippedElements:a})=>{e(),i(),a(),t()};var sg=i(8741);function rg(e){const t=(0,a.useRef)(e);return(0,a.useMemo)((()=>{const i=new Map,a=og(t.current,i),n=og(e,i),s=(0,sg.I)(a,n),r=s>16||s>=Math.max(lg(e),lg(t.current));return t.current=e,r}),[e])}function lg(e){return Number(!!e?.current)+(e?.queued.length??0)+(e?.nextUp.length??0)}function og({current:e,nextUp:t=[],queued:i=[]},a){let n="";return[[e],t,i].forEach((e=>{e.forEach((e=>{e?.uid&&(a.has(e.uid)||a.set(e.uid,String.fromCharCode(65+a.size)),n+=a.get(e.uid))})),e.length&&(n+=" ")})),n}function cg(){const e=(0,xi.j)(),t=(0,s.NC)(Le.J9c);return!e&&t}var ug=i(45485);const dg=({current:e,queued:t,nextUp:i,children:n})=>{const s=(0,a.useMemo)((()=>[e,...t,...i].filter(ug.P).map(Tr).join("")),[e,i,t]),r={didQueueChangeSignificantly:rg({current:e,nextUp:i,queued:t})};return(0,b.jsx)(eg.ZI,{flipKey:s,handleEnterUpdateDelete:ng,decisionData:r,children:n})},pg=({children:e,...t})=>cg()?(0,b.jsx)(dg,{...t,children:e}):(0,b.jsx)("div",{children:e}),gg=({children:e,...t})=>cg()?(0,b.jsx)(eg.lf,{shouldFlip:tg,...t,children:e}):(0,b.jsx)(b.Fragment,{children:e}),mg=[Fp.fl.TRACKS,Fp.fl.LOCAL_TRACKS,Fp.fl.EPISODES,Fp.fl.CHAPTERS,Fp.fl.ALBUMS],xg=({uri:e,items:t,ariaLabel:i,section:n,showTypeLabel:s,decoratedQueuedByUsersByUsername:r})=>{const l=(0,N.z)(),o=(0,a.useCallback)((e=>{l.removeFromQueue(e)}),[l]),{usePlayContextItem:c}=Bl(e,n),u=(0,a.useCallback)(((e,t)=>{const i=Tr(e,t);return(0,b.jsx)(gg,{flipId:e.metadata?.original_uid??i,onAppear:ig,onExit:ag,translate:!0,children:(0,b.jsx)("div",{className:Br,children:(0,b.jsx)(Kp,{item:e,index:t,usePlayContextItem:c,section:n,allowedDropMimeTypes:mg,showTypeLabel:s,queuedBy:r?.[e.metadata?.queued_by??""]})})},i)}),[r,n,s,c]);return(0,b.jsx)(Op,{items:t,renderRow:u,columnCount:3,ariaLabel:i,onRemoveItems:o})};var vg=i(51103);const bg="u842BXnznGeq38O3DUTQ",yg="NWVZ_rxlezZ8xTHlMg4Y",hg="Oae51evvT5DrqTupCiZ2",fg="LFdMliaHVgrpBcqNKHU3",jg="IeeqYq0Ozrndd6STmrRk",Ng="NljerwmGshDHsI7rIvWl",Cg=({nrQueuedItems:e})=>{const t=(0,N.z)(),{logClearQueue:i}=Yp(),[n,s]=(0,a.useState)(!1),r=(0,a.useCallback)((()=>{s(!1)}),[]),l=(0,a.useCallback)((()=>{i(),t.clearQueue(),s(!1)}),[i,t]),o=(0,a.useCallback)((()=>{s(!0)}),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Mt.H,{size:"small",onClick:o,className:jg,condensed:!0,children:O.Ru.get("queue.clear-queue")}),(0,b.jsx)(vg.p,{itemCount:e,isOpen:n,onClose:r,onConfirm:l})]})};var Sg=i(85124);const wg=({queueSection:e,title:t,trailingButton:i})=>{const n=(0,a.useRef)(null),s=(0,Sg.K)({ref:n});return(0,b.jsx)(gg,{flipId:`section-header-${e}`,onAppear:ig,onExit:ag,translate:!0,children:(0,b.jsxs)("div",{className:fg,children:[(0,b.jsx)(Fa.Zp,{label:t,disabled:!s,children:(0,b.jsx)(c.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textBase",className:Ng,ref:n,children:t})}),i]})})};var kg=i(51629),Eg=i(18230);const Rg=new Jn.l("decorateQueuedByUsers","query","1b71b9895bad207fdac0df7ebad17c790260519f853a069ee05f20e51c08636e",null);function Tg(e){const{currentSession:t}=(0,vn.D)(),i=Array.from(new Set(e.map((e=>e?.metadata?.queued_by||null)).filter(ug.P))).sort().map((e=>(0,ya.Qj)(e).toURI())),{data:n}=(s={userUris:i},r={gcTime:36e5,staleTime:18e5,enabled:!!i.length,placeholderData:Eg.rX},(0,$n.I)(Rg,s,r));var s,r;const l=(0,a.useMemo)((()=>Object.fromEntries(n?.users?.map((e=>{return"User"===e.__typename?[e.username,(t=e,{type:ws.c.USER,...t,images:t.avatar?.sources??[]})]:null;var t})).filter(ug.P)??[])),[n]);return t?.active?l:{}}var Ig=i(82769),Lg=i(81083);const Ag=()=>{const e=(0,Hp.H)(),{uri:t,description:i,current:n,nextUp:s,queued:r,isEmpty:l,hasQueuedTracks:o,hasNextTracks:c}=e,{logQueueContextLinkNavigate:u}=Yp(),d=Tg([n,...s,...r]),p=(0,a.useMemo)((()=>new Set([n,...r,...s].filter(ug.P).map((({type:e})=>e))).size>1),[n,s,r]),{currentSession:g}=(0,vn.D)(),m=(0,xn.y)();return l?(0,b.jsx)(kg.K,{}):(0,b.jsxs)(pg,{...e,children:[(0,b.jsx)(Ig.Z,{className:hg}),(0,b.jsxs)("div",{className:bg,children:[n&&t&&(0,b.jsxs)("div",{className:yg,children:[(0,b.jsx)(wg,{queueSection:kl.$.NowPlaying,title:O.Ru.get("queue.now-playing")}),(0,b.jsx)(xg,{ariaLabel:O.Ru.get("queue.now-playing"),uri:t,items:n?[n]:[],section:kl.$.NowPlaying,showTypeLabel:p,decoratedQueuedByUsersByUsername:d})]}),!g?.active&&m&&(0,b.jsx)(Lg.p,{localStorageKey:"dismissStartJamButtonFromQueue"}),o&&t&&(0,b.jsxs)("div",{className:yg,children:[(0,b.jsx)(wg,{queueSection:kl.$.NextInQueue,title:O.Ru.get("queue.next-in-queue"),trailingButton:(0,b.jsx)(Cg,{nrQueuedItems:r.length})}),(0,b.jsx)(xg,{ariaLabel:O.Ru.get("queue.next-in-queue"),uri:t,items:r,section:kl.$.NextInQueue,showTypeLabel:p,decoratedQueuedByUsersByUsername:d})]}),c&&t&&(0,b.jsxs)("div",{className:yg,children:[(0,b.jsx)(wg,{queueSection:kl.$.NextUp,title:i&&!(0,Hp.K)(n)?(0,b.jsxs)(b.Fragment,{children:[O.Ru.get("queue.next-from")," ",(0,b.jsx)(Fe.N,{to:t,onClick:()=>{u(t)},children:i})]}):O.Ru.get("queue.next-up")},i),(0,b.jsx)(xg,{ariaLabel:O.Ru.get("queue.next-up"),uri:t,items:s,section:kl.$.NextUp,showTypeLabel:p})]})]})]})};var Pg=i(5394),Og=i(57171);const _g="AjjTyUrCO3pZ365KtTXW",Ug="pGtUoenc5OobLi8CscJ6",Dg="cArVcLcQ85q_9QSLGYGX",Bg="lDtXv1VCrs0PHHSuH5uO",Fg="ukjUoaLSzKyRcwoOQw9V",Mg="yQwBNeetmAr0a0OTR8t3",Vg="fzB4RXxTp0rlpNQlSuu9",Hg=({sessionMember:e,showRemoveButton:t,onClickMember:i,onClickRemove:a,index:n})=>{const{currentSession:s}=(0,vn.D)(),{displayName:r,images:l,username:o,uri:c}=(0,Og.c)(e);return(0,b.jsx)(_a.h,{menu:(0,b.jsx)(tl.B,{uri:c}),children:(0,b.jsx)(H.v,{id:`${n}`,variant:"naked",className:Fg,title:(0,b.jsx)(je.d,{lineClamp:1,children:r}),media:(0,b.jsx)("div",{role:"button",onClick:i,onKeyDown:i,tabIndex:-1,children:(0,b.jsx)(el.e,{images:l,userIconSize:"medium",width:48,displayName:r,username:o,label:r})}),subtitle:s?.sessionOwnerId===e.id?O.Ru.get("web-player.social-connect.participant-list.host"):O.Ru.get("web-player.social-connect.participant-list.guest"),onClick:i,trailing:t&&(0,b.jsx)(se.n,{size:"small",className:Mg,onClick:a,"aria-label":O.Ru.get("web-player.social-connect.participant-list.remove-guest-accessible-label",{displayName:r}),children:O.Ru.get("web-player.social-connect.participant-list.remove-guest")})})})};var qg=i(12401),Qg=i(46341),zg=i(98444);const Yg=()=>{const e=(0,cn.d)(),t=(0,P.wA)(),i=(0,vs.Zp)(),n=(0,qg.Z)(),{currentSession:s,kickAllParticipants:r}=(0,vn.D)(),{setQueueView:l}=(0,Pg.m)(),{logUserClick:o,logRemoveClick:u}=(0,Qg.T)(),p=(0,a.useCallback)((()=>{s?.joinSessionShortLink&&n(s?.joinSessionShortLink)}),[n,s?.joinSessionShortLink]),g=(0,a.useCallback)(((e,i)=>{u(e),t((0,cc.A9)(Do.EL.REMOVE_PARTICIPANT,void 0,i))}),[t,u]),m=(0,a.useCallback)(((e,t)=>{const a=(0,ya.Qj)(t.username);o(e,a.toURI()),i(a.toURLPath(!0))}),[o,i]),x=(0,a.useCallback)((()=>{r(s?.sessionId)}),[s?.sessionId,r]),v=(0,zg.T4)(e);return s&&v?(0,b.jsxs)("div",{className:_g,children:[(0,b.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:O.Ru.get("web-player.social-connect.participant-list.title")}),(0,b.jsxs)("div",{className:Ug,children:[(0,b.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:O.Ru.get("web-player.social-connect.participant-list.subtitle")}),(0,b.jsx)(se.n,{size:"small",onClick:p,className:Dg,children:O.Ru.get("web-player.social-connect.invite-button")})]}),(0,b.jsx)("div",{className:Bg,children:s.sessionMembers.map(((t,i)=>(0,b.jsx)(Hg,{index:i,sessionMember:t,showRemoveButton:(0,zg.kt)(e,(0,ya.Qj)(t.username).toURI()),onClickRemove:()=>g(i,t),onClickMember:()=>m(i,t)},i)))}),s.isSessionOwner&&s.sessionMembers.length>1&&(0,b.jsx)(d.$,{colorSet:"invertedLight",size:"small",onClick:x,children:O.Ru.get("web-player.social-connect.participant-list.remove-all-guests")}),(0,b.jsx)(c.E,{variant:"marginal",semanticColor:"textSubdued",className:Vg,children:O.Ru.get("web-player.social-connect.participant-list.visibility-info")})]}):(l(Pg.p.QUEUE),null)};var Gg=i(92909);const Kg="BZj_r1yzmmragvivUCrw",Zg="hpzTKCoO0rllEslIOMPo",Wg="TeBVsFnI9PMHYL9ynJx9",Xg="ZDR7q1cqU2yaYjemuy9Z",Jg="OLB2ghxc09Kz8k_93eIu",$g=()=>{const{currentQueueView:e,setQueueView:t}=(0,zp.m)(),i=(0,Gg.y)(),{logQueuePanelTabChange:n}=Yp(),s=(0,a.useMemo)((()=>i?{titleSlot:e!==zp.p.PARTICIPANT_LIST?(0,b.jsx)(wp.t,{currentTab:e,onTabChange:e=>{e===(0,Ep.c)(zp.p.HISTORY)?(n(zp.p.HISTORY),t(zp.p.HISTORY)):(n(zp.p.QUEUE),t(zp.p.QUEUE))},className:Wg,children:(0,b.jsxs)(kp.w,{"aria-label":"",className:Xg,children:[(0,b.jsx)(Ep.V,{"aria-selected":e===zp.p.QUEUE,label:O.Ru.get("playback-control.queue"),value:zp.p.QUEUE}),(0,b.jsx)(Ep.V,{"aria-selected":e===zp.p.HISTORY,label:O.Ru.get("view.recently-played"),value:zp.p.HISTORY})]})}):(0,b.jsx)(Mt.H,{iconLeading:Ja.g,onClick:()=>t(zp.p.QUEUE),size:"small",condensed:!0,className:Jg,children:O.Ru.get("web-player.social-connect.participant-list.back-to-queue")})}:{title:O.Ru.get("playback-control.queue")}),[i,n,t,e]);return(0,b.jsx)(Ue._,{label:O.Ru.get("playback-control.queue"),focusTransferId:"QUEUE-HISTORY-PANEL",children:(0,b.jsx)(De.w,{fixedHeader:(0,b.jsx)(p.a,{className:Kg,panel:g.Z.Queue,...s}),children:(0,b.jsx)("div",{className:Zg,children:e!==zp.p.PARTICIPANT_LIST?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Rp.K,{value:"queue",children:e===zp.p.QUEUE&&(0,b.jsx)(Ag,{})}),(0,b.jsx)(Rp.K,{value:"history",children:e===zp.p.HISTORY&&(0,b.jsx)($p,{})})]}):(0,b.jsx)(Yg,{})})})})},em=(0,a.memo)((function(){return(0,b.jsx)(Qp,{children:(0,b.jsx)($g,{})})}));var tm=i(85961);const im=(0,a.memo)((()=>{const e=(0,Cp.X)(),t=(0,Np._)(),i=function(){const e=(0,a.useRef)(g.Z.NowPlayingView),t=(0,j.XB)(),i=(0,s.NC)(Le.xId);return(0,a.useEffect)((()=>{e.current=t}),[t]),(0,a.useCallback)((a=>{const n=e.current===g.Z.NowPlayingView,s=t===g.Z.NowPlayingView,r=a.some((i=>n&&t===i||s&&e.current===i));return i&&r}),[t,i])}(),l=(0,a.useRef)(null),o=(0,s.NC)(Le.xId),c=(0,s.NC)(Le.t84)?Ca:Aa;return(0,b.jsxs)(r.s,{onError:e=>{(0,tm.Jy)(e,"PanelSection"),t((0,Sp.MQ)(g.Z.Disabled))},children:[o||e!==g.Z.NowPlayingView?null:(0,b.jsx)(dp,{currentPanel:g.Z.NowPlayingView}),o?(0,b.jsx)(n.A,{nodeRef:l,in:e===g.Z.NowPlayingView,timeout:{enter:0,exit:e===g.Z.Disabled?0:300},unmountOnExit:!0,mountOnEnter:!0,children:(0,b.jsx)(dp,{nodeRef:l,currentPanel:g.Z.NowPlayingView})}):null,e===g.Z.BuddyFeed?(0,b.jsx)(c,{}):null,(0,b.jsx)(jp,{isActive:e===g.Z.BuddyFeedOverlay,shouldPlayAnimation:i([g.Z.BuddyFeedOverlay]),children:(0,b.jsx)(c,{})}),e===g.Z.Queue?(0,b.jsx)(em,{}):null,(0,b.jsx)(jp,{isActive:e===g.Z.QueueOverlay,shouldPlayAnimation:i([g.Z.QueueOverlay]),children:(0,b.jsx)(em,{})}),e===g.Z.Puffin||e===g.Z.PuffinActivation?(0,b.jsx)(pa,{}):null,(0,b.jsx)(jp,{isActive:e===g.Z.PuffinActivationOverlay||e===g.Z.PuffinOverlay,shouldPlayAnimation:i([g.Z.PuffinActivationOverlay,g.Z.PuffinOverlay]),children:(0,b.jsx)(pa,{})}),e===g.Z.DevicePicker?(0,b.jsx)(kn,{}):null,(0,b.jsx)(jp,{isActive:e===g.Z.DevicePickerOverlay,shouldPlayAnimation:i([g.Z.DevicePickerOverlay]),children:(0,b.jsx)(kn,{})})]})}))},75808:(e,t,i)=>{i.d(t,{_:()=>u,s:()=>c});var a=i(30758),n=i(97500),s=i.n(n),r=i(62198);const l="ffFwfKcPDbmAPLXzxzKq";var o=i(86070);const c=(0,a.createContext)(null),u=({label:e,style:t,focusTransferId:i,children:n,className:u,nodeRef:d})=>{const p=(0,a.useRef)(null),g=d??p;return(0,r.X)(i??null,g),(0,o.jsx)(c.Provider,{value:g,children:(0,o.jsx)("aside",{"aria-label":e,className:s()(l,u),style:t,id:"Desktop_PanelContainer_Id",ref:g,tabIndex:-1,children:n})})}},70249:(e,t,i)=>{i.d(t,{w:()=>v});var a=i(30758),n=i(97500),s=i.n(n),r=i(26107),l=i(8832),o=i(70329);const c="AAdBM1nhG73supMfnYX7",u="W3E0IT3_STcazjTeyOJa",d="mdMUqcSHFw1lZIcYEblu",p="cZCuJDjrGA2QMXja_Sua",g="zduvaX0Ioxqd5ypeWoAf";var m=i(86070);const x=({fixedHeader:e,scrollNodeRef:t,children:i,scrolledClassName:a})=>{const n=(0,l.y)(t);return(0,m.jsxs)("div",{className:s()(c),children:[(0,m.jsx)("div",{className:s()(u,{[a??d]:n}),children:e}),i]})},v=a.forwardRef((({children:e,className:t,fixedHeader:i,scrolledClassName:n},l)=>{const u=(0,a.useRef)(null),d=(0,m.jsx)(o.bi.Provider,{value:{scrollNodeRef:u},children:(0,m.jsx)(r.a,{className:p,onInstanceCreated:e=>{u.current=e.elements().viewport},children:(0,m.jsx)("div",{ref:l,className:s()(c,g,t),children:e})})});return i?(0,m.jsx)(x,{fixedHeader:i,scrollNodeRef:u,scrolledClassName:n,children:d}):d}))},58111:(e,t,i)=>{i.d(t,{a:()=>D});var a=i(30758),n=i(97500),s=i.n(n),r=i(15231),l=i(69524),o=i(74554),c=i(56368),u=i(59677),d=i(41331),p=i(61611),g=i(93720),m=i(99870),x=i(75668),v=i(12953),b=i(21813),y=i(36450),h=i(27046),f=i(91360),j=i(62562),N=i(17504),C=i(20078),S=i(68031),w=i(45339),k=i(78487);const E="eTT681T6oUKXsIMiP8pT",R="gwmgu53xszgwAXxqLT0h",T="fNXmHtlrj4UVWmhQrJ_5",I="XOSSUjLDKk9RRmiX_UWa",L="XNFZdOLgMlx491fEWdYJ",A="icNf66tgG3uxDMbCCIaN";var P=i(86070);const O={[u.NQ.PLAYLIST]:b.W,[u.NQ.PLAYLIST_V2]:b.W,[u.NQ.ALBUM]:m.h,[u.NQ.TRACK]:y.P,[u.NQ.ARTIST]:x.t,[u.NQ.EPISODE]:v.b},_=({link:e,title:t,item:i,panelLinkRef:a,variant:n,semanticColor:s})=>{const{spec:l,logger:o}=(0,k.r)(c.J,{}),d=(0,P.jsx)(j.r,{children:(0,P.jsx)(r.E,{as:"h1",variant:n,semanticColor:s,children:t||""})},t||""),p=(0,u.o_)(e);let m,x=!1,v=[];const b=p&&O[p.type];if(b){const e=p.toURI();m=(0,P.jsx)(b,{uri:e}),x=!(!e||!t),v=x?[e]:[]}const y=(0,N.XB)().split("_").join(" "),{draggable:h,onDragStart:C}=(0,S.P)({itemUris:v,dragLabelText:t??""});return(0,P.jsx)(g.h,{menu:m,children:(0,P.jsx)("div",{className:E,children:e&&t?(0,P.jsx)(f.N,{ref:a,"aria-label":`${y} link`,draggable:h&&x,onDragStart:x?C:void 0,to:e,search:i?`?uid=${i.uid}&uri=${i.uri}`:void 0,className:R,onClick:()=>{o.logInteraction(l.contextLinkFactory().hitUiNavigate({destination:e||""}))},children:d}):d})})},U=C.$S.PANEL_CLOSE_CLICK,D=({link:e,title:t,titleSlot:i,actions:n,onClose:r,className:c,panelLinkRef:u,preventDefaultClose:g=!1,onBack:m,item:x,titleVariant:v="bodyMediumBold",titleSemanticColor:b="textBase"})=>{const y=(0,N._Y)(),f=(0,N.Ev)(U),j=(0,a.useCallback)((()=>{r?.(),g||y(U)}),[r,g,y]),C=null!==x&&(0,w.N)(x);return(0,P.jsx)(a.Suspense,{fallback:null,children:(0,P.jsxs)("div",{className:s()(T,c),children:[m&&(0,P.jsx)("span",{className:A,children:(0,P.jsx)(h.Zp,{label:d.Ru.get("desktop.login.Back"),children:(0,P.jsx)(p.a,{ariaLabel:d.Ru.get("desktop.login.Back"),className:L,size:"sm",onClick:m,icon:l.g})})}),i||(0,P.jsx)(_,{title:t,panelLinkRef:u,item:x,link:e,variant:v,semanticColor:b}),(0,P.jsxs)("span",{className:s()(A,I),children:[n,!C&&(0,P.jsx)("div",{"data-testid":"PanelHeader_CloseButton",children:(0,P.jsx)(h.Zp,{label:d.Ru.get("close"),children:(0,P.jsx)(p.a,{ariaLabel:d.Ru.get("close"),className:L,size:"sm",onClick:j,icon:o.M,disabled:!f})})})]})]})})}},63605:(e,t,i)=>{i.d(t,{H:()=>o});var a=i(65777),n=i(15231),s=i(41331),r=i(81504),l=i(86070);const o=()=>(0,l.jsxs)("div",{className:r.A.emptyContainer,children:[(0,l.jsx)(a.q,{size:"xxlarge","aria-hidden":"true"}),(0,l.jsxs)("div",{className:r.A.titleContainer,children:[(0,l.jsx)(n.E,{as:"h1",variant:"titleMedium",semanticColor:"textBase",children:s.Ru.get("history.empty-title")}),(0,l.jsx)("p",{children:s.Ru.get("history.empty-description")})]})]})},1570:(e,t,i)=>{i.d(t,{$:()=>g});var a=i(30758),n=i(41978),s=i(74946),r=i(22895),l=i(41331),o=i(36131),c=i(53108),u=i(11061),d=i(91822),p=i(86070);const g=()=>{const e=(0,n.wA)(),t=(0,c.Y)(),{logStartJam:i}=(0,u.O)(),g=(0,a.useCallback)((async()=>{try{i(),await t()}catch(t){e((0,o.A9)(d.EL.ERROR))}}),[t,e,i]);return(0,p.jsx)(s.$,{iconLeading:r.V,size:"small",onClick:g,children:l.Ru.get("web-player.social-connect.menu-action.title")})}},46341:(e,t,i)=>{i.d(t,{T:()=>l});var a=i(30758),n=i(93131),s=i(78487),r=i(86070);const l=()=>{const{spec:e,logger:t,UBIFragment:i}=(0,s.r)(n.I,{});return{logUserClick:(0,a.useCallback)(((i,a)=>{t.logInteraction(e.participantListFactory().participantListRowFactory({position:i}).userLinkFactory().hitUiNavigate({destination:a}))}),[t,e]),logRemoveClick:(0,a.useCallback)((i=>{t.logInteraction(e.participantListFactory().participantListRowFactory({position:i}).removeButtonFactory().hitUiReveal())}),[t,e]),UBIFragmentWithSpec:(0,a.useCallback)((t=>(0,r.jsx)(i,{spec:e,...t})),[i,e])}}},56144:(e,t,i)=>{i.d(t,{o:()=>s});var a=i(39621),n=i(89035);function s(){return(0,n.N)(a.g)}},78106:(e,t,i)=>{i.d(t,{J:()=>a.J});var a=i(70923)},64193:(e,t,i)=>{i.d(t,{W:()=>a.W});var a=i(83519)},62433:(e,t,i)=>{i.d(t,{a:()=>a.a});var a=i(40191)},29285:(e,t,i)=>{i.d(t,{r:()=>a.r});var a=i(68053)},81083:(e,t,i)=>{i.d(t,{p:()=>v});var a=i(30758),n=i(15231),s=i(45237),r=i(74554),l=i(41331),o=i(52891),c=i(1570),u=i(82535);const d="pIxPdfuNasUDLbEDmuK_",p="T5TwrUTf23N311rgrEAc",g="BTwQUS5iBiiOBgdda2Zi",m="lu2OTpzgQ6hv6AYWXMNQ";var x=i(86070);const v=({localStorageKey:e,onDismiss:t})=>{const[i,v]=(0,u.x)(e,!1),{enqueueSnackbar:b}=(0,o.d)(),y=(0,a.useCallback)((()=>{v(!0),t&&t(),b(l.Ru.get("web-player.social-connect.promotion.how-to-start-a-jam-reminder"),{autoHideDuration:5e3})}),[b,t,v]);return i?(0,x.jsx)(x.Fragment,{}):(0,x.jsxs)("div",{className:d,children:[(0,x.jsxs)("div",{className:p,children:[(0,x.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:l.Ru.get("web-player.social-connect.invitation-modal.subtitle")}),(0,x.jsx)(s.H,{iconOnly:r.M,className:g,"aria-label":l.Ru.get("close"),onClick:y,size:"small"})]}),(0,x.jsx)("div",{className:m,children:(0,x.jsx)(c.$,{})})]})}},23330:(e,t,i)=>{i.d(t,{y:()=>a.y});var a=i(85915)},50400:(e,t,i)=>{i.d(t,{g:()=>g});var a=i(41978),n=i(59677),s=i(41331),r=i(42644),l=i(50551),o=i(99559),c=i(66311),u=i(49151),d=i(45339);const p=e=>(0,n.o_)(e)?.toURLPath(!0)??"",g=e=>{const{user:t}=(0,a.d4)(o.Ht),{item:i,context:n}=(0,u.o)((e=>({item:e?.item,context:e?.context})),((e,t)=>e.item?.uri===t.item?.uri));if(!i||!n)return{title:null,link:null};const g=(0,l.Iu)();if(n.uri===g.uri||n.uri===c.bV)return{title:g.name,link:p(c.bV)};if((0,d.N)(i)&&!e)return{title:s.Ru.get("ad-formats.advertisement"),link:null};if("queue"===i.provider&&!e)return{title:s.Ru.get("playback-control.queue"),link:p("spotify:app:queue")};const m=(0,l.$R)(t?.id);if(n.uri===m?.uri)return{title:m?.name,link:p(m?.uri)};const x=(0,l.n5)(t?.id);return n.uri===x?.uri?{title:x?.name,link:p(x?.uri)}:(0,r.HS)(n)?{title:[i.metadata?.station_title,i.metadata?.station_subtitle].filter(Boolean).join(" • "),link:null}:{title:n.metadata?.context_description??i?.name??"",link:p(n.uri)??p(i.uri)??""}}},48275:(e,t,i)=>{i.d(t,{a:()=>c});var a=i(76092),n=i(2569),s=i(93185),r=i(30531),l=i(30758);const o=["play-history-contents"];function c(){const e=(0,r.q)(),t=(0,a.jE)();return function(e,t){const i=(0,r.q)();(0,l.useEffect)((()=>i.getEvents().addListener(e,t)),[e,t,i])}(s.X.UPDATE,(e=>t.setQueryData(o,e.data))),(0,n.I)({queryKey:o,queryFn:()=>e.getContents(),gcTime:3e5,staleTime:0})}},14197:(e,t,i)=>{i.d(t,{L:()=>l});var a=i(30758),n=i(98882),s=i(49151),r=i(23090);function l({episodeUri:e,start:t,stop:i}){const{togglePlay:l,triggerPlay:o,isPlaying:c,isActive:u}=(0,n.P)({uri:e},{featureIdentifier:"episode"}),d=(0,s.o)((e=>(0,r.s)(e)??0)),p=u&&function(e,t,i){return i>=e&&i<t}(t,i,d),g=c&&p;return{onClick:(0,a.useCallback)((e=>{p?l({seekTo:t,loggingParams:e}):o({seekTo:t,loggingParams:e})}),[p,t,l,o]),isPlaying:g,isActive:p}}},32326:(e,t,i)=>{i.d(t,{p:()=>n});var a=i(30758);const n=e=>{const[t,i]=(0,a.useState)(0);function n(a){const n=e.current?.querySelectorAll('button:not([disabled]), [href], input, select, textarea, a,[tabindex]:not([tabindex="-1"])');if(!n)return;n.forEach((e=>{e.setAttribute("tabindex","-1")})),n&&n[0].setAttribute("tabindex","0");let s=t;if(n&&n.length>0)switch(a.key){case"Tab":document.activeElement&&i(0);break;case"ArrowUp":0===s?(a.preventDefault(),s=n.length-1):s-=1,n[s].focus(),i(s);break;case"ArrowDown":a.preventDefault(),s===n.length-1?s=0:s+=1,n[s].focus(),i(s)}}a.useEffect((()=>{const t=e.current;return t?.addEventListener("keydown",n),()=>{t?.removeEventListener("keydown",n)}}))}},61626:(e,t,i)=>{i.d(t,{r:()=>c,z:()=>u});var a=i(30758),n=i(13390),s=i(56629),r=i(17862),l=i(95168),o=i(2569);function c(e=null){const{request:t}=(0,a.useContext)(l.j),{data:i}=(0,o.I)({queryKey:["extracted-color",e],queryFn:()=>e?(0,r.j)(t,e).then((([{colorDark:e,colorLight:t,colorRaw:i}])=>({colorDark:e.toCSS(s.a.HEX),colorLight:t.toCSS(s.a.HEX),colorRaw:i.toCSS(s.a.HEX)}))):null,gcTime:864e5,staleTime:216e5,enabled:!!e});return i??void 0}function u(e=null,t=n.l0o,i="colorRaw"){return c(e)?.[i]??t}},6564:(e,t,i)=>{i.d(t,{Q:()=>m});var a=i(21364),n=i(24848),s=i.n(n);let r=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function l(e){switch(e){case 0:case"UNKNOWN":return r.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return r.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return r.MUSIC_TRACK;default:return r.UNRECOGNIZED}}const o={encode(e,t=s().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const i of e.sections)c.encode(i,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const i=e instanceof s().Reader?e:new(s().Reader)(e);let a=void 0===t?i.len:i.pos+t;const n={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:n.version=i.string();break;case 2:n.episodeUri=i.string();break;case 3:n.publishedAt=i.string();break;case 4:n.sections.push(c.decode(i,i.uint32()));break;case 5:n.language=i.string();break;case 6:n.curated=i.bool();break;default:i.skipType(7&e)}}return n},fromJSON:e=>({version:p(e.version)?String(e.version):"",episodeUri:p(e.episodeUri)?String(e.episodeUri):"",publishedAt:p(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>c.fromJSON(e))):[],language:p(e.language)?String(e.language):"",curated:!!p(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?c.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>c.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const c={encode:(e,t=s().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&u.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&d.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&u.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const i=e instanceof s().Reader?e:new(s().Reader)(e);let a=void 0===t?i.len:i.pos+t;const n={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:n.type=i.int32();break;case 2:n.startMs=i.int32();break;case 3:n.plaintextContent=u.decode(i,i.uint32());break;case 6:n.musicTrack=d.decode(i,i.uint32());break;case 4:n.title=i.string();break;case 5:n.fallback=u.decode(i,i.uint32());break;default:i.skipType(7&e)}}return n},fromJSON:e=>({type:p(e.type)?l(e.type):0,startMs:p(e.startMs)?Number(e.startMs):0,plaintextContent:p(e.plaintextContent)?u.fromJSON(e.plaintextContent):void 0,musicTrack:p(e.musicTrack)?d.fromJSON(e.musicTrack):void 0,title:p(e.title)?String(e.title):"",fallback:p(e.fallback)?u.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case r.UNKNOWN:return"UNKNOWN";case r.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case r.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?u.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?d.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?u.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?u.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?d.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?u.fromPartial(e.fallback):void 0,t}};const u={encode(e,t=s().Writer.create()){for(const i of e.plaintext)t.uint32(10).string(i);return t},decode(e,t){const i=e instanceof s().Reader?e:new(s().Reader)(e);let a=void 0===t?i.len:i.pos+t;const n={plaintext:[]};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)n.plaintext.push(i.string());else i.skipType(7&e)}return n},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const d={encode:(e,t=s().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const i=e instanceof s().Reader?e:new(s().Reader)(e);let a=void 0===t?i.len:i.pos+t;const n={uri:""};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)n.uri=i.string();else i.skipType(7&e)}return n},fromJSON:e=>({uri:p(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function p(e){return null!=e}function g(e){return e.type===r.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}async function m(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer(),i=o.decode(new Uint8Array(e));return i.sections.map(g)}return null}catch(e){return null}}s().util.Long!==a.A&&(s().util.Long=a.A,s().configure())}}]);
//# sourceMappingURL=dwp-panel-section.js.map