"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7988],{44367:(e,t,n)=>{n.d(t,{D:()=>d});var i=n(97500),r=n.n(i),s=n(27046);const o="Psc33HXPyazZYAAr1tgz",a="VGJz_GOARJ6j02JICvW6",l="VpNHGG5ZhoxQ8AqW709S",c="P7395UzhjxLUlLZvj5fb";var u=n(86070);const d=function(e){const{children:t,active:n=!1,focus:i=!0,label:d,onClick:m,noBackground:v=!1}=e;return(0,u.jsx)(s.Zp,{label:d,children:(0,u.jsx)("button",{className:r()(o,{[c]:n,[a]:v,[l]:i}),onClick:m,"aria-label":d,children:t})})}},70692:(e,t,n)=>{n.d(t,{C:()=>P});var i=n(30758),r=n(23981),s=n(41331),o=n(44367),a=n(31352),l=n(39733),c=n(4924),u=n(64580),d=n(99186),m=n(19019),v=n(78330),p=n(86070);const f=({languages:e=[],activeLanguage:t,onSelectLanguage:n,onClose:i})=>{const r=(0,l.NC)(m.bFi);return(0,p.jsx)(v.pZ,{value:"subtitles",children:(0,p.jsxs)(c.W,{onClose:i,getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),children:[(0,p.jsx)(u.y,{divider:"after",children:s.Ru.get("subtitles-picker.heading")}),(0,p.jsx)(d.D,{onClick:()=>{n(null)},"aria-checked":!t,role:"menuitemradio",children:s.Ru.get("subtitles-picker.option_off")}),e.map((e=>(0,p.jsxs)(d.D,{onClick:()=>{n(e)},role:"menuitemradio","aria-checked":"string"==typeof t&&e.toLowerCase()===t.toLowerCase(),children:[g(e)," ",r?`(${s.Ru.get("subtitles-picker.autogenerated")})`:null]},e)))]})})};function g(e){const[t]=e.toLowerCase().split("-");let n="";switch(t){case"zh":n=s.Ru.get("subtitles-picker.option_zh");break;case"cs":n=s.Ru.get("subtitles-picker.option_cs");break;case"nl":n=s.Ru.get("subtitles-picker.option_nl");break;case"en":n=s.Ru.get("subtitles-picker.option_en");break;case"fi":n=s.Ru.get("subtitles-picker.option_fi");break;case"fr":n=s.Ru.get("subtitles-picker.option_fr");break;case"de":n=s.Ru.get("subtitles-picker.option_de");break;case"el":n=s.Ru.get("subtitles-picker.option_el");break;case"hu":n=s.Ru.get("subtitles-picker.option_hu");break;case"id":n=s.Ru.get("subtitles-picker.option_id");break;case"it":n=s.Ru.get("subtitles-picker.option_it");break;case"ja":n=s.Ru.get("subtitles-picker.option_ja");break;case"ms":n=s.Ru.get("subtitles-picker.option_ms");break;case"pl":n=s.Ru.get("subtitles-picker.option_pl");break;case"pt":n=s.Ru.get("subtitles-picker.option_pt");break;case"es":n=s.Ru.get("subtitles-picker.option_es");break;case"sv":n=s.Ru.get("subtitles-picker.option_sv");break;case"tr":n=s.Ru.get("subtitles-picker.option_tr");break;case"vi":n=s.Ru.get("subtitles-picker.option_vi");break;default:n=e}return e.endsWith("-x-cc")&&(n+=" [CC]"),n}const b=e=>(0,p.jsx)(i.Suspense,{fallback:null,children:(0,p.jsx)(f,{...e})});var h=n(42392),k=n(13643),y=n(37138),C=n(13978),x=n(85930),R=n(78487);const E=C.S.SUBTITLE_LANGUAGES_CHANGED;const P=i.memo((function({renderInline:e=!1,noBackground:t,iconSize:n="small"}){const{isSupported:l,availableLanguages:c,preferredLanguage:u,setPreferredLanguage:d}=function(){const e=(0,y.$)(),t=e.getCapabilities(),{videoPlayerMode:n}=(0,k.d)(),{uri:r}=(0,x.f)(),{spec:s,logger:o}=(0,R.r)(h.E,{data:{uri:r??"",identifier:n}}),[a,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(null);return(0,i.useEffect)((()=>((async()=>{l(await e.getSubtitleLanguages())})(),e.getEvents().addListener(E,(({data:e})=>{l(e)})))),[e,l]),(0,i.useEffect)((()=>{(async()=>{u(await e.getPreferredSubtitleLanguage())})()}),[e,u]),{isSupported:t.hasSubtitleSupport,availableLanguages:a,preferredLanguage:c,setPreferredLanguage:async t=>{e.setPreferredSubtitleLanguage(t),u(t),t?o.logInteraction(s.subtitlesButtonFactory().hitUiReveal()):o.logInteraction(s.subtitlesButtonFactory().hitUiHide())}}}();return l&&0!==c.length?(0,p.jsx)(a.b,{renderInline:e,menu:(0,p.jsx)(b,{onSelectLanguage:d,languages:c,activeLanguage:u}),children:(0,p.jsx)(o.D,{noBackground:t,active:null!==u,label:s.Ru.get("subtitles-picker.heading"),children:(0,p.jsx)(r.j,{size:n})})}):null}))},84301:(e,t,n)=>{n.d(t,{VideoPlayer:()=>mt});var i=n(30758),r=n(41978),s=n(77),o=n(15231),a=n(74554),l=n(39733),c=n(41331);var u=n(97500),d=n.n(u),m=n(74946),v=n(9544);const p="L30NtFiBvBcyDh05qn_u";var f=n(86070);const g=({onMinimizeButtonClick:e})=>(0,f.jsx)("div",{className:d()(p),children:(0,f.jsx)(m.$,{"aria-label":c.Ru.get("ad-formats.dismissAd"),colorSet:"overMedia",iconOnly:v.b,onClick:e,size:"small"})});var b=n(76355),h=n(19019);const k="aR68x7OIyGWzTgdtxZ6f",y="anoG0BFHzWPx97SA0qBF",C="CjNrWN36pkl9Lp6zxCxZ",x="Rn_VjXFoM0opnpQWlSw6",R="syutothNTJp78DxfFA5B",E="WAhXnEZZBOdLN1GhjuFs",P=({advertiser:e,isMinimized:t,onMinimizeButtonClick:n,onVideoTakeoverClick:i,refCallback:r,href:s,isVerticalVideo:o=!1})=>{const a=(0,l.NC)(h.okt,{loadingValue:!1})?".VTO__modal-slot":".Root__modal-slot",u=d()(k,{[y]:o});return(0,f.jsx)(b.A,{className:C,animation:{overlay:{base:x,beforeClose:E,afterOpen:R},closeTimeoutMs:300},isOpen:!t,parentSelector:()=>document.querySelector(a),shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:c.Ru.get("ad-formats.advertisement"),children:(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("a",{"aria-label":c.Ru.get("ad-formats.video-ad-overlay.cta-button",{advertiser:e}),className:u,"data-testid":"new-ads-npv-video-takeover-link",href:s,onClick:i,ref:r,target:"_blank"}),(0,f.jsx)(g,{onMinimizeButtonClick:n})]})})};var w=n(16547),j=n(92265),L=n(49373),N=n(2900),V=n(49151),I=n(45339);const A="fFoN1cMJLIJo0k_vgNyw",M="Lk23rM5uSl5mgEXroOPH",_="yJ2Sz652eyijqIrRrwpJ",F="ZPVxrOnQOQc_5KDCNgcI",O="f14LfcDx_wvogzdXzoq9",S="QMMTQfEw3AIHFf4dTRp3",B="Hj1B5D7WgG4aZkU8meAp",z="nPKDEvIoCzySBR24pZiN",D="dqP_KBPyAygbxKtY3k3w",K=({setOuterContainer:e,npbVideoAdRef:t})=>{const n=(0,r.wA)(),u=(0,V.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri)),d=(0,I.N)(u)?u.url??void 0:void 0,m=((0,I.N)(u)?u.advertiser:void 0)||"Advertiser",v=(0,r.d4)((e=>e?.ads?.vto?.isMinimized)),p=(0,I.N)(u)&&"portrait"===u.videoOrientation,g=(0,i.useRef)(),k=(0,s.zy)(),y=(0,j.w)(u),C=(0,l.NC)(h.GEz);(0,i.useEffect)((()=>{g.current?n((0,w.iB)()):g.current=!0}),[n,k.pathname]);const[x,R]=(0,i.useState)(null);return(0,i.useEffect)((()=>(n((0,w.MW)()),()=>{n((0,w.Oc)())})),[n]),(0,i.useEffect)((()=>{v?setTimeout((()=>{null!==x&&e(t.current)}),200):null!==x&&e(x)}),[e,t,v,x]),y&&C?(0,f.jsx)(P,{advertiser:m,href:d?(0,L.H)(d):void 0,isMinimized:v,isVerticalVideo:p,onVideoTakeoverClick:()=>{n((0,w.i2)(N.ee.CLICKED,N.Wh.VIDEO_TAKEOVER,N.Lv.VIDEO_PLAYER))},onMinimizeButtonClick:()=>{n((0,w.Oc)()),n((0,w.i2)(N.ee.COLLAPSED,N.Wh.MINIMIZE_BUTTON,N.Lv.VIDEO_PLAYER))},refCallback:e=>R(e)}):(0,f.jsx)(b.A,{className:B,animation:{overlay:{base:S,beforeClose:D,afterOpen:z},closeTimeoutMs:300},isOpen:!v,parentSelector:()=>document.querySelector(".Root__modal-slot"),shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:c.Ru.get("ad-formats.advertisement"),children:(0,f.jsxs)("div",{className:A,children:[(0,f.jsxs)("div",{className:_,children:[(0,f.jsx)(o.E,{semanticColor:"textBase",variant:"bodySmallBold",className:F,children:c.Ru.get("ad-formats.advertisement")}),(0,f.jsx)("button",{"aria-label":c.Ru.get("ad-formats.dismissAd"),className:O,onClick:()=>{n((0,w.Oc)()),n((0,w.i2)(N.ee.COLLAPSED,N.Wh.MINIMIZE_BUTTON,N.Lv.VIDEO_PLAYER))},children:(0,f.jsx)(a.M,{semanticColor:"textBase",size:"small"})})]}),(0,f.jsx)("a",{"data-testid":"video-takeover-link",href:d?(0,L.H)(d):void 0,onClick:()=>{n((0,w.i2)(N.ee.CLICKED,N.Wh.VIDEO_TAKEOVER,N.Lv.VIDEO_PLAYER))},ref:e=>R(e),className:M})]})})},T=({setOuterContainer:e,npbVideoAdRef:t})=>(0,r.d4)((e=>e?.ads?.vto?.isHidden))?null:(0,f.jsx)(K,{setOuterContainer:e,npbVideoAdRef:t});var U=n(21560),W=n(8143),H=n(56673),Z=n(11892);function q(){const[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(null),r=(0,Z.YQ)((()=>{n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{t(!1)}),1500),t(!0)}),100,{maxWait:100,leading:!0}),s=(0,i.useCallback)((e=>{t(e),r.cancel()}),[r]);return(0,i.useEffect)((()=>()=>{n.current&&clearTimeout(n.current)}),[]),{isControlsVisible:e,setIsControlsVisible:s,handleKeepViewVisible:r}}var G=n(94487),Y=n(8543),Q=n(39391),X=n(76373),J=n(42392),$=n(36131),ee=n(44367),te=n(79697),ne=n(70292),ie=n(76335),re=n(53324),se=n(72880),oe=n(80038),ae=n(13643),le=n(48783),ce=n(85930),ue=n(78487);const de="MBzbwWcyfbqSftBtnn3g",me=({noBackground:e,iconSize:t="small"})=>{const{setVideoPlayerUIFlag:n,videoPlayerUIFlags:i,videoPlayerMode:r}=(0,ae.d)(),s=r===le.K.cinema,{uri:o}=(0,ce.f)(),{hideLyrics:a}=(0,oe.A)({referrer:"cinema-mode-toggle"}),u=(0,l.NC)(h.Au4),{spec:m,logger:v}=(0,ue.r)(J.E,{data:{uri:o??"",identifier:le.K.cinema}});if(!u||r===le.K.fullscreen)return null;return(0,f.jsx)("div",{className:d()({[de]:s}),children:(0,f.jsx)(ee.D,{noBackground:e,active:s,label:s?c.Ru.get("video-player.default-view"):c.Ru.get("video-player.cinema-mode"),onClick:()=>{s?v.logInteraction(m.cinemaModeButtonFactory().hitUiHide()):v.logInteraction(m.cinemaModeButtonFactory().hitUiReveal()),a(),n(le.n.cinema,!i.cinema)},children:s?(0,f.jsx)(re.Q,{size:t}):(0,f.jsx)(se.C,{size:t})})})};var ve=n(88979),pe=n(13359),fe=n(30083),ge=n(17504),be=n(22594),he=n(31347);function ke(){const e=(0,r.wA)(),t=(0,ge.XB)();return{enterPipVideoMode:(0,i.useCallback)((()=>{e((0,he.R)(le.K.pip))}),[e]),leavePipVideoMode:(0,i.useCallback)((()=>{t===be.Z.NowPlayingView&&e((0,he.R)(le.K.npv))}),[e,t])}}var ye=n(98471),Ce=n(82387);const xe="fuONPgUcYO2bf15HunlX",Re=({noBackground:e,iconSize:t="small",uri:n})=>{const i=(0,r.d4)(pe.c),s=i===le.K.pip,{enterPipVideoMode:o,leavePipVideoMode:a}=ke(),{item:l}=(0,ie.L)()??{},{isActive:u}=(0,fe.D)({item:l}),m=(0,V.o)(Ce.A3),{spec:v,logger:p}=(0,ue.r)(J.E,{data:{uri:n,identifier:i}}),g=(0,ve.u)({parentAbsoluteLocation:v.pipButtonContainerFactory().getAbsoluteLocation()});if(!m)return null;let b=c.Ru.get("video-player.default-view");return s||(b=u?c.Ru.get("miniplayer.close"):c.Ru.get("miniplayer.open-in")),(0,f.jsx)("div",{className:d()({[xe]:s}),children:(0,f.jsx)(ee.D,{noBackground:e,active:s,label:b,onClick:()=>{(0,ye.ge)()&&(0,ye.SP)(),s?(a(),p.logInteraction(g.pipButtonFactory({uri:n}).hitUiHide())):(o(),g.pipButtonFactory({uri:n}).hitUiReveal())},children:(0,f.jsx)(G.F,{size:t})})})};var Ee=n(70692),Pe=n(37138),we=n(20920),je=n(69180),Le=n(30912);const Ne="aHe1QDDI5hmYWAKf4MoR",Ve="DtWKCk0YYDlZT11U1niL",Ie="RTSxo7zS2ozOeg4gnC2c",Ae="ZcIaDrsIojjWZ_Xf_6iN",Me="pLL2Ok4QckLG8GAWriCB",_e=[{transform:"scale(1)",opacity:0},{transform:"scale(1.3)",opacity:1},{transform:"scale(1.6)",opacity:0}],Fe=[{transform:"scale(1)",opacity:1},{transform:"scale(1)",opacity:1}],Oe={duration:500,easing:"ease-out"},Se=function({visible:e,className:t,darkOverlayOnHover:n=!1,animatePlayPauseButtonOnClick:s=!0}){const{videoPlayerMode:o}=(0,ae.d)(),a=(0,r.wA)(),l=(0,ne.lZ)(),u=(0,Pe.$)(),m=(0,i.useContext)(te.s),v=o===le.K.cinema,p=(0,we.j)(),g=(0,r.d4)((e=>e.platform.isDesktop)),{item:b}=(0,ie.L)()??{},h=b?.uri??"",{isActive:k,onClick:y,showButton:C}=(0,fe.D)({item:b}),x=u.getCapabilities().hasPipSupport,R=(0,je.z)(),E=(0,V.o)((e=>e),((e,t)=>(0,Le.a)(e?.restrictions,t?.restrictions)&&e?.item?.uri===t?.item?.uri&&e?.isPaused===t?.isPaused)),{isPaused:P,canResume:w,canPause:j}=(0,ne.Nh)(E),{spec:L,logger:N,UBIFragment:I}=(0,ue.r)(J.E,{data:{uri:h,identifier:le.K.npv}}),A=(0,i.useRef)(null),M=(0,i.useRef)(null),_=(0,i.useCallback)((()=>{let e=null;P&&w?(R.resume(),N.logInteraction(L.playButtonFactory().hitPlay({itemToBePlayed:h})),e=A):!P&&j&&(R.pause(),N.logInteraction(L.playButtonFactory().hitPause({itemToBePaused:h})),e=M),s&&e?.current?.animate&&e.current.animate(p?Fe:_e,Oe)}),[j,w,P,N,R,L,h,s,p]),F=(0,i.useMemo)((()=>v?null:C?(0,f.jsx)(ee.D,{label:k?c.Ru.get("miniplayer.close"):c.Ru.get("miniplayer.open-in"),onClick:y,active:k,children:(0,f.jsx)(G.F,{size:"small"})}):g&&x?(0,f.jsx)(Re,{uri:h}):null),[k,v,g,x,y,C,h]);return(0,f.jsxs)(I,{spec:L,children:[(0,f.jsxs)("div",{className:d()(Ne,t,{[Me]:e}),children:[(0,f.jsx)(Ee.C,{renderInline:!0}),(0,f.jsx)(me,{}),F,l&&(0,f.jsx)(ee.D,{label:c.Ru.get("npv.full-screen"),onClick:()=>{m?.current&&((0,ye.X8)(m.current),a((0,$.f)()))},children:(0,f.jsx)(Y.L,{size:"small"})})]}),n&&(0,f.jsx)("div",{tabIndex:-1,className:d()(Ve,{[Me]:e})}),(0,f.jsxs)("div",{className:Ie,tabIndex:-1,onClick:_,onKeyDown:()=>{},"aria-label":P?c.Ru.get("play"):c.Ru.get("pause"),role:"button",children:[(0,f.jsx)("div",{className:Ae,ref:A,children:(0,f.jsx)(Q.x,{size:"xlarge",width:48})}),(0,f.jsx)("div",{className:Ae,ref:M,children:(0,f.jsx)(X.B,{size:"xlarge",width:48})})]})]})};function Be(e,t){(0,i.useLayoutEffect)((()=>{t.current&&e(t.current)}),[t,e])}var ze=n(65366),De=n(13495);const Ke="kJKEEG391Pf_PLzwG2Vm",Te="gVnOoWHXwLnTNK2RRIKg",Ue=({cinemaModeRef:e,setVideoContainer:t})=>{const n=(0,i.useRef)(null),{nowPlayingBarRef:r}=(0,H.JT)(),{videoPlayerUIFlags:s,setVideoPlayerUIFlag:o}=(0,ze.d)();Be(t,n);const{isControlsVisible:a,handleKeepViewVisible:l}=q();return(0,i.useEffect)((()=>{const e=e=>{"Escape"===e.key&&o(le.n.cinema,!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[o,s.cinema]),e.current?r.current?(0,W.createPortal)((0,f.jsxs)("div",{ref:n,className:Ke,onMouseMove:l,onFocus:l,"data-testid":"video-player-cinema",children:[(0,f.jsx)(De.s,{containerElements:[e.current,r.current],active:!0,focusTrapOptions:{allowOutsideClick:!0}}),(0,f.jsx)(Se,{visible:a,className:Te})]}),e.current):(console.error("No ref found for nowPlayingBar!"),null):(console.error("No container found for cinema video!"),null)};var We=n(47536);const He=({setVideoContainer:e})=>{const t=(0,i.useRef)(null);Be(e,t);const n=window.documentPictureInPicture?.window,r=n?.document.getElementById("document-pip-main-container"),s=(0,Pe.$)();return(0,i.useEffect)((()=>(n&&s.setWindow(n),()=>{s.setWindow(window)})),[n,s]),r?(0,W.createPortal)((0,f.jsx)("div",{ref:t,"data-testid":"video-player-document-pip",className:We.A.videoPlayerContainer}),r):(0,f.jsx)(f.Fragment,{})},Ze=i.memo((function({setVideoContainer:e,fullscreenModeRef:t}){const n=(0,i.useRef)(null);return Be(e,n),t.current?(0,W.createPortal)((0,f.jsx)("div",{"data-testid":"video-player-fullscreen",className:d()("VideoFullscreenMode"),children:(0,f.jsx)("div",{className:"VideoFullscreenMode__video-container",ref:n})}),t.current):(console.error("No container found for fullscreen video!"),null)}));var qe=n(70329);const Ge="_2r290M0vbnbQGfhLbvq",Ye=({setVideoContainer:e})=>{const t=(0,i.useRef)(null),n=(0,qe.v7)();Be(e,t);const r=(0,i.useRef)(!0);(0,i.useEffect)((()=>(r.current=!0,()=>{r.current=!1})));const s=document.getElementById("VideoPlayerNpb_ReactPortal");return null===s?null:(0,W.createPortal)((0,f.jsx)("div",{ref:t,hidden:!1,className:Ge,style:{position:"relative"},onMouseDown:e=>{t.current&&n.current&&(e.stopPropagation(),e.preventDefault())},"data-testid":"video-player-npb"}),s)};var Qe=n(63774),Xe=n(51229);const Je="H2mo30Z5kNiGZbZ9U2Nu",$e="TbZ7pNOfpFK2FmnFuQcW",et="BRt_JFU0qTnWIGCaWWJY",tt=({visible:e})=>{const t=(0,r.wA)(),n=d()($e,{[et]:e});return(0,f.jsx)("div",{className:Je,children:(0,f.jsx)("div",{className:n,children:(0,f.jsx)(m.$,{"aria-label":c.Ru.get("npv.full-screen"),colorSet:"overMedia",iconOnly:Y.L,onClick:e=>{e.stopPropagation(),e.preventDefault(),t((0,w.MW)()),t((0,w.i2)(N.ee.EXPANDED))},size:"small"})})})},nt="Qhq7SHNg9UlhtkK9I6Km",it="ZWx9Xu8F_WoC4M_KEbtW",rt=({element:e,handleKeepViewVisible:t,isControlsVisible:n,item:i,scrollNodeRef:s,setIsControlsVisible:o,setVideoContainer:a,videoContainerRef:l})=>{Be(a,l);const c=(0,r.wA)(),u="portrait"===i.videoOrientation,m=i.url??void 0,v=d()(nt,{[it]:u});return(0,W.createPortal)((0,f.jsx)("div",{ref:l,hidden:!1,className:v,onMouseLeave:()=>{o(!1)},onMouseDown:e=>{l.current&&s.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:t,onFocus:t,"data-testid":"ads-video-player-npv",children:m?(0,f.jsx)("a",{style:{zIndex:2},href:m,onClick:()=>{c((0,Xe.q5)(Qe.c.VIDEO_PLAYER,Qe.V.AD_NPV))},"data-testid":"video-player-ad-wrapper",children:(0,f.jsx)(tt,{visible:n})}):(0,f.jsx)(tt,{visible:n})}),e)},st="ouiL5cH1WduxtprQ0Iig",ot=({setVideoContainer:e})=>{const t=(0,i.useRef)(null),n=(0,qe.v7)(),r=(0,V.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri));Be(e,t);const s=(0,i.useRef)(!0);(0,i.useEffect)((()=>(s.current=!0,()=>{s.current=!1})));const{isControlsVisible:o,setIsControlsVisible:a,handleKeepViewVisible:l}=q(),c=document.getElementById("VideoPlayerNpv_ReactPortal");return null===c?null:(0,I.N)(r)?(0,f.jsx)(rt,{element:c,handleKeepViewVisible:l,isControlsVisible:o,item:r,scrollNodeRef:n,setIsControlsVisible:a,setVideoContainer:e,videoContainerRef:t}):(0,W.createPortal)((0,f.jsx)("div",{ref:t,hidden:!1,className:st,style:{position:"relative"},onMouseLeave:()=>{a(!1)},onMouseDown:e=>{t.current&&n.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:l,onFocus:l,"data-testid":"video-player-npv",children:(0,f.jsx)(Se,{visible:o,darkOverlayOnHover:!0})}),c)};const at=e=>{const t=(()=>{const[e]=(0,i.useState)((()=>{const e=document.createElement("div");return e.classList.add("VideoPlayer__container"),e}));return e})();if((0,i.useLayoutEffect)((()=>{null!==e&&null!==t&&e.insertBefore(t,e.firstChild)}),[e,t]),t&&t.firstChild instanceof HTMLVideoElement){const e=t.firstChild;return`${e.videoWidth}/${e.videoHeight}`}return"16/9"};var lt=n(29615),ct=n(75360);const ut=n(13978).S.PICTURE_IN_PICTURE_CHANGED;const dt=({setVideoContainer:e,videoContainerRef:t})=>(Be(e,t),(0,f.jsx)("div",{ref:t,style:{display:"none"}})),mt=({npbVideoAdRef:e,cinemaModeRef:t,fullscreenModeRef:n})=>{const s=(0,r.wA)(),{videoPlayerMode:o}=(0,ze.d)(),a=(0,i.useRef)(null),l=(0,i.useRef)(),[c,u]=(0,i.useState)(null),d=(0,r.d4)((e=>e.platform.isDesktop)),{isPlayingVideo:m,isPlayingAd:v,playbackId:p}=(0,V.o)((e=>{const t=e?.item??void 0;return{isPlayingVideo:(0,Ce.A3)(e),isPlayingAd:(0,I.N)(t),playbackId:e?.playbackId}})),g=(0,r.d4)((e=>e?.ads?.vto?.isMinimized));if(at(c),(()=>{const{isPlayingVideo:e,contextUri:t}=(0,V.o)((e=>({isPlayingVideo:(0,Ce.A3)(e),contextUri:e?.context.uri}))),{setVideoPlayerUIFlag:n}=(0,ae.d)(),r=(0,lt.v)((({connectionStatus:e})=>e===ct.zP.CONNECTED||e===ct.zP.CONNECTING));(0,i.useEffect)((()=>{const t=e&&!r;n(le.n.videoAvailable,t)}),[e,r,n,t])})(),(()=>{const e=(0,V.o)(Ce.A3),{setVideoPlayerUIFlag:t}=(0,ae.d)();(0,i.useEffect)((()=>{const e=()=>{t(le.n.fullscreen,(0,ye.ge)())};return window.addEventListener("fullscreenchange",e),document.addEventListener("fullscreenchange",e),window.addEventListener("fullscreenChange",e),document.addEventListener("fullscreenChange",e),window.addEventListener("webkitfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),window.addEventListener("mozfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{window.removeEventListener("fullscreenchange",e),document.removeEventListener("fullscreenchange",e),window.removeEventListener("fullscreenChange",e),document.removeEventListener("fullscreenChange",e),window.removeEventListener("mozfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),window.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e)}}),[e,t])})(),(()=>{const e=(0,Pe.$)(),{videoPlayerMode:t}=(0,ze.d)(),{leavePipVideoMode:n}=ke(),r=t===le.K.pip;(0,i.useEffect)((()=>e.getEvents().addListener(ut,(({data:e})=>{!e&&r&&n()}))),[e,r,n]),(0,i.useEffect)((()=>{const t=document.pictureInPictureElement;r&&!t&&e.setPip?.(!0),!r&&t&&e.setPip?.(!1)}),[e,r])})(),function(){const e=(0,Pe.$)(),{videoPlayerMode:t}=(0,ae.d)(),[n,r]=(0,i.useState)(!document.hidden),[s,o]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e="visibilitychange",t=()=>{r(!document.hidden)};return document.addEventListener(e,t),()=>{document.removeEventListener(e,t)}}),[e,r]),(0,i.useEffect)((()=>{const i=!(t===le.K.pip||t===le.K.documentPip||t!==le.K.none&&n),r=e.getCapabilities().hasMinimizeBitrateSupport&&i;s!==r&&(e.setMinimizeBitrate(r),o(r))}),[e,t,n,s,o])}(),m&&v&&l.current!==p&&(s((0,w.MW)()),l.current=p),d&&m&&v&&o!==le.K.pip&&!g)return(0,f.jsx)(T,{npbVideoAdRef:e,setOuterContainer:u});switch(o){case le.K.fullscreen:return(0,f.jsx)(U.s,{children:(0,f.jsx)("div",{ref:a,children:(0,f.jsx)(Ze,{fullscreenModeRef:n,setVideoContainer:u})})});case le.K.cinema:return(0,f.jsx)(U.s,{children:(0,f.jsx)("div",{ref:a,children:(0,f.jsx)(Ue,{cinemaModeRef:t,setVideoContainer:u})})});case le.K.npv:return(0,f.jsx)(U.s,{children:(0,f.jsx)("div",{ref:a,children:(0,f.jsx)(ot,{setVideoContainer:u})})});case le.K.documentPip:return(0,f.jsx)(U.s,{children:(0,f.jsx)("div",{ref:a,children:(0,f.jsx)(He,{setVideoContainer:u})})});case le.K.nowPlayingBar:return(0,f.jsx)(U.s,{children:(0,f.jsx)("div",{ref:a,children:(0,f.jsx)(Ye,{setVideoContainer:u})})});case le.K.none:default:return(0,f.jsx)("div",{ref:a,children:(0,f.jsx)(dt,{videoContainerRef:a,setVideoContainer:u})})}}},70292:(e,t,n)=>{n.d(t,{sY:()=>k,Nh:()=>h,bo:()=>y,r3:()=>b,EX:()=>g,lZ:()=>f});var i=n(39733),r=n(96266);n(61869);const s=new r.l("queryFullscreenMode","query","5aa77fcd9a5b65f829d8dee4000703ff1a7ff68e813c60999c0b2dce754240e2",null);var o=n(19019),a=n(49151),l=n(45339),c=n(45841),u=n(40425),d=n(32415),m=n(37171),v=n(82387),p=n(91753);const f=()=>{const e=(0,i.NC)(o.WYm,{loadingValue:!1});return(0,a.o)(v.A3)||e};function g(e){return(0,d.v)(e)?{uri:e.uri,name:e.name,creatorName:e.artists[0]?.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,u.p)(e)?{uri:e.uri,name:e.name,creatorName:e.show.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,c.d)(e)?{uri:e.uri,name:e.name,creatorName:e.book.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,l.N)(e)?{uri:e.uri,name:e.title??"",creatorName:e.advertiser??"",coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,m.v)(e)||void 0===e?void 0:(0,p.d)(e)}function b(e){const t=g(e);return(0,d.v)(e)||(0,u.p)(e)||(0,c.d)(e)||(0,l.N)(e)?{...t,duration:e.duration.milliseconds,mediaType:(n=e.mediaType,"video"===n||"mixed"===n?"video":"audio")}:(0,m.v)(e)||void 0===e?void 0:(0,p.d)(e);var n}function h(e){const t=e?.context.metadata?.context_description,n=e?.context.uri||void 0,i=e?.positionAsOfTimestamp??void 0,r=e?.timestamp,s=e?.isPaused,o=e?.restrictions.canPause,a=e?.restrictions.canResume;return{contextName:t,contextUri:n,position:i,timestamp:r,isPaused:s,canPause:o,canResume:a}}async function k(e,t){return e(s,{artistUri:t}).then((e=>{if("Artist"===e?.data?.artistUnion.__typename)return e.data.artistUnion.visuals.headerImage?.sources[0]?.url})).catch((()=>{}))}function y(e,t,n){if(e&&n&&n.hasLyrics)return{status:t?"loading":"success",content:{provider:n.provider,syncType:n.syncType,lines:n.lyrics.map((e=>({timestamp:Number(e.start),text:e.text})))}}}},80038:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(77),r=n(38063),s=n(13643),o=n(48783);function a({referrer:e,onChange:t}){const n=(0,i.Zp)(),{isActive:a,routeDestination:l}=(0,r.$)(),{setVideoPlayerUIFlag:c}=(0,s.d)(),u=()=>{a||(c(o.n.cinema,!1),n(l,{state:{referrer:e}}),t?.(l))},d=()=>{a&&(n(-1),t?.(null))};return{isActive:a,showLyrics:u,hideLyrics:d,toggleLyrics:()=>{a?d():u()}}}},30083:(e,t,n)=>{n.d(t,{D:()=>u});var i=n(30758),r=n(55358);var s=n(13643),o=n(48783),a=n(45292),l=n(75987),c=n(78487);const u=({item:e,onClick:t})=>{const n=(0,a.W)(),{capabilities:{isEnabled:u},isOpen:d,close:m,open:v,canOpen:p}=(0,l.H)(),{videoPlayerMode:f}=(0,s.d)(),{spec:g,logger:b}=(0,c.r)(r.h9,{data:{identifier:f===o.K.cinema?r.gw.CINEMA:r.gw.DESKTOP}}),h=(0,i.useCallback)((()=>{let i;u&&(d?(m(),e?.uri&&b.logInteraction(g.pipButtonFactory({uri:e.uri}).hitUiHide()),i="close-picture-in-picture"):(v(),e?.uri&&(({spec:e,logger:t,uri:n})=>{const i=window.documentPictureInPicture;if(!i)return;const r=s=>{setTimeout((()=>{const i=s.window?.innerWidth,r=s.window?.innerHeight;if(!i||!r)return;const o=e.pipButtonFactory({uri:n}).hitUiOpenWindow({widthPx:i,heightPx:r});t.logInteraction(o)}),100),i.removeEventListener("enter",r)};i.addEventListener("enter",r)})({spec:g,logger:b,uri:e.uri}),i="show-picture-in-picture"),t?.(!d,e?.uri),n({type:"click",intent:i,targetUri:e?.uri,itemIdSuffix:"picture-in-picture-toggle"}))}),[m,u,d,e?.uri,b,t,n,v,g]);return{showButton:p,isActive:d,onClick:h}}},37138:(e,t,n)=>{n.d(t,{$:()=>s});var i=n(70747),r=n(89035);function s(){return(0,r.N)(i.n)}},98471:(e,t,n)=>{n.d(t,{SP:()=>r,X8:()=>i,ge:()=>s});const i=e=>{e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},r=()=>{document.fullscreenElement&&document.exitFullscreen?document.exitFullscreen():document.mozFullScreen&&document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitIsFullScreen&&document.webkitExitFullscreen&&document.webkitExitFullscreen()},s=()=>!!(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen)},47536:(e,t,n)=>{n.d(t,{A:()=>i});const i={videoPlayerContainer:"ngkFeIGFyNUaxRspbs5H"}}}]);
//# sourceMappingURL=dwp-video-player.js.map