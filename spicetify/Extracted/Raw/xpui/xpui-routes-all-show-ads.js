"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1845],{33597:(e,t,a)=>{a.d(t,{o:()=>C});var i=a(30758),s=a(15231),n=a(66371),r=a(55657),d=a(69600),l=a(41331),c=a(7008),o=a(5052),u=a(87500),h=a(43345),v=a(74946),_=a(49373),f=a(91360);const g="c5Ml9BbBuUEHjNkcSwZA";var b=a(86070);const m="70px",p=({adId:e,advertiser:t,tagline:a,displayImage:i,buttonMessage:s,cardOnClick:n,buttonOnClick:r,clickthroughUrl:d})=>(0,b.jsx)(f.N,{to:(0,_.H)(d),className:g,"data-testid":"leavebehind",children:(0,b.jsx)(c.v,{onClick:n,onClickHint:l.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:e,size:"xl",title:(0,b.jsx)(o.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:t}),subtitle:(0,b.jsx)(u.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:a}),media:(0,b.jsx)(h.C,{"data-testid":"leavebehind-image",src:i.src,alt:i.alt,imageHeight:m,imageWidth:m,size:"xl"}),trailing:(0,b.jsx)(v.$,{onClick:()=>{r&&r()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":l.Ru.get("ad-formats.learnMore"),children:s})})});var k=a(13248),x=a(9173),y=a(31361),I=a(20769);const w="zlUJfROzFEOsEDWL7ucP",q="Fxvq1Fw7XQdGRDvYokRg",C=({leavebehinds:e,seeAllButton:t,surface:a,uri:c})=>{const o=(0,I.vh)(),u=(0,y.w)(y.P),[h,v]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{e&&e.length>0&&h!==e[0].requestId&&c&&(e.forEach(((e,t)=>{e.uri===c&&(e.trackingEvents?.viewed.forEach((async t=>{try{await u(t)}catch(i){const s=i;o.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.message,http_error_code:422,surface:(0,k.Fh)(a),request_url:t,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,x.Zl)(a)}))}})),o.send((0,d.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:`viewed_on_${(0,k.Fh)(a).toLowerCase()}`,surface:(0,k.Fh)(a),surface_position:t+1,uri:c})))})),v(e[0].requestId))}),[o,u,e,c,a,h]);const _=({eventReason:e,lineitemId:t,requestId:i,trackingEvents:s,surfacePosition:n})=>{((e,t)=>{t?.forEach((async t=>{try{await u(t)}catch(i){const s=i;o.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.name,http_error_code:422,surface:(0,k.Fh)(a),request_url:t,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,x.Zl)(a)}))}}))})(t,s),o.send((0,d.x)({leavebehind_lineitem_id:t,leavebehind_request_id:i,event:"event_clicked",event_reason:e,surface:(0,k.Fh)(a),surface_position:n,uri:c}))};return(0,b.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,b.jsxs)("div",{className:q,children:[(0,b.jsx)(s.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,n.po)("tighter"),"data-testid":"leavebehinds-title",children:l.Ru.get("podcast-ads.recent_ads")}),t]}),(0,b.jsx)("div",{className:w,"data-testid":"leavebehinds-list-wrapper",children:e.map(((e,t)=>(0,b.jsx)(p,{...e,buttonOnClick:()=>{_({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:()=>{_({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})}},e.adId)))})]})}},34390:(e,t,a)=>{a.d(t,{A:()=>h});var i=a(30758),s=a(55657),n=a(39733),r=a(73890),d=a(13248),l=a(9173),c=a(20769),o=a(19019),u=a(93409);const h=function(e){const[t,a]=(0,i.useState)(),[h,v]=(0,i.useState)(!1),_=(0,c.vh)(),f=(0,n.NC)(o.SAn,{loadingValue:!1});return{data:t,error:h,getLeavebehinds:(0,i.useCallback)((async()=>{try{const t=await r.b6(u.n.getInstance(),(0,d.Fh)(e.surface),e.uri,e.playlistName,f);a(t.body)}catch(t){const a=t;_.send((0,s.G)({error_type:"fetchAdsFailure",error_message:a.name,http_error_code:a.status,surface:(0,d.Fh)(e.surface),request_type:"leavebehindAds",ad_content_origin:(0,l.Zl)(e.surface)})),v(!0)}}),[_,e.playlistName,e.surface,e.uri,f])}}},2771:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var i=a(30758),s=a(77),n=a(33597),r=a(34390),d=a(9173),l=a(86070);function c({surface:e}){const t=(0,s.zy)().state,{data:a,error:c,getLeavebehinds:o}=(0,r.A)({surface:e,uri:t.uri});if((0,i.useEffect)((()=>{o()}),[]),!a?.leavebehindAds||c)return null;const u=(0,d.iT)(a,t.uri);return(0,l.jsx)("div",{className:"contentSpacing",children:(0,l.jsx)(n.o,{leavebehinds:u.slice(0,d.E9),surface:e,uri:t.uri})})}}}]);
//# sourceMappingURL=xpui-routes-all-show-ads.js.map