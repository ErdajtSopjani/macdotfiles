"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[399],{29866:(e,t,i)=>{i.d(t,{k:()=>u});var r=i(30758),n=i(41331),a=i(42252),s=i(45292),o=i(69423),l=i(93614),d=i(86070);const u=({id:e,children:t,targetURI:i,fadeOut:u=!1})=>{const c=(0,r.useCallback)((()=>{window.open((0,o.rw)(i).href)}),[i]),g={getTitle:()=>n.Ru.get("action-trigger.available-in-app-only"),getDescription:()=>n.Ru.get("action-trigger.listen-mixed-media-episode"),primaryButtonText:()=>n.Ru.get("action-trigger.button.get-app"),secondaryButtonText:()=>n.Ru.get("action-trigger.button.not-now"),isCTA:!0,intentPrimaryButton:"download-app",onLogInteraction:(0,s.W)(),shouldHideOnScroll:!0,fadeOut:u};return(0,d.jsx)(a.U,{className:l.A.container,id:e,onPrimaryButtonClick:c,options:g,children:t})}},8383:(e,t,i)=>{i.d(t,{W:()=>q});var r=i(97500),n=i.n(r),a=i(59677),s=i(41331),o=i(21560),l=i(96266),d=i(61869);const u=new l.l("internalLinkRecommenderEpisode","query","28b3555816ad49290799e6697f0077e8f351d753b46cc2e6a195e1c72e47e7f2",null);var c=i(90174),g=i(30758),p=i(41978),m=i(13775),h=i(29866),y=i(93720),f=i(12953),_=i(581),b=i(56665),w=i(42252),v=i(27235),x=i(68031),I=i(45866),P=i(84865),k=i(44817),S=i(98913),T=i(78330),C=i(57968),E=i(98882),R=i(74493),j=i(61903),A=i(42668),U=i(86070);const N=e=>`activation-trigger-mme-${e}`,M=g.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:r,contentRatingLabel:n,description:s,mediaTypes:o,isoString:l,name:d,playable:u,playedState:c,podcastSubscription:M,sharingInfo:D,showName:O,showTrailer:$,showTypes:F,showUri:L,status:V,totalMilliseconds:W,type:B,uri:G}){const z=c.playPositionMilliseconds,q=(0,g.useRef)(null),[Q,X]=(0,g.useState)(c.state===j._w.Completed),{draggable:Y,onDragStart:H}=(0,x.P)(),Z=(0,I.V)(),K=(0,C.y)(),J=(0,p.wA)(),{isActive:ee,isPlaying:te,togglePlay:ie}=(0,E.P)({uri:G},{featureIdentifier:"episode"}),[re]=(0,R.S)(1e4,(e=>e?.item?.uri===G));(0,g.useEffect)((()=>{te&&(q.current=re)}),[te,re]),(0,g.useEffect)((()=>{!te&&q.current&&W<=q.current&&X(!0)}),[te,W]);const ne=(0,g.useCallback)((e=>{e||(q.current=0),X(e)}),[]),ae={uri:L,name:O,trailer:$,showTypes:F},se=(0,P.C)({audio:t,name:d,uri:G,mediaTypes:o,coverArt:{sources:r}},ae),oe=(0,g.useCallback)((()=>{B!==j.I_.Episode?Z?se():ie():w.h.set((()=>({triggerId:N(G),triggerAction:null})))}),[B,Z,G,se,ie]),le=M?.isPaywalled??!1,de=M?.isUserSubscribed??!1,ue=le&&!de,ce=le&&Z,{badges:ge}=(0,A.b)({contentRating:n,isPaywalled:le}),pe=(0,g.useCallback)((()=>J((0,m.Tf)(L))),[L,J]),me=(0,g.useCallback)((e=>{let t=e;return(ue||ce)&&(t=(0,U.jsx)(b.f,{enabled:!0,showUri:L,children:t})),!u&&ge.nineteen&&(t=(0,U.jsx)("div",{onClick:e=>{e.stopPropagation(),pe()},children:e})),t=(0,U.jsx)(h.k,{id:N(G),targetURI:(0,a.o_)(G),children:t}),t}),[ue,ce,u,ge.nineteen,G,L,pe]);return(0,U.jsx)(T.pZ,{value:"row",index:e,children:(0,U.jsx)(y.h,{menu:(0,U.jsx)(f.b,{uri:G,showUri:L,sharingInfo:D,isPlayed:Q,onMarkAsPlayed:ne}),children:(0,U.jsx)(_.k,{requestId:void 0,index:e,uri:G,size:K,images:r||[],name:d,showName:O,description:s,isPlayable:u||ue,fullyPlayed:Q,durationMs:W,releaseDate:l||"",resumePositionMs:q.current??z,draggable:Y,handleDragStart:e=>{if(e.target!==e.currentTarget)return;H(e,{itemUris:[G],dragLabelText:`${d} â€¢ ${O}`,contextUri:L})},handlePlaybackClick:oe,isCurrentlyPlaying:ee,isPaywalled:le,isUserSubscribed:de,isPlaying:te,position:te?re:void 0,episodeSharingInfo:D,onMarkAsPlayed:ne,contentInformation:i,showUri:L,mediaTypes:o??void 0,badges:(0,U.jsxs)(U.Fragment,{children:[ge.explicit&&(0,U.jsx)(k.g,{}),ge.paid&&(0,U.jsx)(v.K,{}),ge.nineteen&&(0,U.jsx)(S.q,{size:16})]}),playButtonWrapper:me,status:V})})})}));var D=i(86317);var O=i(22731),$=i(64905),F=i(27869);const L="GgMHVmfXNzteIydSWMIA",V="GcupflQsYyy0IMOsCeD1",W="h6KkL9VhU8t6zFv7XQXc",B="A4FqrLbXeENogU0IRaPn",G="YCYs0Gv5B5ctDN0f5Zby",z=({uri:e,isFullPage:t=!1})=>{const{data:i}=(r={uri:e,seoExperimentId:F.R.EPISODE_DISCOVERY},(0,d.I)(u,r,o));var r,o;const l=i?.seoRecommendedEpisode.totalCount,c=i?.seoRecommendedEpisode.items,g=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(c),p=t?g:g.slice(0,5);if(0===l)return null;const m=(0,a.o_)(e)?.id,h=`spotify:app:episode:${m}:more-like-this`;return(0,U.jsxs)("section",{className:n()(L,{[V]:!t}),"data-testid":"episode-list",children:[(0,U.jsx)("header",{className:W,children:(0,U.jsx)(O.k,{title:s.Ru.get("internal-link-recommender.more-episodes-like-this"),hasMoreElements:!t,seeAllUri:h})}),p.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;return i?e&&(0,U.jsxs)("div",{className:G,children:[(0,U.jsx)("hr",{className:B,"aria-hidden":!0}),(0,U.jsx)(M,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,isoString:e.releaseDate?.isoString,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,$.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(r=i.trailerV2?.data,r&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(r)?{type:D.c.EPISODE,uri:r.uri,name:r.name,coverArt:r.coverArt?.sources||[],audio:r.audio,audioPreview:r.audioPreview,sharingInfo:r.sharingInfo,duration:{milliseconds:r.duration.totalMilliseconds},contentRating:r.contentRating,mediaTypes:r.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri},`${e.uri}/${t}`)]},`${t}${e.uri}`):null;var r}))]})},q=e=>{const t=(0,c.D)({entityType:D.c.EPISODE,componentType:"list",uri:e.uri});return(0,U.jsx)(o.s,{onError:t,children:(0,U.jsx)(z,{...e})})}},94826:(e,t,i)=>{i.d(t,{EpisodeMoreLikeThis:()=>d});var r=i(30758),n=i(77),a=i(41331),s=i(62462),o=i(8383),l=i(86070);const d=r.memo((function(){const{episodeId:e=""}=(0,n.g)(),t=(e=>`spotify:episode:${e}`)(e);return(0,l.jsxs)("div",{className:"contentSpacing",children:[(0,l.jsx)(s.Q,{children:a.Ru.get("internal-link-recommender.more-episodes-like-this")}),(0,l.jsx)(o.W,{uri:t,isFullPage:!0})]})}))},84865:(e,t,i)=>{i.d(t,{C:()=>h});var r=i(30758),n=i(39733),a=i(45292),s=i(19019);const o=e=>e<=64?"small":e>640?"xlarge":e>300?"large":"standard";function l(e,t){return e.filter((e=>e.label?e.label===t:e.width?o(e.width)===t:!!e.height&&o(e.height)===t))[0]}var d=i(48770);var u=i(88593);function c(e){const t=l(e,"standard"),i=l(e,"large"),r=l(e,"small"),n=l(e,"xlarge");return{image_url:t?.url,image_height:t?.height?.toString(),image_width:t?.width?.toString(),image_url_large:i?.url,image_height_large:i?.height?.toString(),image_width_large:i?.width?.toString(),image_url_small:r?.url,image_height_small:r?.height?.toString(),image_width_small:r?.width?.toString(),image_url_xlarge:n?.url,image_height_xlarge:n?.height?.toString(),image_width_xlarge:n?.width?.toString()}}var g=i(69180),p=i(2869),m=i(86317);function h(e,t){const i=(0,a.W)(),o=(0,g.z)(),{isPlaying:l,isActive:h}=(0,p.te)(e?.uri||""),{isActive:y}=(0,p.l_)(t?.uri||""),f=(0,n.NC)(s.pZ0);return(0,r.useCallback)((r=>{if(!t||!e)return;const n=function(e,t,i=!1){const r=(e.coverArt?.sources||[]).sort(((e,t)=>(t.width||0)-(e.width||0))),n=(0,d.QH)(e,t),a=(0,d.gf)(t)||n,s=e.mediaTypes&&e.mediaTypes.includes(u.Cx.Video)?"video":"audio";return{uri:e.uri,title:e.name,subtitle:t.name,type:"episode",album_uri:t.uri,album_title:t.name,artist_uri:t.uri,artist_name:t.name,...c(r),media_type:i?s:"audio",isTrailer:n,anonymousPlaybackAllowed:a}}(e,t,f);y&&!l&&h&&!r?o.resume():y&&l&&!r?(i({type:"click",intent:"pause",targetUri:e.uri}),o.pause()):(i({type:"click",intent:"play",targetUri:e.uri}),o.play({uri:t.uri,pages:[{items:[{type:m.c.EPISODE,uri:e.uri,uid:null,metadata:n,provider:null}]}]},{referrerIdentifier:o.getReferrer(),featureIdentifier:"episode"},r))}),[t,e,f,y,l,h,o,i])}}}]);
//# sourceMappingURL=xpui-routes-episode-more-like-this.js.map