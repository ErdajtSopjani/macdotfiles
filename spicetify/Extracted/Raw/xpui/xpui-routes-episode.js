"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9528],{33597:(e,t,i)=>{i.d(t,{o:()=>I});var a=i(30758),s=i(15231),n=i(66371),r=i(55657),o=i(69600),l=i(41331),c=i(7008),d=i(5052),u=i(87500),p=i(43345),m=i(74946),h=i(49373),g=i(91360);const y="c5Ml9BbBuUEHjNkcSwZA";var x=i(86070);const b="70px",v=({adId:e,advertiser:t,tagline:i,displayImage:a,buttonMessage:s,cardOnClick:n,buttonOnClick:r,clickthroughUrl:o})=>(0,x.jsx)(g.N,{to:(0,h.H)(o),className:y,"data-testid":"leavebehind",children:(0,x.jsx)(c.v,{onClick:n,onClickHint:l.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:e,size:"xl",title:(0,x.jsx)(d.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:t}),subtitle:(0,x.jsx)(u.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:i}),media:(0,x.jsx)(p.C,{"data-testid":"leavebehind-image",src:a.src,alt:a.alt,imageHeight:b,imageWidth:b,size:"xl"}),trailing:(0,x.jsx)(m.$,{onClick:()=>{r&&r()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":l.Ru.get("ad-formats.learnMore"),children:s})})});var k=i(13248),f=i(9173),C=i(31361),j=i(20769);const T="zlUJfROzFEOsEDWL7ucP",P="Fxvq1Fw7XQdGRDvYokRg",I=({leavebehinds:e,seeAllButton:t,surface:i,uri:c})=>{const d=(0,j.vh)(),u=(0,C.w)(C.P),[p,m]=(0,a.useState)(void 0);(0,a.useEffect)((()=>{e&&e.length>0&&p!==e[0].requestId&&c&&(e.forEach(((e,t)=>{e.uri===c&&(e.trackingEvents?.viewed.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.message,http_error_code:422,surface:(0,k.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,f.Zl)(i)}))}})),d.send((0,o.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:`viewed_on_${(0,k.Fh)(i).toLowerCase()}`,surface:(0,k.Fh)(i),surface_position:t+1,uri:c})))})),m(e[0].requestId))}),[d,u,e,c,i,p]);const h=({eventReason:e,lineitemId:t,requestId:a,trackingEvents:s,surfacePosition:n})=>{((e,t)=>{t?.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.name,http_error_code:422,surface:(0,k.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,f.Zl)(i)}))}}))})(t,s),d.send((0,o.x)({leavebehind_lineitem_id:t,leavebehind_request_id:a,event:"event_clicked",event_reason:e,surface:(0,k.Fh)(i),surface_position:n,uri:c}))};return(0,x.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,x.jsxs)("div",{className:P,children:[(0,x.jsx)(s.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,n.po)("tighter"),"data-testid":"leavebehinds-title",children:l.Ru.get("podcast-ads.recent_ads")}),t]}),(0,x.jsx)("div",{className:T,"data-testid":"leavebehinds-list-wrapper",children:e.map(((e,t)=>(0,x.jsx)(v,{...e,buttonOnClick:()=>{h({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:()=>{h({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})}},e.adId)))})]})}},47870:(e,t,i)=>{i.d(t,{J:()=>u});var a=i(58923),s=i(45237),n=i(69600),r=i(41331),o=i(13248),l=i(9173),c=i(20769),d=i(86070);const u=({leavebehinds:e,surface:t,uri:i,pathname:u,state:p})=>{const m=(0,c.vh)(),h=`${r.Ru.get("view.see-all")} (${e.length<=l.E9?r.Ru.formatNumber(e.length):r.Ru.formatNumber(l.E9)})`;return(0,d.jsx)(a.N_,{to:u,state:p,children:(0,d.jsx)(s.H,{"data-testid":"leavebehinds-see-all",size:"small",onClick:()=>{m.send((0,n.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,o.Fh)(t),uri:i}))},children:h})})}},8383:(e,t,i)=>{i.d(t,{W:()=>H});var a=i(97500),s=i.n(a),n=i(59677),r=i(41331),o=i(21560),l=i(96266),c=i(61869);const d=new l.l("internalLinkRecommenderEpisode","query","28b3555816ad49290799e6697f0077e8f351d753b46cc2e6a195e1c72e47e7f2",null);var u=i(90174),p=i(30758),m=i(41978),h=i(13775),g=i(29866),y=i(93720),x=i(12953),b=i(581),v=i(56665),k=i(42252),f=i(27235),C=i(68031),j=i(45866),T=i(84865),P=i(44817),I=i(98913),N=i(78330),S=i(57968),E=i(98882),_=i(74493),A=i(61903),w=i(42668),R=i(86070);const U=e=>`activation-trigger-mme-${e}`,L=p.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:a,contentRatingLabel:s,description:r,mediaTypes:o,isoString:l,name:c,playable:d,playedState:u,podcastSubscription:L,sharingInfo:M,showName:O,showTrailer:D,showTypes:F,showUri:B,status:q,totalMilliseconds:z,type:K,uri:$}){const W=u.playPositionMilliseconds,H=(0,p.useRef)(null),[J,G]=(0,p.useState)(u.state===A._w.Completed),{draggable:X,onDragStart:Q}=(0,C.P)(),Z=(0,j.V)(),Y=(0,S.y)(),V=(0,m.wA)(),{isActive:ee,isPlaying:te,togglePlay:ie}=(0,E.P)({uri:$},{featureIdentifier:"episode"}),[ae]=(0,_.S)(1e4,(e=>e?.item?.uri===$));(0,p.useEffect)((()=>{te&&(H.current=ae)}),[te,ae]),(0,p.useEffect)((()=>{!te&&H.current&&z<=H.current&&G(!0)}),[te,z]);const se=(0,p.useCallback)((e=>{e||(H.current=0),G(e)}),[]),ne={uri:B,name:O,trailer:D,showTypes:F},re=(0,T.C)({audio:t,name:c,uri:$,mediaTypes:o,coverArt:{sources:a}},ne),oe=(0,p.useCallback)((()=>{K!==A.I_.Episode?Z?re():ie():k.h.set((()=>({triggerId:U($),triggerAction:null})))}),[K,Z,$,re,ie]),le=L?.isPaywalled??!1,ce=L?.isUserSubscribed??!1,de=le&&!ce,ue=le&&Z,{badges:pe}=(0,w.b)({contentRating:s,isPaywalled:le}),me=(0,p.useCallback)((()=>V((0,h.Tf)(B))),[B,V]),he=(0,p.useCallback)((e=>{let t=e;return(de||ue)&&(t=(0,R.jsx)(v.f,{enabled:!0,showUri:B,children:t})),!d&&pe.nineteen&&(t=(0,R.jsx)("div",{onClick:e=>{e.stopPropagation(),me()},children:e})),t=(0,R.jsx)(g.k,{id:U($),targetURI:(0,n.o_)($),children:t}),t}),[de,ue,d,pe.nineteen,$,B,me]);return(0,R.jsx)(N.pZ,{value:"row",index:e,children:(0,R.jsx)(y.h,{menu:(0,R.jsx)(x.b,{uri:$,showUri:B,sharingInfo:M,isPlayed:J,onMarkAsPlayed:se}),children:(0,R.jsx)(b.k,{requestId:void 0,index:e,uri:$,size:Y,images:a||[],name:c,showName:O,description:r,isPlayable:d||de,fullyPlayed:J,durationMs:z,releaseDate:l||"",resumePositionMs:H.current??W,draggable:X,handleDragStart:e=>{if(e.target!==e.currentTarget)return;Q(e,{itemUris:[$],dragLabelText:`${c} â€¢ ${O}`,contextUri:B})},handlePlaybackClick:oe,isCurrentlyPlaying:ee,isPaywalled:le,isUserSubscribed:ce,isPlaying:te,position:te?ae:void 0,episodeSharingInfo:M,onMarkAsPlayed:se,contentInformation:i,showUri:B,mediaTypes:o??void 0,badges:(0,R.jsxs)(R.Fragment,{children:[pe.explicit&&(0,R.jsx)(P.g,{}),pe.paid&&(0,R.jsx)(f.K,{}),pe.nineteen&&(0,R.jsx)(I.q,{size:16})]}),playButtonWrapper:he,status:q})})})}));var M=i(86317);var O=i(22731),D=i(64905),F=i(27869);const B="GgMHVmfXNzteIydSWMIA",q="GcupflQsYyy0IMOsCeD1",z="h6KkL9VhU8t6zFv7XQXc",K="A4FqrLbXeENogU0IRaPn",$="YCYs0Gv5B5ctDN0f5Zby",W=({uri:e,isFullPage:t=!1})=>{const{data:i}=(a={uri:e,seoExperimentId:F.R.EPISODE_DISCOVERY},(0,c.I)(d,a,o));var a,o;const l=i?.seoRecommendedEpisode.totalCount,u=i?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(u),m=t?p:p.slice(0,5);if(0===l)return null;const h=(0,n.o_)(e)?.id,g=`spotify:app:episode:${h}:more-like-this`;return(0,R.jsxs)("section",{className:s()(B,{[q]:!t}),"data-testid":"episode-list",children:[(0,R.jsx)("header",{className:z,children:(0,R.jsx)(O.k,{title:r.Ru.get("internal-link-recommender.more-episodes-like-this"),hasMoreElements:!t,seeAllUri:g})}),m.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;return i?e&&(0,R.jsxs)("div",{className:$,children:[(0,R.jsx)("hr",{className:K,"aria-hidden":!0}),(0,R.jsx)(L,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,isoString:e.releaseDate?.isoString,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,D.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(a=i.trailerV2?.data,a&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(a)?{type:M.c.EPISODE,uri:a.uri,name:a.name,coverArt:a.coverArt?.sources||[],audio:a.audio,audioPreview:a.audioPreview,sharingInfo:a.sharingInfo,duration:{milliseconds:a.duration.totalMilliseconds},contentRating:a.contentRating,mediaTypes:a.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri},`${e.uri}/${t}`)]},`${t}${e.uri}`):null;var a}))]})},H=e=>{const t=(0,u.D)({entityType:M.c.EPISODE,componentType:"list",uri:e.uri});return(0,R.jsx)(o.s,{onError:t,children:(0,R.jsx)(W,{...e})})}},50597:(e,t,i)=>{i.d(t,{g:()=>x});var a=i(30758),s=i(97500),n=i.n(s),r=i(15231),o=i(59677),l=i(93720),c=i(99870),d=i(33e3),u=i(27046),p=i(91360),m=i(68031),h=i(4139),g=i(63089),y=i(86070);const x=({children:e,uri:t,name:i,nonInteractive:s=!1,creatorUri:x,spec:b})=>{let v=null;const{draggable:k,onDragStart:f}=(0,m.P)({itemUris:[t],dragLabelText:i}),C=(0,h.s)(),j=(0,a.useCallback)((()=>{b&&C.logInteraction(b.albumLinkFactory({uri:t}).hitUiNavigate({destination:t}))}),[C,b,t]);return s?(0,y.jsx)("span",{className:n()("standalone-ellipsis-one-line",g.A.text),children:e}):((0,o._T)(t)&&(v=(0,y.jsx)(c.h,{uri:t,artistUri:x})),(0,o.WB)(t)&&(v=(0,y.jsx)(d.H,{uri:t})),(0,y.jsx)(l.h,{menu:v,children:(0,y.jsx)(r.E,{variant:"bodySmall",children:(0,y.jsx)(u.Zp,{label:i,showDelay:u.uF,children:(0,y.jsx)(p.N,{draggable:k,onDragStart:f,className:n()("standalone-ellipsis-one-line"),to:t,dir:"auto",onClick:j,children:e})})})}))}},56144:(e,t,i)=>{i.d(t,{o:()=>n});var a=i(39621),s=i(89035);function n(){return(0,s.N)(a.g)}},5005:(e,t,i)=>{i.r(t),i.d(t,{default:()=>gi});var a=i(30758),s=i(58923),n=i(77),r=i(10544),o=i(36779),l=i(59677),c=i(41331),d=i(62462),u=i(42252),p=i(58403),m=i(8383),h=i(7029),g=i(32860),y=i(41978),x=i(70548),b=i(13775),v=i(99842),k=i(13948),f=i(64234),C=i(39503),j=i(44608),T=i(31352),P=i(12953),I=i(97074),N=i(63128),S=i(58602),E=i(29866),_=i(56665),A=i(61108),w=i(45866),R=i(98812),U=i(86070);const L="activation-trigger-mme",M=({episodeUri:e,showUri:t,isLocked:i,isPlaying:a,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:c="large"})=>{const d=(0,R.c)();if((0,w.V)())return(0,U.jsx)(A.R,{size:c,onClick:o,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,U.jsx)(_.f,{showUri:t,enabled:i,renderInline:!1,children:(0,U.jsx)(A.R,{size:c,onClick:o,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,U.jsx)(E.k,{id:L,targetURI:(0,l.o_)(e),fadeOut:!0,children:u}):u};function O(e){return e?.replace(/T.*/,"")||""}var D=i(3782),F=i(71115),B=i(98913),q=i(54003),z=i(74493),K=i(49151),$=i(4139),W=i(78487),H=i(19845),J=i(42668);const G="KY_tGmIGPqs9GPaaPqL1",X="ZDeijYE6qPzPqT9vG_2w",Q="qEoBuparvnBwiHsPzwEj",Z="azmMKgbEFsGjSUnw2Knc",Y="oDljdc6tgUKxTeQMyh0D",V="JflKazLAHawVzYxv1pXc",ee="aTeXTpJi_WmakpodeGxX",te="kZWs1d_TjX2JQgmtx90y",ie="JCSifKpPc54eqcTYBj5Q",ae="FlK1APGRiu5DTwm_0kix",se="ahQLeD18bYXcFRWkL_vg",ne="l6peddfW1BiAnd1a_mF3",re="Xkg0O12dNVwomjL8dzm4",oe="OexEjZt7Kf7pFUW701v8",le="jAY3diSzPfk19oswf8_y",ce="F3BJWbXwGSqNOwZHInLz",de="YjVCpFaOT3LCR64t8jTN",ue="Q7HlO_WHb9N8aK8bgOjG",pe="xTENSk0_RmQ8qEeEuhnE",me=({episode:e,onPlayEpisode:t,isPlaying:i,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,g=(0,$.s)(),E=(0,y.wA)(),[_]=(0,z.S)(1e4,(e=>e?.item?.uri===u)),A=(0,K.o)((e=>e?.duration)),{badges:w}=(0,J.b)({contentRating:m?.label}),R=(0,a.useCallback)((e=>{!h.playable&&w.nineteen&&(e.stopPropagation(),E((0,b.Tf)(u||"")))}),[u,h.playable,w.nineteen,E]),L=(0,a.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();g.logInteraction(e)}),[g,d]),G=(0,a.useCallback)(((e,t)=>{(0,F.Qv)(t,d.downloadButtonFactory(),g,u)}),[g,d,u]),X=(0,S.d$)(),{spec:Q,logger:Z}=(0,W.r)(x.e,{data:{uri:u}});(0,a.useEffect)((()=>{X&&Z.logImpression(Q.impression())}),[X,Z,Q]);const Y=(0,a.useCallback)((e=>{const t=d.saveButtonFactory();g.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u})),e&&X&&Z.logInteraction(Q.hitAddToPlaylist({itemToBeAdded:u,playlist:q.Xn}))}),[g,d,u,X,Z,Q]),ee=!l&&!e.playability.playable,te=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),ie=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),ae=e.podcast?.uri,se=(0,D.j)(),ne=(0,N.v)(e.uri),re=!l;return(0,U.jsxs)(v.E,{backgroundColor:o,children:[(0,U.jsxs)(k.S,{children:[w.nineteen&&(0,U.jsx)(B.q,{className:V,size:16}),(0,U.jsx)(H.j,{fullyPlayed:n,durationMs:s&&A?A:e.duration.milliseconds,releaseDate:O(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:i,position:s&&_||void 0})]}),(0,U.jsxs)(k.S,{children:[(0,U.jsx)("div",{onClick:R,children:(0,U.jsx)(M,{episodeUri:e.uri,showUri:ae,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:i,isPlayDisabled:ee,playButtonPlayLabel:te,playButtonPauseLabel:ie,size:se})}),(0,U.jsx)(f.e,{uri:e.uri,onClick:G,size:se,canDownload:re,condensed:!0}),ne?(0,U.jsx)(I.g,{uri:e.uri,size:se}):(0,U.jsx)(j.b,{uri:e.uri,size:se,onClick:Y,condensed:!0}),(0,U.jsx)(T.b,{onShow:L,menu:(0,U.jsx)(P.b,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:ae,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,U.jsx)(C.e,{label:c.Ru.get("more.label.context",e.name),size:se})})]})]})};var he=i(89531),ge=i(33597),ye=i(47870),xe=i(13248),be=i(34390),ve=i(88163),ke=i(9173),fe=i(76335),Ce=i(4272),je=i(86317);const Te=xe.ui.EPISODE_PAGE,Pe=({leavebehinds:e,uri:t,seeAllPath:i})=>{const s=(0,a.useMemo)((()=>e.slice(0,ke.un)),[e]);return(0,U.jsx)(ge.o,{leavebehinds:s,surface:Te,uri:t,seeAllButton:e.length>ke.un?(0,U.jsx)(ye.J,{leavebehinds:e,surface:Te,uri:t,pathname:i,state:{uri:t}}):null})};function Ie(e){const t=(0,fe.L)(),i=(0,l.o_)(e.uri)?.id,s=(0,ve.c)(i),{data:n,error:r,getLeavebehinds:o}=(0,be.A)({surface:Te,uri:e.uri}),c=(d=t?.item.type,(0,Ce.Z)(d)===je.c.AD&&d===je.c.EPISODE);var d;(0,a.useEffect)((()=>{o()}),[o]),(0,a.useEffect)((()=>{c&&o()}),[c]);const u=(0,a.useMemo)((()=>n?(0,ke.iT)(n,e.uri):[]),[n?.requestId]);return u.length<1||r?null:(0,U.jsx)(Pe,{uri:e.uri,leavebehinds:u,seeAllPath:s})}var Ne=i(55384),Se=i(15231),Ee=i(39733),_e=i(58081),Ae=i(74946),we=i(19019);const Re=({cardHeaderText:e,cardBodyText:t,buttonText:i,buttonTarget:a})=>(0,Ee.NC)(we._Nj)?(0,U.jsxs)("div",{className:ie,children:[(0,U.jsxs)("div",{className:ae,children:[(0,U.jsx)(Se.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:e}),(0,U.jsx)(Se.E,{semanticColor:"textBase",children:t})]}),(0,U.jsx)(Ae.$,{size:"small",colorSet:"invertedLight",href:(0,l.o_)(a).toURLPath(!0),component:Ne.v,children:i})]}):null,Ue=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,htmlDescription:n,onExpanded:r,onTimeStampClick:o,playability:l,showHeader:d=!0,spec:u})=>{const p=(0,$.s)(),m=(s||t)&&d,h=(0,a.useCallback)((e=>{const t=u.readMoreButtonFactory();p.logInteraction(e?t.hitUiReveal():t.hitUiHide()),r?.()}),[u,p,r]),g=(0,Ee.NC)(we.ZK8,{loadingValue:!1});return(0,U.jsxs)(U.Fragment,{children:[m&&(0,U.jsx)(Se.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Z,children:c.Ru.get("episode.description-title")}),t&&(0,U.jsx)(Re,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),s&&(0,U.jsx)(_e.N,{className:Q,onTimeStampClick:o,maxLines:4,onExpanded:h,content:(i||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:l.playable,enableAutomaticLinkification:g&&e&&!!n})]})};var Le=i(97500),Me=i.n(Le),Oe=i(57574),De=i(95744),Fe=i(70404),Be=i(39111),qe=i(21995),ze=i(70329),Ke=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(Ke||{});const $e=a.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:i,spec:s}){const n=(0,$.s)(),[r,o]=(0,a.useState)(Ke.DESCRIPTION),l=(0,ze.v7)(),{ref:d,inView:u}=(0,Oe.Wx)({threshold:[1],root:l.current,rootMargin:`-${qe.uC+1}px 100000px 0px 100000px`}),p=(0,a.useRef)(null),m=(0,a.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,a.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const i=e-qe.uC;t.scrollTop>i&&t.scrollTo({top:i})}),[l,r]),(0,U.jsx)(De.j,{list:(0,U.jsxs)(Fe.L,{className:Me()(de,{[ue]:!u}),ref:m,children:[(0,U.jsx)(Be.Y,{label:c.Ru.get("web-player.episode.description"),sentenceCase:!0,active:r===Ke.DESCRIPTION,onClick:()=>{const e=s.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(Ke.DESCRIPTION)},className:Me()(pe,{[se]:r===Ke.DESCRIPTION})}),(0,U.jsx)(Be.Y,{label:c.Ru.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===Ke.TRANSCRIPT,onClick:()=>{const e=s.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(Ke.TRANSCRIPT)},className:Me()(pe,{[se]:r===Ke.TRANSCRIPT})})]}),children:null===e||r===Ke.DESCRIPTION?t:i})}));var We=i(78773),He=i(98882),Je=i(52037);const Ge=(0,a.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:a,logger:s}=(0,W.r)(We.c,{data:{uri:i}}),{isPlaying:n}=(0,He.P)({uri:i},{featureIdentifier:"episode"}),r=a.timestampLinkFactory();return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:re,children:(0,U.jsx)(Se.E,{variant:"bodySmall",semanticColor:"textBase",children:c.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,a)=>{const o=`transcript-section-${a}`;return(0,U.jsxs)("div",{className:ne,children:[(0,U.jsx)("button",{className:oe,onClick:()=>{t(e.startMs,o),s.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,U.jsx)(E.k,{id:o,targetURI:(0,l.o_)(i),fadeOut:!0,children:(0,U.jsx)(Se.E,{variant:"marginalBold",semanticColor:"textSubdued",className:le,children:(0,Je.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,U.jsx)(Se.E,{variant:"bodySmall",semanticColor:"textBase",className:ce,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));var Xe=i(12737),Qe=i(58919),Ze=i(6408),Ye=i(50597),Ve=i(69197),et=i(65647),tt=i(765),it=i(70045),at=i(33589),st=i(23885),nt=i(31845),rt=i(78089),ot=i(77131),lt=i(11892),ct=i(60831),dt=i(53964),ut=i(45292),pt=i(6309),mt=i(63089);const ht=({children:e,index:t,ariaRowIndex:i,onTriggerPlay:s,isActive:n,uri:r,spec:o})=>{const l=(0,$.s)(),{pushPopSelected:c,toggleSelected:d,isSelected:u}=(0,a.useContext)(dt.m),p=(0,a.useRef)(null),m=(0,ut.W)(),h=(0,lt.YQ)((e=>{m({intent:"play",type:"double-click"});const t=l.logInteraction(o.doubleHitPlay({itemToBePlayed:r}));s(e,t)}),pt.d,{leading:!0,trailing:!1}),g=(0,a.useCallback)((e=>{d(t,e.shiftKey,e.ctrlKey||e.metaKey)}),[d,t]),y=(0,a.useCallback)((e=>{if(!p.current?.contains(e.target))return;const i="ArrowUp"===e.key?-1:1;["ArrowUp","ArrowDown"].includes(e.key)&&(e.shiftKey?c(t,i):d(t+i,!1,!1))}),[c,d,t]),x=u(t),b=x&&u(t-1),v=x&&u(t+1);return(0,U.jsx)(ct.$,{rowIndex:i,"aria-selected":x,children:(0,U.jsx)("div",{"data-testid":"tracklist-row",className:Me()(mt.A.trackListRow,mt.A.trackListRowGrid,{[mt.A.active]:n,[mt.A.selected]:x,[mt.A.isPreviousRowSelected]:b,[mt.A.isNextRowSelected]:v}),onDoubleClick:h,onClick:g,onKeyDown:y,ref:p,children:e})})};var gt=i(14197),yt=i(78330);const xt=({uri:e,title:t="",index:i,subtitle:s="",showName:n="",showUri:r="",duration:o=0,start:l,stop:d})=>{const{isActive:u,isPlaying:p,onClick:m}=(0,gt.L)({episodeUri:e,start:l,stop:d}),h=(0,a.useCallback)(((e,t)=>{m(t)}),[m]),{spec:g}=(0,W.r)(Ze.i,{data:{position:i,reason:"",uri:e}});return(0,U.jsx)(yt.pZ,{value:"row",index:i,children:(0,U.jsxs)(ht,{index:i,ariaRowIndex:i+1,onTriggerPlay:h,isActive:u,spec:g,uri:e,children:[(0,U.jsxs)(st.U,{ariaColIndex:0,children:[(0,U.jsx)(tt.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",s,n),onClick:h,isPlaying:p,isActive:u,spec:g,children:(0,U.jsx)(it.a,{children:(0,U.jsx)(Qe.M,{className:mt.A.talkIcon,"aria-hidden":!0})})}),(0,U.jsxs)(et.l,{children:[(0,U.jsx)(ot.p,{titleText:t,children:t}),(0,U.jsx)(rt.p,{children:s})]})]}),(0,U.jsx)(nt.o,{ariaColIndex:1,children:(0,U.jsx)(Ye.g,{uri:r,name:n,spec:g,children:(0,U.jsx)("span",{dir:"auto",children:n})})}),(0,U.jsx)(at.l,{ariaColIndex:2,children:(0,U.jsx)(Ve.P,{duration:o,className:mt.A.talkSegmentDuration})})]})})};var bt=i(20507),vt=i(76276),kt=i(33130),ft=i(36450),Ct=i(57103),jt=i(62385),Tt=i(68732),Pt=i(3068);const It="HRApv65revEcL42QzRjJ",Nt="HbJqPqSmOY5H3lLnQVzD",St="DBcCnhHVt7coNqp3wMB4",Et=({episodeUri:e,index:t,duration:i,start:s,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,gt.L)({episodeUri:e,start:s,stop:n}),g=(0,a.useCallback)(((e,t)=>{h(t)}),[h]),{spec:y}=(0,W.r)(Ze.i,{data:{position:t,reason:"",uri:o}});return(0,U.jsx)(yt.pZ,{value:"row",index:t,children:(0,U.jsx)(kt.t,{trigger:"right-click",action:"open",menu:(0,U.jsx)(ft.P,{uri:o}),children:(0,U.jsxs)(Tt.w,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:g,isActive:p,isPlayable:u,spec:y,children:[(0,U.jsxs)(st.U,{ariaColIndex:0,children:[(0,U.jsx)(tt.$,{uri:o,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,l?.[0].name),onClick:g,isPlaying:m,isActive:p,spec:y,children:(0,U.jsx)(it.a,{children:(0,U.jsx)("img",{className:Nt,src:d.image,alt:d.name})})}),(0,U.jsxs)(et.l,{children:[(0,U.jsx)(ot.p,{titleText:r,children:r}),(0,U.jsx)(rt.p,{children:(0,U.jsx)(Ct.l,{artists:l,spec:y})})]})]}),(0,U.jsx)(nt.o,{ariaColIndex:1,children:(0,U.jsx)(Ye.g,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,U.jsxs)(at.l,{ariaColIndex:2,children:[(0,U.jsx)(Pt.d,{uri:o,spec:y}),(0,U.jsx)(Ve.P,{duration:i}),(0,U.jsx)(jt.Y,{spec:y,menu:(0,U.jsx)(ft.P,{uri:o,artists:l}),label:c.Ru.get("more.label.track",r,l?.[0].name)})]})]})})})};var _t=i(56144),At=i(91753);function wt(e,t,i){return e.reduce(((e,a,s)=>((s>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===a.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,s,a)):"TALK"===a.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,s,a)),e)),[])}const Rt=({uri:e,segmentCount:t})=>{const i=(0,_t.o)(),s=(0,a.useCallback)((async(a,s)=>{const n=Math.ceil(a/2);try{return{items:wt(await i.getSegments(e,n,s),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,i,e]),n=(0,a.useCallback)((t=>{switch(t.type){case"SPACER":return(0,U.jsx)("div",{className:St},t.id);case"MUSIC":return(0,U.jsx)(Et,{...t},`${e}-${t.index}`);case"TALK":return(0,U.jsx)(xt,{...t},`${e}-${t.index}`);default:return(0,At.d)(t)}}),[e]),r=(0,a.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),o=c.Ru.get("music_and_talk.in_this_episode");return(0,U.jsxs)("div",{children:[(0,U.jsx)(Se.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:It,children:o}),(0,U.jsx)(bt.S4,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:Xe.qq,columns:[vt.$.TITLE_AND_ARTIST,vt.$.ALBUM_OR_SHOW,vt.$.DURATION],renderRow:n,fetchTracks:s,resolveItem:r,limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};var Ut=i(6564),Lt=i(72553);const Mt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,hasMusicAndTalkSegements:n,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:l,onTranscriptTimestampClick:d,playability:u,segmentCount:p,showUrl:m,transcript:h,uri:g,spec:y})=>{const x=(0,$.s)(),b=(0,a.useMemo)((()=>y.descriptionSectionFactory()),[y]),v=(0,a.useMemo)((()=>b.trackListFactory()),[b]),[k,f]=(0,a.useState)(null),C=(0,a.useCallback)((async e=>{const t=await(0,Ut.Q)(e);f(t)}),[]);(0,a.useEffect)((()=>{h&&h.length>0&&C(h[0].cdnUrl)}),[C,h]);const j=a=>(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ue,{hasDescription:s,contentInformation:t,onTimeStampClick:l,onExpanded:o,description:i,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:a,spec:b}),n&&(0,U.jsx)(Lt.r,{spec:v,children:(0,U.jsx)(Rt,{segmentCount:p,uri:g})}),m&&(0,U.jsx)(he.n,{size:"small",className:Y,href:m,component:Ne.v,onClick:()=>{x.logInteraction(b.allEpisodesLinkFactory().hitUiNavigate({destination:m}))},children:c.Ru.get("episode.see_all_episodes")}),(0,U.jsx)(Ie,{uri:g})]}),T=h&&h?.length>0&&u.playable;return(0,U.jsx)(U.Fragment,{children:T?(0,U.jsx)($e,{transcriptSections:k,descriptionContent:j(!1),transcriptContent:(0,U.jsx)(Ge,{transcriptSections:k||[],onTimeStampClick:d,episodeUri:g}),spec:y}):j(!0)})};var Ot=i(93720),Dt=i(59092),Ft=i(79216),Bt=i(16373),qt=i(99168),zt=i(90436),Kt=i(33859),$t=i(47892),Wt=i(37473),Ht=i(27275),Jt=i(91360),Gt=i(76918),Xt=i(56192),Qt=i(1514),Zt=i(69798),Yt=i(57968);const Vt=({coverArt:e,name:t})=>{const i=(0,Yt.y)(),a=i===Zt.E.SMALL||i===Zt.E.XSMALL;return(0,U.jsx)(Xt.b,{images:e,type:je.c.EPISODE,shape:Xt.u.ROUNDED_CORNERS,title:t,size:a?Qt.Qe.SIZE_20:Qt.Qe.SIZE_24,className:ee})};var ei=i(61903);const ti=({episode:e,isFullyPlayed:t,setIsFullyPlayed:i,backgroundColor:s,spec:n})=>{const{uri:r,name:o,sharingInfo:d,playedState:u,episodeType:p,releaseDate:m,coverArt:h}=e,g=(0,$.s)(),y=function(e,t,i,a,s){const n=t===ei.I_.Episode;return(0,Gt.hD)(e,a,i,s)?(0,U.jsx)(Gt.Ih,{isMusicAndTalk:n}):n?c.Ru.get("type.showEpisode"):c.Ru.get("type.podcastEpisode")}(r,p||ei.I_.Unknown,u.playPositionMilliseconds,O(m?.isoString),u.state===ei._w.Completed),x=e.podcast?.uri,b=function(e){const t=(0,l.o_)(e);return`/show/${(0,l.cE)(t?.id||"")}`}(x),v=(0,a.useCallback)((()=>{g.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:b}))}),[g,b,n]),k=e.podcast?.coverArt,f=!!(k&&k.length===h.length&&h.every(((e,t)=>e.url===k[t].url))),C=(0,U.jsx)(P.b,{uri:r,sharingInfo:d,showUri:x,contextUri:r,isPlayed:t,onMarkAsPlayed:i});return(0,U.jsxs)(Dt.z,{backgroundColor:s,children:[(0,U.jsx)(qt.h,{children:(0,U.jsx)(Ot.h,{menu:C,children:(0,U.jsx)(zt.X,{text:o,dragUri:r,dragLabel:o})})}),!f&&(0,U.jsx)(Ft.X,{children:(0,U.jsx)(Ot.h,{menu:C,children:(0,U.jsx)(Kt.b,{loading:"eager",name:o,images:h,placeholderType:"episode",shape:Kt.u.SQUARE})})}),(0,U.jsxs)(Bt.Y,{children:[(0,U.jsx)($t.B,{children:y}),(0,U.jsx)(Ot.h,{menu:C,children:(0,U.jsx)(Ht.mm,{dragUri:r,dragLabel:o,scaleAtMinWidth:Ht.tw,className:X,children:(0,U.jsx)("span",{"data-testid":"episodeTitle",children:o})})}),(0,U.jsx)(Ot.h,{menu:C,children:(0,U.jsxs)(Jt.N,{to:b,onClick:v,className:te,children:[f&&(0,U.jsx)(Vt,{name:o,coverArt:h}),(0,U.jsx)(Wt.g,{children:(0,U.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var ii=i(91341),ai=i(18306),si=i(27419),ni=i(7577);var ri=i(11244),oi=i(84865),li=i(9395),ci=i(69180),di=i(2869),ui=i(39014),pi=i(88593),mi=i(37708);const hi=({episode:e})=>{const{uri:t,episodeType:i,description:n,htmlDescription:o,podcastSubscription:c,segmentsCount:h,podcast:x,contentInformation:b,playedState:v,coverArt:k}=e,{spec:f,logger:C}=(0,W.r)(r.g,{data:{uri:t}}),j=(0,ri.n)(),T=(0,a.useMemo)((()=>f.headerFactory()),[f]),P=(0,a.useMemo)((()=>f.actionBarFactory()),[f]),[I,N]=(0,a.useState)(v.state===ei._w.Completed),S=(0,ci.z)(),E=(0,ut.W)(),_=void 0!==h&&h>0,A=(0,w.V)(),{triggerPlay:M,togglePlay:O,isActive:D}=(0,He.P)({uri:t,...j?{}:{pages:[{items:[{type:je.c.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),{isActive:F,isPlaying:B}=(0,di.te)(t),q=k[0].url,z=(0,li.H)(q||null),$=(0,K.o)((e=>e?.isPaused??void 0)),H=(0,R.c)(),J=c.isPaywalled&&!c.isUserSubscribed,X=F||D,Q=e?{name:e.name,uri:e.uri,mediaTypes:e.mediaTypes,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,Z=x?{name:x.name,uri:x.uri,trailer:x.trailer,showTypes:x.showTypes}:null,Y=(0,oi.C)(Q,Z),V=(0,a.useCallback)(((e,a,s,n)=>{const r=()=>{$?(n?.("resume"),S.resume()):(n?.("pause"),S.pause())};if(J)return;let o="play";if(!B||0!==e&&a||(o="pause"),E({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),i===ei.I_.Episode&&H)u.h.set((()=>({triggerId:s||L,triggerAction:null})));else if(D&&!a)A?r():O({loggingParams:n?.()});else if(F&&!a)r();else{const t=n?.("play");A?Y({seekTo:e,loggingParams:t}):M({seekTo:e,loggingParams:t})}}),[J,B,E,t,i,H,F,D,A,$,S,O,Y,M]),ee=(0,a.useCallback)((e=>{V(e,!1,void 0,(e=>{const i=f.actionBarFactory().playButtonFactory();let a;return a="pause"===e||B?i.hitPause({itemToBePaused:t}):"resume"===e||X?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),C.logInteraction(a)}))}),[V,X,B,C,f,t]),te=(0,a.useCallback)((e=>{V(e,!0,void 0,(()=>C.logInteraction(f.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[V,C,f,t]),ie=(0,a.useCallback)(((e,t)=>{V(e,!0,t)}),[V]),ae=(0,a.useCallback)((()=>{E({intent:"expand-description",type:"click"})}),[E]),[se,ne]=(0,s.ok)();(0,a.useEffect)((()=>{if(e&&!X&&se.has("t")){const t=se.get("t")||"0",i=1e3*parseInt(t,10);i<=e.duration.milliseconds&&(se.delete("t"),ne(se,{replace:!0}),V(i,!0))}}),[e,V,X,se,ne]);const re=!!n||!!o,oe=e.podcast?.uri,le=(0,l.o_)(oe)?.toURLPath(!0),ce=(0,p.r)();return(e=>{const t=(0,y.wA)(),i=(0,R.c)(),s=(0,y.d4)(ni.u);(0,a.useEffect)((()=>{i&&e!==s&&t((0,si.SC)(e))}),[e,s,t,i])})(t),(0,U.jsxs)("section",{"data-testid":"episode",className:G,children:[(0,U.jsx)(d.Q,{children:(0,mi.L$)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,U.jsx)(g.c,{artistOrShow:e.podcast?.name,title:e.name,uri:t,entityType:g.p.EPISODE}),(0,U.jsx)(ti,{episode:e,isFullyPlayed:I,setIsFullyPlayed:N,backgroundColor:z,spec:T}),(0,U.jsx)(me,{episode:e,onPlayEpisode:ee,isPlaying:B,isActive:X,isFullyPlayed:I,setIsFullyPlayed:N,backgroundColor:z,isLocked:J,spec:P}),(0,U.jsxs)("div",{className:"contentSpacing",children:[(0,U.jsx)(Mt,{transcript:e.transcript,hasDescription:re,contentInformation:b,onDescriptionTimestampClick:te,onTranscriptTimestampClick:ie,onExpanded:ae,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:_,segmentCount:h,uri:e.uri,showUrl:le,spec:f}),ce&&(0,U.jsx)(m.W,{uri:t})]})]})},gi=a.memo((function(){const{episodeId:e=""}=(0,n.g)(),t=(0,l.iM)(e).toURI(),i=(0,ui.d)(t);return i?.isError||!i?.episodeOrChapter?(0,U.jsx)(h.LoadingPage,{hasError:i?.isError||!1,errorMessage:c.Ru.get("error.not_found.title.podcast")}):(0,pi.Gr)(i.episodeOrChapter)?(0,U.jsx)(ii.$,{to:(0,l.o_)(i.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,U.jsx)(a.Suspense,{fallback:null,children:(0,U.jsx)(ai.u,{pageId:o.$h.PODCAST_EPISODE,uri:t,children:(0,U.jsx)(hi,{episode:i.episodeOrChapter})})})}))},14197:(e,t,i)=>{i.d(t,{L:()=>o});var a=i(30758),s=i(98882),n=i(49151),r=i(23090);function o({episodeUri:e,start:t,stop:i}){const{togglePlay:o,triggerPlay:l,isPlaying:c,isActive:d}=(0,s.P)({uri:e},{featureIdentifier:"episode"}),u=(0,n.o)((e=>(0,r.s)(e)??0)),p=d&&function(e,t,i){return i>=e&&i<t}(t,i,u),m=c&&p;return{onClick:(0,a.useCallback)((e=>{p?o({seekTo:t,loggingParams:e}):l({seekTo:t,loggingParams:e})}),[p,t,o,l]),isPlaying:m,isActive:p}}},6564:(e,t,i)=>{i.d(t,{Q:()=>h});var a=i(21364),s=i(24848),n=i.n(s);let r=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function o(e){switch(e){case 0:case"UNKNOWN":return r.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return r.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return r.MUSIC_TRACK;default:return r.UNRECOGNIZED}}const l={encode(e,t=n().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const i of e.sections)c.encode(i,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const i=e instanceof n().Reader?e:new(n().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:s.version=i.string();break;case 2:s.episodeUri=i.string();break;case 3:s.publishedAt=i.string();break;case 4:s.sections.push(c.decode(i,i.uint32()));break;case 5:s.language=i.string();break;case 6:s.curated=i.bool();break;default:i.skipType(7&e)}}return s},fromJSON:e=>({version:p(e.version)?String(e.version):"",episodeUri:p(e.episodeUri)?String(e.episodeUri):"",publishedAt:p(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>c.fromJSON(e))):[],language:p(e.language)?String(e.language):"",curated:!!p(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?c.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>c.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const c={encode:(e,t=n().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&d.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&u.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&d.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const i=e instanceof n().Reader?e:new(n().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:s.type=i.int32();break;case 2:s.startMs=i.int32();break;case 3:s.plaintextContent=d.decode(i,i.uint32());break;case 6:s.musicTrack=u.decode(i,i.uint32());break;case 4:s.title=i.string();break;case 5:s.fallback=d.decode(i,i.uint32());break;default:i.skipType(7&e)}}return s},fromJSON:e=>({type:p(e.type)?o(e.type):0,startMs:p(e.startMs)?Number(e.startMs):0,plaintextContent:p(e.plaintextContent)?d.fromJSON(e.plaintextContent):void 0,musicTrack:p(e.musicTrack)?u.fromJSON(e.musicTrack):void 0,title:p(e.title)?String(e.title):"",fallback:p(e.fallback)?d.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case r.UNKNOWN:return"UNKNOWN";case r.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case r.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?d.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?u.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?d.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?d.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?u.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?d.fromPartial(e.fallback):void 0,t}};const d={encode(e,t=n().Writer.create()){for(const i of e.plaintext)t.uint32(10).string(i);return t},decode(e,t){const i=e instanceof n().Reader?e:new(n().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={plaintext:[]};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)s.plaintext.push(i.string());else i.skipType(7&e)}return s},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const u={encode:(e,t=n().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const i=e instanceof n().Reader?e:new(n().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={uri:""};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)s.uri=i.string();else i.skipType(7&e)}return s},fromJSON:e=>({uri:p(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function p(e){return null!=e}function m(e){return e.type===r.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}async function h(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer(),i=l.decode(new Uint8Array(e));return i.sections.map(m)}return null}catch(e){return null}}n().util.Long!==a.A&&(n().util.Long=a.A,n().configure())}}]);
//# sourceMappingURL=xpui-routes-episode.js.map