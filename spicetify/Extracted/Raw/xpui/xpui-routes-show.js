"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{39314:(e,t,a)=>{a.d(t,{I:()=>l});var i=a(30758),s=a(27134),n=a(45292),r=a(61535),o=a(86070);const l=i.memo((function({uri:e,size:t=s.M.md,className:a,onClick:l,canDownload:c,condensedAll:d}){const[u,m]=(0,r.A)(e),p=(0,n.W)(),h=(0,i.useCallback)((()=>{p({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[p,e,u,m]);return(0,o.jsx)(s.f,{className:a,isFollowing:u,onFollow:h,onClick:l,uri:e,size:t,canDownload:c,condensedAll:d,condensed:!0})}))},45878:(e,t,a)=>{a.d(t,{G:()=>R});var i=a(97500),s=a.n(i),n=a(41331),r=a(15231);const o="YNXLVjlRXPfM4xObTojA",l="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",u="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var p=a(86070);const h=({value:e,label:t,hasDivider:a=!1})=>(0,p.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,p.jsx)(r.E,{variant:"titleSmall",className:s()({[u]:a}),children:e}),(0,p.jsx)(r.E,{variant:"marginal",semanticColor:"textSubdued",children:t})]});var g=a(30758);const x=1e3,y=60*x,b=60*y,v=24*b;var j=a(43534),f=a(28740);const k={days:0,hours:0,minutes:0,seconds:0};function C(e){return e>0?function(e){const t=Math.abs(e);return{days:Math.floor(t/v),hours:Math.floor(t%v/b),minutes:Math.floor(t%b/y),seconds:Math.floor(t%y/x)}}(e):k}var P=a(56192),w=a(86317);const R=({targetDate:e,className:t,onComplete:a,images:i,imageTitle:r})=>{const{days:c,hours:u,minutes:x,seconds:y}=((e,t)=>{const a=(0,g.useRef)(t);a.current=t;const[i,s]=(0,g.useState)((()=>C((0,j.u)(e))));return(0,f.$)((t=>{const i=(0,j.u)(e),n=C(i);s(n),i<=0&&(t(),a.current?.())}),1e3),i})(e,a),b=void 0!==i&&i.length>0&&r,v=n.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:u,minutes:x,seconds:y});return(0,p.jsxs)("div",{className:s()(o,t,{[l]:b}),role:"timer",children:[(0,p.jsx)("span",{className:m,children:v}),b&&(0,p.jsx)(P.b,{images:i,type:w.c.ALBUM,shape:P.u.ROUNDED_CORNERS,className:d,title:r}),(0,p.jsx)(h,{value:c,label:n.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,p.jsx)(h,{value:u,label:n.Ru.get("web-player.prerelease.hours",u),hasDivider:!0}),(0,p.jsx)(h,{value:x,label:n.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,p.jsx)(h,{value:y,label:n.Ru.get("web-player.prerelease.seconds",y)})]})}},47690:(e,t,a)=>{a.d(t,{W:()=>o});var i=a(30758),s=a(89531),n=a(41331),r=a(86070);const o=(0,i.memo)((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:i,size:o="small",className:l}){const c=e?n.Ru.get("following"):n.Ru.get("follow");return(0,r.jsx)(s.n,{onClick:t,disabled:a,size:o,className:l,children:i||c})}))},61934:(e,t,a)=>{a.d(t,{h:()=>u});var i=a(30758),s=a(42252),n=a(47667),r=a(45866),o=a(11798),l=a(89035);var c=a(514),d=a(86070);const u=({children:e,action:t,uri:a})=>{const u=(0,r.V)(),m=(0,l.N)(o.JD);let p;const h=()=>{const e={triggerId:n.d,triggerAction:{type:t}};s.h.set((t=>({...t,...e}))),m.storeAction(o.j8,{operation:c.tS.ADD,uris:[a]})};try{p=i.Children.only(e)}catch(t){return(0,d.jsx)(d.Fragment,{children:e})}return u?i.cloneElement(p,{onClick:h}):(0,d.jsx)(d.Fragment,{children:e})}},10102:(e,t,a)=>{a.d(t,{H4:()=>i});a(30758),a(97500),a(41331),a(27046),a(15698);a(86070);let i=function(e){return e.primary="primary",e.secondary="secondary",e.transparent="transparent",e}({})},10081:(e,t,a)=>{a.d(t,{v:()=>m});var i=a(89531),s=a(71498),n=a(74946),r=a(3275),o=a(41331),l=a(61934),c=a(4295),d=a(46345),u=a(86070);const m=({uri:e,isBook:t=!1})=>{const{isPreSaved:a,addPresave:m,removePresave:p}=(0,c.w)({uri:e,isBook:t});return a?(0,u.jsx)(i.n,{onClick:p,iconTrailing:s.k,children:o.Ru.get("web-player.prerelease.presaved")}):(0,u.jsx)(l.h,{uri:e,action:d.no.SAVE_PRERELEASE,children:(0,u.jsx)(n.$,{disabled:void 0===a,onClick:m,iconTrailing:r.P,children:o.Ru.get("web-player.prerelease.presave")})})}},33396:(e,t,a)=>{a.d(t,{g:()=>A});var i=a(30758),s=a(3074),n=a.n(s),r=a(57485),o=a(5562),l=a(15231),c=a(39733),d=a(46099),u=a(31352),m=a(48614),p=a(78845),h=a(4924),g=a(64580),x=a(99186),y=a(76276),b=a(41331),v=a(93290),j=a(9738),f=a(86070);const k=({onSelect:e})=>{const{viewMode:t,setViewMode:a}=(0,v.a)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.y,{children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),j.i.map((({value:i,icon:s,text:n},r)=>(0,f.jsx)(x.D,{role:"menuitemradio","aria-checked":t===i,divider:r===j.i.length-1?"after":void 0,autoClose:!1,leadingIcon:s(),onClick:()=>{a(i),e?.(i)},children:n()},i)))]})},C=({heading:e,selected:t,onSelect:a,options:i,enableViewModeMenu:s=!1,onSelectViewMode:n,sortOrder:r,...o})=>{let l;r&&(r===y.H.ASC||r===y.H.SECONDARY_ASC?l=m.U:r!==y.H.DESC&&r!==y.H.SECONDARY_DESC||(l=p.R));return(0,f.jsxs)(h.W,{getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),...o,children:[e?(0,f.jsx)(g.y,{children:e}):null,i.map((({key:e,value:i},s)=>(0,f.jsx)(x.D,{role:"menuitemradio","aria-checked":e===t.key,CheckedIcon:l,onClick:()=>a(e,s),children:i},e))),s&&(0,f.jsx)(k,{onSelect:n})]})};var P=a(80545),w=a(78487),R=a(4355);const S="x-sortBox-sortDropdown",E="cvTLPmjt6T7M85EKcB8w",N="SbDHY3fVADNJ4l9qOLQ2",I=({isOpen:e,className:t})=>e?(0,f.jsx)(r.J,{size:"small","aria-hidden":"true",className:t}):(0,f.jsx)(o.y,{size:"small","aria-hidden":"true",className:t}),A=({heading:e,options:t,selected:a,onSelect:s,sortOrder:r,variant:o="bodySmall",semanticColor:m,disabled:p,onClick:h,ariaLabel:g,enableViewModeMenu:x=!1})=>{const y=(0,c.NC)(R.mA)&&x,{viewMode:b}=(0,P.a)();a||(a=t?.[0]);const v=j.i.find((({value:e})=>e===b))||j.i[0],k=(0,i.useMemo)((()=>`sortboxlist-${n().create().hex}`),[]),{spec:A,logger:B}=(0,w.r)(d.d,{});return(0,f.jsx)(u.b,{menu:(0,f.jsx)(C,{selected:a,options:t,onSelect:(e,t)=>{s(e,t);const a=A.sortBySectionFactory().sortOptionFactory({identifier:e}).hitSort();B.logInteraction(a)},sortOrder:r,heading:e,enableViewModeMenu:y,onSelectViewMode:e=>{const t=A.viewAsSectionFactory().viewOptionFactory({identifier:e}).hitUiElementToggle();B.logInteraction(t)},id:k}),children:(e,t,i)=>(0,f.jsxs)("button",{className:S,onClick:e=>{p||(h?.(e),t(e))},ref:i,type:"button","aria-label":g,role:"combobox","aria-controls":k,"aria-expanded":e,children:[(0,f.jsx)(l.E,{"data-sortbox-label":!0,semanticColor:m,variant:o,className:E,children:a?.value||(y?v.text():"")}),y?v.icon():(0,f.jsx)(I,{isOpen:e,className:N})]})})}},91901:(e,t,a)=>{a.d(t,{N:()=>h});var i=a(97500),s=a.n(i),n=a(30758),r=a(27338),o=a(91360);const l="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",d="w4ZoklZWkrsyrVA34vI8";var u=a(86070);const m=({title:e,uri:t,className:a,onClick:i,position:l})=>{const m=(0,n.useCallback)((e=>{i?.(e,{uri:t,position:l})}),[i,l,t]);return(0,u.jsx)(o.N,{"aria-label":e,className:s()(c,d,a),to:t,onClick:m,children:(0,u.jsx)(r.v,{as:"span",children:e})})};function p(e){return!!e.uri&&!!e.title}const h=({topics:e,className:t,onClick:a})=>(0,u.jsx)("div",{className:s()(l,t),children:e.filter(p).map(((e,t)=>{const i=`${e.uri}-${t}`;return(0,u.jsx)(m,{title:e.title,uri:e.uri,position:t,onClick:a},i)}))})},52952:(e,t,a)=>{a.d(t,{B:()=>F,q:()=>_});var i=a(30758),s=a(41978),n=a(39733),r=a(80171),o=a(59677),l=a(13775),c=a(29866),d=a(93720),u=a(12953),m=a(43830),p=a(581),h=a(56665),g=a(42252),x=a(27235),y=a(68031),b=a(45292),v=a(45866),j=a(98812),f=a(84865),k=a(19019),C=a(44817),P=a(98913),w=a(78330),R=a(57968),S=a(74493),E=a(26205),N=a(78487),I=a(61903),A=a(42668),B=a(86070);function F(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const M=e=>`activation-trigger-mme-${e}`,_=i.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:_,status:U,variant:T}){const D=(0,j.c)(),L=a.playedState.playPositionMilliseconds,O=a.uri,z=(0,i.useRef)(null),[V,W]=(0,i.useState)(a.playedState.state===I._w.Completed),{draggable:H,onDragStart:q}=(0,y.P)(),G=(0,v.V)(),K=(0,R.y)(),$=(0,b.W)(),X=(0,s.wA)(),{UBIFragment:Y,spec:Q,logger:J}=(0,N.r)(r.d,{data:{uri:O,reason:a.requestId||"",position:e}}),Z=(0,E.t)(Q),{isActive:ee,isPlaying:te,togglePlay:ae}=_({uri:O}),[ie]=(0,S.S)(1e4,(e=>e?.item?.uri===O));(0,i.useEffect)((()=>{te&&(z.current=ie)}),[te,ie]),(0,i.useEffect)((()=>{!te&&z.current&&a.duration.milliseconds<=z.current&&W(!0)}),[te,a.duration.milliseconds]);const se=(0,i.useCallback)((e=>{e||(z.current=0),W(e)}),[]),ne=e=>{if(e.target!==e.currentTarget)return;const i=`${a.name} â€¢ ${t.name}`;q(e,{itemUris:[O],dragLabelText:i,contextUri:t.uri})},re=F(t),oe=(0,f.C)({...a,coverArt:{sources:a.coverArt}},re),le=(0,i.useCallback)((()=>{if(a.episodeType===I.I_.Episode&&D)g.h.set((()=>({triggerId:M(a.uri),triggerAction:null})));else if(G)oe();else{let e;e=te?Q.playButtonFactory().hitPause({itemToBePaused:O}):ee?Q.playButtonFactory().hitResume({itemToBeResumed:O}):Q.playButtonFactory().hitPlay({itemToBePlayed:O});const t=J.logInteraction(e);$({targetUri:O,intent:te?"pause":"play",type:"click"}),ae({loggingParams:t})}}),[ee,oe,$,ae,O,te,G,a,D,J,Q]),ce=(0,i.useCallback)((()=>{J.logInteraction(Q.hitUiNavigate({destination:O})),$({type:"click",targetUri:O,intent:"navigate"})}),[O,$,J,Q]),de=a.podcastSubscription?.isPaywalled??!1,ue=a.podcastSubscription?.isUserSubscribed??!1,me=de&&!ue,pe=de&&G,{badges:he}=(0,A.b)({contentRating:a.contentRating?.label,isPaywalled:de}),ge=(0,i.useCallback)((()=>X((0,l.Tf)(t.uri))),[t.uri,X]),xe=(0,i.useCallback)((e=>{let i=e;return(me||pe)&&(i=(0,B.jsx)(h.f,{enabled:!0,showUri:a.podcast?.uri||t.uri,children:i})),!a.playability.playable&&he.nineteen&&(i=(0,B.jsx)("div",{onClick:e=>{e.stopPropagation(),ge()},children:e})),i=(0,B.jsx)(c.k,{id:M(O),targetURI:(0,o.o_)(O),children:i}),i}),[O,me,pe,t.uri,he.nineteen,a.playability.playable,ge,a.podcast?.uri]),ye=(0,n.NC)(k.cKd,{loadingValue:!1});return(0,B.jsx)(Y,{spec:Q,children:(0,B.jsx)(w.pZ,{value:"row",index:e,children:(0,B.jsx)(d.h,{onShow:()=>{J.logInteraction(Q.secondaryHitUiReveal())},menu:(0,B.jsx)(u.b,{uri:O,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:V,onMarkAsPlayed:se}),children:ye?(0,B.jsx)(p.k,{ref:Z,requestId:a.requestId,index:e,uri:O,size:K,images:a.coverArt||[],name:a.name,showName:a.podcast?.name||t.name,description:a.description,isPlayable:a.playability.playable||me,fullyPlayed:V,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:z.current??L,draggable:H,handleDragStart:ne,handlePlaybackClick:le,handleClick:ce,isCurrentlyPlaying:ee,isPaywalled:de,isUserSubscribed:ue,isPlaying:te,position:te?ie:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:se,contentInformation:a.contentInformation,showUri:a.podcast?.uri||t.uri,mediaTypes:a.mediaTypes??void 0,badges:(0,B.jsxs)(B.Fragment,{children:[he.explicit&&(0,B.jsx)(C.g,{}),he.paid&&(0,B.jsx)(x.K,{}),he.nineteen&&(0,B.jsx)(P.q,{size:16})]}),playButtonWrapper:xe,onMoreButtonClick:()=>{J.logInteraction(Q.moreButtonFactory().hitUiReveal())},status:U,variant:T}):(0,B.jsx)(m.R,{ref:Z,requestId:a.requestId,index:e,uri:O,size:K,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||me,fullyPlayed:V,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:z.current??L,handleDragStart:ne,handlePlaybackClick:le,handleClick:ce,isCurrentlyPlaying:ee,isPaywalled:de,isUserSubscribed:ue,isPlaying:te,position:te?ie:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:se,contentInformation:a.contentInformation,badges:(0,B.jsxs)(B.Fragment,{children:[he.explicit&&(0,B.jsx)(C.g,{}),he.paid&&(0,B.jsx)(x.K,{}),he.nineteen&&(0,B.jsx)(P.q,{size:16})]}),playButtonWrapper:xe,onMoreButtonClick:()=>{J.logInteraction(Q.moreButtonFactory().hitUiReveal())},showUri:t.uri,mediaTypes:a.mediaTypes??void 0,status:U,variant:T})})})})}))},43534:(e,t,a)=>{function i(e){const t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}a.d(t,{u:()=>i})},90677:(e,t,a)=>{a.d(t,{v:()=>r});var i=a(96266),s=a(61869);const n=new i.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),r=(e,t)=>(0,s.I)(n,e,t)},92301:(e,t,a)=>{a.d(t,{K:()=>i});const i=e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"Podcast"===e.__typename;var t}},4295:(e,t,a)=>{a.d(t,{w:()=>d});var i=a(30758),s=a(25023),n=a(41331),r=a(52891),o=a(92814),l=a(89747),c=a(78487);const d=({uri:e,isBook:t})=>{const{add:a,remove:d}=(0,l.p)("prerelease"),u=(0,o.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,r.d)(),{spec:p,logger:h}=(0,c.r)(s.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,i.useCallback)((async()=>{h.logInteraction(p.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await a(e),m(t?n.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):n.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[a,m,t,h,p,e]),removePresave:(0,i.useCallback)((async()=>{h.logInteraction(p.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[h,d,p,e])}}},69084:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Vi});var i=a(30758),s=a(77),n=a(39733),r=a(62560),o=a(36779),l=a(59677),c=a(41331),d=a(62462),u=a(7029),m=a(97500),p=a.n(m),h=a(41978),g=a(15231),x=a(38213),y=a(38283),b=a(36131),v=a(19477),j=a(31352),f=a(35658),k=a(91901),C=a(77674),P=a(10102),w=a(61108),R=a(56192),S=a(1514),E=a(44817),N=a(98913),I=a(32558),A=a(31540),B=a(86317),F=a(42668);const M="Bns6t3CfzQaCA4DLRzPQ",_="zGFcpmwFVhJxRDXUXoXA",U="_FLyhB96W9W0msGYNWUl",T="Si5iVyGLDY7mGWH_U2wA",D="HLBtD6mJyIB9EeOzDtXE",L="DRO0ur1WXqpK9BelywtE",O="vtlBEOtYFwv1cxC32ccc",z="Pq_DZj9ECxwTsK8pBxe0",V="bu7LVUNyDPF_FcrKMv74",W="bYP2npsc_CeChpMGcr6g",H="Ux7aVnDYlwojS4AmkSLg";var q=a(86070);let G=function(e){return e.SMALL="small",e.LARGE="large",e}({});const K=({images:e,title:t,contentRating:a,duration:i,moreButton:s,onClick:n,onContextMenu:r,onTouchStart:o,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:m,label:h,isPlayable:g=!0})=>{const x=u===G.LARGE?"medium":"small",{badges:y}=(0,F.b)({contentRating:a});return(0,q.jsxs)("div",{"data-testid":"trailer-component",className:p()(M,m,{[_]:d}),onContextMenu:r,onTouchStart:o,onTouchEnd:l,children:[(0,q.jsxs)("div",{className:T,children:[(0,q.jsxs)("div",{className:z,children:[(0,q.jsx)(R.b,{type:B.c.EPISODE,title:t,className:p()(O,{[H]:u===G.SMALL,[W]:u===G.LARGE}),size:S.Qe.SIZE_56,images:e,shape:R.u.ROUNDED_CORNERS}),(0,q.jsx)("div",{className:V,children:(0,q.jsx)(w.R,{"data-testid":"trailer-play-button",version:P.H4.transparent,size:x,isPlaying:c,onClick:n,disabled:!g})})]}),(0,q.jsxs)("div",{children:[(0,q.jsx)("div",{className:D,children:(0,q.jsx)(C.Z,{dir:"auto",className:U,variant:"balladBold",children:t})}),(0,q.jsxs)("div",{className:L,children:[(0,q.jsx)(I.v,{text:h}),y.explicit&&(0,q.jsx)(E.g,{}),y.nineteen&&(0,q.jsx)(N.q,{}),(0,q.jsx)(C.Z,{dir:"auto",variant:"mesto",children:(0,q.jsx)(A.d,{durationMs:i})})]})]})]}),s]})};var $=a(58081),X=a(45292),Y=a(4139);const Q=({htmlDescription:e,narrators:t,spec:a,isPreRelease:s})=>{const n=(0,X.W)(),r=(0,Y.s)(),o=(0,i.useCallback)((e=>{n({intent:"expand-description",type:"click"});const t=a.seeMoreButtonFactory();r.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[r,n,a]);return(0,q.jsxs)(q.Fragment,{children:[t.length?(0,q.jsx)(g.E,{as:"p",variant:"bodyMedium",children:c.Ru.get("web-player.audiobooks.narratedByX",t.join(c.Ru.getSeparator()))}):null,e&&(0,q.jsx)($.N,{maxLines:4,content:e,htmlContent:e,onExpanded:o,isOpen:s||null})]})};var J=a(70548),Z=a(99842),ee=a(13948),te=a(2304),ae=a(39314),ie=a(39503),se=a(1687),ne=a(85137),re=a(58084),oe=a(34432),le=a(19845);const ce="myIGgR3zdb9nFuJ1pXYl",de="e74TmRHu_W1yZHspTBmR",ue="rrcjfInomKt1lXRDRdR8",me="Wj9mxFJDtPdiMcUtS1te",pe="SCwESjClY3m_9JlV2L7S",he="Yoa_yG2jhELT4w9wJpHf",ge="xsw253oiwmIAafVfjl1J",xe="JPqnsg5dgBTzsEoClLmD",ye="bhuRgaz03VXMf0mOG3Q2",be="GP_qgmZlmL0CJ9r22AD9",ve="bilV2VquzmEnhV4d97Tc",je="caqddwmUJf4ix6GI84NX",fe=({explicit:e,durationMs:t,publishDate:a,preReleaseEndDateTime:i,isPreRelease:s,uri:n,isPlaying:r})=>{const o=(0,oe.p)(n),{isMarkedAsFinished:l}=(0,re.z)(n);let d;return s&&i?d=c.Ru.get("web-player.prerelease.releases_on",{date:c.Ru.formatDate(i)}):!s&&a&&(d=c.Ru.formatDate(a)),(0,q.jsxs)("div",{className:ye,children:[e&&(0,q.jsx)(E.g,{className:je}),(0,q.jsxs)("div",{className:be,children:[d&&(0,q.jsx)(g.E,{variant:"bodySmall",className:ve,children:d}),t?(0,q.jsxs)(q.Fragment,{children:[o?.playPositionMilliseconds?(0,q.jsx)(g.E,{variant:"bodySmall",className:ve,children:(0,q.jsx)(A.d,{durationMs:t})}):null,(0,q.jsx)(le.j,{isPlaying:r,fullyPlayed:l,durationMs:t,position:o?.playPositionMilliseconds})]}):null]})]})};var ke=a(74946),Ce=a(10081);const Pe=(0,i.createContext)(null),we=({children:e,isPreRelease:t})=>{const[a,s]=(0,i.useState)(!t),n=(0,i.useMemo)((()=>({isPreRelease:t,isCountdownFinished:a,setCountdownFinished:()=>s(!0)})),[t,a,s]);return(0,q.jsx)(Pe.Provider,{value:n,children:e})};function Re(){const e=(0,i.useContext)(Pe);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var Se=a(89025);const Ee="nz8Wc80RAtdAb3yU9FxM",Ne=({uri:e})=>{const{isCountdownFinished:t}=Re(),{invalidateCache:a}=(0,Se.W)(e);return(0,q.jsx)("div",{className:Ee,children:t?(0,q.jsx)(ke.$,{onClick:a,children:c.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,q.jsx)(Ce.v,{uri:e,isBook:!0})})};var Ie=a(13799),Ae=a(11892),Be=a(52891),Fe=a(45866),Me=a(31739);const _e="NQAShVY0o7RQ2bCTDSkw";function Ue({uri:e,price:t,size:a,spec:i,logger:s,onPlayback:n}){const{enqueueSnackbar:r}=(0,Be.d)(),o=(0,Fe.V)(),l=0===t?.finalPrice?.amount,d=l?i.getButtonFactory({uri:e}):i.buyButtonFactory({uri:e}),u=(0,Ae.YQ)((async()=>{if(s.logInteraction(d.hitShowPaywall({paywalledItem:e})),o)n();else{try{t?.finalPrice?await(0,Me.S)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):r(c.Ru.get("error.generic"))}catch(e){r(c.Ru.get("error.generic"))}n()}}),2e3,{leading:!0,trailing:!1});return(0,q.jsx)(ke.$,{size:a,className:_e,style:{flexShrink:0},onClick:u,children:l?c.Ru.get("web-player.audiobooks.buyFree"):c.Ru.get("web-player.audiobooks.buy")})}const Te=({uri:e,isLocked:t,price:a,isPlaying:i,isConsumptionCapped:s,onPlayback:n,logger:r,spec:o,size:l="large"})=>t&&!s?(0,q.jsx)(Ue,{size:l,uri:e,price:a,logger:r,spec:o,onPlayback:n}):(0,q.jsx)(Ie.D,{size:l,isPlaying:i,uri:e,onClick:n});var De=a(58602),Le=a(3782),Oe=a(11244),ze=a(61535),Ve=a(60285),We=a(78487);const He="8px",qe=i.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:s,togglePlay:n,isLocked:r,consumptionCapExplanation:o,price:l,spec:d,isExplicit:u,publishDate:m,preReleaseEndDateTime:p,duration:g}){const[x,y]=(0,ze.A)(t),v=!(0,Oe.n)(),{isPreRelease:f}=Re(),k=(0,h.wA)(),C=(0,X.W)(),P=(0,Y.s)(),w=(0,De.d$)(),{spec:R,logger:S}=(0,We.r)(J.e,{data:{uri:t}});(0,i.useEffect)((()=>{w&&S.logImpression(R.impression())}),[w,S,R]);const E=(0,i.useCallback)((()=>{C({targetUri:t,intent:x?"unsave":"save",type:"click"});const e=d.saveToLibraryButtonFactory();x?P.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):(P.logInteraction(e.hitFollow({itemToBeFollowed:t})),w&&S.logInteraction(R.hitFollow({itemToBeFollowed:t}))),y(!x)}),[C,t,x,d,y,P,w,S,R]),N=(0,i.useCallback)(((e,a)=>{const i=d.downloadButtonFactory();o?k((0,b._3)(o)):a===Ve.NV.ADD?P.logInteraction(i.hitDownload({itemToDownload:t})):a===Ve.NV.REMOVE?P.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===Ve.NV.NO_PERMISSION&&P.logInteraction(i.hitUiReveal())}),[o,k,P,d,t]),I=(0,i.useCallback)((()=>{const e=d.contextButtonFactory().hitUiReveal();P.logInteraction(e)}),[P,d]),A=(0,Le.j)(),B=!!o,F=!r&&!B;return(0,q.jsxs)(Z.E,{backgroundColor:e,style:{"--action-bar-padding-bottom":He},children:[(0,q.jsx)(ee.S,{testId:"book-action-bar-metadata",children:(0,q.jsx)(fe,{explicit:u,publishDate:m,preReleaseEndDateTime:p,durationMs:g,isPreRelease:f,uri:t,isPlaying:s})}),(0,q.jsxs)(ee.S,{children:[f&&(0,q.jsx)(Ne,{uri:t}),!f&&(0,q.jsx)(Te,{uri:t,isLocked:r,isConsumptionCapped:B,price:l,isPlaying:s,onPlayback:n,logger:P,spec:d,size:A}),!f&&(0,q.jsx)(ne.e,{children:(0,q.jsx)(te.M,{isAdded:x,onClick:E,disabled:v,size:A,isAudiobook:!0,condensed:!0})},"follow-button"),(0,q.jsx)(ae.I,{uri:t,onClick:N,size:A,canDownload:F}),(0,q.jsx)(j.b,{menu:(0,q.jsx)(se.p,{uri:t,isPreRelease:f}),children:(0,q.jsx)(ie.e,{label:c.Ru.get("more.label.context",a),onClick:I,size:A})})]})]})}));var Ge=a(93720),Ke=a(45878),$e=a(57237),Xe=a(59092),Ye=a(36041),Qe=a(16373),Je=a(99168),Ze=a(90436),et=a(87188),tt=a(47892),at=a(37473),it=a(27275),st=a(69798),nt=a(57968);const rt=i.memo((function({coverArt:e,name:t,authorName:a,uri:i,backgroundColor:s,isPlaying:n,togglePlay:r,isLocked:o,price:l,isConsumptionCapped:d,logger:u,spec:m,preReleaseEndDateTime:p}){const h=(0,nt.y)(),g=h===st.E.SMALL||h===st.E.XSMALL,{isPreRelease:x,setCountdownFinished:y}=Re(),b=x&&g,v=(0,q.jsx)(se.p,{uri:i});return(0,q.jsxs)(Xe.z,{backgroundColor:s,size:x?Xe.K.XLARGE:Xe.K.DEFAULT,children:[(0,q.jsxs)(Je.h,{children:[x&&(0,q.jsx)(Ne,{uri:i}),!x&&(0,q.jsx)(Te,{uri:i,isLocked:o,price:l,isPlaying:n,isConsumptionCapped:d,onPlayback:r,logger:u,spec:m,size:"medium"}),(0,q.jsx)(Ge.h,{menu:v,children:(0,q.jsx)(Ze.X,{text:t,dragUri:i,dragLabel:t})})]}),!b&&(0,q.jsx)(Ge.h,{menu:v,children:(0,q.jsx)(Ye.K,{images:e,name:t,dragUri:i,dragMimeType:$e.fl.AUDIOBOOKS,shape:R.u.SQUARE})}),(0,q.jsxs)(Qe.Y,{children:[(0,q.jsx)(tt.B,{children:c.Ru.get("web-player.audiobooks.audiobook")}),(0,q.jsx)(Ge.h,{menu:v,children:(0,q.jsx)(it.mm,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:it.tw,dragUri:i,dragMimeType:$e.fl.AUDIOBOOKS,dragLabel:t,children:t})}),x?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(et.t,{isPreRelease:!0,author:a}),p&&(0,q.jsx)(Ke.G,{targetDate:p,images:b?e:[],imageTitle:t,onComplete:y})]}):(0,q.jsx)(at.g,{children:a})]})]})})),ot="pwjwUMaZVoJ0wBcQlIDf",lt=i.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,q.jsxs)("div",{className:ot,children:[(0,q.jsx)(g.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:c.Ru.get("audiobook.freePriceDescription")}),(0,q.jsx)(g.E,{variant:"bodySmall",children:c.Ru.get("audiobook.freePriceExplanation")})]}):(0,q.jsxs)("div",{className:ot,children:[(0,q.jsx)(g.E,{variant:"titleSmall",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,q.jsx)(g.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:c.Ru.get("web-player.audiobooks.retailPrice",(0,q.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var ct=a(74493);var dt=a(71115),ut=a(19019);const mt="zh_eG8LWfdbVLacLrMEF",pt="qABKHTHkEdmK0fa7KmIv",ht="FgvV0kPK4h_EmOhrpT2d",gt="oiFRsQXb5nSBVhMVOLLG",xt="jzZ2lXuiIoAWDd7iOmJI",yt="Hv2cy05G19OhWRK4OHPv",bt="NzouBpMYjqaK9b0f9dUk",vt="FlMjXsCakgb_O4r1A5sA",jt=i.memo((function({name:e,duration:t,uri:a,bookName:s,usePlayContextItem:r,isChapterLocked:o,isPlayable:l,resumePositionMs:d,isFullyPlayed:u,isExplicit:m,is19PlusOnly:x,spec:y,index:k,consumptionCapExplanation:C}){const P=(0,i.useRef)(d),{isPlaying:R,togglePlay:S,isActive:I}=r({uri:a}),A=(0,Y.s)(),B=(0,Fe.V)(),F=(0,h.wA)(),M=(0,n.NC)(ut.HEU,{loadingValue:!1}),{position:_,isFullyPlayed:U}=((e,t,a,s)=>{const n=(0,i.useRef)(null),[r,o]=(0,i.useState)(s),[l]=(0,ct.S)(1e4,(t=>t?.item?.uri===e));return(0,i.useEffect)((()=>{a&&(n.current=l)}),[a,l]),(0,i.useEffect)((()=>{!a&&n.current&&t.milliseconds<=n.current+1e4&&o(!0)}),[a,t.milliseconds]),(0,i.useEffect)((()=>{o(s)}),[s]),{position:a?l:null,isFullyPlayed:r}})(a,t,R,u);null!==_&&(P.current=_);const T=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),D=(0,X.W)(),L=(0,i.useCallback)((e=>{if(T(e),C&&!B&&M)return void F((0,b._3)(C));const t=y.chapterBlockFactory({position:k,uri:a}).playButtonFactory();if(o)D({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),A.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,dt.$I)({isPlaying:R,isActive:I,spec:t,logger:A,uri:a});S({loggingParams:e})}}),[C,F,k,M,I,B,o,R,A,D,y,T,S,a]),O=(0,i.useCallback)((()=>{const e=y.chapterBlockFactory({position:k,uri:a}).secondaryHitUiReveal();A.logInteraction(e)}),[k,A,y,a]),z=(0,i.useCallback)((e=>{T(e);const t=y.chapterBlockFactory({position:k,uri:a}).contextMenuFactory().hitUiReveal();A.logInteraction(t)}),[k,A,y,T,a]),V=(0,i.useMemo)((()=>!(o||C)),[C,o]),W=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("hr",{className:ht,"aria-hidden":!0}),(0,q.jsxs)("div",{className:mt,onDoubleClick:e=>{D({targetUri:a,intent:"play",type:"double-click"}),L(e)},children:[(0,q.jsx)(g.E,{as:"h2",variant:"bodyMediumBold",className:p()(yt,{[pt]:I}),semanticColor:"textBase",children:e}),(0,q.jsxs)("div",{className:bt,children:[(0,q.jsx)(w.R,{size:"small",version:w.H.secondary,onClick:L,isPlaying:R,ariaPlayLabel:c.Ru.get("tracklist.a11y.play",e,s),ariaPauseLabel:c.Ru.get("tracklist.a11y.pause",e,s),locked:o&&!C,disabled:!l&&!(o||C)}),m&&(0,q.jsx)(E.g,{fullText:!0}),x&&(0,q.jsx)(N.q,{size:16}),(0,q.jsx)("div",{className:vt,children:(0,q.jsx)(le.j,{isPlaying:R,fullyPlayed:U,durationMs:t.milliseconds,resumePositionMs:P.current,position:_??void 0})})]}),V?(0,q.jsx)(j.b,{menu:(0,q.jsx)(f.r,{uri:a}),children:(0,q.jsx)(v.e,{className:xt,size:v.M.sm,label:c.Ru.get("more.label.context",e),onClick:z,condensedAll:!0})}):null]})]});return V?(0,q.jsx)(Ge.h,{menu:(0,q.jsx)(f.r,{uri:a}),onShow:O,children:(0,q.jsx)("div",{className:gt,children:W})}):(0,q.jsx)("div",{className:gt,children:W})}));var ft=a(5052),kt=a(7008),Ct=a(49151),Pt=a(23090);const wt="XzRW0BrBLoXKWET5f8m4",Rt="ooqITYCPJKua4e5yv8_9",St="zN8lTnSnAUSRAMPb7XYV",Et="llVyicNXe8z0QAnoRur1",Nt="fCrjgF2UgDUWjtqWls4Q",It="CLnKy_BRVtIluLfBWy5t",At="RZa0qnXymlZCoGOdE03d",Bt="RFXE57hUzWvvK4_7GX13",Ft="ALQqkJiR2lZOSYvhHesh",Mt="BQwrI2BbKK4n451iu2QC",_t="VYLq_YaQVNISHPQOu2af",Ut=i.memo((function({name:e,duration:t,uri:a,bookName:s,usePlayContextItem:r,isChapterLocked:o,isPlayable:l,resumePositionMs:d,isFullyPlayed:u,isExplicit:m,is19PlusOnly:x,spec:y,index:k,consumptionCapExplanation:C}){const P=(0,i.useRef)(d),{isPlaying:R,togglePlay:S,isActive:I}=r({uri:a}),B=(0,Y.s)(),F=(0,Fe.V)(),M=(0,h.wA)(),_=(0,n.NC)(ut.HEU,{loadingValue:!1}),U=(0,Ct.o)((e=>{if(e?.item?.uri===a){const t=(0,Pt.s)(e)??0;return P.current=t,t}return 0})),T=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),D=(0,X.W)(),L=(0,i.useCallback)((e=>{if(T(e),C&&!F&&_)return void M((0,b._3)(C));const t=y.chapterBlockFactory({position:k,uri:a}).playButtonFactory();if(o)D({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),B.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,dt.$I)({isPlaying:R,isActive:I,spec:t,logger:B,uri:a});S({loggingParams:e})}}),[C,M,k,_,I,F,o,R,B,D,y,T,S,a]),O=(0,i.useCallback)((()=>{const e=y.chapterBlockFactory({position:k,uri:a}).secondaryHitUiReveal();B.logInteraction(e)}),[k,B,y,a]),z=(0,i.useCallback)((e=>{T(e);const t=y.chapterBlockFactory({position:k,uri:a}).contextMenuFactory().hitUiReveal();B.logInteraction(t)}),[k,B,y,T,a]),V=!(o||C),W=(0,q.jsx)(ft.d,{className:p()({[Rt]:I}),children:e}),H=(0,q.jsxs)("div",{className:It,children:[m&&(0,q.jsx)(E.g,{fullText:!0}),x&&(0,q.jsx)(N.q,{size:16}),(0,q.jsxs)("div",{className:At,children:[P.current?(0,q.jsx)(g.E,{variant:"bodySmall",className:_t,children:(0,q.jsx)(A.d,{durationMs:t.milliseconds})}):null,(0,q.jsx)(le.j,{isPlaying:R,fullyPlayed:u,durationMs:t.milliseconds,resumePositionMs:P.current,position:R?U:void 0})]})]}),G=(0,q.jsxs)("div",{className:Ft,children:[(0,q.jsx)("div",{className:Mt,children:V?(0,q.jsx)(j.b,{menu:(0,q.jsx)(f.r,{uri:a}),children:(0,q.jsx)(v.e,{className:Nt,size:v.M.xs,label:c.Ru.get("more.label.context",e),onClick:z})}):null}),(0,q.jsx)("div",{className:Bt,children:(0,q.jsx)(w.R,{size:"small",version:w.H.secondary,onClick:L,isPlaying:R,ariaPlayLabel:c.Ru.get("tracklist.a11y.play",e,s),ariaPauseLabel:c.Ru.get("tracklist.a11y.pause",e,s),locked:o&&!C,disabled:!l&&!(o||C)})})]}),K=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("hr",{className:St,"aria-hidden":!0}),(0,q.jsx)(kt.v,{id:`chapter-${k}`,title:W,body:H,footer:G,onDoubleClick:e=>{D({targetUri:a,intent:"play",type:"double-click"}),L(e)},className:wt})]});return V?(0,q.jsx)(Ge.h,{menu:(0,q.jsx)(f.r,{uri:a}),onShow:O,children:(0,q.jsx)("div",{className:Et,children:K})}):(0,q.jsx)("div",{className:Et,children:K})}));var Tt=a(88869),Dt=a(63980);var Lt=a(88593);const Ot=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:s,usePlayContextItem:r,spec:o,consumptionCapExplanation:l})=>{const c=function(e,t){const a=(0,Dt.T)();return(0,i.useCallback)((async(i,s)=>a.getBookContents(e,{offset:i,limit:s,doRefreshSubscription:t})),[t,a,e])}(e,s),d=(0,i.useRef)(!1),u=(0,i.useRef)(0),m=(0,n.NC)(ut.cKd,{loadingValue:!1}),{isMarkedAsFinished:p}=(0,re.z)(e),[h,g]=(0,i.useState)([]),x=(0,i.useCallback)((e=>e?.uri===a),[a]),y=(0,i.useCallback)((e=>(e=>null!==e)(e)&&!x(e)),[x]),b=(0,i.useCallback)((()=>{c&&(d.current||null===u.current||(d.current=!0,c(u.current,50).then((e=>{d.current=!1,u.current=e.nextOffset,e.items.length>0&&g((t=>t.concat(e.items.filter(y))))}))))}),[c,y]);return(0,i.useEffect)((()=>{u.current=0,g([])}),[e]),(0,q.jsx)("ul",{children:(0,q.jsx)(Tt._,{onReachBottom:b,triggerOnInitialLoad:!0,children:h.map(((e,a)=>{const{name:i,duration:s,uri:n,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:u},isExplicit:h,is19PlusOnly:g}=e,x=u===Lt._w.Completed||p,y=function(e){return!e.playability?.playable&&(e.playability?.reason===Lt.Uk.PaymentRequired||e.playability?.reason===Lt.Uk.Anonymous)}(e);return m?(0,q.jsx)(Ut,{name:i,duration:s,uri:n,bookName:t,usePlayContextItem:r,isPlayable:c,isChapterLocked:y,consumptionCapExplanation:l,resumePositionMs:d,isFullyPlayed:x,isExplicit:h,is19PlusOnly:g,spec:o,index:a},n):(0,q.jsx)(jt,{name:i,duration:s,uri:n,bookName:t,usePlayContextItem:r,isPlayable:c,isChapterLocked:y,consumptionCapExplanation:l,resumePositionMs:d,isFullyPlayed:x,isExplicit:h,is19PlusOnly:g,spec:o,index:a},n)}))})})};var zt=a(32860),Vt=a(9395),Wt=a(12074),Ht=a(42247),qt=a(99396);const Gt="_yl4tOZxcpoUt28k6B8I",Kt="lcJflizNrSwDM9yPNk6h",$t="ret7iHkCxcJvsZU14oPY",Xt=({rating:e,className:t,onClick:a})=>{if(!e)return null;const i=Boolean(e.rating?.rating);return(0,q.jsxs)("button",{className:p()(Gt,t),onClick:a,children:[(0,q.jsx)(C.Z,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?c.Ru.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):c.Ru.get("web-player.audiobooks.noRating")}),i?(0,q.jsx)(Ht.j,{iconSize:16,className:p()(Kt)}):(0,q.jsx)(qt.a,{iconSize:16,className:p()(Kt)}),e.averageRating?.showAverage&&(0,q.jsxs)(C.Z,{variant:"mesto",className:p()($t),children:["(",c.Ru.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var Yt=a(4272),Qt=a(98882),Jt=a(70279),Zt=a(37708);const ea={shuffle:!1,repeat:Jt.p.REPEAT_NONE},ta=i.memo((function({metadata:e}){const{uri:t,coverArt:a,name:r,htmlDescriptionPlain:l,authorName:u,sample:m,narrators:C,rating:P,isExplicit:w,duration:R,copyrights:S,publishDate:E,price:N,isLocked:I,consumptionCapExplanation:A,signifierText:F,resumeEpisodeLink:M,topics:_,isPreRelease:U,preReleaseEndDateTime:T}=e,{search:D}=(0,s.zy)(),L=!!new URLSearchParams(D).get("isUnlockingAudiobook"),O=!(!(0,Yt.Z)(L)||L),z=(0,Fe.V)(),V=(0,Vt.H)(a[0]?.url),W=(0,h.wA)(),H=(0,X.W)(),$=(0,n.NC)(ut.HEU,{loadingValue:!1}),{spec:Y,logger:J}=(0,We.r)(x.U,{data:{uri:t,identifier:o.$h.PODCAST_SHOW_AUDIOBOOK}}),{spec:Z,logger:ee}=(0,We.r)(x.U,{data:{uri:t,identifier:o.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:te,logger:ae}=(0,We.r)(y.Y,{data:{uri:t,identifier:o.$h.PODCAST_SHOW_AUDIOBOOK}}),ie=(0,i.useMemo)((()=>Y.actionBarFactory()),[Y]),se=(0,i.useMemo)((()=>Z.aboutSectionFactory()),[Z]),ne=(0,i.useMemo)((()=>Y.chapterListFactory()),[Y]);(0,i.useEffect)((()=>{H({type:"view",intent:"audiobook"})}),[H]),(0,i.useEffect)((()=>{I&&ae.logImpression(te.impression())}),[te,ae,I]);const{isPlaying:re,togglePlay:oe,usePlayContextItem:le,isActive:ye,triggerPlay:be}=(0,Qt.P)({uri:t},{featureIdentifier:"audiobook"},ea),{togglePlay:ve,isPlaying:je,isActive:fe}=(0,Qt.P)({uri:m?.uri??"",pages:[{items:[{uri:m?.uri??"",uid:m?.uri??"",type:B.c.CHAPTER,provider:null,metadata:U?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},ea),ke=re&&!je,Ce=ye&&!fe,Pe=(0,i.useCallback)((async()=>{const e=Y.actionBarFactory().playButtonFactory();if(A&&!z&&$)return J.logInteraction(e.hitShowPaywall({paywalledItem:t})),void W((0,b._3)(A));if(!I||z)if(z)oe();else{const a=(0,dt.$I)({isPlaying:ke,isActive:Ce,spec:e,logger:J,uri:t});Ce?oe({loggingParams:a}):be({skipTo:M?{uri:M}:void 0,loggingParams:a})}}),[Y,A,z,$,I,J,t,W,oe,ke,Ce,be,M]),Re=(0,i.useCallback)((()=>{m?.uri&&(H({targetUri:m.uri,intent:je?"play":"pause",type:"click"}),ve())}),[je,H,ve,m?.uri]),Se=(0,i.useCallback)((()=>{const a=se.ratingButtonFactory().hitUiReveal();ee.logInteraction(a),W((0,b.eH)(t,e))}),[se,W,e,ee,t]),Ee=(0,nt.y)(),Ne=I&&!A&&N;return(0,q.jsx)("section",{className:ce,children:(0,q.jsxs)(we,{isPreRelease:U,children:[(0,q.jsx)(d.Q,{children:(0,Zt.hV)({showOrAudiobookName:r,type:"Audiobook"})}),(0,q.jsx)(zt.c,{artistOrShow:u,title:r,uri:t,entityType:zt.p.AUDIOBOOK}),(0,q.jsx)(rt,{name:r,authorName:u,uri:t,coverArt:a,backgroundColor:V,togglePlay:Pe,isPlaying:ke,isLocked:I,isConsumptionCapped:!!A,price:N,logger:J,spec:Y.actionBarFactory(),preReleaseEndDateTime:T}),(0,q.jsx)(qe,{name:r,backgroundColor:V,uri:t,togglePlay:Pe,isPlaying:ke,isLocked:I,consumptionCapExplanation:A,isExplicit:w,duration:R,publishDate:E,preReleaseEndDateTime:T,price:N,spec:ie}),(0,q.jsxs)("div",{className:p()(de,"contentSpacing",{[ue]:Ee===st.E.LARGE}),children:[(0,q.jsxs)("div",{className:me,children:[(0,q.jsxs)("div",{className:xe,children:[F&&(0,q.jsx)(g.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:F}),!F&&Ne&&(0,q.jsx)(lt,{price:N})]}),(0,q.jsx)(Q,{htmlDescription:l,narrators:C,spec:se,isPreRelease:U??!1})]}),(0,q.jsxs)("div",{className:pe,children:[m?.isPlayable&&(0,q.jsx)(K,{label:c.Ru.get("audiobook.page.sample"),images:m.coverArt,title:m.name,duration:m.duration.milliseconds,moreButton:I?null:(0,q.jsx)(j.b,{menu:(0,q.jsx)(f.r,{uri:m.uri}),children:(0,q.jsx)(v.e,{})}),onClick:Re,isPlaying:je,isActive:fe,size:G.LARGE,contentRating:m.contentRating?.label,isPlayable:m.isPlayable}),!U&&(0,q.jsx)("div",{className:he,children:(0,q.jsx)(Xt,{rating:P,onClick:Se})}),_.length>0&&(0,q.jsx)(k.N,{topics:_})]}),(0,q.jsxs)("div",{className:ge,children:[!U&&(0,q.jsx)(Ot,{bookUri:t,bookName:r,sampleUri:m?.uri,isFinishedUnlockingJourney:O,usePlayContextItem:le,spec:ne,consumptionCapExplanation:A},`${t}-${I}-${!!A}`),(0,q.jsx)(Wt.Z,{copyrights:S})]})]})]})})}));var aa=a(91341),ia=a(33e3),sa=a(47690);const na=({uri:e,name:t,backgroundColor:a,spec:s})=>{const n=(0,Y.s)(),r=(0,X.W)(),o=!(0,Oe.n)(),[l,d]=(0,ze.A)(e),u=(0,De.d$)(),{spec:m,logger:p}=(0,We.r)(J.e,{data:{uri:e}});(0,i.useEffect)((()=>{u&&p.logImpression(m.impression())}),[u,p,m]);const h=(0,i.useCallback)((()=>{r({targetUri:e,intent:l?"unsave":"save",type:"click"});const t=s.followButtonFactory();n.logInteraction(l?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),!l&&u&&p.logInteraction(m.hitFollow({itemToBeFollowed:e})),d(!l)}),[r,e,l,s,n,d,u,p,m]),g=(0,i.useCallback)((()=>{n.logInteraction(s.contextButtonFactory().hitUiReveal())}),[n,s]),x=(0,Le.j)();return(0,q.jsx)(Z.E,{backgroundColor:a,children:(0,q.jsxs)(ee.S,{children:[(0,q.jsx)(ne.e,{children:(0,q.jsx)(sa.W,{isFollowing:l,onClick:h,disabled:o})},"follow-button"),(0,q.jsx)(j.b,{menu:(0,q.jsx)(ia.H,{uri:e}),onShow:g,children:(0,q.jsx)(ie.e,{label:c.Ru.get("more.label.context",t),size:x})})]})})};var ra=a(71963),oa=a(43345),la=a(78309),ca=a(69600),da=a(13248),ua=a(9083),ma=a(9173),pa=a(91360),ha=a(20769);const ga="BknvXMyUnN3fQCz8mvLI",xa="slMInsl3HL9_02zHT22R",ya="40px",ba=({leavebehinds:e})=>{let t;return 1===e.length&&(t=(0,q.jsx)(g.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser})),2===e.length&&(t=c.Ru.get("podcast-ads.recent_ads_just_two",(0,q.jsx)(g.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,q.jsx)(g.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),e.length>2&&(t=c.Ru.get("podcast-ads.recent_ads_more_than_two",(0,q.jsx)(g.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,q.jsx)(g.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),(0,q.jsxs)(g.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[c.Ru.get("podcast-ads.recent_ads_from"),t]})},va=({leavebehinds:e,uri:t,surface:a})=>{const s=(0,ha.vh)();if((0,i.useEffect)((()=>{t&&e.length>0&&s.send((0,ca.x)({leavebehind_request_id:e[0].requestId,event:"event_viewed",event_reason:`viewed_on_${(0,da.Fh)(a).toLowerCase()}`,surface:(0,da.Fh)(a),uri:t}))}),[s,e,t,a]),0===e.length)return null;const n=(0,l.o_)(t)?.id,r=1===e.length?e[0].clickthroughUrl:(0,ua.q)(n),o=ma.Qd,d=e.length>o,u=e.length-(o-1),m=e.slice(0,d?o-1:o);return(0,q.jsx)(pa.N,{to:r,pathname:e.length>1?r:void 0,state:{uri:t},className:xa,onClick:()=>s.send((0,ca.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,da.Fh)(a),uri:t})),"data-testid":"show-leavebehinds-container",children:(0,q.jsx)(kt.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,q.jsxs)("div",{className:ga,"data-testid":"show-leavebehinds-logos-container",children:[m.map((e=>(0,q.jsx)(oa.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:ya,imageWidth:ya},e.adId))),d?(0,q.jsx)(ja,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:ya,borderRadius:"4px",padding:"6px",children:(0,q.jsx)(g.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:c.Ru.get("podcast-ads.show_more_indicator",u)})}):null]}),body:(0,q.jsx)(ba,{leavebehinds:e})})})};var ja=(0,ra.Ay)(la.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),fa=a(34390);const ka=da.ui.SHOW_PAGE;function Ca({uri:e}){const{data:t,error:a,getLeavebehinds:s}=(0,fa.A)({surface:ka,uri:e});(0,i.useEffect)((()=>{s()}),[s]);const n=(0,i.useMemo)((()=>t?(0,ma.iT)(t,e):[]),[t?.requestId]);return a||t?.leavebehindAds&&t?.leavebehindAds?.length<1?null:(0,q.jsx)(va,{leavebehinds:n,uri:e,surface:ka})}var Pa=a(12953),wa=a(50565),Ra=a(21560),Sa=a(90677),Ea=a(90174),Na=a(92301),Ia=a(60122),Aa=a(33023);const Ba=({className:e,title:t,uri:a})=>{const{data:i}=(0,Sa.v)({uri:a}),s=i?.seoRecommendedPodcast.totalCount,n=i?.seoRecommendedPodcast.items,r=function(e){return(e||[]).filter((e=>(0,Na.K)(e.data)))}(n);if(0===s)return null;const o=(0,l.o_)(a)?.id;return(0,q.jsx)(Ia.$,{className:e,title:t,seeAllLabel:c.Ru.get("shelf.see-all"),total:s,alwaysShowSeeAll:!0,seeAllUri:`spotify:app:show:${o}:more-like-this`,children:r?.map((({data:e},t)=>(0,q.jsx)(wa.o,{uri:e.uri,name:e.name,images:e.coverArt?.sources||[],publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,Aa.w)(e.mediaType),index:t},e.uri)))})},Fa=e=>{const t=(0,Ea.D)({entityType:B.c.SHOW,componentType:"shelf",uri:e.uri});return(0,q.jsx)(Ra.s,{onError:t,children:(0,q.jsx)(Ba,{...e})})};var Ma=a(52952),_a=a(27338),Ua=a(20633),Ta=a(35951);const Da=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),La=i.memo((function({uri:e,children:t}){return(0,q.jsx)(Ta.E,{uri:e,defaultState:[],sortContext:Da,localStorageKey:"showFilterParams-v2",children:t})}));var Oa=a(99347);const za={field:Oa.WY.PUBLISH_DATE,order:Oa.AX.DESC},Va={field:Oa.WY.PUBLISH_DATE,order:Oa.AX.ASC},Wa=Va,Ha={episodic:za,sequential:Va,recent:za};function qa(){return new Map([[za,{key:"newest-to-oldest",value:c.Ru.get("shows.sort.newest-to-oldest")}],[Va,{key:"oldest-to-newest",value:c.Ru.get("shows.sort.oldest-to-newest")}]])}function Ga(e){return Ha[e]}const Ka=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:Ga("recent")}),$a=e=>{const t=qa();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},Xa=i.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,q.jsx)(Ta.E,{uri:e,defaultState:a,sortContext:Ka,localStorageKey:"showSortParam",validator:$a,children:t})}));var Ya=a(98812),Qa=a(78330),Ja=a(88308);const Za="ysJC093hc_2ixGCy40_s",ei="mJP3Bamg3hN7S0p7XKfN",ti="clPqCj1L_KSfoVuTuP6x",ai="vqQmhCMZq7eUtTV7YYOQ",ii={totalCount:0,nextOffset:0,items:[]},si=i.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,i.useContext)(Ka),{sortState:s}=(0,i.useContext)(Da),n=function(e,t,a){const i=(0,Dt.T)(),{canSort:s}=i.capabilities,n=(0,Ja.U0)((async(s,n)=>i.getContents(e,{offset:s,limit:n,sort:t,filters:a})),[i,e,t,a]),r=(0,Ja.U0)((async(t,a)=>i.getContents(e,{offset:t,limit:a})),[i,e]);return s?n:r}(e.uri,a,s),[r,o]=(0,i.useState)(ii),l=(0,i.useRef)(!1),d=(0,i.useRef)(0),u=(0,Ya.c)(),m=u?6:50,p=u&&null!==d.current,h=(0,i.useCallback)(((e=!1)=>{if(!n)return;const t=d.current;null!==t&&!l.current&&m>0&&(l.current=!0,n(t,m).then((a=>{o((i=>{const s=e?[]:[...i.items];return s.splice(t,a.items.length,...a.items),d.current=a.nextOffset,{...a,items:s}})),l.current=!1})))}),[n,m]);return(0,i.useEffect)((()=>{o(ii)}),[e.uri]),(0,i.useEffect)((()=>{d.current=0,h(!0)}),[h]),(0,q.jsxs)(Qa.pZ,{value:"track-list",children:[(0,q.jsx)(Tt._,{onReachBottom:u?void 0:h,triggerOnInitialLoad:!0,children:r.items.map(((a,i)=>a&&(0,q.jsxs)("div",{className:ei,children:[(0,q.jsx)("hr",{className:Za,"aria-hidden":!0}),(0,q.jsx)(Ma.q,{index:i,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${i}`)]},`${i}${a.uri}`)))}),p&&(0,q.jsx)("div",{className:ti,children:(0,q.jsxs)(_a.v,{onClick:()=>{h()},className:ai,children:[(0,q.jsx)(g.E,{variant:"bodySmallBold",children:c.Ru.get("internal-link-recommender.load-more-episodes")}),(0,q.jsx)(Ua.V,{size:"xsmall"})]})})]})}));var ni=a(33396);const ri={field:Oa.K$.ISPLAYED,operator:Oa.uj.EQUALS,value:!1},oi={field:Oa.K$.STARTEDPLAYING,operator:Oa.uj.GREATER_THAN,value:0};const li="all-episodes",ci=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(Da),s=new Map([[ri,{key:"is-played",value:c.Ru.get("shows.filter.unplayed")}],[oi,{key:"started-playing",value:c.Ru.get("shows.filter.in-progress")}]]),n=Array.from(s.values());n.unshift({key:li,value:c.Ru.get("mwp.podcast.all.episodes")});const r=Array.from(s.keys()),o=(0,i.useCallback)((t=>{if(t===li)a([]);else{const e=r.find((e=>s.get(e)?.key===t));e&&a([e])}e()}),[e,a,r,s]);if(!s.size||!r)return null;let l=n[0];const d=Array.from(s.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(l=d[0][1]),(0,q.jsx)(ni.g,{options:n,onSelect:e=>o(e),selected:l,variant:"bodyMediumBold",semanticColor:"textBase",heading:c.Ru.get("drop_down.filter_by")})},di=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(Ka),s=qa(),n=Array.from(s.values()),r=Array.from(s.keys()),o=(0,i.useCallback)((t=>{const i=r.find((e=>s.get(e)?.key===t));i&&a(i),e()}),[r,e,s,a]);if(!s.size||!t)return null;const l=Array.from(s.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!l)return null;const d=s.get(l);return d?(0,q.jsx)(ni.g,{options:n,onSelect:e=>o(e),selected:d,heading:c.Ru.get("drop_down.sort_by")}):null},ui="bOAvdKi0zqyA_S6ThcvF",mi="jVWq1orbpiIK34UFHkFb",pi="GMHh7OED_Nijo4zzSfrb",hi="sNEwCEh44Lapg36PnVFw",gi="OMG3QMzpwer8oWsiJpzs",xi="r0yVSge7A1iSTNfudfyV",yi="yP6EeRtQJeqKq10IsMxn",bi="MIaGJ1KyQ3JLblOjWL19",vi="p8WHC1qBUrwrBwzp_vYY",ji="Uzyuaxpkm_Gwb6jOGbva",fi="TSNj_F4gGzCuxrzx6n98",ki="E4HX0M3aD0MY5dUCKSCb",Ci="CbSqM7wDwoLFnyIo1iKL",Pi="c0h80mSMc3PkNlHX0DYs",wi="SGGetEMTKgQk1aJvG4k9",Ri="ne3ntrWAoMrE6_4A23Mf",Si=({spec:e})=>{const t=(0,Y.s)(),{canSort:a,canFilter:s}=(0,Dt.T)().capabilities,n=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),r=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,q.jsxs)("div",{className:yi,children:[s&&(0,q.jsx)("div",{className:vi,children:(0,q.jsx)(ci,{onFilter:n})}),!s&&(0,q.jsx)(g.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:ji,children:c.Ru.get("mwp.podcast.all.episodes")}),a&&(0,q.jsx)("div",{className:bi,children:(0,q.jsx)(di,{onSort:r})})]})};var Ei=a(84865),Ni=a(66037),Ii=a(98333),Ai=a(72553);const Bi=e=>{switch(e){case Lt.t5.TRAILER:return c.Ru.get("podcasts.next-episode.trailer");case Lt.t5.UP_NEXT:return c.Ru.get("podcasts.next-episode.up-next");case Lt.t5.CONTINUE_LISTENING:return c.Ru.get("podcasts.next-episode.continue-listening");case Lt.t5.FIRST_PUBLISHED:return c.Ru.get("podcasts.next-episode.first-published");case Lt.t5.LATEST_PUBLISHED:return c.Ru.get("podcasts.next-episode.latest-published");default:return}},Fi=({breakpoint:e,metadata:t,spec:a})=>{const{uri:s,trailer:n,topics:o,description:l,htmlDescription:d,rating:u}=t,m=(0,Y.s)(),{spec:x,logger:y}=(0,We.r)(r.R,{data:{uri:s}}),f=(0,i.useMemo)((()=>x.aboutSectionFactory()),[x]),C=(0,i.useMemo)((()=>a.episodeListFactory()),[a]),P=(0,h.wA)(),w=(0,X.W)(),R=(0,Fe.V)(),{sortState:S}=(0,i.useContext)(Da),E=(0,Dt.T)(),N=(0,Ya.c)(),{usePlayContextItem:I}=(0,Qt.P)({uri:s,metadata:{[Ii.W.SORTING_CRITERIA]:E.getPlayerSort(Wa),[Ii.W.FILTERING_PREDICATE]:E.getPlayerFilter(S)}},{featureIdentifier:"show"}),{isActive:A,isPlaying:B,togglePlay:F}=I({uri:n?.uri||""}),M=(0,i.useCallback)((e=>{w({intent:"expand-description",type:"click"});const t=a.aboutSectionFactory().seeMoreButtonFactory(),i=e?t.hitUiReveal():t.hitUiHide();m.logInteraction(i)}),[m,w,a]),_=(0,i.useCallback)(((e,t)=>{const i=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});m.logInteraction(i)}),[m,a]),U=n?{name:n.name,uri:n.uri,audio:{items:n.audio.items.map((e=>({url:e.url})))}}:null,T=(0,Ma.B)(t),D=(0,Ei.C)(U,T),L=(0,i.useCallback)((()=>{n?.uri&&(R?D():(w({targetUri:n.uri,intent:B?"play":"pause",type:"click"}),F()))}),[D,R,B,w,F,n?.uri]),{ref:O,breakpoint:z}=(0,Ni.x)({[st.E.MEDIUM]:0,[st.E.LARGE]:600}),V=o.length>0,W=l||d,H=W||V;return(0,q.jsxs)("div",{className:p()(mi,"contentSpacing",{[pi]:e===st.E.LARGE}),ref:O,children:[(0,q.jsxs)("div",{className:hi,children:[H&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(g.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:ji,children:c.Ru.get("artist.about")}),W&&(0,q.jsx)($.N,{maxLines:4,content:(l||"").trim(),onExpanded:M,htmlContent:d||void 0}),n&&(0,q.jsx)(Ge.h,{menu:(0,q.jsx)(Pa.b,{uri:n.uri,showUri:s,sharingInfo:n.sharingInfo}),children:(0,q.jsx)(K,{label:c.Ru.get("track-trailer"),className:fi,images:n.coverArt,title:n.name,duration:n.duration.milliseconds,moreButton:(0,q.jsx)(j.b,{menu:(0,q.jsx)(Pa.b,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:s}),children:(0,q.jsx)(v.e,{})}),onClick:L,isPlaying:B,isActive:A,size:G.LARGE,contentRating:n.contentRating?.label})}),(0,q.jsxs)("div",{className:Ci,children:[u&&(0,q.jsx)("div",{className:Pi,children:(0,q.jsx)(Xt,{rating:u,onClick:()=>{const e=f.ratingButtonFactory().hitUiReveal();y.logInteraction(e),P((0,b.eH)(s,t))}})}),V&&(0,q.jsx)(k.N,{topics:o,className:wi,onClick:_})]})]}),(0,q.jsx)(Ca,{uri:s})]}),(0,q.jsx)(nt.o.Provider,{value:z,children:(0,q.jsxs)("div",{className:p()(gi,{[xi]:N}),"data-testid":"show-all-episode-list",children:[t.nextBestEpisode&&(0,q.jsx)(Ma.q,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:I,status:Bi(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,q.jsx)(Si,{spec:a}),(0,q.jsx)(Ai.r,{spec:C,children:(0,q.jsx)(si,{showMetadata:t,usePlayContextItem:I})})]})}),(0,q.jsx)(Wt.Z,{copyrights:[]}),N&&(0,q.jsx)(Fa,{title:c.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:s,className:Ri})]})},Mi=i.memo(Fi);var _i=a(79216),Ui=a(33859);const Ti=({reason:e})=>{const t=(0,n.NC)(ut.C2),a=function(e){switch(e){case"OTP":return c.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return c.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t&&a?(0,q.jsx)(g.E,{className:ki,children:a}):null};const Di=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:i,name:s,podcastType:n,publisherName:r,gatedContentAccessReason:o}=e,l=(0,q.jsx)(ia.H,{uri:a});return(0,q.jsxs)(Xe.z,{backgroundColor:t,children:[(0,q.jsx)(Je.h,{children:(0,q.jsx)(Ge.h,{menu:l,children:(0,q.jsx)(Ze.X,{text:s,dragUri:a,dragLabel:s})})}),(0,q.jsx)(_i.X,{children:(0,q.jsx)(Ge.h,{menu:l,children:(0,q.jsx)(Ui.b,{loading:"eager",name:s,images:i,placeholderType:"show",shape:Ui.u.SQUARE})})}),(0,q.jsxs)(Qe.Y,{children:[(0,q.jsxs)(tt.B,{children:["SHOW"===n?c.Ru.get("type.show"):c.Ru.get("type.podcast"),o&&(0,q.jsx)(Ti,{reason:o})]}),(0,q.jsx)(Ge.h,{menu:l,children:(0,q.jsx)(it.mm,{dragUri:a,dragLabel:s,scaleAtMinWidth:it.tw,children:(0,q.jsx)("span",{"data-testid":"show-title",children:s})})}),(0,q.jsx)(at.g,{children:r})]})]})};var Li=a(18306),Oi=a(19205);const zi=({metadata:e,showId:t})=>{const{coverArt:a,name:s,uri:n}=e,{spec:o}=(0,We.r)(r.R,{data:{uri:n}}),l=(0,i.useMemo)((()=>o.actionBarFactory()),[o]),c=(0,Vt.H)(a[0]?.url||null),u=(0,nt.y)();return(0,q.jsxs)("section",{className:ui,children:[(0,q.jsx)(d.Q,{children:(0,Zt.hV)({showOrAudiobookName:s,type:"Podcast"})}),(0,q.jsx)(zt.c,{artistOrShow:s,uri:n,entityType:zt.p.PODCAST}),(0,q.jsx)(Di,{metadata:e,backgroundColor:c}),(0,q.jsx)(na,{uri:n,name:s,backgroundColor:c,spec:l}),(0,q.jsx)(Mi,{breakpoint:u,metadata:e,showId:t,spec:o})]})},Vi=(0,i.memo)((function(){const{showId:e=""}=(0,s.g)(),t=`spotify:show:${e}`,{data:a,error:r,redirectUri:d}=(0,Se.W)(t),m=(0,n.NC)(ut.Jl4);if(d){const e=(0,l.cA)(d);return(0,q.jsx)(aa.$,{to:e.toURLPath(!0)})}const p=a&&(0,Lt.Go)(a);return!a||r||p&&a?.isPreRelease&&!m?r instanceof Oi.W?(0,q.jsx)(u.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error-page.not-available-in-region.title")}):(0,q.jsx)(u.LoadingPage,{hasError:!!r,errorMessage:c.Ru.get("error.not_found.title.page")}):p?(0,q.jsx)(i.Suspense,{fallback:null,children:(0,q.jsx)(Li.u,{pageId:o.$h.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,q.jsx)(ta,{metadata:a},`${!!a.consumptionCapExplanation}`)})}):(0,q.jsx)(i.Suspense,{fallback:null,children:(0,q.jsx)(Li.u,{pageId:o.$h.PODCAST,uri:t,children:(0,q.jsx)(La,{uri:a.uri,children:(0,q.jsx)(Xa,{uri:a.uri,defaultSortParam:Ga(a.consumptionOrder),children:(0,q.jsx)(zi,{showId:e,metadata:a})})})})})}))},28740:(e,t,a)=>{a.d(t,{$:()=>s});var i=a(30758);const s=(e,t)=>{const a=(0,i.useRef)(e);(0,i.useEffect)((()=>{a.current=e}),[e]),(0,i.useEffect)((()=>{let e;function i(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){a.current(i)}),t),i}),[t])}}}]);
//# sourceMappingURL=xpui-routes-show.js.map