"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3890],{49775:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(30758),r=a(41978),i=a(77),o=a(59677),c=a(41331),s=a(7029),d=a(66634),l=a(99559),u=a(61869),k=a(69180),f=a(29800),g=a(86070);const m=n.memo((function(){const e=(0,i.Zp)(),t=(0,i.zy)(),a=(0,f.m)(),m=(0,k.z)(),{trackId:p=""}=(0,i.g)(),{isAnonymous:h}=(0,r.d4)(l.Ht),b=(0,n.useMemo)((()=>new URLSearchParams(t.search)),[t.search]),U=b.get("context")||"",y=(0,o.tR)(p).toURI(),_=(0,d.J)({uri:y},{gcTime:30*u.i}),x=(0,n.useCallback)(((t,a)=>{const n=m.getState(),r=(0,o.o_)(a)?.toURLPath(!0);b.delete("context");const i=b.toString()?`&${b.toString()}`:"",c=`${r}?highlight=${y}${i}`;h?e(c):(n&&!n.isPaused||t>-1&&m.play({uri:a},{featureIdentifier:"track",referrerIdentifier:"deeplink"},{skipTo:{index:t}}),e(c,{replace:!0}))}),[e,h,m,y,b]),I=(0,n.useCallback)((()=>{if(!_.loading&&_.data?.trackUnion&&"Track"===_.data.trackUnion.__typename){const e=(_.data.trackUnion.albumOfTrack?.tracks?.items??[]).findIndex((e=>e.track.uri===y));e>=0&&x(e,_.data.trackUnion.albumOfTrack?.uri||"")}}),[x,_,y]);return(0,n.useEffect)((()=>{const e=(0,o.tb)(U);U&&e?a.getContents(U).then((e=>{const t=e.items.findIndex((e=>e?.uri===y));t<0?I():x(t,U)})):I()}),[U,I,x,a,y]),_.loading||_.error||"Track"!==_.data?.trackUnion?.__typename?(0,g.jsx)(s.LoadingPage,{hasError:!_.loading,errorMessage:c.Ru.get("track-page.error")}):null})),p=m}}]);
//# sourceMappingURL=xpui-routes-track.js.map