"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7182],{7182:(e,s,a)=>{a.d(s,{A:()=>ke});var l=a(97500),r=a.n(l),i=a(41978),t=a(13390),n=a(39733),c=a(9198),o=a(59677),u=a(62462),d=a(98117),g=a(30758),m=a(15231),h=a(41331),v=a(94653),b=a(70329),y=a(69180);const x="lyrics-lyrics-contentContainer",p="lyrics-lyrics-contentWrapper",j="GML6YUVCeJvRhGznLnqm";var L=a(86070);const S=({trackUri:e,data:s,format:a,spec:l,logger:r,isSnippet:i})=>{const t=(0,y.z)(),n=(0,b.v7)(),{isTimeSynced:c}=s,o=(0,g.useCallback)(((e,s)=>{if(l&&r){const e=l.lyricsLineFactory().hitSeekToTime({msToSeekTo:s});r.logInteraction(e)}e.currentTarget.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),t.seekTo(s);const a=t.getState();a&&!a.isPaused||t.resume()}),[r,t,l]),u=(0,g.useCallback)((({lineRef:e,firstUpdate:s,isFirstLine:a,isActiveLine:l,activeLineIndex:r,hasSkipped:i,shouldAnimateScroll:t})=>{if(e.current&&n.current&&(l||a&&r<0)){const a=e.current.getBoundingClientRect().top,l=n.current.getBoundingClientRect().height,r=l/4,c=a>=r&&a<=l-r;if(!c&&!(s||i))return;const o="visible"===document.visibilityState&&t&&c?"smooth":"auto";e.current?.scrollIntoView({behavior:o,block:"center",inline:"center"})}}),[n]);return(0,L.jsx)("div",{className:x,children:(0,L.jsxs)("div",{className:p,children:[!i&&!c&&(0,L.jsx)(m.E,{as:"p",variant:"bodySmall",className:j,dir:"auto",children:h.Ru.get("web-player.lyrics.unsynced")}),(0,L.jsx)(v.x,{trackUri:e,data:s,format:a,onLineClick:c?o:void 0,onActiveLineChange:u,isSnippet:i},e)]})})};var f=a(60107),N=a(91753);const w="e7eFLioNSG5PAi1qVFT4",k="vkO5F4KbLk8mbjZoy1Lf",R=(0,g.memo)((function({version:e}){const{getMessage:s}=(()=>{const e=[h.Ru.get("web-player.lyrics.noLyrics0"),h.Ru.get("web-player.lyrics.noLyrics1"),h.Ru.get("web-player.lyrics.noLyrics2"),h.Ru.get("web-player.lyrics.noLyrics3")];return{getMessage:s=>{let a;switch(s){case"ad":a=h.Ru.get("web-player.lyrics.ad");break;case"error":a=h.Ru.get("web-player.lyrics.error");break;case"unavailable":a=e[Math.floor(Math.random()*e.length)];break;default:(0,N.k)(s),a=""}return a}}})();return(0,L.jsx)("div",{className:w,children:(0,L.jsx)("span",{className:k,children:s(e)})})}));var C=a(77),E=a(58923),A=a(74946),I=a(83052),F=a(29971),T=a(26205);const G="hS_lrRHiW4BSWL8WcE8Q",_="O7ooKKJG0MArEwDgD6IV",O="XZ1MeB_1byeFy7W6Eg6u",Y="lq_cmE3Xcg5QJhvbBnPR",U="zPI8TW58LMxEQDIq_GdA",D="lyrics",z=({spec:e,logger:s})=>{const{openURLWithSessionTransfer:a}=(0,F.L)(),l=(0,I.k)(),{url:r,isExternal:i}=l,t=(0,C.Zp)(),n=(0,g.useCallback)((()=>{const l=new URL(r),n=new URLSearchParams(l.search);n.append("ref",D),l.search=n.toString();const c=l.href;if(!1===i){const e=(0,E.PI)({ref:D});t({pathname:"/premium",search:e.toString()})}else a(c);s.logInteraction(e.lyricsUpsellFactory().lyricsUpsellButtonFactory().hitNavigateToExternalUri({destination:c}))}),[r,i,s,e,t,a]),c=(0,T.t)(e.lyricsUpsellFactory());return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:G}),(0,L.jsx)("div",{className:_,children:(0,L.jsxs)("div",{className:U,ref:c,children:[(0,L.jsx)(m.E,{semanticColor:"textBase",variant:"titleLarge",className:Y,children:h.Ru.get("web-player.lyrics.upsell.title")}),(0,L.jsx)(A.$,{className:O,size:"small",onClick:n,colorSet:"invertedLight",children:h.Ru.get("web-player.lyrics.upsell.button")})]})})]})};var W=a(87867),B=a(31490),V=a(72331),J=a(32624),M=a(57485),H=a(5562),q=a(31352),P=a(4924),Z=a(64580),K=a(99186),Q=a(62252),X=a(4279);const $="na1tzIwfHqXPiMw_7NOd",ee="lVJJcrObmZtZsWaq8H3A",se=[{volume:Q.Y9.SING_ALONG_OFF,icon:(0,L.jsx)(W.X,{size:"small"}),get label(){return h.Ru.get("singalong.off")}},{volume:Q.Y9.HIGH,icon:(0,L.jsx)(B.C,{size:"small"}),get label(){return h.Ru.get("singalong.more-vocal")}},{volume:Q.Y9.LOW,icon:(0,L.jsx)(V.D,{size:"small"}),get label(){return h.Ru.get("singalong.less-vocal")}}],ae=g.memo((function({currentTrackUri:e}){const{isSupported:s,volume:a,setVocalVolume:l}=(e=>{const s=(0,X.S)(),[a,l]=(0,g.useState)(Q.Y9.SING_ALONG_OFF),{isSupported:r}=s.getCapabilities();return(0,g.useEffect)((()=>{s.setStatus(Q.nW.DISABLED).then((()=>{l(Q.Y9.SING_ALONG_OFF)}))}),[e,s]),(0,g.useEffect)((()=>()=>{s.setStatus(Q.nW.DISABLED)}),[s]),{isSupported:r,volume:a,setVocalVolume:(0,g.useCallback)((async e=>{e===Q.Y9.SING_ALONG_OFF?await s.setStatus(Q.nW.DISABLED):await s.setStatus(Q.nW.ENABLED),await s.setVocalVolume(e),l(e)}),[s])}})(e),i=(0,g.useCallback)((e=>{s&&l(e.volume)}),[s,l]);if(!s)return null;const t=se.find((e=>e.volume===a)),n=t?.volume===Q.Y9.SING_ALONG_OFF;return(0,L.jsx)(q.b,{menu:(0,L.jsxs)(P.W,{children:[(0,L.jsx)(Z.y,{children:h.Ru.get("singalong.title")}),se.map((e=>(0,L.jsx)(K.D,{role:"menuitemradio","aria-checked":a===e.volume,"aria-label":e.label,onClick:()=>i(e),leadingIcon:e.icon,children:e.label},e.volume)))]}),children:(e,s,a)=>(0,L.jsxs)("button",{onClick:s,ref:a,type:"button",className:r()($,{[ee]:n}),children:[n?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(J.q,{size:"small"}),(0,L.jsx)(m.E,{variant:"bodySmall",children:h.Ru.get("singalong.button")})]}):(0,L.jsxs)(L.Fragment,{children:[t.icon,(0,L.jsx)(m.E,{variant:"bodySmall",children:t.label})]}),e?(0,L.jsx)(M.J,{size:"small"}):(0,L.jsx)(H.y,{size:"small"})]})})}));var le=a(90029),re=a(70923),ie=a(49571),te=a(35369),ne=a(19019),ce=a(10940),oe=a(56629),ue=a(29615),de=a(49151),ge=a(78487);const me="lyrics-lyrics-container",he="VznvlkEh9fhk1AKhhZwe",ve="iSeDDdAUlWo8OJbCKDLw",be="rSXzEXBdsRTaK6qSBHYg",ye="UdJMosuRv5_ySWnmSPZH",xe="zEwFftu1Dw68QKaKj_EE",pe="lyrics-lyrics-background",je=(0,L.jsx)("div",{className:xe,children:(0,L.jsx)(d.m,{})}),Le=(0,L.jsx)(R,{version:"error"}),Se=(0,L.jsx)(R,{version:"ad"}),fe=(0,L.jsx)(R,{version:"unavailable"}),Ne={active:t.ONy,inactive:t.Ql9,passed:t.Ql9,background:t.wdA,messaging:t.ONy},we=(e,s)=>{switch(s){case ne.bYw.CONTROL:default:return e;case ne.bYw.EMPTY_LYRICS:return{...e,lyrics:[]};case ne.bYw.TRUNCATED_LYRICS:return{...e,lyrics:e.lyrics.slice(0,5)}}},ke=({format:e})=>{const s=(0,ie.X)(),a=(0,ue.v)((e=>e.activeDevice?.isLocal)),l=(0,de.o)((e=>e?.item),((e,s)=>e?.uri===s?.uri)),t=l?.uri||"",{spec:d,logger:g}=(0,ge.r)(c.V,{data:{uri:t}}),{data:m,loading:h,error:v}=(0,re.J)(),b=(0,n.NC)(ne.bOR),y=(0,n.NC)(ne.JSO,{loadingValue:ne.bYw.CONTROL});let x=!1,p=Ne;m?.hasLyrics&&(b&&(x=m.showUpsell),y!==ne.bYw.TRUNCATED_LYRICS&&y!==ne.bYw.EMPTY_LYRICS||(x=!0),p={active:m.colors.activeText,inactive:m.colors.text,passed:ce.Q.fromCSS(m.colors.activeText,.7).toCSS(oe.a.RGBA),background:m.colors.background,messaging:m.colors.text}),(0,te.z)(p.background,Ne.background);const j=(0,de.o)((e=>e?.nextItems?.[0]),((e,s)=>e?.uri===s?.uri));(0,le.I)(j?.uri,j?.images);let N=je,w=!1;if(t)if((0,o.AI)(t))N=Se;else if(v)N=Le;else if(h)N=je;else if(m)if(m.hasLyrics){const l=a??!1;w=s&&m.hasVocalRemoval&&l,N=(0,L.jsx)(S,{trackUri:t,data:we(m,y),format:e,spec:d,logger:g,isSnippet:x})}else N=fe;const k=(0,i.d4)((e=>e.ads.leaderboard.isEnabled)),R={"--lyrics-color-active":p.active,"--lyrics-color-inactive":p.inactive,"--lyrics-color-passed":p.passed,"--lyrics-color-background":p.background,"--lyrics-color-messaging":p.messaging,"--show-gradient-over-lyrics":x?"block":void 0};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.Q,{usePlayingItem:!0,children:"Spotify"}),(0,L.jsxs)("div",{className:r()(me,{[he]:k}),style:R,children:[(0,L.jsx)("div",{className:pe}),N,(0,L.jsxs)("div",{className:ve,children:[(0,L.jsx)("div",{className:be,children:"cinema"!==e&&(0,L.jsx)(f.R,{})}),(0,L.jsx)("div",{className:ye,children:w?(0,L.jsx)(ae,{currentTrackUri:t}):null})]}),x&&(0,L.jsx)(z,{spec:d,logger:g})]})]})}},60107:(e,s,a)=>{a.d(s,{R:()=>I});var l=a(30758),r=a(97500),i=a.n(r),t=a(41978),n=a(43211),c=a(81626),o=a(15231),u=a(5562),d=a(39733),g=a(41331),m=a(31352),h=a(4924),v=a(99186),b=a(70923),y=a(8665),x=a(24060),p=a(4355);const j="ZEIqEgvTSLMYDUyg4fwD",L="JCMG2XpPpmwVFJCmRsv8",S="G5xyHz2quLjuzQhFHUb4",f="qYiwqn2o_ph2NxiAfCpG",N="aENlvMWeYBOLGGB34Tpl",w="GdrYdqKUxEn8rN8JLnFW",k="AH1Gz87FuBEFAIF3XbA4";var R=a(86070);const C=e=>{try{if(e){const s=new Intl.DisplayNames([e],{type:"language"}).of(e);return s?s.charAt(0).toUpperCase()+s.slice(1):e}return""}catch(s){return e||""}},E=()=>{const e=(0,t.wA)(),{data:s}=(0,b.J)(),a=(0,t.d4)(x.s),r=(0,l.useCallback)((()=>{e(a?(0,y.gL)(""):(0,y.gL)(navigator.language))}),[e,a]);return s?.hasLyrics&&(s.alternatives||[]).length>0?(0,R.jsx)("button",{className:j,onClick:r,children:(0,R.jsx)("div",{className:i()(f,{[S]:a}),children:(0,R.jsx)(n.H,{fill:"white",size:"small"})})}):null},A=()=>{const e=(0,t.wA)(),{data:s}=(0,b.J)(),a=(0,t.d4)(x.s),[r,d]=(0,l.useState)(!1),p=s?.hasLyrics&&(s.alternatives||[]).length>0,E=a&&s?.hasLyrics&&(s.alternatives||[]).find((e=>e.language.substring(0,2)===a.substring(0,2)));if(!p)return null;const A=(0,R.jsx)(h.W,{children:[{language:""},...s.alternatives||[]].map((({language:s})=>{let l=g.Ru.get("web-player.lyrics.translation.none");return s&&(l=C(s)),(0,R.jsx)(v.D,{trailingIcon:s===a?(0,R.jsx)(c.i,{size:"small",semanticColor:"textBrightAccent"}):null,role:"menuitem",onClick:()=>{e((0,y.gL)(s))},children:l},s)}))});return(0,R.jsx)("div",{className:j,children:(0,R.jsx)(m.b,{renderInline:!0,menu:A,onShow:()=>d(!0),onHide:()=>d(!1),children:(0,R.jsxs)("div",{className:i()(L,{[S]:E}),children:[(0,R.jsx)("div",{className:f,children:E?(0,R.jsx)(n.H,{fill:"black",size:"small"}):(0,R.jsx)(n.H,{size:"small"})}),(0,R.jsxs)("div",{className:k,children:[(0,R.jsx)(o.E,{variant:"bodySmallBold",children:a?E?g.Ru.get("web-player.lyrics.translating.to",C(a)):g.Ru.get("web-player.lyrics.translation.not_available",C(a)):g.Ru.get("web-player.lyrics.translate")}),(0,R.jsx)(u.y,{className:i()(N,{[w]:r}),size:"small"})]})]})})})},I=()=>{switch((0,d.NC)(p.Tc,{loadingValue:p.LZ.CONTROL})){case p.LZ.CONTROL:default:return null;case p.LZ.SYSTEM_LANGUAGE:return(0,R.jsx)(E,{});case p.LZ.ALL_LANGUAGES:return(0,R.jsx)(A,{})}}}}]);
//# sourceMappingURL=7182.js.map