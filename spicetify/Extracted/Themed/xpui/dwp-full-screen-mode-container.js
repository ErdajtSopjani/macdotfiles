"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1955],{44367:(e,t,n)=>{n.d(t,{D:()=>d});var i=n(97500),s=n.n(i),r=n(27046);const o="Psc33HXPyazZYAAr1tgz",a="VGJz_GOARJ6j02JICvW6",l="VpNHGG5ZhoxQ8AqW709S",c="P7395UzhjxLUlLZvj5fb";var u=n(86070);const d=function(e){const{children:t,active:n=!1,focus:i=!0,label:d,onClick:g,noBackground:k=!1}=e;return(0,u.jsx)(r.Zp,{label:d,children:(0,u.jsx)("button",{className:s()(o,{[c]:n,[a]:k,[l]:i}),onClick:g,"aria-label":d,children:t})})}},35519:(e,t,n)=>{n.d(t,{FullscreenModeContainer:()=>fe});var i=n(30758),s=n(41978),r=(n(80696),n(63583)),o=n(55136),a=n(47234),l=n(36131),c=n(79697),u=n(97500),d=n.n(u),g=n(55358),k=n(16047),b=n(9544),p=n(41331),m=n(98471);const f="ylcmjHXKpwmez5_bBVgt",v="kChcaF3yz3SoL5dZPwEr",h="npv-nowPlayingBar-container",y="npv-nowPlayingBar-controls",C="npv-nowPlayingBar-section",L="npv-nowPlayingBar-left",x="npv-nowPlayingBar-center",S="npv-nowPlayingBar-right",w="npv-exitFullScreenButton-button",E="Lgyj1e9c3lrdgVGlMIyV";var j=n(86070);const R=(0,i.memo)((function({iconSize:e="small",onClick:t}){return(0,j.jsx)("button",{className:w,onClick:()=>{t?.(),(0,m.SP)()},"aria-label":p.Ru.get("npv.exit-full-screen"),title:p.Ru.get("npv.exit-full-screen"),children:(0,j.jsx)(b.b,{size:e})})}));var B=n(32624),P=n(16782);const I=()=>(0,j.jsx)(B.q,{iconSize:24}),F=({onClick:e,enabled:t})=>{const n=(0,i.useCallback)((()=>{e?.(!t)}),[e,t]);return(0,j.jsx)(P.f,{className:E,isActive:t,onToggle:n,label:p.Ru.get("web-player.lyrics.title"),testId:"fullscreen-mode-overlay-lyrics-button",icon:I})},_=(0,i.memo)(F);var T=n(2304),z=n(44608),A=n(64294),N=n(40425),M=n(32415);const V=({item:e,onClick:t})=>(0,M.v)(e)?(0,j.jsx)(A.b,{uri:e.uri,size:T.t.sm,onClick:t}):(0,N.p)(e)?(0,j.jsx)(z.b,{uri:e.uri,size:T.t.sm,onClick:t,condensed:!0}):null;var U=n(44801),D=n(17577),H=n(80587),O=n(33473),G=n(92375),X=n(5437),q=n(70692),J=n(13495),Q=n(74493),W=n(70279),Z=n(10872),K=n(4139),$=n(91753);const Y=({isVisible:e,onClick:t,item:n,isLyricsAvailable:s,isLyricsEnabled:r,onLyricsButtonClick:o})=>{const l=(0,H.p)(),c=(0,Z.f)(),u=(0,k.p6)({parentAbsoluteLocation:c||void 0,data:{identifier:a.gw.FULLSCREEN}}),b=(0,a.kD)({parentAbsoluteLocation:c||void 0,data:{identifier:a.gw.FULLSCREEN}}),p=(0,g.h9)({parentAbsoluteLocation:c||void 0,data:{identifier:a.gw.FULLSCREEN}}),m=(0,K.s)(),[w]=(0,Q.S)(1e3,(e=>e.item?.uri===n?.uri)),E=(0,i.useCallback)((e=>{if(n)if(e){const e=u.likeButtonFactory({uri:n.uri}).hitLike({itemToBeLiked:n.uri});m.logInteraction(e)}else{const e=u.likeButtonFactory({uri:n.uri}).hitRemoveLike({itemNoLongerLiked:n.uri});m.logInteraction(e)}}),[n,u,m]),B=(0,i.useCallback)((e=>{if(!n)return;const t=b.speedControlButtonFactory().hitSetPlaybackSpeed({currentlyPlayedItem:n.uri,playbackSpeed:e});m.logInteraction(t)}),[n,m,b]),P=(0,i.useCallback)((e=>{if(e){const e=b.shuffleButtonFactory().hitShuffleEnable();m.logInteraction(e)}else{const e=b.shuffleButtonFactory().hitShuffleDisable();m.logInteraction(e)}}),[m,b]),I=(0,i.useCallback)((e=>{const t=b.seekBackButtonFactory().hitSeekByTime({msSeekedOffset:e});m.logInteraction(t)}),[m,b]),F=(0,i.useCallback)(((e,t)=>{switch(t){case"drag":return m.logInteraction(b.progressBarFactory().dragSeekToTime({msToSeekTo:e}));case"hit":return m.logInteraction(b.progressBarFactory().hitSeekToTime({msToSeekTo:e}));default:return(0,$.k)(t)}}),[m,b]),T=(0,i.useCallback)((e=>{const t=b.seekForwardButtonFactory().hitSeekByTime({msSeekedOffset:e});m.logInteraction(t)}),[m,b]),z=(0,i.useCallback)((e=>{if(n)if("pause"===e){const e=b.playPauseButtonFactory().hitPause({itemToBePaused:n.uri});m.logInteraction(e)}else if("resume"===e){const e=b.playPauseButtonFactory().hitResume({itemToBeResumed:n.uri});m.logInteraction(e)}}),[n,m,b]),A=(0,i.useCallback)((e=>{const t=b.repeatButtonFactory().hitRepeatEnable(),n=b.repeatButtonFactory().hitRepeatOneEnable(),i=b.repeatButtonFactory().hitRepeatDisable();switch(e){case W.p.REPEAT_CONTEXT:m.logInteraction(t);break;case W.p.REPEAT_NONE:m.logInteraction(i);break;case W.p.REPEAT_TRACK:m.logInteraction(n);break;default:throw(0,$.k)(e)}}),[m,b]),N=(0,i.useCallback)((()=>{if(!n)return;const e=b.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:n.uri,positionMs:w,totalContentMs:n.duration.milliseconds||0});m.logInteraction(e)}),[n,m,b,w]),M=(0,i.useCallback)((()=>{if(!n)return;const e=b.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:n.uri,positionMs:w,totalContentMs:n.duration.milliseconds||0});m.logInteraction(e)}),[n,m,b,w]),Y=(0,i.useCallback)((e=>{const t=p.volumeBarFactory().hitSetVolume({newVolumePercentage:e});m.logInteraction(t)}),[m,p]),ee=(0,i.useCallback)((e=>{const t=p.volumeBarFactory().dragSetVolume({newVolumePercentage:e});m.logInteraction(t)}),[m,p]),te=(0,i.useCallback)((e=>{if("muted"===e){const e=p.volumeMuteButtonFactory().hitMutePlayback();m.logInteraction(e)}else if("not_muted"===e){const e=p.volumeMuteButtonFactory().hitUnmutePlayback();m.logInteraction(e)}}),[m,p]),ne=(0,i.useCallback)((()=>{const e=p.fullscreenButtonFactory().hitUiHide();m.logInteraction(e)}),[m,p]);return(0,j.jsx)(J.s,{active:e,focusTrapOptions:{initialFocus:!1},children:(0,j.jsx)("div",{className:d()(f,{[v]:e}),onClick:t,children:(0,j.jsxs)("div",{className:h,"data-testid":"fullscreen-mode-controls",children:[(0,j.jsx)(U.x,{isPreview:!1,isFullscreenMode:!0,onChange:F}),(0,j.jsxs)("div",{className:y,children:[(0,j.jsx)("div",{className:d()(C,L),children:n&&(0,j.jsx)(V,{item:n,onClick:E})}),(0,j.jsxs)("div",{className:d()(C,x),children:[l&&(0,j.jsx)(D.w0,{iconSize:24,onClick:B}),!l&&(0,j.jsx)(X.w,{renderEnabled:()=>(0,j.jsx)(G.a,{size:"medium"}),renderDisabled:()=>(0,j.jsx)(D.uP,{iconSize:"medium",onClick:P})}),l&&(0,j.jsx)(D.hC,{onClick:I}),(0,j.jsx)(D.dQ,{onClick:N}),(0,j.jsx)(D.xJ,{iconSize:"large",onClick:z}),(0,j.jsx)(D.$K,{onClick:M}),l&&(0,j.jsx)(D.v3,{onClick:T}),!l&&(0,j.jsx)(D.s_,{onClick:A})]}),(0,j.jsxs)("div",{className:d()(C,S),children:[(0,j.jsx)(q.C,{iconSize:"medium",renderInline:!0,noBackground:!0}),!l&&s&&(0,j.jsx)(_,{enabled:r,onClick:o}),(0,j.jsx)(O.M,{onVolumeBarClick:Y,onVolumeBarDrag:ee,onToggleMuteClick:te}),(0,j.jsx)(R,{iconSize:"medium",onClick:ne})]})]})]})})})};var ee=n(70292),te=n(95168);var ne=n(11892);var ie=n(38063),se=n(78106),re=n(20769),oe=n(13643),ae=n(48783),le=n(45292),ce=n(61626),ue=n(69180),de=n(49151),ge=n(82387),ke=n(72553),be=n(30912);const pe=i.lazy((async()=>{const{ArtistNpv:e}=await n.e(4151).then(n.bind(n,80978));return{default:e}})),me=i.memo((function(){const{isActive:e}=(0,ie.$)(),[t,n]=(0,i.useState)(e),c=(0,ue.z)(),u=(0,le.W)(),d=(0,de.o)((e=>e),((e,t)=>(0,be.a)(e?.restrictions,t?.restrictions)&&e?.item?.uri===t?.item?.uri&&e?.isPaused===t?.isPaused)),g=d?.item??void 0,k=d?.nextItems??[],b=d?.playbackId??void 0,p=(0,M.v)(g)?g.artists[0]?.uri:void 0,f=g?.images,v=(e=>{const{request:t}=(0,i.useContext)(te.j),[n,s]=(0,i.useState)(void 0);return(0,i.useEffect)((()=>{let n=!0;return e&&(0,ee.sY)(t,e).then((e=>{n&&s(e)})),()=>{n=!1}}),[e,t]),n})(p);let h=(0,ce.z)(f?.[0]?.url);(()=>{const e=(0,s.wA)();(0,i.useEffect)((()=>{const t=()=>{(0,m.ge)()||e((0,l.rF)())};return window.addEventListener("fullscreenchange",t),document.addEventListener("fullscreenchange",t),window.addEventListener("fullscreenChange",t),document.addEventListener("fullscreenChange",t),window.addEventListener("webkitfullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),window.addEventListener("mozfullscreenchange",t),document.addEventListener("mozfullscreenchange",t),()=>{window.removeEventListener("fullscreenchange",t),document.removeEventListener("fullscreenchange",t),window.removeEventListener("fullscreenChange",t),document.removeEventListener("fullscreenChange",t),window.removeEventListener("mozfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),window.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t)}}),[e]),(0,i.useEffect)((()=>{const e=e=>{"Escape"===e.key&&(0,m.SP)()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[e])})();const y=(0,K.s)(),C=(0,o.A)({data:{identifier:"full-screen",uri:g?.uri||""}}),L=(0,a.kD)({parentAbsoluteLocation:C.getAbsoluteLocation(),data:{identifier:a.gw.FULLSCREEN}}),{position:x,contextName:S,contextUri:w,isPaused:E,canResume:R,canPause:B,timestamp:P}=(0,ee.Nh)(d),{isOverlayVisible:I,showOverlay:F,hideOverlay:_}=(()=>{const[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(null),s=(0,ne.YQ)((()=>{null!==n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{t(!1)}),2500),t(!0)}),100,{leading:!0,trailing:!1});return(0,i.useEffect)((()=>()=>{null!==n.current&&clearTimeout(n.current)}),[]),{isOverlayVisible:e,showOverlay:s,hideOverlay:(0,i.useCallback)((()=>{t(!1),null!==n.current&&clearTimeout(n.current)}),[])}})(),T=(0,ee.r3)(g),z=(0,ee.EX)(k.length>0?k[0]:void 0),A=(0,ge.A3)(d),N=(0,i.useCallback)((e=>{if(e.target===e.currentTarget)if(u({type:"click",intent:E?"play":"pause"}),E&&R){const e=L.playPauseButtonFactory().hitResume({itemToBeResumed:g?.uri||""});y.logInteraction(e),c.resume()}else if(!E&&B){const e=L.playPauseButtonFactory().hitPause({itemToBePaused:g?.uri||""});y.logInteraction(e),c.pause()}}),[B,R,E,g?.uri,y,L,u,c]),V=(0,i.useCallback)((e=>{n(e)}),[n]),{data:U,loading:D}=(0,se.J)(),H=!!U?.hasLyrics,O=U?.hasLyrics?U.providerLyricsId:void 0;h=H?U.colors.background:h;const G=(0,i.useMemo)((()=>(0,ee.bo)(t,D,U)),[t,D,U]),X=(0,re.vh)(),q=(0,i.useCallback)(((e,t,n)=>X.send((0,r.W)({lyrics_format:"fullscreen",track_uri:e,provider:t,provider_lyrics_id:O,sync_type:n,playback_id:b}))),[b,O,X]);return(0,j.jsx)(i.Suspense,{fallback:null,children:(0,j.jsx)("div",{onPointerMove:F,onPointerLeave:_,onFocus:F,"data-testid":"fullscreen-mode-container",children:(0,j.jsx)(ke.r,{spec:C,children:(0,j.jsx)(pe,{currentTrack:T,position:x??0,timestamp:P??0,nextTrack:z,backgroundColor:h,backgroundImageUrl:v,contextName:S,contextUri:w,playbackIsPaused:E,contextMetadataVisible:!A||I,trackMetadataVisible:!A||I,lyrics:G,onLyricsReport:q,controlsVisible:!1,progressBarVisible:!A||I,CustomProgressBar:void 0,CustomPlaybackControls:(0,j.jsx)(Y,{isVisible:I,onClick:N,item:g,isLyricsAvailable:H,isLyricsEnabled:t,onLyricsButtonClick:V})})})})})})),fe=i.memo((function({videoRef:e}){const t=(0,i.useContext)(c.s),n=(0,ee.lZ)(),{setVideoPlayerUIFlag:r}=(0,oe.d)(),o=(0,s.wA)(),a=(0,s.d4)((e=>e.ui.fullscreenMode.isOpen));return(0,i.useEffect)((()=>{if(!n)return r(ae.n.fullscreen,!1),o((0,l.DH)()),void(0,m.SP)();const e=(0,m.ge)();!a&&e&&(r(ae.n.fullscreen,!1),o((0,l.DH)()),(0,m.SP)())}),[r,n,a,o]),(0,j.jsxs)("div",{ref:t,children:[(0,j.jsx)("div",{ref:e}),n&&a?(0,j.jsx)(me,{}):null]})}))},70692:(e,t,n)=>{n.d(t,{C:()=>w});var i=n(30758),s=n(23981),r=n(41331),o=n(44367),a=n(31352),l=n(39733),c=n(4924),u=n(64580),d=n(99186),g=n(19019),k=n(78330),b=n(86070);const p=({languages:e=[],activeLanguage:t,onSelectLanguage:n,onClose:i})=>{const s=(0,l.NC)(g.bFi);return(0,b.jsx)(k.pZ,{value:"subtitles",children:(0,b.jsxs)(c.W,{onClose:i,getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),children:[(0,b.jsx)(u.y,{divider:"after",children:r.Ru.get("subtitles-picker.heading")}),(0,b.jsx)(d.D,{onClick:()=>{n(null)},"aria-checked":!t,role:"menuitemradio",children:r.Ru.get("subtitles-picker.option_off")}),e.map((e=>(0,b.jsxs)(d.D,{onClick:()=>{n(e)},role:"menuitemradio","aria-checked":"string"==typeof t&&e.toLowerCase()===t.toLowerCase(),children:[m(e)," ",s?`(${r.Ru.get("subtitles-picker.autogenerated")})`:null]},e)))]})})};function m(e){const[t]=e.toLowerCase().split("-");let n="";switch(t){case"zh":n=r.Ru.get("subtitles-picker.option_zh");break;case"cs":n=r.Ru.get("subtitles-picker.option_cs");break;case"nl":n=r.Ru.get("subtitles-picker.option_nl");break;case"en":n=r.Ru.get("subtitles-picker.option_en");break;case"fi":n=r.Ru.get("subtitles-picker.option_fi");break;case"fr":n=r.Ru.get("subtitles-picker.option_fr");break;case"de":n=r.Ru.get("subtitles-picker.option_de");break;case"el":n=r.Ru.get("subtitles-picker.option_el");break;case"hu":n=r.Ru.get("subtitles-picker.option_hu");break;case"id":n=r.Ru.get("subtitles-picker.option_id");break;case"it":n=r.Ru.get("subtitles-picker.option_it");break;case"ja":n=r.Ru.get("subtitles-picker.option_ja");break;case"ms":n=r.Ru.get("subtitles-picker.option_ms");break;case"pl":n=r.Ru.get("subtitles-picker.option_pl");break;case"pt":n=r.Ru.get("subtitles-picker.option_pt");break;case"es":n=r.Ru.get("subtitles-picker.option_es");break;case"sv":n=r.Ru.get("subtitles-picker.option_sv");break;case"tr":n=r.Ru.get("subtitles-picker.option_tr");break;case"vi":n=r.Ru.get("subtitles-picker.option_vi");break;default:n=e}return e.endsWith("-x-cc")&&(n+=" [CC]"),n}const f=e=>(0,b.jsx)(i.Suspense,{fallback:null,children:(0,b.jsx)(p,{...e})});var v=n(42392),h=n(13643),y=n(37138),C=n(13978),L=n(85930),x=n(78487);const S=C.S.SUBTITLE_LANGUAGES_CHANGED;const w=i.memo((function({renderInline:e=!1,noBackground:t,iconSize:n="small"}){const{isSupported:l,availableLanguages:c,preferredLanguage:u,setPreferredLanguage:d}=function(){const e=(0,y.$)(),t=e.getCapabilities(),{videoPlayerMode:n}=(0,h.d)(),{uri:s}=(0,L.f)(),{spec:r,logger:o}=(0,x.r)(v.E,{data:{uri:s??"",identifier:n}}),[a,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(null);return(0,i.useEffect)((()=>((async()=>{l(await e.getSubtitleLanguages())})(),e.getEvents().addListener(S,(({data:e})=>{l(e)})))),[e,l]),(0,i.useEffect)((()=>{(async()=>{u(await e.getPreferredSubtitleLanguage())})()}),[e,u]),{isSupported:t.hasSubtitleSupport,availableLanguages:a,preferredLanguage:c,setPreferredLanguage:async t=>{e.setPreferredSubtitleLanguage(t),u(t),t?o.logInteraction(r.subtitlesButtonFactory().hitUiReveal()):o.logInteraction(r.subtitlesButtonFactory().hitUiHide())}}}();return l&&0!==c.length?(0,b.jsx)(a.b,{renderInline:e,menu:(0,b.jsx)(f,{onSelectLanguage:d,languages:c,activeLanguage:u}),children:(0,b.jsx)(o.D,{noBackground:t,active:null!==u,label:r.Ru.get("subtitles-picker.heading"),children:(0,b.jsx)(s.j,{size:n})})}):null}))},78106:(e,t,n)=>{n.d(t,{J:()=>i.J});var i=n(70923)},44801:(e,t,n)=>{n.d(t,{x:()=>i.x});var i=n(91667)},17577:(e,t,n)=>{n.d(t,{$K:()=>c.$,dQ:()=>l.d,hC:()=>r.h,s_:()=>s.s,uP:()=>a.u,v3:()=>o.v,w0:()=>u.w,xJ:()=>i.x});var i=n(49029),s=n(4577),r=n(8291),o=n(78193),a=n(71002),l=n(91973),c=n(37493),u=n(74883)},33473:(e,t,n)=>{n.d(t,{M:()=>i.M,V:()=>i.V});var i=n(4103)},37138:(e,t,n)=>{n.d(t,{$:()=>r});var i=n(70747),s=n(89035);function r(){return(0,s.N)(i.n)}},61626:(e,t,n)=>{n.d(t,{r:()=>c,z:()=>u});var i=n(30758),s=n(13390),r=n(56629),o=n(17862),a=n(95168),l=n(2569);function c(e=null){const{request:t}=(0,i.useContext)(a.j),{data:n}=(0,l.I)({queryKey:["extracted-color",e],queryFn:()=>e?(0,o.j)(t,e).then((([{colorDark:e,colorLight:t,colorRaw:n}])=>({colorDark:e.toCSS(r.a.HEX),colorLight:t.toCSS(r.a.HEX),colorRaw:n.toCSS(r.a.HEX)}))):null,gcTime:864e5,staleTime:216e5,enabled:!!e});return n??void 0}function u(e=null,t=s.l0o,n="colorRaw"){return c(e)?.[n]??t}}}]);
//# sourceMappingURL=dwp-full-screen-mode-container.js.map