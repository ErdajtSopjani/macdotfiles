"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4084],{52182:(e,t,i)=>{i.d(t,{p:()=>C});var a=i(30758),s=i(97500),n=i.n(s),l=i(15231),r=i(74946),o=i(55384),d=i(5120);const c="(min-width: 0px)",u="(min-width: 0px) and (max-width: 767px)",m="(min-width: 768px)",p="(min-width: 768px) and (max-width: 1023px)",h="(min-width: 1024px)",x="(min-width: 1024px) and (max-width: 1279px)",g="(min-width: 1280px)",w="(min-width: 1280px) and (max-width: 1919px)",y="(min-width: 1920px)",b="FvfvGU3jvHRskUU9v9_8",v="Q9AlbZn2EGzy3MTWXa8X",f="mxmxS0y8LiwSs5nueKPT",j="GXxVAveNFStY3pBI_NO4",k="eHcXC2s97InYP7rMNT0H";var N=i(86070);const C=(0,a.memo)((function(e){const{children:t,message:i,title:a,linkTitle:s,linkTo:C,onClick:I,renderInline:F=!1}=e,{isXSOnly:E,isSMOnly:S}={isXS:(0,d.U)(c),isXSOnly:(0,d.U)(u),isSM:(0,d.U)(m),isSMOnly:(0,d.U)(p),isMD:(0,d.U)(h),isMDOnly:(0,d.U)(x),isLG:(0,d.U)(g),isLGOnly:(0,d.U)(w),isXL:(0,d.U)(y)},R=E||S;return(0,N.jsxs)("section",{className:n()(b,{[v]:F}),children:[t,(0,N.jsx)(l.E,{as:"h1",variant:R?"titleSmall":"titleMedium",className:j,children:a}),(0,N.jsx)(l.E,{variant:R?"bodySmall":"bodyMedium",className:k,children:i}),s&&(C||I)&&(0,N.jsx)(r.$,{colorSet:"invertedLight",className:f,href:C,onClick:I,component:o.v,children:s})]})}))},39919:(e,t,i)=>{i.d(t,{s:()=>x});var a=i(30758),s=i(97500),n=i.n(s),l=i(27338),r=i(31744),o=i(91161),d=i(24835);const c="IVnoxrO3iL_tz5ULI8g_";var u=i(86070);const m={marginBlockEnd:0,willChange:"transform, opacity"},p=({filterId:e=null,isPrimaryFilter:t,isPlaceholder:i,resetFilterIds:s,toggleFilterId:r,className:o,innerRef:d,onFilterClick:p,index:h=0,...x})=>{const g=x.selected,w=(0,a.useCallback)((()=>{if(!e)return s(),void p(null,!1,h);p(e,!!g,h),r(e)}),[e,s,r,p,g,h]),y=(0,a.useCallback)((e=>{e.detail>1||i||w()}),[i,w]);return(0,u.jsx)(l.v,{...x,className:n()(o,{[c]:i}),onClick:y,selectedColorSet:"invertedLight",secondary:g&&!t,style:m,ref:d,tabIndex:-1})},h=({filterId:e=null,isPlaceholder:t,resetFilterIds:i,toggleFilterId:s,className:l,innerRef:o,onFilterClick:d,index:p=0,...h})=>{const x=h.selected,g=(0,a.useCallback)((()=>{if(!e)return i(),void d(null,!1,p);d(e,!!x,p),s(e)}),[e,i,s,d,x,p]),w=(0,a.useCallback)((e=>{e.detail>1||t||g()}),[t,g]);return(0,u.jsx)(r.m,{...h,"aria-label":h["aria-label"],className:n()(l,{[c]:t}),onClick:w,style:m,ref:o,tabIndex:-1})},x=(0,a.memo)((function({placeholderFilters:e=[],availableFilters:t,selectedFilters:i,toggleFilterId:s,resetFilterIds:n,onFilterClick:l,ariaLabel:r,clearBtnAriaLabel:c,className:m,applyLightThemeControls:x=!1}){const g=!(i||t),w=g?e:[...i??[],...t??[]],y=(0,a.useRef)(null),b=(0,a.useCallback)((()=>{(0,d.MS)(y.current,y.current?.nextElementSibling instanceof HTMLElement?y.current?.nextElementSibling:null),n()}),[n]);return 0===w.length?null:(0,u.jsxs)(o.FN,{className:m,ariaLabel:r,applyLightThemeControls:x,children:[!!i?.length&&(0,u.jsx)(h,{resetFilterIds:b,toggleFilterId:s,onFilterClick:l,"aria-label":c??r,innerRef:y}),w.map(((e,t)=>{const a=i?.includes(e),r=0===t;return(0,u.jsx)(p,{filterId:e.id,isPrimaryFilter:r,isPlaceholder:g,onFilterClick:l,resetFilterIds:n,toggleFilterId:s,selected:a,index:t,children:e.getName()},e.id)}))]})}))},52217:(e,t,i)=>{i.d(t,{WhatsNewFeed:()=>Ve});var a=i(30758),s=i(76092),n=i(97500),l=i.n(n),r=i(15231),o=i(89531),d=i(29062),c=i(41331),u=i(52182),m=i(20769),p=i(1756),h=i(39919),x=i(4139);const g="q5riNmaoksSuEEvQAurA";var w=i(86070);const y=[{id:"ALBUM",getName:()=>c.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music"},{id:"EPISODE",getName:()=>c.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows"},{id:"WHATS_NEW_FEED_NOTIFICATION",getName:()=>c.Ru.get("web-player.whats-new-feed.filters.notifications"),ubiId:"Merch & Events"}],b=(0,a.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:i,resetFilterIds:s,className:n,spec:l}){const r=c.Ru.get("web-player.whats-new-feed.filters.options"),o=(0,x.s)(),d=(0,a.useMemo)((()=>{const t=new Map;return(e||[]).forEach((e=>{t.set(e.id,e)})),t}),[e]),u=(0,a.useCallback)(((e,t,i)=>{let a;if(!e)return a=l.clearFiltersFactory().hitClearFilter(),void o.logInteraction(a);const s=d.get(e);if(!s)return;const n=l.filterChipFactory({identifier:s.ubiId,position:i});a=t?n.hitClearFilter():n.hitFilter(),o.logInteraction(a)}),[l,o,d]);return(0,w.jsx)("div",{className:g,children:(0,w.jsx)(h.s,{placeholderFilters:y,availableFilters:e,selectedFilters:t,toggleFilterId:i,onFilterClick:u,resetFilterIds:s,ariaLabel:r,className:n})})}));var v=i(5052),f=i(7008),j=i(87500),k=i(89539),N=i(2304),C=i(27134),I=i(19477),F=i(64294),E=i(31352),S=i(93720),R=i(99870),B=i(75668);const A=({dateAdded:e,prefix:t})=>{let i=e.getTime()>0&&c.Ru.formatRelativeDate(e,{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"});return i&&t&&(i=`${t} ${i}`),(0,w.jsx)(r.E,{variant:"bodySmall",children:i})};var L=i(91360),P=i(1514),D=i(69798);const M=e=>{switch(e){case D.E.LARGE:return P.Qe.SIZE_112;case D.E.MEDIUM:default:return P.Qe.SIZE_64}};var T=i(61108),O=i(68031),U=i(8008),_=i(32326),z=i(56192),V=i(57968),G=i(61535),W=i(72888),H=i(65312),Y=i(60285),X=i(98882),q=i(72553),J=i(86317),K=i(52721);const Z={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",row:"SjhDNg4bQRQmIJAba47Z",actions:"eYvk_xcxVNMwCBkfY3O0",visibleAction:"TtoLzgGMAU9nkxMbixq9",playButton:"Rw7qIj58PeAz8p6dejOP",content:"K3oY37O4n1fElTqkmnd8",description:"AkSMHdbIxX7Fj7e_8APi",subtitleLink:"uzhTSuCH_4ojaqifMJRB",imageWrapper:"q82J4Wio82IYN9poOJfd",imageContainer:"D71yL9GnHIYg7PheYlz8",showImage:"KKRyrr7NUJy1VBWydHHH",largeImage:"kAYwHqwZ7agHEAGbYN3v",explicitIcon:"HjDtVqhmfzWlsvg4dliB",timeAgo:"H4ODi0SPeEXBawCgANeX",footer:"XaingSntLq8c8wEfqf81",episodeBody:"sbM0nIPBghB_k5Tb5a8y",fallbackIcon:"SCFHE5DLXwCFJz8oVFMs",dateAndTime:"FDm94lE0xkDYtA1Bk7Jc",medium:"jYce7J2dSeD3e9qvWO7N",seperator:"tDRI4dCXFmqKzB1b6K3u",seperatorAlbum:"TPNGFuTvzNVNHisumnhg"};function Q({album:e,onLike:t,onMoreButtonClick:i,onDownloadClick:s,spec:n}){const o=(0,a.useRef)(null);(0,_.p)(o);const d=(0,V.y)(),u=d===D.E.LARGE,{draggable:m,onDragStart:p}=(0,O.P)({itemUris:[e.uri],dragLabelText:e.name});let h;e.date&&(h=(0,w.jsx)(A,{dateAdded:new Date(e.date.isoString)}));const[g,y]=(0,G.A)(e.uri),b=e.artists?.items.map((e=>e.profile.name)).join(c.Ru.getSeparator())||"",P=(0,x.s)(),Q=(0,a.useCallback)((async()=>{try{await y(!g)}catch{}}),[g,y]),{togglePlay:$,isPlaying:ee,isActive:te}=(0,X.P)({uri:e.uri},{featureIdentifier:"whats_new_panel",referrerIdentifier:"whats_new_panel"}),ie=(0,a.useCallback)((t=>{let i;t.preventDefault(),te&&!ee&&(i=n.playButtonFactory().hitResume({itemToBeResumed:e.uri})),ee||te||(i=n.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),ee&&(i=n.playButtonFactory().hitPause({itemToBePaused:e.uri})),i&&P.logInteraction(i),$()}),[$,te,ee,P,n,e.uri]),ae=(0,U.V)(e.uri),se=(0,H.T)(e.uri),ne=(0,a.useCallback)((()=>{const t=n.hitUiNavigate({destination:e.uri});P.logInteraction(t),ae()}),[e.uri,n,P,ae]),le=(0,a.useCallback)((i=>{const a=n.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),s=n.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});P.logInteraction(i?a:s),t?.(i)}),[n,P,e.uri,t]),re=(0,a.useCallback)(((t,i)=>{let a;i===Y.NV.ADD?a=n.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):i===Y.NV.REMOVE&&(a=n.downloadButtonFactory().hitUiReveal()),a&&P.logInteraction(a),s?.(t,i)}),[e.uri,P,n,s]),oe=(0,a.useCallback)((e=>{i?.(e)}),[i]),de=(0,a.useCallback)((()=>{const t=n.titleFactory().hitUiNavigate({destination:e.uri});P.logInteraction(t)}),[e.uri,P,n]),ce=c.Ru.get("tracklist.a11y.play",e.name,b),ue=c.Ru.get("tracklist.a11y.pause",e.name,b),me=(0,w.jsx)(v.d,{lineClamp:1,children:(0,w.jsx)(L.N,{to:e.uri,onClick:de,children:e.name})}),pe=e.artists?e.artists.items.map(((e,t,i)=>{return(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)(S.h,{menu:(0,w.jsx)(B.t,{uri:e.uri}),children:(0,w.jsx)(L.N,{to:e.uri,className:Z.subtitleLink,onClick:(s=e.uri,()=>{const e=n.subtitleFactory().hitUiNavigate({destination:s});P.logInteraction(e)}),children:e.profile.name})}),t<i.length-1&&c.Ru.getSeparator()]},t);var s})):"",he=(0,w.jsx)("div",{className:Z.imageContainer,children:(0,w.jsx)(z.b,{className:l()(Z.showImage,{[Z.largeImage]:u}),type:J.c.ALBUM,size:M(d),title:e.name,images:e.coverArt?.sources})}),xe=(0,w.jsxs)(r.E,{className:Z.dateAndTime,children:[(0,K.C)(e.albumType),(0,w.jsx)("span",{className:Z.seperatorAlbum,children:h})]}),ge=u?N.t.sm:N.t.xs,we=(0,w.jsxs)("div",{className:Z.footer,children:[(0,w.jsxs)("div",{className:Z.actions,children:[(0,w.jsx)(F.b,{onClick:le,uri:e.uri,size:ge,className:Z.visibleAction}),(0,w.jsx)(C.f,{onClick:re,className:l()({[Z.visibleAction]:(0,W.X)(se)}),uri:e.uri,isFollowing:g,onFollow:Q,size:ge,condensed:!0}),(0,w.jsx)(q.r,{spec:n,children:(0,w.jsx)(E.b,{menu:(0,w.jsx)(R.h,{uri:e.uri}),children:(0,w.jsx)(I.e,{onClick:oe,size:ge})})})]}),(0,w.jsx)("div",{className:Z.playButton,children:(0,w.jsx)(T.R,{size:"small",onClick:ie,isPlaying:ee,ariaPlayLabel:ce,ariaPauseLabel:ue,version:T.H.secondary})})]});return(0,w.jsx)(S.h,{menu:(0,w.jsx)(R.h,{uri:e.uri}),children:(0,w.jsx)("div",{draggable:m,onDragStart:p,children:(0,w.jsx)(f.v,{size:"xxl",ref:o,className:Z.row,media:he,title:me,subtitle:(0,w.jsx)(j.j,{lineClamp:1,children:pe}),id:e.uri,variant:"naked",body:xe,footer:we,onClick:ne,hoverBackgroundColor:"backgroundHighlight",layout:u?"wide":"regular",horizontalGap:u?k.lT:k.CJ,verticalGap:k.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})})}var $=i(1360),ee=i(64234),te=i(44608),ie=i(12953),ae=i(33e3),se=i(44817),ne=i(98913),le=i(32558);const re=({className:e})=>(0,w.jsx)(le.v,{ariaLabel:c.Ru.get("card.a11y.explicit"),text:c.Ru.get("paid"),className:e});var oe=i(74493),de=i(19845),ce=i(42668);const ue={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",episodeBody:"N3zMh5FMdbBKUvz4uDfe",progressBar:"h0YQcDKdGmWssZyuIcvq",seperator:"lMQrLkJVNqZAzT95gQnA"},me=1e4;function pe({episode:e,isPlaying:t,isActive:i,isFullyPlayed:s,setIsFullyPlayed:n}){let l;e.releaseDate&&(l=(0,w.jsx)(A,{dateAdded:new Date(e.releaseDate.isoString)}));const o=e.restrictions?.paywallContent??!1,d=(0,a.useRef)(null),[u]=(0,oe.S)(me,(t=>t?.item?.uri===e.uri));(0,a.useEffect)((()=>{t&&(d.current=u)}),[t,u]),(0,a.useEffect)((()=>{!t&&d.current&&e.duration.totalMilliseconds<=d.current&&n(!0)}),[t,e.duration.totalMilliseconds,n]);const{badges:m}=(0,ce.b)({contentRating:e.contentRating?.label,isPaywalled:o}),p=(0,w.jsxs)(w.Fragment,{children:[m.explicit&&(0,w.jsx)(se.g,{}),m.paid&&(0,w.jsx)(re,{}),m.nineteen&&(0,w.jsx)(ne.q,{size:16})]}),h=(0,w.jsx)(de.j,{isPlaying:t,fullyPlayed:s,durationMs:e.duration.totalMilliseconds,resumePositionMs:d.current||e.playedState.playPositionMilliseconds,position:i?u:void 0,className:ue.progressBar});return(0,w.jsxs)("div",{className:ue.episodeBody,children:[p,(0,w.jsx)(r.E,{variant:"bodySmall",children:c.Ru.get("card.tag.episode")}),(0,w.jsx)("span",{className:ue.seperator}),(0,w.jsx)(r.E,{variant:"bodySmall",children:l}),(0,w.jsx)("span",{className:ue.seperator}),(0,w.jsx)(r.E,{variant:"bodySmall",children:h})]})}var he=i(61903),xe=i(64905);const ge={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",row:"IEDOUN3mwwZhHVziC03a",actions:"Olh4d9g46wryDMTzRRmw",visibleAction:"zyDT2CX7tvGjKxxUnO7D",playButton:"TKntS5R19vVI3J9xxwDL",content:"h0EpgyZTOC5U8KOQL4A6",description:"IoTOUob09_0_3kC8ORbu",subtitleLink:"aKVUno8YrkyvGsg7iS59",imageWrapper:"O3nnn9_DD_2DzYEa64jv",imageContainer:"iF91evq0EtvlgCxIRI_6",showImage:"VzSICihKBYcgMsSFv8SH",largeImage:"iOxe1erWkyDFY3p4NG8x",explicitIcon:"iseqhC6eLcxmoGPk6JIE",timeAgo:"kUzqUQECoj43gCthqXdD",footer:"_72TrTBKZHea2vJ2I2BJX",episodeBody:"Bqh5LKZCXF5xkKJcEx7a",fallbackIcon:"OdJvEiRzLWN66tky0bvM",dateAndTime:"Y1f7yukeZPBc6n1uu1pi",medium:"uHM5B97d0hwAYDvOOmY8",seperator:"Oe5t36YEWzbJKH5LBNYD",seperatorAlbum:"dJMAGpC7b6bMSWNEfk6r"};function we({episode:e,podcastName:t,podcastUri:i,onLike:s,onMoreButtonClick:n,onDownloadClick:o,spec:d,featureIdentifier:u,referrerIdentifier:m,size:p="xxl"}){const h=(0,a.useRef)(null);(0,_.p)(h);const g=(0,V.y)(),y=(0,H.T)(e.uri),b=g===D.E.LARGE,{draggable:N,onDragStart:C}=(0,O.P)({itemUris:[e.uri],dragLabelText:`${e.name} • ${t}`}),F=(0,x.s)(),{togglePlay:R,isPlaying:B,isActive:A}=(0,X.P)({uri:e.uri},{featureIdentifier:u,referrerIdentifier:m}),[P,G]=(0,a.useState)(e.playedState.state===he._w.Completed),K=(0,U.V)(e.uri),Z=c.Ru.get("tracklist.a11y.play",e.name,t),Q=c.Ru.get("tracklist.a11y.pause",e.name,t),se=(0,a.useCallback)((()=>{const t=d.hitUiNavigate({destination:e.uri});F.logInteraction(t),K()}),[K,F,d,e.uri]),ne=(0,a.useCallback)((t=>{const i=d.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),a=d.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});F.logInteraction(t?i:a),s?.(t)}),[d,F,e.uri,s]),le=(0,a.useCallback)(((t,i)=>{let a;i===Y.NV.ADD?a=d.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):i===Y.NV.REMOVE&&(a=d.downloadButtonFactory().hitUiReveal()),a&&F.logInteraction(a),o?.(t,i)}),[F,d,e.uri,o]),re=(0,a.useCallback)((()=>{const t=d.titleFactory().hitUiNavigate({destination:e.uri});F.logInteraction(t)}),[F,d,e.uri]),oe=(0,a.useCallback)((t=>{let i;t.preventDefault(),A&&!B&&(i=d.playButtonFactory().hitResume({itemToBeResumed:e.uri})),B||A||(i=d.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),B&&(i=d.playButtonFactory().hitPause({itemToBePaused:e.uri})),i&&F.logInteraction(i),R()}),[R,F,d,e.uri,B,A]),de=(0,a.useCallback)((e=>{n?.(e)}),[n]),ce=(0,w.jsx)(v.d,{lineClamp:2,children:(0,w.jsx)(L.N,{to:e.uri,onClick:re,children:e.name})}),ue=(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(j.j,{lineClamp:1,paddingBottom:b?"8px":void 0,children:(0,w.jsx)(S.h,{menu:(0,w.jsx)(ae.H,{uri:i}),children:(0,w.jsx)(L.N,{to:i,className:ge.subtitleLink,onClick:(me=i,()=>{const e=d.subtitleFactory().hitUiNavigate({destination:me});F.logInteraction(e)}),children:(0,w.jsx)(r.E,{as:"span",variant:"bodySmall",children:t})})})})});var me;const we=(0,w.jsx)("div",{className:ge.imageContainer,children:(0,w.jsx)(z.b,{className:l()(ge.showImage,{[ge.largeImage]:b}),type:J.c.EPISODE,size:M(g),title:e.name,images:e.coverArt?.sources})}),ye=b?"medium":"small",be=(0,xe.Wx)(e.restrictions,e.playability),ve=be.isPaywalled&&!be.isUserSubscribed,fe=!ve,je=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(pe,{episode:e,isPlaying:B,isActive:A,isFullyPlayed:P,setIsFullyPlayed:G}),(0,w.jsxs)("div",{className:ge.footer,children:[(0,w.jsxs)("div",{className:ge.actions,children:[(0,w.jsx)(te.b,{onClick:ne,uri:e.uri,size:ye,className:ge.visibleAction,condensed:!0}),(0,w.jsx)(ee.e,{className:l()({[ge.visibleAction]:(0,W.X)(y)}),onClick:le,uri:e.uri,size:ye,canDownload:fe,condensed:!0}),(0,w.jsx)(q.r,{spec:d,children:(0,w.jsx)(E.b,{menu:(0,w.jsx)(ie.b,{uri:e.uri,onMarkAsPlayed:G,isPlayed:P}),children:(0,w.jsx)(I.e,{onClick:de,size:ye})})})]}),(0,w.jsx)("div",{className:ge.playButton,children:(0,w.jsx)(T.R,{"aria-label":"whats-new-feed-play-button",size:"small",onClick:oe,isPlaying:B,ariaPlayLabel:Z,ariaPauseLabel:Q,version:T.H.secondary,disabled:!e.playability.playable,locked:ve})})]})]}),ke=(0,w.jsx)($.v,{lineClamp:2,paddingBottom:b?"4px":void 0,className:ge.description,children:(0,w.jsx)(r.E,{as:"span",variant:"bodySmall",children:e.description})});return(0,w.jsx)(S.h,{menu:(0,w.jsx)(ie.b,{uri:e.uri,onMarkAsPlayed:G,isPlayed:P}),children:(0,w.jsx)("div",{draggable:N,onDragStart:C,children:(0,w.jsx)(f.v,{size:p,ref:h,className:ge.row,media:we,title:ce,subtitle:ue,id:e.uri,variant:"naked",body:ke,footer:je,onClick:se,hoverBackgroundColor:"backgroundHighlight",layout:b?"wide":"regular",horizontalGap:b?k.lT:k.CJ,verticalGap:k.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})})}function ye({item:e,spec:t}){if("AlbumResponseWrapper"===e.content.__typename){const i=e.content.data;if("Album"===i.__typename)return(0,w.jsx)(Q,{album:i,spec:t})}if("EpisodeOrChapterResponseWrapper"===e.content.__typename){const i=e.content.data;if("Chapter"===i.__typename)return(0,w.jsx)(w.Fragment,{});if("Episode"===i.__typename){let e="",a="";return"Podcast"===i.podcastV2.data.__typename&&(e=i.podcastV2.data.name,a=i.podcastV2.data.uri),(0,w.jsx)(we,{episode:i,podcastName:e,podcastUri:a,spec:t,referrerIdentifier:"whats_new_panel",featureIdentifier:"whats_new_panel"})}}return(0,w.jsx)(w.Fragment,{})}var be=i(86595);const ve="PNAsPBOgLLv9EX8LZ6xL",fe="UjEEhwY497frsytmeR9u",je="VQ0BLAewv7Aw5H3hV0YK",ke="pxV6pRWzmVb2_leuWtEG",Ne="G97bWDW7Mp3aZEL19Umr",Ce="p6l0_RUXhei0P7rrQaeg",Ie="erd9k4EG_HWK3UzsLhht",Fe="ap9brNzQxEcx9SV2FksM",Ee="pVVteJIfAdehWU3vX7JR",Se="J_VZoZ53jBtkdyxrt2My",Re="VOGWdrCvz59_A_wAZv58",Be="m8V0BPcmce3GusmXkFhM",Ae=a.memo((()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(be.Y,{as:"h3",variant:"titleSmall",className:Se,charCount:4,isLoading:!0}),(0,w.jsx)("div",{className:Fe,children:[20,50,25].map(((e,t)=>(0,w.jsx)(be.Y,{as:"div",variant:"bodySmall",className:Se,charCount:e,isLoading:!0},`${e}-${t}`)))})]})));var Le=i(88869),Pe=i(66037),De=i(61869),Me=i(78487);const Te={offset:0,limit:50,onlyUnPlayedItems:!1};const Oe={[he.tv.Album]:{id:"ALBUM",getName:()=>c.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music",active:!1},[he.tv.Episode]:{id:"EPISODE",getName:()=>c.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows",active:!1}};function Ue(e){switch(e){case he.tv.Album:return he.tv.Album;case he.tv.Episode:return he.tv.Episode;case he.tv.WhatsNewFeedNotification:return he.tv.WhatsNewFeedNotification;case he.tv.Unknown:default:return he.tv.Unknown}}const _e=({spec:e,items:t})=>{const[i,s]=(0,a.useState)([]),n=e=>{const t=e.state.state;if(!e.state.timestamp?.isoString&&t===he.GN.New)return!0;if(e.state.timestamp?.isoString){const t=new Date(e.state.timestamp.isoString).getTime();return Date.now()-t<=36e5}return!1},l=t.findIndex((e=>!n(e))),o=(0,a.useCallback)(((t,i)=>{const a=n(t)&&i<l,s=a&&0===i;return(0,w.jsxs)("div",{className:Be,children:[s&&(0,w.jsx)(r.E,{as:"h3",variant:"titleSmall",className:je,semanticColor:"textBase",children:c.Ru.get("web-player.whats-new-feed.new-section-title")}),!a&&i===l&&(0,w.jsx)(r.E,{as:"h3",variant:"titleSmall",className:je,semanticColor:"textBase",children:c.Ru.get("web-player.whats-new-feed.earlier-section-title")}),(0,w.jsx)("hr",{className:Re,"aria-hidden":!0}),(0,w.jsx)(ye,{item:t,spec:e.notificationItemFactory({identifier:t.id,position:i})},t.id)]},t.id)}),[l,e]),d=(0,a.useRef)(0),u=(0,a.useCallback)((()=>{const e=t.slice(d.current,d.current+10);s((t=>(d.current=d.current+10,[...t,...e])))}),[t]),{ref:m,breakpoint:p}=(0,Pe.x)({[D.E.MEDIUM]:0,[D.E.LARGE]:600});return(0,w.jsx)(V.o.Provider,{value:p,children:(0,w.jsx)("div",{className:Ie,role:"list",ref:m,children:(0,w.jsx)(Le._,{onReachBottom:u,triggerOnInitialLoad:!0,children:i.map(o)})})})},ze=({includedContentTypes:e,data:t,handleRetry:i,error:a,spec:s,loading:n})=>{if(n)return(0,w.jsxs)("div",{className:ke,role:"list",children:[(0,w.jsx)(Ae,{}),(0,w.jsx)(Ae,{})]});if(a)return(0,w.jsxs)("div",{className:Ne,dir:"auto",children:[(0,w.jsx)(r.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:c.Ru.get("error.generic")}),(0,w.jsx)(r.E,{as:"p",variant:"bodyMedium",children:c.Ru.get("web-player.whats-new-feed.panel.error")}),(0,w.jsx)(o.n,{className:Ce,onClick:i,size:"small",children:(0,w.jsx)(r.E,{as:"span",variant:"bodyMediumBold",semanticColor:"textBase",children:c.Ru.get("web-player.whats-new-feed.panel.error.button")})})]});const l=t?.whatsNewFeedItems?.items;if(!l||0===l?.length){const{title:t,message:i}=function(e=[]){return e.includes(he.tv.Episode)?{title:c.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.title"),message:c.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.message")}:e.includes(he.tv.Album)?{title:c.Ru.get("web-player.whats-new-feed.panel.empty-results-music.title"),message:c.Ru.get("web-player.whats-new-feed.panel.empty-results-music.message")}:{title:c.Ru.get("web-player.whats-new-feed.panel.empty-results-all.title"),message:c.Ru.get("web-player.whats-new-feed.panel.empty-results-all.message")}}(e);return(0,w.jsx)(u.p,{title:t,message:i,renderInline:!0})}return(0,w.jsx)(_e,{items:l,spec:s},e.join(" "))},Ve=()=>{const e=(0,s.jE)(),{spec:t,logger:i}=(0,Me.r)(d.q,{}),n=(0,a.useCallback)((()=>{const{name:e}=p.lo;return[e]}),[]),o=(0,a.useCallback)((()=>{e.invalidateQueries({queryKey:n()})}),[e,n]);(0,a.useEffect)((()=>{i.logImpression(t.impression())}),[i,t]);const[u,h]=(0,a.useState)(Oe),x=Object.values(u),g=x.filter((e=>e.active)),y=g.length>0?[]:x,v=g.map((e=>e.id)),f=(0,a.useCallback)((e=>{const t=Ue(e),i={id:u[t]?.id||he.tv.Unknown,getName:()=>u[t]?.getName()||"",ubiId:u[t]?.ubiId||"",active:!u[t]?.active},a={...Oe,...u,[i.id||"UNKNOWN"]:i};h(a)}),[u,h]),j=(0,a.useCallback)((()=>{h(Oe)}),[h]),{data:k,error:N,loading:C}=(0,p.dS)({...Te,includedContentTypes:v.map(Ue)??[]},{gcTime:30*De.i}),{getGraphQLLoader:I}=(0,m.mv)(),F=I();return(0,a.useEffect)((()=>{if(!k?.whatsNewFeedItems?.items)return;const e=k?.whatsNewFeedItems?.items.filter((e=>e.state.state===he.GN.New)).map((e=>({id:e.id,state:he.GN.Seen})));e.length>0&&async function(e,t){await e(p.BP,{items:t})}(F,{items:e})}),[k?.whatsNewFeedItems?.items,F]),(0,w.jsxs)("section",{className:l()(Ee,"contentSpacing"),children:[(0,w.jsxs)("div",{className:ve,children:[(0,w.jsx)(r.E,{as:"h1",semanticColor:"textBase",variant:"titleMedium",className:fe,children:c.Ru.get("web-player.whats-new-feed.panel.title")}),(0,w.jsx)(r.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:c.Ru.get("web-player.whats-new-feed.panel.subtitle")})]}),!N&&(0,w.jsx)(b,{availableFilters:y,toggleFilterId:f,selectedFilters:g,resetFilterIds:j,spec:t.filterChipsFactory()}),(0,w.jsx)(ze,{includedContentTypes:v.map(Ue),data:k,loading:C,error:N,spec:t,handleRetry:o})]})}},88869:(e,t,i)=>{i.d(t,{_:()=>c});var a=i(30758),s=i(57574),n=i(97500),l=i.n(n);const r="eqw9lvuoZHrkWMTdyTpY",o="lb08f71wES9AQnKx6e0R";var d=i(86070);const c=a.memo((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:i,showScrollbar:n=!0,horizontalScroll:c=!1,className:u}=e,{ref:m,inView:p}=(0,s.Wx)({initialInView:t});return(0,a.useEffect)((()=>{p&&i&&i()}),[p,i]),(0,d.jsxs)("div",{className:l()({[o]:!n,[r]:c},u),"data-testid":"infinite-scroll-list",children:[e.children,(0,d.jsx)("div",{ref:m})]})}))},32326:(e,t,i)=>{i.d(t,{p:()=>s});var a=i(30758);const s=e=>{const[t,i]=(0,a.useState)(0);function s(a){const s=e.current?.querySelectorAll('button:not([disabled]), [href], input, select, textarea, a,[tabindex]:not([tabindex="-1"])');if(!s)return;s.forEach((e=>{e.setAttribute("tabindex","-1")})),s&&s[0].setAttribute("tabindex","0");let n=t;if(s&&s.length>0)switch(a.key){case"Tab":document.activeElement&&i(0);break;case"ArrowUp":0===n?(a.preventDefault(),n=s.length-1):n-=1,s[n].focus(),i(n);break;case"ArrowDown":a.preventDefault(),n===s.length-1?n=0:n+=1,s[n].focus(),i(n)}}a.useEffect((()=>{const t=e.current;return t?.addEventListener("keydown",s),()=>{t?.removeEventListener("keydown",s)}}))}},72888:(e,t,i)=>{i.d(t,{X:()=>s});var a=i(60285);function s(e){return[a.kw.YES,a.kw.DOWNLOADING,a.kw.WAITING].includes(e)}}}]);
//# sourceMappingURL=dwp-whats-new-feed.js.map