"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5962,1408],{47892:(e,a,i)=>{i.d(a,{B:()=>n});var r=i(15231),t=i(49329),s=i(86070);const n=({children:e})=>(0,s.jsx)(r.E,{variant:"bodySmall",className:t.A.pretitle,children:e})},61934:(e,a,i)=>{i.d(a,{h:()=>u});var r=i(30758),t=i(42252),s=i(47667),n=i(45866),l=i(11798),o=i(89035);var c=i(514),d=i(86070);const u=({children:e,action:a,uri:i})=>{const u=(0,n.V)(),m=(0,o.N)(l.JD);let h;const g=()=>{const e={triggerId:s.d,triggerAction:{type:a}};t.h.set((a=>({...a,...e}))),m.storeAction(l.j8,{operation:c.tS.ADD,uris:[i]})};try{h=r.Children.only(e)}catch(a){return(0,d.jsx)(d.Fragment,{children:e})}return u?r.cloneElement(h,{onClick:g}):(0,d.jsx)(d.Fragment,{children:e})}},33396:(e,a,i)=>{i.d(a,{g:()=>D});var r=i(30758),t=i(3074),s=i.n(t),n=i(57485),l=i(5562),o=i(15231),c=i(39733),d=i(46099),u=i(31352),m=i(48614),h=i(78845),g=i(4924),x=i(64580),p=i(99186),b=i(76276),j=i(41331),y=i(93290),f=i(9738),v=i(86070);const C=({onSelect:e})=>{const{viewMode:a,setViewMode:i}=(0,y.a)();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(x.y,{children:j.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),f.i.map((({value:r,icon:t,text:s},n)=>(0,v.jsx)(p.D,{role:"menuitemradio","aria-checked":a===r,divider:n===f.i.length-1?"after":void 0,autoClose:!1,leadingIcon:t(),onClick:()=>{i(r),e?.(r)},children:s()},r)))]})},k=({heading:e,selected:a,onSelect:i,options:r,enableViewModeMenu:t=!1,onSelectViewMode:s,sortOrder:n,...l})=>{let o;n&&(n===b.H.ASC||n===b.H.SECONDARY_ASC?o=m.U:n!==b.H.DESC&&n!==b.H.SECONDARY_DESC||(o=h.R));return(0,v.jsxs)(g.W,{getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),...l,children:[e?(0,v.jsx)(x.y,{children:e}):null,r.map((({key:e,value:r},t)=>(0,v.jsx)(p.D,{role:"menuitemradio","aria-checked":e===a.key,CheckedIcon:o,onClick:()=>i(e,t),children:r},e))),t&&(0,v.jsx)(C,{onSelect:s})]})};var w=i(80545),S=i(78487),A=i(4355);const M="x-sortBox-sortDropdown",N="cvTLPmjt6T7M85EKcB8w",I="SbDHY3fVADNJ4l9qOLQ2",R=({isOpen:e,className:a})=>e?(0,v.jsx)(n.J,{size:"small","aria-hidden":"true",className:a}):(0,v.jsx)(l.y,{size:"small","aria-hidden":"true",className:a}),D=({heading:e,options:a,selected:i,onSelect:t,sortOrder:n,variant:l="bodySmall",semanticColor:m,disabled:h,onClick:g,ariaLabel:x,enableViewModeMenu:p=!1})=>{const b=(0,c.NC)(A.mA)&&p,{viewMode:j}=(0,w.a)();i||(i=a?.[0]);const y=f.i.find((({value:e})=>e===j))||f.i[0],C=(0,r.useMemo)((()=>`sortboxlist-${s().create().hex}`),[]),{spec:D,logger:F}=(0,S.r)(d.d,{});return(0,v.jsx)(u.b,{menu:(0,v.jsx)(k,{selected:i,options:a,onSelect:(e,a)=>{t(e,a);const i=D.sortBySectionFactory().sortOptionFactory({identifier:e}).hitSort();F.logInteraction(i)},sortOrder:n,heading:e,enableViewModeMenu:b,onSelectViewMode:e=>{const a=D.viewAsSectionFactory().viewOptionFactory({identifier:e}).hitUiElementToggle();F.logInteraction(a)},id:C}),children:(e,a,r)=>(0,v.jsxs)("button",{className:M,onClick:e=>{h||(g?.(e),a(e))},ref:r,type:"button","aria-label":x,role:"combobox","aria-controls":C,"aria-expanded":e,children:[(0,v.jsx)(o.E,{"data-sortbox-label":!0,semanticColor:m,variant:l,className:N,children:i?.value||(b?y.text():"")}),b?y.icon():(0,v.jsx)(R,{isOpen:e,className:I})]})})}},9963:(e,a,i)=>{i.d(a,{q:()=>j});var r=i(48778),t=i(41331),s=i(60122),n=i(30758),l=i(97228),o=i(6525),c=i(79277),d=i(25042),u=i(4139),m=i(26205),h=i(86070);const g=({merchId:e,spec:a,uri:i,url:r,images:t,description:s,merchName:g="",testId:x,index:p,merchVariant:b,variant:j})=>{const y=(0,u.s)(),f=(0,n.useMemo)((()=>a.merchCardFactory({identifier:e,uri:i,position:p})),[e,i,a,p]),v=()=>{window.open(r,"_blank");const e=f.hitNavigateToExternalUri({destination:r});y.logInteraction(e)},C=(0,m.t)(f);return(0,h.jsx)("div",{ref:C,children:(0,h.jsx)(l.Z,{variant:j,delegateNavigation:!0,index:p,onClick:v,headerText:g,featureIdentifier:"playlist",requestId:b,uri:i,isPlayable:!1,renderCardImage:()=>(0,h.jsx)(o.M,{images:t}),renderSubHeaderContent:()=>(0,h.jsx)(c.c,{children:s?(0,h.jsx)(d.N,{source:s,onLinkClick:v}):g&&(0,h.jsxs)("span",{children:["Description: ",g]})}),testId:x})})};var x=i(78330),p=i(78487),b=i(62877);const j=({id:e,merchItems:a,merchVariant:i,uri:n})=>{const{spec:l}=(0,p.r)(r.k,{data:{identifier:e,uri:n,position:0,reason:i}});return(0,h.jsx)(x.pZ,{value:"shelf/offers","data-testid":"merch-shelf",children:(0,h.jsx)(s.$,{total:a.length,title:t.Ru.get("web-player.merch.title"),className:b.A.shelfSpace,seeAllLabel:t.Ru.get("web-player.merch.seeAllUri"),children:a.map(((e,a)=>e.url&&e.name?(0,h.jsx)(x.pZ,{value:"card",index:a,children:(0,h.jsx)(g,{index:a,url:e.url,uri:e.uri,merchName:e.name,description:e.description||"",images:e.image?.sources||[],merchVariant:i,merchId:e.uri,spec:l},e.url)},e.url):null))})})}},31983:(e,a,i)=>{i.r(a),i.d(a,{default:()=>ta});var r=i(30758),t=i(41978),s=i(77),n=i(15231),l=i(57485),o=i(5562),c=i(39733),d=i(63274),u=i(41331),m=i(49911),h=i(7008),g=i(19547),x=i(74946),p=i(31385),b=i(90379),j=i(45866),y=i(32994),f=i(86070);const v=({message:e,spec:a,logger:i,className:r})=>{const{onUpgradeClick:t,type:s}=(0,y.i)(a,i);return(0,j.V)()?null:(0,f.jsx)(h.v,{id:"catalogue-restricted-banner",className:r,variant:"tinted",leading:(0,f.jsx)(g.N,{}),title:e,trailing:(0,f.jsx)(x.$,{size:"small",onClick:t,iconOnly:"external"===s?p.H:b.h,"aria-label":u.Ru.get("upgrade.tooltip.title"),title:u.Ru.get("upgrade.tooltip.title")})})};var C=i(33130),k=i(93720),w=i(99870),S=i(62462),A=i(59092),M=i(36041),N=i(16373),I=i(99168),R=i(90436),D=i(87188),F=i(47892),L=i(27275),U=i(7029),P=i(13799),E=i(56374),V=i(6488),B=i(70548),O=i(99842),T=i(13948),_=i(2304),z=i(27134),H=i(39503),J=i(31352),X=i(61934),q=i(52690),Y=i(33396),$=i(58602),K=i(96935),W=i(15339),Z=i(3782),G=i(45292),Q=i(11244),ee=i(71115),ae=i(46345),ie=i(98550),re=i(61535),te=i(72553),se=i(78487),ne=i(4355);const le="m2grVeuHNwfGLVpaSBle",oe="GLKjAw6oM_egXztVxKKB",ce="MGZ4oJmGVPrWsx5cT5hN",de="DmrVJc9vWCbjU_DuRvfe",ue="yLmA5f7x65en2MdKbIhX",me="F5J4ctyBbgSfS6qkFH5c",he=r.memo((function({uri:e,togglePlay:a,isPlaying:i,isActive:t,spec:s,logger:n,backgroundColor:l,name:o,artists:c,isPlayable:d,sharingInfo:m}){const h=(0,G.W)(),g=(0,Q.n)(),x=(0,ie.f)(),p=(0,r.useMemo)((()=>s.actionBarFactory()),[s]),[b,j]=(0,re.A)(e),y=(0,r.useCallback)((()=>{const r=(0,ee.$I)({isPlaying:i,isActive:t,spec:p.playButtonFactory(),logger:n,uri:e});a({loggingParams:r})}),[i,t,a,p,n,e]),v=(0,$.d$)(),{spec:C,logger:k}=(0,se.r)(B.e,{data:{uri:e}});(0,r.useEffect)((()=>{v&&k.logImpression(C.impression())}),[v,k,C]);const S=(0,r.useCallback)((async()=>{let a;const i=p.saveButtonFactory();b?a=i.hitDislike({itemToBeDisliked:e}):(a=i.hitLike({itemToBeLiked:e}),v&&k.logInteraction(C.hitFollow({itemToBeFollowed:e}))),n.logInteraction(a),h({targetUri:e,intent:b?"unsave":"save",type:"click"});try{await j(!b)}catch{}}),[h,e,b,j,p,n,v,k,C]),A=(0,W.X)(),M=(0,Z.j)();return(0,f.jsx)(O.E,{backgroundColor:l,children:(0,f.jsxs)(T.S,{children:[(0,f.jsx)(P.D,{onClick:y,disabled:!d,isPlaying:i,size:M,uri:e}),A&&(0,f.jsx)(te.r,{spec:p,children:(0,f.jsx)(K.Y,{entityName:o,contextUri:e,activationPlacement:"bottomEnd",size:M})}),(0,f.jsx)(X.h,{uri:e,action:ae.no.SAVE_ALBUM,children:(0,f.jsx)(_.M,{isAdded:b,onClick:S,disabled:!g&&!x?.getCapabilities().canModifyOffline,size:M,condensed:!0})}),(0,f.jsx)(z.f,{uri:e,isFollowing:b,onClick:(a,i)=>(0,ee.Qv)(i,p.downloadButtonFactory(),n,e),onFollow:S,size:M,condensed:!0}),(0,f.jsx)(J.b,{onShow:()=>(0,ee.R2)(p,n),menu:(0,f.jsx)(w.h,{uri:e,artistUri:c?.[0]?.uri,sharingInfo:m}),children:(0,f.jsx)(H.e,{label:u.Ru.get("more.label.context",o),size:M})}),(0,f.jsx)("div",{className:ue,children:(0,f.jsx)(q.u,{property:ne.mA,renderNewExperience:()=>(0,f.jsx)(Y.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var ge=i(25403),xe=i(59677),pe=i(4924),be=i(99186);const je=({releases:e})=>(0,f.jsx)(pe.W,{children:e.map((e=>(0,f.jsx)(be.D,{role:"menuitem",to:(0,xe.o_)(e.uri).toURLPath(!0),children:e.name},e.uri)))}),ye=864e5,fe=365.25*ye;var ve=i(37533),Ce=i(54159),ke=i(50439),we=i(51193),Se=i(45237),Ae=i(76355),Me=i(65968),Ne=i(92686);const Ie="bhvAemcPYUmxOdBe1mVi",Re="hmgHdasWrZaA9tiXVw_u",De="RmbxUFLb4j9KmgftJyk1",Fe="boNCdFnbh9y0PBweIDUt",Le="LfQtKa295FPgk8VuZRfD",Ue="Oytey9nANMtSDKSmZpJ6",Pe=r.memo((function(e){const{images:a,title:i,isOpen:t,onClose:s}=e,n=(0,r.useMemo)((()=>(0,Ne.g)(a,{desiredSize:1e4})),[a]);return n?(0,f.jsx)(Ae.A,{className:Ie,isOpen:t,onRequestClose:s,animation:{modal:{base:Fe,afterOpen:Le,beforeClose:Ue}},animated:!0,children:(0,f.jsxs)("div",{style:{"--image-width":`${n.width}px`,"--image-height":`${n.height}px`},className:Re,children:[(0,f.jsx)(Me._,{loading:"eager",alt:i,src:n.url,className:De}),(0,f.jsx)(Se.H,{onClick:s,semanticColor:"textBase",children:u.Ru.get("web-player.cover-art-modal.close")})]})}):null}));var Ee=i(32860),Ve=i(9963),Be=i(96266),Oe=i(61869);const Te=new Be.l("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null);var _e=i(62877);const ze=({albumName:e,albumURI:a})=>{const{data:i}=(r={uri:a},t={gcTime:5*Oe.i},(0,Oe.I)(Te,r,t));var r,t;const s=i?.albumUnion&&"merch"in i.albumUnion?i?.albumUnion?.merch?.items:[];return s&&s?.length>0?(0,f.jsx)("div",{className:"contentSpacing",children:(0,f.jsx)("div",{className:_e.A.albumMerch,children:(0,f.jsx)(Ve.q,{id:e,uri:a,merchItems:s,merchVariant:"Album page merch items"})})}):null};var He=i(80545),Je=i(27212),Xe=i(88296),qe=i(35369),Ye=i(19019),$e=i(99559),Ke=i(12074),We=i(22010),Ze=i(61217),Ge=i(98882),Qe=i(37708),ea=i(20432);const aa=r.lazy((()=>i.e(6920).then(i.bind(i,86920))));function ia(e){switch(e){case ke._.Single:return u.Ru.get("single");case ke._.Ep:return u.Ru.get("ep");case ke._.Compilation:return u.Ru.get("compilation");case ke._.Audiobook:return u.Ru.get("card.tag.audiobook");case ke._.Album:default:return u.Ru.get("album")}}const ra=({uri:e,album:a})=>{const i=(0,s.zy)(),{spec:h,logger:g,UBIFragment:x}=(0,se.r)(d.E,{data:{uri:e}}),p=(0,r.useMemo)((()=>h.trackListFactory()),[h]),b=(0,r.useMemo)((()=>h.moreByArtistShelfFactory()),[h]),j=(0,r.useMemo)((()=>h.upgradeButtonFactory()),[h]),y=a.moreAlbumsByArtist,U=parseInt(new URLSearchParams((0,s.zy)().search).get("index")||"0",10),B=(0,Xe.J)(e),{usePlayContextItem:O,togglePlay:T,isPlaying:_,isActive:z}=(0,Ge.P)({uri:B},{featureIdentifier:"album"}),H=(0,r.useCallback)(((e,a)=>{if(h){const e=h.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});g.logInteraction(e)}}),[g,h]),{isOpen:J,openModal:X,closeModal:q}=(()=>{const[e,a]=(0,r.useState)(!1);return{isOpen:e,openModal:(0,r.useCallback)((()=>a(!0)),[]),closeModal:(0,r.useCallback)((()=>a(!1)),[])}})(),Y=(0,c.NC)(Ye.WJ1,{loadingValue:!1})?{onClick:X,ariaLabel:u.Ru.get("web-player.album.open_coverart_modal")}:{},$=(0,r.useCallback)((()=>new URLSearchParams(i.search.slice(1)).get("highlight")||""),[i.search]),K=a.uri,W=a.name,Z=a.albumType,G=a.release?.date,Q=a.release?.precision,ee=a.nrTracks,ae=a.images,ie=a.extractedColors?.colorRaw.hex,re=a.artists,te=a.isPlayable,ne=a.isCatalogueRestricted,ue=a.copyright.items,xe=a.courtesyLine,pe=a.duration.durationMs,be=a.duration.isEstimate,ve=$(),ke=(0,t.d4)($e.Ht),Se=ke.overrides?.locale??u.Ru.getLocaleForTranslation(),Ae=(0,Je.W)({uri:e,type:"locale"}),Me=(0,Qe.qc)({albumName:W,albumType:Z,albumArtists:re.map((e=>e.name)).join(u.Ru.getSeparator()),shouldLocalize:Ae,i18n:u.Ru});(0,qe.z)(ie||null);const Ne=function(e){return(0,r.useMemo)((()=>{if(!e?.date)return null;if("day"===e.precision){const a=new Date(e.date),i=(new Date).getTime()-a.getTime(),r=i%fe;return r<3.5*ye||r>312552e5?Math.round(i/fe):null}return null}),[e])}(a.release),{isCompactMode:Ie}=(0,He.a)(),Re=(0,Ce.t)(),De=(0,f.jsx)(w.h,{uri:a.uri,artistUri:a.artists?.[0]?.uri,sharingInfo:a.sharingInfo});return(0,f.jsxs)("section",{className:le,"data-testid":"album-page",children:[(0,f.jsx)(S.Q,{children:Me}),!ve&&(0,f.jsx)(Ee.c,{artistOrShow:re.map((e=>e.name)).join(u.Ru.getSeparator()),title:W,uri:e,entityType:Ee.p.ALBUM}),null!==Ne?(0,f.jsx)(r.Suspense,{fallback:null,children:(0,f.jsx)(aa,{colorLight:a.extractedColors?.colorLight.hex,colorDark:a.extractedColors?.colorDark.hex,name:W,years:Ne})}):null,(0,f.jsxs)(A.z,{backgroundColor:ie,children:[(0,f.jsxs)(I.h,{children:[(0,f.jsx)(P.D,{size:"medium",onClick:()=>T(),disabled:!te,isPlaying:_,uri:e}),(0,f.jsx)(k.h,{menu:De,children:(0,f.jsx)(R.X,{text:W,dragUri:e,dragLabel:W})})]}),(0,f.jsx)(k.h,{menu:De,children:(0,f.jsx)(M.K,{dragUri:K,images:ae,name:W,placeholderType:"album",...Y})}),(0,f.jsxs)(N.Y,{children:[(0,f.jsx)(F.B,{children:ia(Z)}),(0,f.jsx)(k.h,{menu:De,children:(0,f.jsx)(L.mm,{dragUri:a.uri,dragLabel:a.name,scaleAtMinWidth:L.tw,children:W})}),(0,f.jsx)(D.t,{creators:re,onCreatorClick:H,releaseDate:G,releaseDatePrecision:Q,totalItems:ee,durationMilliseconds:pe,isEstimatedDuration:be,hasTracks:!0})]})]}),(0,f.jsx)(he,{backgroundColor:ie,uri:e,togglePlay:T,isPlaying:_,isActive:z,spec:h,logger:g,sharingInfo:a.sharingInfo,name:a.name,artists:a.artists,isPlayable:a.isPlayable}),(0,f.jsxs)("div",{className:"contentSpacing",children:[ne&&(0,f.jsx)(v,{message:(0,we.E)(Z),className:me,spec:j,logger:g}),(0,f.jsx)(x,{spec:p,children:(0,f.jsx)(V.a,{columns:Re,children:(0,f.jsx)(ge.F,{ariaLabel:W,nrTracks:(0,we.YD)(a.discs)?a.discs.totalCount+ee:ee,discs:a.discs,albumUri:K,highlightUri:ve,scrollToIndex:U,usePlayContextItem:O,initalTracks:a.items,isCompactMode:Ie})})}),(0,f.jsxs)("div",{className:de,children:[(0,f.jsxs)("div",{children:[G&&(0,f.jsx)(n.E,{as:"p",variant:"bodySmall",children:(0,ea.rh)((0,ea.ad)(G),Se,{year:"numeric",month:"long",day:"numeric"},Q)}),(0,f.jsx)(Ke.Z,{copyrights:ue,courtesyLine:xe})]}),a.releases.items.length>0&&(0,f.jsx)(C.t,{menu:(0,f.jsx)(je,{releases:a.releases.items}),children:(e,i,r)=>(0,f.jsxs)("button",{ref:r,className:ce,type:"button",onClick:i,children:[(0,f.jsx)(n.E,{variant:"bodySmall",children:u.Ru.get("album-page.more-releases",a.releases.items.length)}),e?(0,f.jsx)(l.J,{size:"small"}):(0,f.jsx)(o.y,{size:"small"})]})})]})]}),(0,f.jsx)(ze,{albumName:W,albumURI:K}),(0,f.jsx)(f.Fragment,{children:y?.length>0&&(0,f.jsx)("div",{className:"contentSpacing",children:(0,f.jsx)(x,{spec:b,children:(0,f.jsx)(E.p,{index:0,id:"more-albums",className:oe,title:u.Ru.get("album-page.more-by-artist",re?.[0]?.name),total:y.length,seeAllUri:`${re?.[0]?.uri.replace("artist","app:artist")}:discography`,seeAllLabel:u.Ru.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:y.map(((e,a)=>(0,f.jsx)(m.R,{index:a,artists:re,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})})}),(0,f.jsx)(Pe,{title:Me,isOpen:J,onClose:q,images:ae})]})},ta=r.memo((function(){const{albumId:e}=(0,s.g)(),a=`spotify:album:${e}`,{loading:i,error:r,data:t,canLoadOffline:n}=(0,ve.$)(a);return i||!t?(0,f.jsx)(U.LoadingPage,{hasError:null!==r,loadOffline:n,errorMessage:u.Ru.get("error.not_found.title.album")}):(0,f.jsx)(Ze.P,{surface:We.u.ALBUM,uris:[a],children:(0,f.jsx)(ra,{uri:a,album:t})})}))},96935:(e,a,i)=>{i.d(a,{Y:()=>r.Y});var r=i(75350)},15339:(e,a,i)=>{i.d(a,{X:()=>r.XR});var r=i(93422)},35369:(e,a,i)=>{i.d(a,{f:()=>l,z:()=>n});var r=i(30758),t=i(13390),s=i(53945);function n(e,a=t.l0o){const i=(0,s.as)();return(0,r.useEffect)((()=>(e&&i((0,s.Mo)(e)),()=>{i((0,s.Hf)())})),[e,i]),e||a}const l=({color:e,fallbackColor:a})=>(n(e,a),null)},62877:(e,a,i)=>{i.d(a,{A:()=>r});const r={albumMerch:"V1660uk_uXXZAMEmV4D4",shelfSpace:"RbnoPhjDDAtbxN8gAiif"}}}]);
//# sourceMappingURL=xpui-routes-album.js.map