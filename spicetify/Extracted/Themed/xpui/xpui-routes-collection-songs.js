"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8828],{39919:(e,t,l)=>{l.d(t,{s:()=>y});var a=l(30758),r=l(97500),s=l.n(r),i=l(27338),n=l(31744),o=l(91161),c=l(24835);const d="IVnoxrO3iL_tz5ULI8g_";var u=l(86070);const g={marginBlockEnd:0,willChange:"transform, opacity"},m=({filterId:e=null,isPrimaryFilter:t,isPlaceholder:l,resetFilterIds:r,toggleFilterId:n,className:o,innerRef:c,onFilterClick:m,index:p=0,...y})=>{const f=y.selected,h=(0,a.useCallback)((()=>{if(!e)return r(),void m(null,!1,p);m(e,!!f,p),n(e)}),[e,r,n,m,f,p]),x=(0,a.useCallback)((e=>{e.detail>1||l||h()}),[l,h]);return(0,u.jsx)(i.v,{...y,className:s()(o,{[d]:l}),onClick:x,selectedColorSet:"invertedLight",secondary:f&&!t,style:g,ref:c,tabIndex:-1})},p=({filterId:e=null,isPlaceholder:t,resetFilterIds:l,toggleFilterId:r,className:i,innerRef:o,onFilterClick:c,index:m=0,...p})=>{const y=p.selected,f=(0,a.useCallback)((()=>{if(!e)return l(),void c(null,!1,m);c(e,!!y,m),r(e)}),[e,l,r,c,y,m]),h=(0,a.useCallback)((e=>{e.detail>1||t||f()}),[t,f]);return(0,u.jsx)(n.m,{...p,"aria-label":p["aria-label"],className:s()(i,{[d]:t}),onClick:h,style:g,ref:o,tabIndex:-1})},y=(0,a.memo)((function({placeholderFilters:e=[],availableFilters:t,selectedFilters:l,toggleFilterId:r,resetFilterIds:s,onFilterClick:i,ariaLabel:n,clearBtnAriaLabel:d,className:g,applyLightThemeControls:y=!1}){const f=!(l||t),h=f?e:[...l??[],...t??[]],x=(0,a.useRef)(null),k=(0,a.useCallback)((()=>{(0,c.MS)(x.current,x.current?.nextElementSibling instanceof HTMLElement?x.current?.nextElementSibling:null),s()}),[s]);return 0===h.length?null:(0,u.jsxs)(o.FN,{className:g,ariaLabel:n,applyLightThemeControls:y,children:[!!l?.length&&(0,u.jsx)(p,{resetFilterIds:k,toggleFilterId:r,onFilterClick:i,"aria-label":d??n,innerRef:x}),h.map(((e,t)=>{const a=l?.includes(e),n=0===t;return(0,u.jsx)(m,{filterId:e.id,isPrimaryFilter:n,isPlaceholder:f,onFilterClick:i,resetFilterIds:s,toggleFilterId:r,selected:a,index:t,children:e.getName()},e.id)}))]})}))},33396:(e,t,l)=>{l.d(t,{g:()=>P});var a=l(30758),r=l(3074),s=l.n(r),i=l(57485),n=l(5562),o=l(15231),c=l(39733),d=l(46099),u=l(31352),g=l(48614),m=l(78845),p=l(4924),y=l(64580),f=l(99186),h=l(76276),x=l(41331),k=l(93290),b=l(9738),C=l(86070);const S=({onSelect:e})=>{const{viewMode:t,setViewMode:l}=(0,k.a)();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(y.y,{children:x.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),b.i.map((({value:a,icon:r,text:s},i)=>(0,C.jsx)(f.D,{role:"menuitemradio","aria-checked":t===a,divider:i===b.i.length-1?"after":void 0,autoClose:!1,leadingIcon:r(),onClick:()=>{l(a),e?.(a)},children:s()},a)))]})},T=({heading:e,selected:t,onSelect:l,options:a,enableViewModeMenu:r=!1,onSelectViewMode:s,sortOrder:i,...n})=>{let o;i&&(i===h.H.ASC||i===h.H.SECONDARY_ASC?o=g.U:i!==h.H.DESC&&i!==h.H.SECONDARY_DESC||(o=m.R));return(0,C.jsxs)(p.W,{getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),...n,children:[e?(0,C.jsx)(y.y,{children:e}):null,a.map((({key:e,value:a},r)=>(0,C.jsx)(f.D,{role:"menuitemradio","aria-checked":e===t.key,CheckedIcon:o,onClick:()=>l(e,r),children:a},e))),r&&(0,C.jsx)(S,{onSelect:s})]})};var I=l(80545),A=l(78487),F=l(4355);const j="x-sortBox-sortDropdown",w="cvTLPmjt6T7M85EKcB8w",D="SbDHY3fVADNJ4l9qOLQ2",R=({isOpen:e,className:t})=>e?(0,C.jsx)(i.J,{size:"small","aria-hidden":"true",className:t}):(0,C.jsx)(n.y,{size:"small","aria-hidden":"true",className:t}),P=({heading:e,options:t,selected:l,onSelect:r,sortOrder:i,variant:n="bodySmall",semanticColor:g,disabled:m,onClick:p,ariaLabel:y,enableViewModeMenu:f=!1})=>{const h=(0,c.NC)(F.mA)&&f,{viewMode:x}=(0,I.a)();l||(l=t?.[0]);const k=b.i.find((({value:e})=>e===x))||b.i[0],S=(0,a.useMemo)((()=>`sortboxlist-${s().create().hex}`),[]),{spec:P,logger:v}=(0,A.r)(d.d,{});return(0,C.jsx)(u.b,{menu:(0,C.jsx)(T,{selected:l,options:t,onSelect:(e,t)=>{r(e,t);const l=P.sortBySectionFactory().sortOptionFactory({identifier:e}).hitSort();v.logInteraction(l)},sortOrder:i,heading:e,enableViewModeMenu:h,onSelectViewMode:e=>{const t=P.viewAsSectionFactory().viewOptionFactory({identifier:e}).hitUiElementToggle();v.logInteraction(t)},id:S}),children:(e,t,a)=>(0,C.jsxs)("button",{className:j,onClick:e=>{m||(p?.(e),t(e))},ref:a,type:"button","aria-label":y,role:"combobox","aria-controls":S,"aria-expanded":e,children:[(0,C.jsx)(o.E,{"data-sortbox-label":!0,semanticColor:g,variant:n,className:w,children:l?.value||(h?k.text():"")}),h?k.icon():(0,C.jsx)(R,{isOpen:e,className:D})]})})}},4945:(e,t,l)=>{l.d(t,{b:()=>T});var a=l(30758),r=l(41331),s=l(4888),i=l(3692),n=l(20641),o=l(76484),c=l(1335),d=l(71036),u=l(82243),g=l(20507),m=l(76276),p=l(97027),y=l(78330),f=l(98550),h=l(4139),x=l(45485),k=l(92686),b=l(86070);const C=new Set(o.gc),S=new Set([]),T=a.memo((function({nrTracks:e,collectionUri:t,initialItems:l,uri:T,sortable:I=!0,scrollToUri:A,usePlayContextItem:F,outerDomRef:j,spec:w,isCompactMode:D=!1,tagFilter:R}){const P=(0,f.f)(),v=(0,a.useRef)(null),{filter:E}=(0,a.useContext)(n.g),L=(0,a.useRef)((()=>{})),[M,_]=(0,a.useState)([]),{sortState:N,setSortState:O}=(0,a.useContext)(o.cL),U=(0,h.s)(),B=(0,c.w)(),$=(0,a.useCallback)(((e,t)=>{e===m.$.ADDED_AT?O({column:m.$.ADDED_AT,order:N.order===m.H.ASC?m.H.DESC:m.H.ASC}):O((0,s.So)(e,N)),w&&U.logInteraction(w.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[U,O,N,w]);(0,a.useEffect)((()=>{v.current&&A&&v.current.scrollToItem({uri:A})}),[A]);const V=(0,a.useCallback)((e=>{const t=e.map((e=>e.uri));L.current(),P.remove({uris:t})}),[P]),H=(0,a.useCallback)(((e,t)=>{L.current=t,e.length>1?_(e):V(e)}),[V]),[,z]=(0,d.z1)(),q=(0,a.useCallback)((async(e,t)=>{const l=await P.getTracks({offset:e,limit:t,uri:T,sort:(0,p.c)(N),filters:[E??null,R??null].filter(x.P)}),a=l?.totalLength??0;return{items:l?.items??[],totalLength:a}}),[E,R,P,N,T]),K=(0,a.useCallback)(((e,l)=>{const a=(0,k.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,b.jsx)(u.W,{index:l,contextUri:t,uri:e.uri,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,albumOrShow:e.album,isExplicit:e.isExplicit,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:e.isLocal,addedBy:[],dateAdded:e.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:a?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:F,allowedDropTypes:[],isDisliked:!1,playlistName:r.Ru.get("sidebar.liked_songs"),isOwnedBySelf:!0,isCompactMode:D,hasAssociatedVideo:e.hasAssociatedVideo},l+e.uri)}),[t,F,D]),Q=(0,a.useCallback)((e=>({uri:e.uri,uid:e.uri})),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.pZ,{value:"liked-songs-tracklist",children:(0,b.jsx)(g.S4,{ariaLabel:r.Ru.get("sidebar.liked_songs"),hasHeaderRow:!0,columns:B,sortableColumns:P.getCapabilities().canSortTracksAndEpisodes&&I?C:S,sortState:N,onSort:$,renderRow:K,resolveItem:Q,onRemove:H,nrTracks:e,fetchTracks:q,limit:50,canFetchAllTracks:P.getCapabilities().canFetchAllItems,outerRef:v,outerDomRef:j,tracks:l,onNrValidItemsChange:z,isCompactMode:D,columnPersistenceKey:"liked-songs-tracklist"},t)}),(0,b.jsx)(i.F,{title:r.Ru.get("remove_from_your_liked_songs"),isOpen:M.length>0,tracks:M,onClose:e=>{e.stopPropagation(),_([])},onRemove:V})]})}))},97027:(e,t,l)=>{l.d(t,{c:()=>n});var a=l(4888),r=l(43111),s=l(99153);const i={[s.nw.ADDED_AT]:r.Sw.ADDED_AT,[s.nw.ADDED_BY]:null,[s.nw.ALBUM]:r.Sw.ALBUM_NAME,[s.nw.ARTIST]:r.Sw.ARTIST_NAME,[s.nw.DURATION]:null,[s.nw.TITLE]:r.Sw.NAME,[s.nw.SHOW_NAME]:null,[s.nw.PUBLISH_DATE]:null},n=e=>{const t=(0,a.Xt)(e);if(!t)return;const l=i[t.field],r=t.order;return l&&r?{field:l,order:r}:void 0}},13919:(e,t,l)=>{l.r(t),l.d(t,{default:()=>$e});var a=l(30758),r=l(41978),s=l(77),i=l(93723),n=l(39733),o=l(93233),c=l(59677),d=l(41331),u=l(62462),g=l(52182),m=l(7029),p=l(20641),y=l(76484),f=l(71036),h=l(6488),x=l(76276),k=l(99842),b=l(13948),C=l(27134),S=l(52690),T=l(13799),I=l(33396),A=l(65114),F=l(2061),j=l(29651),w=l(1335),D=l(78487),R=l(45177),P=l(86070);const v=a.memo((({tracklistDomRef:e})=>{const{spec:t,logger:l}=(0,D.r)(A.E,{}),r=(0,a.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[l,t]),s=(0,a.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().hitClearFilter())}),[l,t]),i=(0,w.w)().filter((({columnType:e})=>y.gc.includes(e))).map((({columnType:e})=>e));return(0,P.jsxs)("div",{className:R.A.searchBoxContainer,children:[(0,P.jsx)(a.Suspense,{fallback:null,children:(0,P.jsx)(F.S,{placeholder:d.Ru.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:r,onClear:s})}),(0,P.jsx)(j.d,{columns:i})]})}));var E=l(97500),L=l.n(E),M=l(39919),_=l(76092),N=l(2569),O=l(18230),U=l(514),B=l(98550),$=l(18910),V=l(82535);const H="liked-songs-tags";function z(){return(0,V.x)("liked-songs-current-tag-filter",null)}var q=l(4139);const K="q_yjkS1y6URH4Xm7gZfw",Q=e=>({id:e.filter,getName:()=>e.name,ubiId:e.name}),W=(0,a.memo)((({spec:e,nrTracks:t})=>{const{tags:l,currentTag:r,setCurrentTag:s}=function({nrTracks:e}){const t=(0,B.f)(),l=(0,_.jE)(),[r,s]=z(),[i,n]=(0,a.useState)([]),{data:o}=(0,N.I)({queryKey:[H],queryFn:()=>t?.getTracksFilterTags(),staleTime:0,gcTime:864e5,placeholderData:O.rX,refetchOnWindowFocus:!1});(0,a.useLayoutEffect)((()=>{const t=o?.find((e=>e.filter===r));if(!t&&r){if(e>0&&o?.length)return;s(null)}n(o??[])}),[r,s,e,o]);const c=(0,a.useCallback)((({data:{list:e}})=>{e===U.Ir.TRACKS&&l.invalidateQueries({queryKey:[H]})}),[l]);(0,$.l)(U.UV.UPDATE,c);const d=(0,a.useMemo)((()=>i.find((e=>e.filter===r))),[r,i]),u=(0,a.useCallback)((e=>{s(e?.filter??null)}),[s]);return{tags:r||e?i:[],currentTag:d,setCurrentTag:u}}({nrTracks:t}),i=(0,q.s)(),n=(0,a.useCallback)(((t,a,r)=>{let n;if(!t)return n=e.clearButtonFactory().hitClearFilter(),void i.logInteraction(n);const o=l.find((({filter:e})=>e===t));if(!o)return;const c=e.filterChipFactory({identifier:o.name,position:r});a?(n=c.hitClearFilter(),s(null)):(n=c.hitFilter(),o&&s(o)),i.logInteraction(n)}),[i,s,e,l]),o=r?[]:l.map(Q),c=r?[Q(r)]:[];return l.length?(0,P.jsx)(b.S,{children:(0,P.jsx)(M.s,{availableFilters:o,selectedFilters:c,toggleFilterId:()=>{},resetFilterIds:()=>s(null),onFilterClick:n,ariaLabel:d.Ru.get("web-player.liked-songs.liked-songs-filter-tags"),clearBtnAriaLabel:d.Ru.get("web-player.liked-songs.clear-filter"),className:L()(K),applyLightThemeControls:!0})}):null}));var X=l(34504),Y=l(96935),Z=l(15339),J=l(3782),G=l(19019),ee=l(60285),te=l(99153),le=l(72553),ae=l(4355);const re="ivuDaTbfBpBewwr39aDQ",se=a.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:l,spec:r,logger:s,backgroundColor:i,canSort:o,canFilter:c}){const{uri:u,name:g,totalLength:m}=e,p=(0,a.useRef)(null),y=(0,a.useMemo)((()=>r.actionBarFactory()),[r]),f=(0,a.useMemo)((()=>y.shuffleButtonContainerFactory()),[y]),h=(0,a.useMemo)((()=>y.filtersFactory()),[y]),x=m>0,A=m>0,F=o&&c,j=(0,Z.X)(),w=(0,a.useCallback)(((e,t)=>{const l=y.downloadButtonFactory();t===ee.NV.ADD?s.logInteraction(l.hitDownload({itemToDownload:u})):t===ee.NV.REMOVE?s.logInteraction(l.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===ee.NV.NO_PERMISSION&&s.logInteraction(l.hitUiReveal())}),[y,s,u]),D=(0,J.j)(),R=(0,n.NC)(G.cLA);return(0,P.jsxs)(k.E,{backgroundColor:i,children:[(0,P.jsxs)(b.S,{children:[A?(0,P.jsx)(T.D,{onClick:t,isPlaying:l,size:D,uri:u,ariaPauseLabel:d.Ru.get("playlist.a11y.pause",g),ariaPlayLabel:d.Ru.get("playlist.a11y.play",g)}):null,j&&(0,P.jsx)(le.r,{spec:f,children:(0,P.jsx)(Y.Y,{entityName:g,contextUri:u,activationPlacement:"bottomEnd",size:D})}),(0,P.jsx)(C.f,{uri:u,canDownload:x,isFollowing:!0,onFollow:()=>{},size:D,onClick:w,condensed:!0}),F?(0,P.jsx)(le.r,{spec:y,children:(0,P.jsx)(S.u,{property:G.IZ_,renderNewExperience:()=>(0,P.jsx)("div",{className:re,children:(0,P.jsx)(X.d,{sortOptions:[te.nw.TITLE,te.nw.ADDED_AT,te.nw.ARTIST,te.nw.ALBUM,te.nw.DURATION],defaultSortField:te.nw.ADDED_AT,filterPlaceholder:d.Ru.get("playlist.search_in_playlist"),enableViewModeMenu:!0})}),renderOldExperience:()=>(0,P.jsx)(v,{tracklistDomRef:p})})}):(0,P.jsx)("div",{className:re,children:(0,P.jsx)(S.u,{property:ae.mA,renderNewExperience:()=>(0,P.jsx)(I.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),R&&(0,P.jsx)(W,{spec:h,nrTracks:m})]})}));var ie=l(97027),ne=l(82243),oe=l(20507);var ce=l(22348),de=l(87402);var ue=l(67584),ge=l(28521),me=l(80545),pe=l(29800);const ye=({ariaLabel:e,columns:t,columnPersistenceKey:l,renderItem:r,defaultSortField:i})=>{const{playlist:n}=(0,ge.g)(),o=(0,pe.m)(),{canFetchAllTracks:c}=o.getCapabilities(),d=(0,ue.K_)(),u=(0,a.useRef)(null),{isCompactMode:g}=(0,me.a)(),m="custom-order"===i;(e=>{const t=(0,s.wQ)(),l=(0,s.zy)(),r="POP"!==t?new URLSearchParams(l.search).get("uid"):null;(0,a.useLayoutEffect)((()=>{e.current&&r&&e.current.scrollToItem({uid:r})}),[r,e])})(u);const{trackListSortState:p,onSort:y}=((e,t)=>{const{sortState:l,setSortState:r}=(0,ce.kW)(),s=(0,a.useMemo)((()=>(0,de.Ap)(e,l)),[e,l]),i=(0,a.useCallback)((e=>{r((0,de.hK)(e,s,t))}),[t,r,s]);return{trackListSortState:s,onSort:i}})(t,m),f=(0,a.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),x=(0,a.useMemo)((()=>new Set((0,de.g6)(t))),[t]);return(0,P.jsx)(h.a,{columns:t,children:(0,P.jsx)(oe.g0,{ariaLabel:e,hasHeaderRow:!0,columns:t,sortableColumns:x,sortState:p,onSort:y,renderRow:r,resolveItem:f,itemsCache:d,canFetchAllTracks:c,isCompactMode:g,columnPersistenceKey:l,outerRef:u},n.metadata.uri+g)})};var fe=l(78330),he=l(38361),xe=l(92686);const ke=[x.$.INDEX,x.$.TITLE_AND_ARTIST,x.$.ALBUM,x.$.ADDED_AT,x.$.DURATION],be=a.memo((function({usePlayContextItem:e}){const{isCompactMode:t}=(0,me.a)(),l=(({isCompactMode:e=!1})=>{const t=[...ke];return e&&t.splice(t.indexOf(x.$.TITLE_AND_ARTIST),1,x.$.TITLE,x.$.ARTIST),t})({isCompactMode:t}),{playlist:{metadata:r}}=(0,ge.g)(),s=(0,a.useCallback)(((l,a)=>{if(!(0,he.Jy)(l))return(0,P.jsx)(P.Fragment,{});const s=(0,xe.g)(l.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,P.jsx)(ne.W,{index:a,contextUri:r.uri,uri:l.uri,isPlayable:l.isPlayable,duration_ms:l.duration.milliseconds,name:l.name,artists:l.artists,albumOrShow:l.album,isExplicit:l.isExplicit,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:l.isLocal,addedBy:[],dateAdded:l.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:l.is19PlusOnly,type:l.type,imgUrl:s?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:e,allowedDropTypes:[],isDisliked:!1,playlistName:d.Ru.get("sidebar.liked_songs"),isOwnedBySelf:!0,isCompactMode:t,hasAssociatedVideo:l.hasAssociatedVideo},a+l.uri)}),[r.uri,e,t]);return(0,P.jsx)(fe.pZ,{value:"liked-songs-tracklist",children:(0,P.jsx)(ye,{ariaLabel:d.Ru.get("sidebar.liked_songs"),columns:l,renderItem:s,columnPersistenceKey:"liked-songs-tracklist",defaultSortField:te.nw.ADDED_AT})})}));var Ce=l(10867),Se=l(35369),Te=l(71115),Ie=l(98882),Ae=l(86652);const Fe=()=>{const{playlist:{metadata:e},contentsOptions:t}=(0,ge.g)(),l=(0,pe.m)(),{canSort:r,canFilter:s}=l.getCapabilities(),{uri:n,name:c,totalLength:m}=e,p=(0,Se.z)("#5038a0"),{spec:y,logger:h}=(0,D.r)(o.k,{data:{uri:n}}),x=a.useMemo((()=>y.headerFactory()),[y]),k=a.useMemo((()=>y.tracklistFactory()),[y]),{isPlaying:b,togglePlay:C,usePlayContextItem:S,isActive:T}=(0,Ie.P)((0,Ae.A)(e.uri,t),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),I=()=>{const e=(0,Te.$I)({isPlaying:b,isActive:T,spec:y.actionBarFactory().playButtonFactory(),logger:h,uri:n});C({loggingParams:e})},[A]=(0,f.z1)();return(0,P.jsxs)("section",{role:"presentation",className:R.A.playlist,"data-testid":"playlist-page",children:[(0,P.jsx)(u.Q,{children:d.Ru.get("playlist.page-title",c)}),(0,P.jsx)(Ce.x,{metadata:{...e,hasSpotifyTracks:!0},totalItems:A,isPlaying:b,togglePlay:I,backgroundColor:p,specLikedSongs:x}),(0,P.jsx)(se,{metadata:e,onClickTogglePlay:I,isPlaying:b,spec:y,logger:h,backgroundColor:p,canSort:r,canFilter:s}),(0,P.jsx)("div",{className:"contentSpacing",children:m>0?(0,P.jsx)(le.r,{spec:k,children:(0,P.jsx)(be,{usePlayContextItem:S})}):(0,P.jsx)(g.p,{message:d.Ru.get("collection.empty-page.songs-subtitle"),title:d.Ru.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:d.Ru.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,P.jsx)(i.v,{"aria-hidden":"true"})})})]})};var je=l(4945);var we=l(88308),De=l(50551),Re=l(78531);var Pe=l(63758),ve=l(99559),Ee=l(24864),Le=l(66822),Me=l(73049),_e=l(45485);function Ne(e,t,l){const a={uri:e};return(0,Ee.qq)(a,t),(0,Le.Pz)(a,l?.map((e=>(0,Me.HI)(e)??null)).filter(_e.P)),a}const Oe=[x.$.INDEX,x.$.TITLE_AND_ARTIST,x.$.ALBUM,x.$.ADDED_AT,x.$.DURATION],Ue=({data:e,canFilter:t,canSort:l})=>{const{uri:r,name:n,totalLength:c}=e.metadata,k=(0,a.useRef)(null),b=(0,Se.z)("#5038a0"),[C]=z(),{filter:S}=(0,a.useContext)(p.g),{sortState:T,setSortState:I}=(0,a.useContext)(y.cL),{spec:A,logger:F}=(0,D.r)(o.k,{data:{uri:r}}),j=a.useMemo((()=>A.headerFactory()),[A]),w=a.useMemo((()=>A.tracklistFactory()),[A]);(0,a.useEffect)((()=>{null===T.column&&I({column:x.$.ADDED_AT,order:x.H.DESC})}),[T,I]);const v=(0,s.wQ)(),E=(0,s.zy)(),L="POP"!==v?new URLSearchParams(E.search).get("uri"):null,{isPlaying:M,togglePlay:_,usePlayContextItem:N,isActive:O}=(0,Ie.P)(Ne(r,(0,ie.c)(T),[S,C].filter(_e.P)),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),U=()=>{const e=(0,Te.$I)({isPlaying:M,isActive:O,spec:A.actionBarFactory().playButtonFactory(),logger:F,uri:r});_({loggingParams:e})},[B]=(0,f.z1)(),{isCompactMode:$}=(0,me.a)(),V=(({isCompactMode:e=!1})=>{const t=[...Oe];return e&&t.splice(t.indexOf(x.$.TITLE_AND_ARTIST),1,x.$.TITLE,x.$.ARTIST),t})({isCompactMode:$});return(0,P.jsx)(h.a,{columns:V,children:(0,P.jsxs)("section",{role:"presentation",className:R.A.playlist,"data-testid":"playlist-page",children:[(0,P.jsx)(u.Q,{children:d.Ru.get("playlist.page-title",n)}),(0,P.jsx)(Ce.x,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:B,isPlaying:M,togglePlay:U,backgroundColor:b,specLikedSongs:j}),(0,P.jsx)(se,{metadata:e.metadata,onClickTogglePlay:U,isPlaying:M,spec:A,logger:F,backgroundColor:b,canSort:l,canFilter:t}),(0,P.jsx)("div",{className:"contentSpacing",children:c>0?(0,P.jsx)(a.Suspense,{fallback:(0,P.jsx)(m.LoadingPage,{hasError:!1,errorMessage:d.Ru.get("error.request-collection-tracks-failure")}),children:(0,P.jsx)(le.r,{spec:w,children:(0,P.jsx)(je.b,{nrTracks:c,collectionUri:r,scrollToUri:L,usePlayContextItem:N,outerDomRef:k,spec:w,initialItems:e.contents.items,isCompactMode:$,tagFilter:C})})}):(0,P.jsx)(g.p,{message:d.Ru.get("collection.empty-page.songs-subtitle"),title:d.Ru.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:d.Ru.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,P.jsx)(i.v,{"aria-hidden":"true"})})})]})})},Be=a.memo((function({user:e,uri:t}){const{filter:l}=(0,a.useContext)(p.g),{sortState:r}=(0,a.useContext)(y.cL),[s]=z(),i=function(e,t,l){const r=(0,B.f)(),s=(0,_.jE)(),i=(0,we.U0)((()=>["useLikedSongs",e,l]),[e,l]),{data:n}=(0,N.I)({queryKey:i(),queryFn:()=>r.getTracks(l),gcTime:18e5,placeholderData:O.rX,refetchOnWindowFocus:!1}),o=(0,a.useCallback)((()=>{s.invalidateQueries({queryKey:i()})}),[s,i]);(0,$.l)(U.UV.UPDATE,o);const c=(0,De.$R)(t.id);return c&&n?{metadata:{uri:e,name:c.name,images:c.images,totalLength:n?.totalLength,unfilteredTotalLength:n.unfilteredTotalLength,owner:(0,Re.w)(t)},contents:n}:null}(t,e,{offset:0,limit:25,sort:(0,ie.c)(r),filters:[l,s].filter(_e.P)}),n=(0,B.f)().getCapabilities();return i?(0,P.jsx)(Ue,{data:i,canFilter:n.canFilterTracksAndEpisodes&&i.metadata.unfilteredTotalLength>0,canSort:n.canSortTracksAndEpisodes&&i.metadata.unfilteredTotalLength>0}):(0,P.jsx)(m.LoadingPage,{hasError:!1,errorMessage:d.Ru.get("error.not_found.title.playlist"),loadOffline:n.canModifyOffline})})),$e=()=>{const{user:e}=(0,r.d4)(ve.Ht),t=(0,n.NC)(G.IZ_,{loadingValue:!1}),l=(0,c.Ps)("37i9dQZF1F5p3rmiWPIYgZ");if(t)return(0,P.jsx)(Pe.W,{uri:l.toURI(),children:(0,P.jsx)(Fe,{})});if(null===e)return null;const a=(0,c.fH)(e.id).toURI();return(0,P.jsx)(y.sn,{uri:a,children:(0,P.jsx)(p.s,{uri:a,children:(0,P.jsx)(f.S1,{children:(0,P.jsx)(Be,{uri:a,user:e})})})})}}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map